var OC=Object.create;var kl=Object.defineProperty,RC=Object.defineProperties,kC=Object.getOwnPropertyDescriptor,FC=Object.getOwnPropertyDescriptors,PC=Object.getOwnPropertyNames,Ya=Object.getOwnPropertySymbols,VC=Object.getPrototypeOf,Fl=Object.prototype.hasOwnProperty,em=Object.prototype.propertyIsEnumerable;var Jp=(t,e,n)=>e in t?kl(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,x=(t,e)=>{for(var n in e||={})Fl.call(e,n)&&Jp(t,n,e[n]);if(Ya)for(var n of Ya(e))em.call(e,n)&&Jp(t,n,e[n]);return t},V=(t,e)=>RC(t,FC(e));var Pr=(t,e)=>{var n={};for(var r in t)Fl.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&Ya)for(var r of Ya(t))e.indexOf(r)<0&&em.call(t,r)&&(n[r]=t[r]);return n};var pn=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var LC=(t,e,n,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of PC(e))!Fl.call(t,o)&&o!==n&&kl(t,o,{get:()=>e[o],enumerable:!(r=kC(e,o))||r.enumerable});return t};var tm=(t,e,n)=>(n=t!=null?OC(VC(t)):{},LC(e||!t||!t.__esModule?kl(n,"default",{value:t,enumerable:!0}):n,t));var z=(t,e,n)=>new Promise((r,o)=>{var i=c=>{try{a(n.next(c))}catch(u){o(u)}},s=c=>{try{a(n.throw(c))}catch(u){o(u)}},a=c=>c.done?r(c.value):Promise.resolve(c.value).then(i,s);a((n=n.apply(t,e)).next())});var J_=pn((BB,ba)=>{"use strict";function p1(t){if(Array.isArray(t))return t}ba.exports=p1,ba.exports.__esModule=!0,ba.exports.default=ba.exports});var ex=pn((UB,Ca)=>{"use strict";function m1(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,o,i,s,a=[],c=!0,u=!1;try{if(i=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(a.push(r.value),a.length!==e);c=!0);}catch(l){u=!0,o=l}finally{try{if(!c&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw o}}return a}}Ca.exports=m1,Ca.exports.__esModule=!0,Ca.exports.default=Ca.exports});var tx=pn((qB,Da)=>{"use strict";function g1(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}Da.exports=g1,Da.exports.__esModule=!0,Da.exports.default=Da.exports});var rx=pn(($B,Sa)=>{"use strict";var nx=tx();function v1(t,e){if(t){if(typeof t=="string")return nx(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return nx(t,e)}}Sa.exports=v1,Sa.exports.__esModule=!0,Sa.exports.default=Sa.exports});var ox=pn((HB,Ta)=>{"use strict";function y1(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}Ta.exports=y1,Ta.exports.__esModule=!0,Ta.exports.default=Ta.exports});var ix=pn((WB,Ea)=>{"use strict";var _1=J_(),x1=ex(),w1=rx(),b1=ox();function C1(t,e){return _1(t)||x1(t,e)||w1(t,e)||b1()}Ea.exports=C1,Ea.exports.__esModule=!0,Ea.exports.default=Ea.exports});var sx=pn((GB,Ia)=>{"use strict";function D1(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Ia.exports=D1,Ia.exports.__esModule=!0,Ia.exports.default=Ia.exports});var lp=pn((zB,Mr)=>{"use strict";function up(t){"@babel/helpers - typeof";return Mr.exports=up=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Mr.exports.__esModule=!0,Mr.exports.default=Mr.exports,up(t)}Mr.exports=up,Mr.exports.__esModule=!0,Mr.exports.default=Mr.exports});var cx=pn((ZB,Aa)=>{"use strict";var ax=lp().default;function S1(t,e){if(ax(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(ax(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}Aa.exports=S1,Aa.exports.__esModule=!0,Aa.exports.default=Aa.exports});var ux=pn((YB,Ma)=>{"use strict";var T1=lp().default,E1=cx();function I1(t){var e=E1(t,"string");return T1(e)=="symbol"?e:String(e)}Ma.exports=I1,Ma.exports.__esModule=!0,Ma.exports.default=Ma.exports});var dx=pn((QB,Na)=>{"use strict";var A1=ux();function lx(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,A1(r.key),r)}}function M1(t,e,n){return e&&lx(t.prototype,e),n&&lx(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}Na.exports=M1,Na.exports.__esModule=!0,Na.exports.default=Na.exports});var dp=pn((ju,hx)=>{"use strict";(function(t,e){typeof ju=="object"&&typeof hx<"u"?e(ju,ix(),sx(),dx()):typeof define=="function"&&define.amd?define(["exports","@babel/runtime/helpers/slicedToArray","@babel/runtime/helpers/classCallCheck","@babel/runtime/helpers/createClass"],e):(t=typeof globalThis<"u"?globalThis:t||self,e(t.automationEvents={},t._slicedToArray,t._classCallCheck,t._createClass))})(ju,function(t,e,n,r){"use strict";var o=function(S,A,T){return{endTime:A,insertTime:T,type:"exponentialRampToValue",value:S}},i=function(S,A,T){return{endTime:A,insertTime:T,type:"linearRampToValue",value:S}},s=function(S,A){return{startTime:A,type:"setValue",value:S}},a=function(S,A,T){return{duration:T,startTime:A,type:"setValueCurve",values:S}},c=function(S,A,T){var L=T.startTime,O=T.target,U=T.timeConstant;return O+(A-O)*Math.exp((L-S)/U)},u=function(S){return S.type==="exponentialRampToValue"},l=function(S){return S.type==="linearRampToValue"},d=function(S){return u(S)||l(S)},h=function(S){return S.type==="setValue"},f=function(S){return S.type==="setValueCurve"},p=function E(S,A,T,L){var O=S[A];return O===void 0?L:d(O)||h(O)?O.value:f(O)?O.values[O.values.length-1]:c(T,E(S,A-1,O.startTime,L),O)},m=function(S,A,T,L,O){return T===void 0?[L.insertTime,O]:d(T)?[T.endTime,T.value]:h(T)?[T.startTime,T.value]:f(T)?[T.startTime+T.duration,T.values[T.values.length-1]]:[T.startTime,p(S,A-1,T.startTime,O)]},g=function(S){return S.type==="cancelAndHold"},v=function(S){return S.type==="cancelScheduledValues"},D=function(S){return g(S)||v(S)?S.cancelTime:u(S)||l(S)?S.endTime:S.startTime},I=function(S,A,T,L){var O=L.endTime,U=L.value;return T===U?U:0<T&&0<U||T<0&&U<0?T*Math.pow(U/T,(S-A)/(O-A)):0},M=function(S,A,T,L){var O=L.endTime,U=L.value;return T+(S-A)/(O-A)*(U-T)},C=function(S,A){var T=Math.floor(A),L=Math.ceil(A);return T===L?S[T]:(1-(A-T))*S[T]+(1-(L-A))*S[L]},b=function(S,A){var T=A.duration,L=A.startTime,O=A.values,U=(S-L)/T*(O.length-1);return C(O,U)},_=function(S){return S.type==="setTarget"},w=function(E){function S(A){n(this,S),this._automationEvents=[],this._currenTime=0,this._defaultValue=A}return r(S,[{key:E,value:function(){return this._automationEvents[Symbol.iterator]()}},{key:"add",value:function(T){var L=D(T);if(g(T)||v(T)){var O=this._automationEvents.findIndex(function(Y){return v(T)&&f(Y)?Y.startTime+Y.duration>=L:D(Y)>=L}),U=this._automationEvents[O];if(O!==-1&&(this._automationEvents=this._automationEvents.slice(0,O)),g(T)){var P=this._automationEvents[this._automationEvents.length-1];if(U!==void 0&&d(U)){if(P!==void 0&&_(P))throw new Error("The internal list is malformed.");var Te=P===void 0?U.insertTime:f(P)?P.startTime+P.duration:D(P),Le=P===void 0?this._defaultValue:f(P)?P.values[P.values.length-1]:P.value,pt=u(U)?I(L,Te,Le,U):M(L,Te,Le,U),_t=u(U)?o(pt,L,this._currenTime):i(pt,L,this._currenTime);this._automationEvents.push(_t)}if(P!==void 0&&_(P)&&this._automationEvents.push(s(this.getValue(L),L)),P!==void 0&&f(P)&&P.startTime+P.duration>L){var _e=L-P.startTime,ne=(P.values.length-1)/P.duration,hn=Math.max(2,1+Math.ceil(_e*ne)),Jn=_e/(hn-1)*ne,Z=P.values.slice(0,hn);if(Jn<1)for(var Jt=1;Jt<hn;Jt+=1){var br=Jn*Jt%1;Z[Jt]=P.values[Jt-1]*(1-br)+P.values[Jt]*br}this._automationEvents[this._automationEvents.length-1]=a(Z,P.startTime,_e)}}}else{var On=this._automationEvents.findIndex(function(Y){return D(Y)>L}),er=On===-1?this._automationEvents[this._automationEvents.length-1]:this._automationEvents[On-1];if(er!==void 0&&f(er)&&D(er)+er.duration>L)return!1;var q=u(T)?o(T.value,T.endTime,this._currenTime):l(T)?i(T.value,L,this._currenTime):T;if(On===-1)this._automationEvents.push(q);else{if(f(T)&&L+T.duration>D(this._automationEvents[On]))return!1;this._automationEvents.splice(On,0,q)}}return!0}},{key:"flush",value:function(T){var L=this._automationEvents.findIndex(function(P){return D(P)>T});if(L>1){var O=this._automationEvents.slice(L-1),U=O[0];_(U)&&O.unshift(s(p(this._automationEvents,L-2,U.startTime,this._defaultValue),U.startTime)),this._automationEvents=O}}},{key:"getValue",value:function(T){if(this._automationEvents.length===0)return this._defaultValue;var L=this._automationEvents.findIndex(function(Z){return D(Z)>T}),O=this._automationEvents[L],U=(L===-1?this._automationEvents.length:L)-1,P=this._automationEvents[U];if(P!==void 0&&_(P)&&(O===void 0||!d(O)||O.insertTime>T))return c(T,p(this._automationEvents,U-1,P.startTime,this._defaultValue),P);if(P!==void 0&&h(P)&&(O===void 0||!d(O)))return P.value;if(P!==void 0&&f(P)&&(O===void 0||!d(O)||P.startTime+P.duration>T))return T<P.startTime+P.duration?b(T,P):P.values[P.values.length-1];if(P!==void 0&&d(P)&&(O===void 0||!d(O)))return P.value;if(O!==void 0&&u(O)){var Te=m(this._automationEvents,U,P,O,this._defaultValue),Le=e(Te,2),pt=Le[0],_t=Le[1];return I(T,pt,_t,O)}if(O!==void 0&&l(O)){var _e=m(this._automationEvents,U,P,O,this._defaultValue),ne=e(_e,2),hn=ne[0],Jn=ne[1];return M(T,hn,Jn,O)}return this._defaultValue}}]),S}(Symbol.iterator),k=function(S){return{cancelTime:S,type:"cancelAndHold"}},H=function(S){return{cancelTime:S,type:"cancelScheduledValues"}},R=function(S,A){return{endTime:A,type:"exponentialRampToValue",value:S}},N=function(S,A){return{endTime:A,type:"linearRampToValue",value:S}},W=function(S,A,T){return{startTime:A,target:S,timeConstant:T,type:"setTarget"}};t.AutomationEventList=w,t.createCancelAndHoldAutomationEvent=k,t.createCancelScheduledValuesAutomationEvent=H,t.createExponentialRampToValueAutomationEvent=R,t.createLinearRampToValueAutomationEvent=N,t.createSetTargetAutomationEvent=W,t.createSetValueAutomationEvent=s,t.createSetValueCurveAutomationEvent=a})});var nm=null;var Pl=1;function en(t){let e=nm;return nm=t,e}var rm={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function jC(t){if(!(jl(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===Pl)){if(!t.producerMustRecompute(t)&&!Vl(t)){t.dirty=!1,t.lastCleanEpoch=Pl;return}t.producerRecomputeValue(t),t.dirty=!1,t.lastCleanEpoch=Pl}}function om(t){return t&&(t.nextProducerIndex=0),en(t)}function im(t,e){if(en(e),!(!t||t.producerNode===void 0||t.producerIndexOfThis===void 0||t.producerLastReadVersion===void 0)){if(jl(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)Ll(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function Vl(t){Qa(t);for(let e=0;e<t.producerNode.length;e++){let n=t.producerNode[e],r=t.producerLastReadVersion[e];if(r!==n.version||(jC(n),r!==n.version))return!0}return!1}function sm(t){if(Qa(t),jl(t))for(let e=0;e<t.producerNode.length;e++)Ll(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function Ll(t,e){if(BC(t),Qa(t),t.liveConsumerNode.length===1)for(let r=0;r<t.producerNode.length;r++)Ll(t.producerNode[r],t.producerIndexOfThis[r]);let n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){let r=t.liveConsumerIndexOfThis[e],o=t.liveConsumerNode[e];Qa(o),o.producerIndexOfThis[r]=e}}function jl(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function Qa(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}function BC(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}function UC(){throw new Error}var qC=UC;function am(t){qC=t}function K(t){return typeof t=="function"}function Ho(t){let n=t(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var Xa=Ho(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,o)=>`${o+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function lo(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var Je=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let i of n)i.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(K(r))try{r()}catch(i){e=i instanceof Xa?i.errors:[i]}let{_finalizers:o}=this;if(o){this._finalizers=null;for(let i of o)try{cm(i)}catch(s){e=e??[],s instanceof Xa?e=[...e,...s.errors]:e.push(s)}}if(e)throw new Xa(e)}}add(e){var n;if(e&&e!==this)if(this.closed)cm(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&lo(n,e)}remove(e){let{_finalizers:n}=this;n&&lo(n,e),e instanceof t&&e._removeParent(this)}};Je.EMPTY=(()=>{let t=new Je;return t.closed=!0,t})();var Bl=Je.EMPTY;function Ka(t){return t instanceof Je||t&&"closed"in t&&K(t.remove)&&K(t.add)&&K(t.unsubscribe)}function cm(t){K(t)?t():t.unsubscribe()}var Rn={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Wo={setTimeout(t,e,...n){let{delegate:r}=Wo;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=Wo;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function Ja(t){Wo.setTimeout(()=>{let{onUnhandledError:e}=Rn;if(e)e(t);else throw t})}function Ss(){}var um=(()=>Ul("C",void 0,void 0))();function lm(t){return Ul("E",void 0,t)}function dm(t){return Ul("N",t,void 0)}function Ul(t,e,n){return{kind:t,value:e,error:n}}var ho=null;function Go(t){if(Rn.useDeprecatedSynchronousErrorHandling){let e=!ho;if(e&&(ho={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:r}=ho;if(ho=null,n)throw r}}else t()}function hm(t){Rn.useDeprecatedSynchronousErrorHandling&&ho&&(ho.errorThrown=!0,ho.error=t)}var fo=class extends Je{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Ka(e)&&e.add(this)):this.destination=WC}static create(e,n,r){return new zo(e,n,r)}next(e){this.isStopped?$l(dm(e),this):this._next(e)}error(e){this.isStopped?$l(lm(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?$l(um,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},$C=Function.prototype.bind;function ql(t,e){return $C.call(t,e)}var Hl=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){ec(r)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){ec(r)}else ec(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){ec(n)}}},zo=class extends fo{constructor(e,n,r){super();let o;if(K(e)||!e)o={next:e??void 0,error:n??void 0,complete:r??void 0};else{let i;this&&Rn.useDeprecatedNextContext?(i=Object.create(e),i.unsubscribe=()=>this.unsubscribe(),o={next:e.next&&ql(e.next,i),error:e.error&&ql(e.error,i),complete:e.complete&&ql(e.complete,i)}):o=e}this.destination=new Hl(o)}};function ec(t){Rn.useDeprecatedSynchronousErrorHandling?hm(t):Ja(t)}function HC(t){throw t}function $l(t,e){let{onStoppedNotification:n}=Rn;n&&Wo.setTimeout(()=>n(t,e))}var WC={closed:!0,next:Ss,error:HC,complete:Ss};var Zo=(()=>typeof Symbol=="function"&&Symbol.observable||"@@observable")();function tn(t){return t}function Wl(...t){return Gl(t)}function Gl(t){return t.length===0?tn:t.length===1?t[0]:function(n){return t.reduce((r,o)=>o(r),n)}}var Ae=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,o){let i=zC(n)?n:new zo(n,r,o);return Go(()=>{let{operator:s,source:a}=this;i.add(s?s.call(i,a):a?this._subscribe(i):this._trySubscribe(i))}),i}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=fm(r),new r((o,i)=>{let s=new zo({next:a=>{try{n(a)}catch(c){i(c),s.unsubscribe()}},error:i,complete:o});this.subscribe(s)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[Zo](){return this}pipe(...n){return Gl(n)(this)}toPromise(n){return n=fm(n),new n((r,o)=>{let i;this.subscribe(s=>i=s,s=>o(s),()=>r(i))})}}return t.create=e=>new t(e),t})();function fm(t){var e;return(e=t??Rn.Promise)!==null&&e!==void 0?e:Promise}function GC(t){return t&&K(t.next)&&K(t.error)&&K(t.complete)}function zC(t){return t&&t instanceof fo||GC(t)&&Ka(t)}function zl(t){return K(t?.lift)}function ge(t){return e=>{if(zl(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function ve(t,e,n,r,o){return new Zl(t,e,n,r,o)}var Zl=class extends fo{constructor(e,n,r,o,i,s){super(e),this.onFinalize=i,this.shouldUnsubscribe=s,this._next=n?function(a){try{n(a)}catch(c){e.error(c)}}:super._next,this._error=o?function(a){try{o(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function Yo(){return ge((t,e)=>{let n=null;t._refCount++;let r=ve(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount){n=null;return}let o=t._connection,i=n;n=null,o&&(!i||o===i)&&o.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}var Qo=class extends Ae{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,zl(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Je;let n=this.getSubject();e.add(this.source.subscribe(ve(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Je.EMPTY)}return e}refCount(){return Yo()(this)}};var pm=Ho(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var nn=(()=>{class t extends Ae{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new tc(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new pm}next(n){Go(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){Go(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){Go(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:o,observers:i}=this;return r||o?Bl:(this.currentObservers=null,i.push(n),new Je(()=>{this.currentObservers=null,lo(i,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:o,isStopped:i}=this;r?n.error(o):i&&n.complete()}asObservable(){let n=new Ae;return n.source=this,n}}return t.create=(e,n)=>new tc(e,n),t})(),tc=class extends nn{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,e)}error(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&r!==void 0?r:Bl}};var xt=class extends nn{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var Yl={now(){return(Yl.delegate||Date).now()},delegate:void 0};var nc=class extends Je{constructor(e,n){super()}schedule(e,n=0){return this}};var Ts={setInterval(t,e,...n){let{delegate:r}=Ts;return r?.setInterval?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){let{delegate:e}=Ts;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};var rc=class extends nc{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var r;if(this.closed)return this;this.state=e;let o=this.id,i=this.scheduler;return o!=null&&(this.id=this.recycleAsyncId(i,o,n)),this.pending=!0,this.delay=n,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(i,this.id,n),this}requestAsyncId(e,n,r=0){return Ts.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return n;n!=null&&Ts.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,n);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let r=!1,o;try{this.work(e)}catch(i){r=!0,o=i||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),o}unsubscribe(){if(!this.closed){let{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,lo(r,this),e!=null&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}};var Xo=class t{constructor(e,n=t.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}};Xo.now=Yl.now;var oc=class extends Xo{constructor(e,n=Xo.now){super(e,n),this.actions=[],this._active=!1}flush(e){let{actions:n}=this;if(this._active){n.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}};var mm=new oc(rc);var mn=new Ae(t=>t.complete());function gm(t){return t&&K(t.schedule)}function vm(t){return t[t.length-1]}function ym(t){return K(vm(t))?t.pop():void 0}function Vr(t){return gm(vm(t))?t.pop():void 0}function St(t,e,n,r){var o=arguments.length,i=o<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(i=(o<3?s(i):o>3?s(e,n,i):s(e,n))||i);return o>3&&i&&Object.defineProperty(e,n,i),i}function ye(t,e,n,r){function o(i){return i instanceof n?i:new n(function(s){s(i)})}return new(n||(n=Promise))(function(i,s){function a(l){try{u(r.next(l))}catch(d){s(d)}}function c(l){try{u(r.throw(l))}catch(d){s(d)}}function u(l){l.done?i(l.value):o(l.value).then(a,c)}u((r=r.apply(t,e||[])).next())})}function _m(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function po(t){return this instanceof po?(this.v=t,this):new po(t)}function xm(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),o,i=[];return o={},s("next"),s("throw"),s("return"),o[Symbol.asyncIterator]=function(){return this},o;function s(h){r[h]&&(o[h]=function(f){return new Promise(function(p,m){i.push([h,f,p,m])>1||a(h,f)})})}function a(h,f){try{c(r[h](f))}catch(p){d(i[0][3],p)}}function c(h){h.value instanceof po?Promise.resolve(h.value.v).then(u,l):d(i[0][2],h)}function u(h){a("next",h)}function l(h){a("throw",h)}function d(h,f){h(f),i.shift(),i.length&&a(i[0][0],i[0][1])}}function wm(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof _m=="function"?_m(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(i){n[i]=t[i]&&function(s){return new Promise(function(a,c){s=t[i](s),o(a,c,s.done,s.value)})}}function o(i,s,a,c){Promise.resolve(c).then(function(u){i({value:u,done:a})},s)}}var Ko=t=>t&&typeof t.length=="number"&&typeof t!="function";function ic(t){return K(t?.then)}function sc(t){return K(t[Zo])}function ac(t){return Symbol.asyncIterator&&K(t?.[Symbol.asyncIterator])}function cc(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function ZC(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var uc=ZC();function lc(t){return K(t?.[uc])}function dc(t){return xm(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:r,done:o}=yield po(n.read());if(o)return yield po(void 0);yield yield po(r)}}finally{n.releaseLock()}})}function hc(t){return K(t?.getReader)}function ot(t){if(t instanceof Ae)return t;if(t!=null){if(sc(t))return YC(t);if(Ko(t))return QC(t);if(ic(t))return XC(t);if(ac(t))return bm(t);if(lc(t))return KC(t);if(hc(t))return JC(t)}throw cc(t)}function YC(t){return new Ae(e=>{let n=t[Zo]();if(K(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function QC(t){return new Ae(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function XC(t){return new Ae(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,Ja)})}function KC(t){return new Ae(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function bm(t){return new Ae(e=>{eD(t,e).catch(n=>e.error(n))})}function JC(t){return bm(dc(t))}function eD(t,e){var n,r,o,i;return ye(this,void 0,void 0,function*(){try{for(n=wm(t);r=yield n.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){o={error:s}}finally{try{r&&!r.done&&(i=n.return)&&(yield i.call(n))}finally{if(o)throw o.error}}e.complete()})}function jt(t,e,n,r=0,o=!1){let i=e.schedule(function(){n(),o?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(i),!o)return i}function fc(t,e=0){return ge((n,r)=>{n.subscribe(ve(r,o=>jt(r,t,()=>r.next(o),e),()=>jt(r,t,()=>r.complete(),e),o=>jt(r,t,()=>r.error(o),e)))})}function pc(t,e=0){return ge((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function Cm(t,e){return ot(t).pipe(pc(e),fc(e))}function Dm(t,e){return ot(t).pipe(pc(e),fc(e))}function Sm(t,e){return new Ae(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function Tm(t,e){return new Ae(n=>{let r;return jt(n,e,()=>{r=t[uc](),jt(n,e,()=>{let o,i;try{({value:o,done:i}=r.next())}catch(s){n.error(s);return}i?n.complete():n.next(o)},0,!0)}),()=>K(r?.return)&&r.return()})}function mc(t,e){if(!t)throw new Error("Iterable cannot be null");return new Ae(n=>{jt(n,e,()=>{let r=t[Symbol.asyncIterator]();jt(n,e,()=>{r.next().then(o=>{o.done?n.complete():n.next(o.value)})},0,!0)})})}function Em(t,e){return mc(dc(t),e)}function Im(t,e){if(t!=null){if(sc(t))return Cm(t,e);if(Ko(t))return Sm(t,e);if(ic(t))return Dm(t,e);if(ac(t))return mc(t,e);if(lc(t))return Tm(t,e);if(hc(t))return Em(t,e)}throw cc(t)}function et(t,e){return e?Im(t,e):ot(t)}function ae(...t){let e=Vr(t);return et(t,e)}function Jo(t,e){let n=K(t)?t:()=>t,r=o=>o.error(n());return new Ae(e?o=>e.schedule(r,0,o):r)}function Ql(t){return!!t&&(t instanceof Ae||K(t.lift)&&K(t.subscribe))}var Cr=Ho(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function be(t,e){return ge((n,r)=>{let o=0;n.subscribe(ve(r,i=>{r.next(t.call(e,i,o++))}))})}var{isArray:tD}=Array;function nD(t,e){return tD(e)?t(...e):t(e)}function gc(t){return be(e=>nD(t,e))}var{isArray:rD}=Array,{getPrototypeOf:oD,prototype:iD,keys:sD}=Object;function Am(t){if(t.length===1){let e=t[0];if(rD(e))return{args:e,keys:null};if(aD(e)){let n=sD(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}function aD(t){return t&&typeof t=="object"&&oD(t)===iD}function Mm(t,e){return t.reduce((n,r,o)=>(n[r]=e[o],n),{})}function Es(...t){let e=Vr(t),n=ym(t),{args:r,keys:o}=Am(t);if(r.length===0)return et([],e);let i=new Ae(cD(r,e,o?s=>Mm(o,s):tn));return n?i.pipe(gc(n)):i}function cD(t,e,n=tn){return r=>{Nm(e,()=>{let{length:o}=t,i=new Array(o),s=o,a=o;for(let c=0;c<o;c++)Nm(e,()=>{let u=et(t[c],e),l=!1;u.subscribe(ve(r,d=>{i[c]=d,l||(l=!0,a--),a||r.next(n(i.slice()))},()=>{--s||r.complete()}))},r)},r)}}function Nm(t,e,n){t?jt(n,t,e):e()}function Om(t,e,n,r,o,i,s,a){let c=[],u=0,l=0,d=!1,h=()=>{d&&!c.length&&!u&&e.complete()},f=m=>u<r?p(m):c.push(m),p=m=>{i&&e.next(m),u++;let g=!1;ot(n(m,l++)).subscribe(ve(e,v=>{o?.(v),i?f(v):e.next(v)},()=>{g=!0},void 0,()=>{if(g)try{for(u--;c.length&&u<r;){let v=c.shift();s?jt(e,s,()=>p(v)):p(v)}h()}catch(v){e.error(v)}}))};return t.subscribe(ve(e,f,()=>{d=!0,h()})),()=>{a?.()}}function ze(t,e,n=1/0){return K(e)?ze((r,o)=>be((i,s)=>e(r,i,o,s))(ot(t(r,o))),n):(typeof e=="number"&&(n=e),ge((r,o)=>Om(r,o,t,n)))}function ei(t=1/0){return ze(tn,t)}function Rm(){return ei(1)}function ti(...t){return Rm()(et(t,Vr(t)))}function vc(t){return new Ae(e=>{ot(t()).subscribe(e)})}var uD=["addListener","removeListener"],lD=["addEventListener","removeEventListener"],dD=["on","off"];function Is(t,e,n,r){if(K(n)&&(r=n,n=void 0),r)return Is(t,e,n).pipe(gc(r));let[o,i]=pD(t)?lD.map(s=>a=>t[s](e,a,n)):hD(t)?uD.map(km(t,e)):fD(t)?dD.map(km(t,e)):[];if(!o&&Ko(t))return ze(s=>Is(s,e,n))(ot(t));if(!o)throw new TypeError("Invalid event target");return new Ae(s=>{let a=(...c)=>s.next(1<c.length?c:c[0]);return o(a),()=>i(a)})}function km(t,e){return n=>r=>t[n](e,r)}function hD(t){return K(t.addListener)&&K(t.removeListener)}function fD(t){return K(t.on)&&K(t.off)}function pD(t){return K(t.addEventListener)&&K(t.removeEventListener)}function gn(t,e){return ge((n,r)=>{let o=0;n.subscribe(ve(r,i=>t.call(e,i,o++)&&r.next(i)))})}function Lr(t){return ge((e,n)=>{let r=null,o=!1,i;r=e.subscribe(ve(n,void 0,void 0,s=>{i=ot(t(s,Lr(t)(e))),r?(r.unsubscribe(),r=null,i.subscribe(n)):o=!0})),o&&(r.unsubscribe(),r=null,i.subscribe(n))})}function Fm(t,e,n,r,o){return(i,s)=>{let a=n,c=e,u=0;i.subscribe(ve(s,l=>{let d=u++;c=a?t(c,l,d):(a=!0,l),r&&s.next(c)},o&&(()=>{a&&s.next(c),s.complete()})))}}function mo(t,e){return K(e)?ze(t,e,1):ze(t,1)}function Xl(t,e=mm){return ge((n,r)=>{let o=null,i=null,s=null,a=()=>{if(o){o.unsubscribe(),o=null;let u=i;i=null,r.next(u)}};function c(){let u=s+t,l=e.now();if(l<u){o=this.schedule(void 0,u-l),r.add(o);return}a()}n.subscribe(ve(r,u=>{i=u,s=e.now(),o||(o=e.schedule(c,t),r.add(o))},()=>{a(),r.complete()},void 0,()=>{i=o=null}))})}function jr(t){return ge((e,n)=>{let r=!1;e.subscribe(ve(n,o=>{r=!0,n.next(o)},()=>{r||n.next(t),n.complete()}))})}function Dr(t){return t<=0?()=>mn:ge((e,n)=>{let r=0;e.subscribe(ve(n,o=>{++r<=t&&(n.next(o),t<=r&&n.complete())}))})}function Kl(t){return be(()=>t)}function yc(t=mD){return ge((e,n)=>{let r=!1;e.subscribe(ve(n,o=>{r=!0,n.next(o)},()=>r?n.complete():n.error(t())))})}function mD(){return new Cr}function As(t){return ge((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function tr(t,e){let n=arguments.length>=2;return r=>r.pipe(t?gn((o,i)=>t(o,i,r)):tn,Dr(1),n?jr(e):yc(()=>new Cr))}function ni(t){return t<=0?()=>mn:ge((e,n)=>{let r=[];e.subscribe(ve(n,o=>{r.push(o),t<r.length&&r.shift()},()=>{for(let o of r)n.next(o);n.complete()},void 0,()=>{r=null}))})}function Jl(t,e){let n=arguments.length>=2;return r=>r.pipe(t?gn((o,i)=>t(o,i,r)):tn,ni(1),n?jr(e):yc(()=>new Cr))}function ed(t,e){return ge(Fm(t,e,arguments.length>=2,!0))}function td(...t){let e=Vr(t);return ge((n,r)=>{(e?ti(t,n,e):ti(t,n)).subscribe(r)})}function vn(t,e){return ge((n,r)=>{let o=null,i=0,s=!1,a=()=>s&&!o&&r.complete();n.subscribe(ve(r,c=>{o?.unsubscribe();let u=0,l=i++;ot(t(c,l)).subscribe(o=ve(r,d=>r.next(e?e(c,d,l,u++):d),()=>{o=null,a()}))},()=>{s=!0,a()}))})}function nd(t){return ge((e,n)=>{ot(t).subscribe(ve(n,()=>n.complete(),Ss)),!n.closed&&e.subscribe(n)})}function Ze(t,e,n){let r=K(t)||e||n?{next:t,error:e,complete:n}:t;return r?ge((o,i)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;o.subscribe(ve(i,c=>{var u;(u=r.next)===null||u===void 0||u.call(r,c),i.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),i.complete()},c=>{var u;a=!1,(u=r.error)===null||u===void 0||u.call(r,c),i.error(c)},()=>{var c,u;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(u=r.finalize)===null||u===void 0||u.call(r)}))}):tn}function je(t){for(let e in t)if(t[e]===je)return e;throw Error("Could not find renamed property on target object.")}function Tt(t){if(typeof t=="string")return t;if(Array.isArray(t))return"["+t.map(Tt).join(", ")+"]";if(t==null)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;let e=t.toString();if(e==null)return""+e;let n=e.indexOf(`
`);return n===-1?e:e.substring(0,n)}function Pm(t,e){return t==null||t===""?e===null?"":e:e==null||e===""?t:t+" "+e}var gD=je({__forward_ref__:je});function ah(t){return t.__forward_ref__=ah,t.toString=function(){return Tt(this())},t}function _n(t){return xg(t)?t():t}function xg(t){return typeof t=="function"&&t.hasOwnProperty(gD)&&t.__forward_ref__===ah}function wg(t){return t&&!!t.\u0275providers}var vD="https://g.co/ng/security#xss",X=class extends Error{constructor(e,n){super(ch(e,n)),this.code=e}};function ch(t,e){return`${`NG0${Math.abs(t)}`}${e?": "+e:""}`}var yD=je({\u0275cmp:je}),_D=je({\u0275dir:je}),xD=je({\u0275pipe:je}),wD=je({\u0275mod:je}),Ic=je({\u0275fac:je}),Ms=je({__NG_ELEMENT_ID__:je}),Vm=je({__NG_ENV_ID__:je});function bg(t){return typeof t=="string"?t:t==null?"":String(t)}function bD(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():bg(t)}function CD(t,e){let n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new X(-200,`Circular dependency in DI detected for ${t}${n}`)}function uh(t,e){let n=e?` in ${e}`:"";throw new X(-201,!1)}function DD(t,e){t==null&&SD(e,t,null,"!=")}function SD(t,e,n,r){throw new Error(`ASSERTION ERROR: ${t}`+(r==null?"":` [Expected=> ${n} ${r} ${e} <=Actual]`))}function ee(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function Bt(t){return{providers:t.providers||[],imports:t.imports||[]}}function Gc(t){return Lm(t,Dg)||Lm(t,Sg)}function Cg(t){return Gc(t)!==null}function Lm(t,e){return t.hasOwnProperty(e)?t[e]:null}function TD(t){let e=t&&(t[Dg]||t[Sg]);return e||null}function jm(t){return t&&(t.hasOwnProperty(Bm)||t.hasOwnProperty(ED))?t[Bm]:null}var Dg=je({\u0275prov:je}),Bm=je({\u0275inj:je}),Sg=je({ngInjectableDef:je}),ED=je({ngInjectorDef:je}),le=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(le||{}),md;function Tg(){return md}function yn(t){let e=md;return md=t,e}function Eg(t,e,n){let r=Gc(t);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&le.Optional)return null;if(e!==void 0)return e;uh(Tt(t),"Injector")}var rn=globalThis;var ce=class{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=ee({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};var ID={},Os=ID,gd="__NG_DI_FLAG__",Ac="ngTempTokenPath",AD="ngTokenPath",MD=/\n/gm,ND="\u0275",Um="__source",ai;function OD(){return ai}function Br(t){let e=ai;return ai=t,e}function RD(t,e=le.Default){if(ai===void 0)throw new X(-203,!1);return ai===null?Eg(t,void 0,e):ai.get(t,e&le.Optional?null:void 0,e)}function J(t,e=le.Default){return(Tg()||RD)(_n(t),e)}function $(t,e=le.Default){return J(t,zc(e))}function zc(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function vd(t){let e=[];for(let n=0;n<t.length;n++){let r=_n(t[n]);if(Array.isArray(r)){if(r.length===0)throw new X(900,!1);let o,i=le.Default;for(let s=0;s<r.length;s++){let a=r[s],c=kD(a);typeof c=="number"?c===-1?o=a.token:i|=c:o=a}e.push(J(o,i))}else e.push(J(r))}return e}function Ig(t,e){return t[gd]=e,t.prototype[gd]=e,t}function kD(t){return t[gd]}function FD(t,e,n,r){let o=t[Ac];throw e[Um]&&o.unshift(e[Um]),t.message=PD(`
`+t.message,o,n,r),t[AD]=o,t[Ac]=null,t}function PD(t,e,n,r=null){t=t&&t.charAt(0)===`
`&&t.charAt(1)==ND?t.slice(2):t;let o=Tt(e);if(Array.isArray(e))o=e.map(Tt).join(" -> ");else if(typeof e=="object"){let i=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];i.push(s+":"+(typeof a=="string"?JSON.stringify(a):Tt(a)))}o=`{${i.join(", ")}}`}return`${n}${r?"("+r+")":""}[${o}]: ${t.replace(MD,`
  `)}`}function $s(t){return{toString:t}.toString()}var Ag=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(Ag||{}),ir=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(ir||{}),Rs={},Fn=[];function Mg(t,e,n){let r=t.length;for(;;){let o=t.indexOf(e,n);if(o===-1)return o;if(o===0||t.charCodeAt(o-1)<=32){let i=e.length;if(o+i===r||t.charCodeAt(o+i)<=32)return o}n=o+1}}function yd(t,e,n){let r=0;for(;r<n.length;){let o=n[r];if(typeof o=="number"){if(o!==0)break;r++;let i=n[r++],s=n[r++],a=n[r++];t.setAttribute(e,s,a,i)}else{let i=o,s=n[++r];LD(i)?t.setProperty(e,i,s):t.setAttribute(e,i,s),r++}}return r}function VD(t){return t===3||t===4||t===6}function LD(t){return t.charCodeAt(0)===64}function lh(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){let o=e[r];typeof o=="number"?n=o:n===0||(n===-1||n===2?qm(t,n,o,null,e[++r]):qm(t,n,o,null,null))}}return t}function qm(t,e,n,r,o){let i=0,s=t.length;if(e===-1)s=-1;else for(;i<t.length;){let a=t[i++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=i-1;break}}}for(;i<t.length;){let a=t[i];if(typeof a=="number")break;if(a===n){if(r===null){o!==null&&(t[i+1]=o);return}else if(r===t[i+1]){t[i+2]=o;return}}i++,r!==null&&i++,o!==null&&i++}s!==-1&&(t.splice(s,0,e),i=s+1),t.splice(i++,0,n),r!==null&&t.splice(i++,0,r),o!==null&&t.splice(i++,0,o)}var Ng="ng-template";function jD(t,e,n){let r=0,o=!0;for(;r<t.length;){let i=t[r++];if(typeof i=="string"&&o){let s=t[r++];if(n&&i==="class"&&Mg(s.toLowerCase(),e,0)!==-1)return!0}else if(i===1){for(;r<t.length&&typeof(i=t[r++])=="string";)if(i.toLowerCase()===e)return!0;return!1}else typeof i=="number"&&(o=!1)}return!1}function Og(t){return t.type===4&&t.value!==Ng}function BD(t,e,n){let r=t.type===4&&!n?Ng:t.value;return e===r}function UD(t,e,n){let r=4,o=t.attrs||[],i=HD(o),s=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!s&&!kn(r)&&!kn(c))return!1;if(s&&kn(c))continue;s=!1,r=c|r&1;continue}if(!s)if(r&4){if(r=2|r&1,c!==""&&!BD(t,c,n)||c===""&&e.length===1){if(kn(r))return!1;s=!0}}else{let u=r&8?c:e[++a];if(r&8&&t.attrs!==null){if(!jD(t.attrs,u,n)){if(kn(r))return!1;s=!0}continue}let l=r&8?"class":c,d=qD(l,o,Og(t),n);if(d===-1){if(kn(r))return!1;s=!0;continue}if(u!==""){let h;d>i?h="":h=o[d+1].toLowerCase();let f=r&8?h:null;if(f&&Mg(f,u,0)!==-1||r&2&&u!==h){if(kn(r))return!1;s=!0}}}}return kn(r)||s}function kn(t){return(t&1)===0}function qD(t,e,n,r){if(e===null)return-1;let o=0;if(r||!n){let i=!1;for(;o<e.length;){let s=e[o];if(s===t)return o;if(s===3||s===6)i=!0;else if(s===1||s===2){let a=e[++o];for(;typeof a=="string";)a=e[++o];continue}else{if(s===4)break;if(s===0){o+=4;continue}}o+=i?1:2}return-1}else return WD(e,t)}function Rg(t,e,n=!1){for(let r=0;r<e.length;r++)if(UD(t,e[r],n))return!0;return!1}function $D(t){let e=t.attrs;if(e!=null){let n=e.indexOf(5);if(!(n&1))return e[n+1]}return null}function HD(t){for(let e=0;e<t.length;e++){let n=t[e];if(VD(n))return e}return t.length}function WD(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let r=t[n];if(typeof r=="number")return-1;if(r===e)return n;n++}return-1}function GD(t,e){e:for(let n=0;n<e.length;n++){let r=e[n];if(t.length===r.length){for(let o=0;o<t.length;o++)if(t[o]!==r[o])continue e;return!0}}return!1}function $m(t,e){return t?":not("+e.trim()+")":e}function zD(t){let e=t[0],n=1,r=2,o="",i=!1;for(;n<t.length;){let s=t[n];if(typeof s=="string")if(r&2){let a=t[++n];o+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?o+="."+s:r&4&&(o+=" "+s);else o!==""&&!kn(s)&&(e+=$m(i,o),o=""),r=s,i=i||!kn(r);n++}return o!==""&&(e+=$m(i,o)),e}function ZD(t){return t.map(zD).join(",")}function YD(t){let e=[],n=[],r=1,o=2;for(;r<t.length;){let i=t[r];if(typeof i=="string")o===2?i!==""&&e.push(i,t[++r]):o===8&&n.push(i);else{if(!kn(o))break;o=i}r++}return{attrs:e,classes:n}}function st(t){return $s(()=>{let e=Lg(t),n=V(x({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===Ag.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||ir.Emulated,styles:t.styles||Fn,_:null,schemas:t.schemas||null,tView:null,id:""});jg(n);let r=t.dependencies;return n.directiveDefs=Wm(r,!1),n.pipeDefs=Wm(r,!0),n.id=KD(n),n})}function QD(t){return qr(t)||kg(t)}function XD(t){return t!==null}function Ut(t){return $s(()=>({type:t.type,bootstrap:t.bootstrap||Fn,declarations:t.declarations||Fn,imports:t.imports||Fn,exports:t.exports||Fn,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function Hm(t,e){if(t==null)return Rs;let n={};for(let r in t)if(t.hasOwnProperty(r)){let o=t[r],i=o;Array.isArray(o)&&(i=o[1],o=o[0]),n[o]=r,e&&(e[o]=i)}return n}function yi(t){return $s(()=>{let e=Lg(t);return jg(e),e})}function qr(t){return t[yD]||null}function kg(t){return t[_D]||null}function Fg(t){return t[xD]||null}function Pg(t){let e=qr(t)||kg(t)||Fg(t);return e!==null?e.standalone:!1}function Vg(t,e){let n=t[wD]||null;if(!n&&e===!0)throw new Error(`Type ${Tt(t)} does not have '\u0275mod' property.`);return n}function Lg(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:t.inputs||Rs,exportAs:t.exportAs||null,standalone:t.standalone===!0,signals:t.signals===!0,selectors:t.selectors||Fn,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Hm(t.inputs,e),outputs:Hm(t.outputs),debugInfo:null}}function jg(t){t.features?.forEach(e=>e(t))}function Wm(t,e){if(!t)return null;let n=e?Fg:QD;return()=>(typeof t=="function"?t():t).map(r=>n(r)).filter(XD)}function KD(t){let e=0,n=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(let o of n)e=Math.imul(31,e)+o.charCodeAt(0)<<0;return e+=2147483647+1,"c"+e}var Tr=0,fe=1,ie=2,it=3,Pn=4,an=5,ks=6,Fs=7,Vn=8,ui=9,$r=10,ht=11,Ps=12,Gm=13,_i=14,Ln=15,Hs=16,ri=17,or=18,Zc=19,Bg=20,Ur=21,rd=22,yo=23,sr=25,Ug=1;var _o=7,Mc=8,li=9,on=10,di=function(t){return t[t.None=0]="None",t[t.HasTransplantedViews=2]="HasTransplantedViews",t[t.HasChildViewsToRefresh=4]="HasChildViewsToRefresh",t}(di||{});function go(t){return Array.isArray(t)&&typeof t[Ug]=="object"}function jn(t){return Array.isArray(t)&&t[Ug]===!0}function dh(t){return(t.flags&4)!==0}function Yc(t){return t.componentOffset>-1}function Qc(t){return(t.flags&1)===1}function Ws(t){return!!t.template}function JD(t){return(t[ie]&512)!==0}function hi(t,e){let n=t.hasOwnProperty(Ic);return n?t[Ic]:null}var _d=class{constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function Gs(){return qg}function qg(t){return t.type.prototype.ngOnChanges&&(t.setInput=tS),eS}Gs.ngInherit=!0;function eS(){let t=Hg(this),e=t?.current;if(e){let n=t.previous;if(n===Rs)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function tS(t,e,n,r){let o=this.declaredInputs[n],i=Hg(t)||nS(t,{previous:Rs,current:null}),s=i.current||(i.current={}),a=i.previous,c=a[o];s[o]=new _d(c&&c.currentValue,e,a===Rs),t[r]=e}var $g="__ngSimpleChanges__";function Hg(t){return t[$g]||null}function nS(t,e){return t[$g]=e}var zm=null;var nr=function(t,e,n){zm?.(t,e,n)},rS="svg",oS="math",iS=!1;function sS(){return iS}function ar(t){for(;Array.isArray(t);)t=t[Tr];return t}function Wg(t,e){return ar(e[t])}function Bn(t,e){return ar(e[t.index])}function Gg(t,e){return t.data[e]}function Do(t,e){let n=e[t];return go(n)?n:n[Tr]}function aS(t){return(t[ie]&4)===4}function hh(t){return(t[ie]&128)===128}function cS(t){return jn(t[it])}function fi(t,e){return e==null?null:t[e]}function zg(t){t[ri]=0}function uS(t){t[ie]&1024||(t[ie]|=1024,hh(t)&&Vs(t))}function lS(t,e){for(;t>0;)e=e[_i],t--;return e}function Zg(t){return t[ie]&9216||t[yo]?.dirty}function xd(t){Zg(t)?Vs(t):t[ie]&64&&(sS()?(t[ie]|=1024,Vs(t)):t[$r].changeDetectionScheduler?.notify())}function Vs(t){t[$r].changeDetectionScheduler?.notify();let e=t[it];for(;e!==null&&!(jn(e)&&e[ie]&di.HasChildViewsToRefresh||go(e)&&e[ie]&8192);){if(jn(e))e[ie]|=di.HasChildViewsToRefresh;else if(e[ie]|=8192,!hh(e))break;e=e[it]}}function Yg(t,e){if((t[ie]&256)===256)throw new X(911,!1);t[Ur]===null&&(t[Ur]=[]),t[Ur].push(e)}function dS(t,e){if(t[Ur]===null)return;let n=t[Ur].indexOf(e);n!==-1&&t[Ur].splice(n,1)}var pe={lFrame:nv(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function hS(){return pe.lFrame.elementDepthCount}function fS(){pe.lFrame.elementDepthCount++}function pS(){pe.lFrame.elementDepthCount--}function Qg(){return pe.bindingsEnabled}function Xg(){return pe.skipHydrationRootTNode!==null}function mS(t){return pe.skipHydrationRootTNode===t}function gS(){pe.skipHydrationRootTNode=null}function Ue(){return pe.lFrame.lView}function qt(){return pe.lFrame.tView}function xe(t){return pe.lFrame.contextLView=t,t[Vn]}function we(t){return pe.lFrame.contextLView=null,t}function Un(){let t=Kg();for(;t!==null&&t.type===64;)t=t.parent;return t}function Kg(){return pe.lFrame.currentTNode}function vS(){let t=pe.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function So(t,e){let n=pe.lFrame;n.currentTNode=t,n.isParent=e}function fh(){return pe.lFrame.isParent}function ph(){pe.lFrame.isParent=!1}function yS(t){return pe.lFrame.bindingIndex=t}function mh(){return pe.lFrame.bindingIndex++}function _S(t){let e=pe.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function xS(){return pe.lFrame.inI18n}function wS(t,e){let n=pe.lFrame;n.bindingIndex=n.bindingRootIndex=t,wd(e)}function bS(){return pe.lFrame.currentDirectiveIndex}function wd(t){pe.lFrame.currentDirectiveIndex=t}function CS(t){let e=pe.lFrame.currentDirectiveIndex;return e===-1?null:t[e]}function Jg(){return pe.lFrame.currentQueryIndex}function gh(t){pe.lFrame.currentQueryIndex=t}function DS(t){let e=t[fe];return e.type===2?e.declTNode:e.type===1?t[an]:null}function ev(t,e,n){if(n&le.SkipSelf){let o=e,i=t;for(;o=o.parent,o===null&&!(n&le.Host);)if(o=DS(i),o===null||(i=i[_i],o.type&10))break;if(o===null)return!1;e=o,t=i}let r=pe.lFrame=tv();return r.currentTNode=e,r.lView=t,!0}function vh(t){let e=tv(),n=t[fe];pe.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function tv(){let t=pe.lFrame,e=t===null?null:t.child;return e===null?nv(t):e}function nv(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function rv(){let t=pe.lFrame;return pe.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var ov=rv;function yh(){let t=rv();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function SS(t){return(pe.lFrame.contextLView=lS(t,pe.lFrame.contextLView))[Vn]}function xi(){return pe.lFrame.selectedIndex}function xo(t){pe.lFrame.selectedIndex=t}function iv(){let t=pe.lFrame;return Gg(t.tView,t.selectedIndex)}function TS(){return pe.lFrame.currentNamespace}var sv=!0;function Xc(){return sv}function Kc(t){sv=t}function ES(t,e,n){let{ngOnChanges:r,ngOnInit:o,ngDoCheck:i}=e.type.prototype;if(r){let s=qg(e);(n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s)}o&&(n.preOrderHooks??=[]).push(0-t,o),i&&((n.preOrderHooks??=[]).push(t,i),(n.preOrderCheckHooks??=[]).push(t,i))}function Jc(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){let i=t.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:u,ngOnDestroy:l}=i;s&&(t.contentHooks??=[]).push(-n,s),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),c&&(t.viewHooks??=[]).push(-n,c),u&&((t.viewHooks??=[]).push(n,u),(t.viewCheckHooks??=[]).push(n,u)),l!=null&&(t.destroyHooks??=[]).push(n,l)}}function bc(t,e,n){av(t,e,3,n)}function Cc(t,e,n,r){(t[ie]&3)===n&&av(t,e,n,r)}function od(t,e){let n=t[ie];(n&3)===e&&(n&=16383,n+=1,t[ie]=n)}function av(t,e,n,r){let o=r!==void 0?t[ri]&65535:0,i=r??-1,s=e.length-1,a=0;for(let c=o;c<s;c++)if(typeof e[c+1]=="number"){if(a=e[c],r!=null&&a>=r)break}else e[c]<0&&(t[ri]+=65536),(a<i||i==-1)&&(IS(t,n,e,c),t[ri]=(t[ri]&4294901760)+c+2),c++}function Zm(t,e){nr(4,t,e);let n=en(null);try{e.call(t)}finally{en(n),nr(5,t,e)}}function IS(t,e,n,r){let o=n[r]<0,i=n[r+1],s=o?-n[r]:n[r],a=t[s];o?t[ie]>>14<t[ri]>>16&&(t[ie]&3)===e&&(t[ie]+=16384,Zm(a,i)):Zm(a,i)}var ci=-1,Ls=class{constructor(e,n,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}};function AS(t){return t instanceof Ls}function MS(t){return(t.flags&8)!==0}function NS(t){return(t.flags&16)!==0}function cv(t){return t!==ci}function Nc(t){let e=t&32767;return t&32767}function OS(t){return t>>16}function Oc(t,e){let n=OS(t),r=e;for(;n>0;)r=r[_i],n--;return r}var bd=!0;function Ym(t){let e=bd;return bd=t,e}var RS=256,uv=RS-1,lv=5,kS=0,rr={};function FS(t,e,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(Ms)&&(r=n[Ms]),r==null&&(r=n[Ms]=kS++);let o=r&uv,i=1<<o;e.data[t+(o>>lv)]|=i}function dv(t,e){let n=hv(t,e);if(n!==-1)return n;let r=e[fe];r.firstCreatePass&&(t.injectorIndex=e.length,id(r.data,t),id(e,null),id(r.blueprint,null));let o=_h(t,e),i=t.injectorIndex;if(cv(o)){let s=Nc(o),a=Oc(o,e),c=a[fe].data;for(let u=0;u<8;u++)e[i+u]=a[s+u]|c[s+u]}return e[i+8]=o,i}function id(t,e){t.push(0,0,0,0,0,0,0,0,e)}function hv(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function _h(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,r=null,o=e;for(;o!==null;){if(r=vv(o),r===null)return ci;if(n++,o=o[_i],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return ci}function PS(t,e,n){FS(t,e,n)}function fv(t,e,n){if(n&le.Optional||t!==void 0)return t;uh(e,"NodeInjector")}function pv(t,e,n,r){if(n&le.Optional&&r===void 0&&(r=null),!(n&(le.Self|le.Host))){let o=t[ui],i=yn(void 0);try{return o?o.get(e,r,n&le.Optional):Eg(e,r,n&le.Optional)}finally{yn(i)}}return fv(r,e,n)}function mv(t,e,n,r=le.Default,o){if(t!==null){if(e[ie]&2048&&!(r&le.Self)){let s=BS(t,e,n,r,rr);if(s!==rr)return s}let i=gv(t,e,n,r,rr);if(i!==rr)return i}return pv(e,n,r,o)}function gv(t,e,n,r,o){let i=LS(n);if(typeof i=="function"){if(!ev(e,t,r))return r&le.Host?fv(o,n,r):pv(e,n,r,o);try{let s;if(s=i(r),s==null&&!(r&le.Optional))uh(n);else return s}finally{ov()}}else if(typeof i=="number"){let s=null,a=hv(t,e),c=ci,u=r&le.Host?e[Ln][an]:null;for((a===-1||r&le.SkipSelf)&&(c=a===-1?_h(t,e):e[a+8],c===ci||!Xm(r,!1)?a=-1:(s=e[fe],a=Nc(c),e=Oc(c,e)));a!==-1;){let l=e[fe];if(Qm(i,a,l.data)){let d=VS(a,e,n,s,r,u);if(d!==rr)return d}c=e[a+8],c!==ci&&Xm(r,e[fe].data[a+8]===u)&&Qm(i,a,e)?(s=l,a=Nc(c),e=Oc(c,e)):a=-1}}return o}function VS(t,e,n,r,o,i){let s=e[fe],a=s.data[t+8],c=r==null?Yc(a)&&bd:r!=s&&(a.type&3)!==0,u=o&le.Host&&i===a,l=Dc(a,s,n,c,u);return l!==null?pi(e,s,l,a):rr}function Dc(t,e,n,r,o){let i=t.providerIndexes,s=e.data,a=i&1048575,c=t.directiveStart,u=t.directiveEnd,l=i>>20,d=r?a:a+l,h=o?a+l:u;for(let f=d;f<h;f++){let p=s[f];if(f<c&&n===p||f>=c&&p.type===n)return f}if(o){let f=s[c];if(f&&Ws(f)&&f.type===n)return c}return null}function pi(t,e,n,r){let o=t[n],i=e.data;if(AS(o)){let s=o;s.resolving&&CD(bD(i[n]));let a=Ym(s.canSeeViewProviders);s.resolving=!0;let c,u=s.injectImpl?yn(s.injectImpl):null,l=ev(t,r,le.Default);try{o=t[n]=s.factory(void 0,i,t,r),e.firstCreatePass&&n>=r.directiveStart&&ES(n,i[n],e)}finally{u!==null&&yn(u),Ym(a),s.resolving=!1,ov()}}return o}function LS(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(Ms)?t[Ms]:void 0;return typeof e=="number"?e>=0?e&uv:jS:e}function Qm(t,e,n){let r=1<<t;return!!(n[e+(t>>lv)]&r)}function Xm(t,e){return!(t&le.Self)&&!(t&le.Host&&e)}var vo=class{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return mv(this._tNode,this._lView,e,zc(r),n)}};function jS(){return new vo(Un(),Ue())}function eu(t){return $s(()=>{let e=t.prototype.constructor,n=e[Ic]||Cd(e),r=Object.prototype,o=Object.getPrototypeOf(t.prototype).constructor;for(;o&&o!==r;){let i=o[Ic]||Cd(o);if(i&&i!==n)return i;o=Object.getPrototypeOf(o)}return i=>new i})}function Cd(t){return xg(t)?()=>{let e=Cd(_n(t));return e&&e()}:hi(t)}function BS(t,e,n,r,o){let i=t,s=e;for(;i!==null&&s!==null&&s[ie]&2048&&!(s[ie]&512);){let a=gv(i,s,n,r|le.Self,rr);if(a!==rr)return a;let c=i.parent;if(!c){let u=s[Bg];if(u){let l=u.get(n,rr,r);if(l!==rr)return l}c=vv(s),s=s[_i]}i=c}return o}function vv(t){let e=t[fe],n=e.type;return n===2?e.declTNode:n===1?t[an]:null}var _c="__parameters__";function US(t){return function(...n){if(t){let r=t(...n);for(let o in r)this[o]=r[o]}}}function yv(t,e,n){return $s(()=>{let r=US(e);function o(...i){if(this instanceof o)return r.apply(this,i),this;let s=new o(...i);return a.annotation=s,a;function a(c,u,l){let d=c.hasOwnProperty(_c)?c[_c]:Object.defineProperty(c,_c,{value:[]})[_c];for(;d.length<=l;)d.push(null);return(d[l]=d[l]||[]).push(s),c}}return n&&(o.prototype=Object.create(n.prototype)),o.prototype.ngMetadataName=t,o.annotationCls=o,o})}function qS(t){let e=rn.ng;if(e&&e.\u0275compilerFacade)return e.\u0275compilerFacade;throw new Error("JIT compiler unavailable")}function $S(t){return typeof t=="function"}function HS(t,e,n){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++){let o=t[r],i=e[r];if(n&&(o=n(o),i=n(i)),i!==o)return!1}return!0}function WS(t){return t.flat(Number.POSITIVE_INFINITY)}function xh(t,e){t.forEach(n=>Array.isArray(n)?xh(n,e):e(n))}function _v(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function Rc(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function xv(t,e){let n=[];for(let r=0;r<t;r++)n.push(e);return n}function GS(t,e,n,r){let o=t.length;if(o==e)t.push(n,r);else if(o===1)t.push(r,t[0]),t[0]=n;else{for(o--,t.push(t[o-1],t[o]);o>e;){let i=o-2;t[o]=t[i],o--}t[e]=n,t[e+1]=r}}function zS(t,e,n){let r=zs(t,e);return r>=0?t[r|1]=n:(r=~r,GS(t,r,e,n)),r}function sd(t,e){let n=zs(t,e);if(n>=0)return t[n|1]}function zs(t,e){return ZS(t,e,1)}function ZS(t,e,n){let r=0,o=t.length>>n;for(;o!==r;){let i=r+(o-r>>1),s=t[i<<n];if(e===s)return i<<n;s>e?o=i:r=i+1}return~(o<<n)}var tu=Ig(yv("Optional"),8);var wh=Ig(yv("SkipSelf"),4);function YS(t){let e=[],n=new Map;function r(o){let i=n.get(o);if(!i){let s=t(o);n.set(o,i=s.then(JS))}return i}return kc.forEach((o,i)=>{let s=[];o.templateUrl&&s.push(r(o.templateUrl).then(u=>{o.template=u}));let a=typeof o.styles=="string"?[o.styles]:o.styles||[];if(o.styles=a,o.styleUrl&&o.styleUrls?.length)throw new Error("@Component cannot define both `styleUrl` and `styleUrls`. Use `styleUrl` if the component has one stylesheet, or `styleUrls` if it has multiple");if(o.styleUrls?.length){let u=o.styles.length,l=o.styleUrls;o.styleUrls.forEach((d,h)=>{a.push(""),s.push(r(d).then(f=>{a[u+h]=f,l.splice(l.indexOf(d),1),l.length==0&&(o.styleUrls=void 0)}))})}else o.styleUrl&&s.push(r(o.styleUrl).then(u=>{a.push(u),o.styleUrl=void 0}));let c=Promise.all(s).then(()=>eT(i));e.push(c)}),XS(),Promise.all(e).then(()=>{})}var kc=new Map,QS=new Set;function XS(){let t=kc;return kc=new Map,t}function KS(){return kc.size===0}function JS(t){return typeof t=="string"?t:t.text()}function eT(t){QS.delete(t)}var mi=new ce("ENVIRONMENT_INITIALIZER"),wv=new ce("INJECTOR",-1),bv=new ce("INJECTOR_DEF_TYPES"),Fc=class{get(e,n=Os){if(n===Os){let r=new Error(`NullInjectorError: No provider for ${Tt(e)}!`);throw r.name="NullInjectorError",r}return n}};function tT(...t){return{\u0275providers:Cv(!0,t),\u0275fromNgModule:!0}}function Cv(t,...e){let n=[],r=new Set,o,i=s=>{n.push(s)};return xh(e,s=>{let a=s;Dd(a,i,[],r)&&(o||=[],o.push(a))}),o!==void 0&&Dv(o,i),n}function Dv(t,e){for(let n=0;n<t.length;n++){let{ngModule:r,providers:o}=t[n];bh(o,i=>{e(i,r)})}}function Dd(t,e,n,r){if(t=_n(t),!t)return!1;let o=null,i=jm(t),s=!i&&qr(t);if(!i&&!s){let c=t.ngModule;if(i=jm(c),i)o=c;else return!1}else{if(s&&!s.standalone)return!1;o=t}let a=r.has(o);if(s){if(a)return!1;if(r.add(o),s.dependencies){let c=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let u of c)Dd(u,e,n,r)}}else if(i){if(i.imports!=null&&!a){r.add(o);let u;try{xh(i.imports,l=>{Dd(l,e,n,r)&&(u||=[],u.push(l))})}finally{}u!==void 0&&Dv(u,e)}if(!a){let u=hi(o)||(()=>new o);e({provide:o,useFactory:u,deps:Fn},o),e({provide:bv,useValue:o,multi:!0},o),e({provide:mi,useValue:()=>J(o),multi:!0},o)}let c=i.providers;if(c!=null&&!a){let u=t;bh(c,l=>{e(l,u)})}}else return!1;return o!==t&&t.providers!==void 0}function bh(t,e){for(let n of t)wg(n)&&(n=n.\u0275providers),Array.isArray(n)?bh(n,e):e(n)}var nT=je({provide:String,useValue:je});function Sv(t){return t!==null&&typeof t=="object"&&nT in t}function rT(t){return!!(t&&t.useExisting)}function oT(t){return!!(t&&t.useFactory)}function Sd(t){return typeof t=="function"}var nu=new ce("Set Injector scope."),Sc={},iT={},ad;function Ch(){return ad===void 0&&(ad=new Fc),ad}var sn=class{},js=class extends sn{get destroyed(){return this._destroyed}constructor(e,n,r,o){super(),this.parent=n,this.source=r,this.scopes=o,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Ed(e,s=>this.processProvider(s)),this.records.set(wv,oi(void 0,this)),o.has("environment")&&this.records.set(sn,oi(void 0,this));let i=this.records.get(nu);i!=null&&typeof i.value=="string"&&this.scopes.add(i.value),this.injectorDefTypes=new Set(this.get(bv,Fn,le.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(let n of this._ngOnDestroyHooks)n.ngOnDestroy();let e=this._onDestroyHooks;this._onDestroyHooks=[];for(let n of e)n()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let n=Br(this),r=yn(void 0),o;try{return e()}finally{Br(n),yn(r)}}get(e,n=Os,r=le.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(Vm))return e[Vm](this);r=zc(r);let o,i=Br(this),s=yn(void 0);try{if(!(r&le.SkipSelf)){let c=this.records.get(e);if(c===void 0){let u=dT(e)&&Gc(e);u&&this.injectableDefInScope(u)?c=oi(Td(e),Sc):c=null,this.records.set(e,c)}if(c!=null)return this.hydrate(e,c)}let a=r&le.Self?Ch():this.parent;return n=r&le.Optional&&n===Os?null:n,a.get(e,n)}catch(a){if(a.name==="NullInjectorError"){if((a[Ac]=a[Ac]||[]).unshift(Tt(e)),i)throw a;return FD(a,e,"R3InjectorError",this.source)}else throw a}finally{yn(s),Br(i)}}resolveInjectorInitializers(){let e=Br(this),n=yn(void 0),r;try{let o=this.get(mi,Fn,le.Self);for(let i of o)i()}finally{Br(e),yn(n)}}toString(){let e=[],n=this.records;for(let r of n.keys())e.push(Tt(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new X(205,!1)}processProvider(e){e=_n(e);let n=Sd(e)?e:_n(e&&e.provide),r=aT(e);if(!Sd(e)&&e.multi===!0){let o=this.records.get(n);o||(o=oi(void 0,Sc,!0),o.factory=()=>vd(o.multi),this.records.set(n,o)),n=e,o.multi.push(e)}else{let o=this.records.get(n)}this.records.set(n,r)}hydrate(e,n){return n.value===Sc&&(n.value=iT,n.value=n.factory()),typeof n.value=="object"&&n.value&&lT(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}injectableDefInScope(e){if(!e.providedIn)return!1;let n=_n(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function Td(t){let e=Gc(t),n=e!==null?e.factory:hi(t);if(n!==null)return n;if(t instanceof ce)throw new X(204,!1);if(t instanceof Function)return sT(t);throw new X(204,!1)}function sT(t){let e=t.length;if(e>0){let r=xv(e,"?");throw new X(204,!1)}let n=TD(t);return n!==null?()=>n.factory(t):()=>new t}function aT(t){if(Sv(t))return oi(void 0,t.useValue);{let e=cT(t);return oi(e,Sc)}}function cT(t,e,n){let r;if(Sd(t)){let o=_n(t);return hi(o)||Td(o)}else if(Sv(t))r=()=>_n(t.useValue);else if(oT(t))r=()=>t.useFactory(...vd(t.deps||[]));else if(rT(t))r=()=>J(_n(t.useExisting));else{let o=_n(t&&(t.useClass||t.provide));if(uT(t))r=()=>new o(...vd(t.deps));else return hi(o)||Td(o)}return r}function oi(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function uT(t){return!!t.deps}function lT(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function dT(t){return typeof t=="function"||typeof t=="object"&&t instanceof ce}function Ed(t,e){for(let n of t)Array.isArray(n)?Ed(n,e):n&&wg(n)?Ed(n.\u0275providers,e):e(n)}function Gr(t,e){t instanceof js&&t.assertNotDestroyed();let n,r=Br(t),o=yn(void 0);try{return e()}finally{Br(r),yn(o)}}function hT(t){if(!Tg()&&!OD())throw new X(-203,!1)}function Km(t,e=null,n=null,r){let o=Tv(t,e,n,r);return o.resolveInjectorInitializers(),o}function Tv(t,e=null,n=null,r,o=new Set){let i=[n||Fn,tT(t)];return r=r||(typeof t=="object"?void 0:Tt(t)),new js(i,e||Ch(),r||null,o)}var xn=(()=>{let e=class e{static create(r,o){if(Array.isArray(r))return Km({name:""},o,r,"");{let i=r.name??"";return Km({name:i},r.parent,r.providers,i)}}};e.THROW_IF_NOT_FOUND=Os,e.NULL=new Fc,e.\u0275prov=ee({token:e,providedIn:"any",factory:()=>J(wv)}),e.__NG_ELEMENT_ID__=-1;let t=e;return t})();var Id;function Ev(t){Id=t}function fT(){if(Id!==void 0)return Id;if(typeof document<"u")return document;throw new X(210,!1)}var ru=new ce("AppId",{providedIn:"root",factory:()=>pT}),pT="ng",Dh=new ce("Platform Initializer"),To=new ce("Platform ID",{providedIn:"platform",factory:()=>"unknown"});var Sh=new ce("CSP nonce",{providedIn:"root",factory:()=>fT().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});function Iv(t){return t instanceof Function?t():t}function mT(t){return(t??$(xn)).get(To)==="browser"}function Av(t){return(t.flags&128)===128}var Sr=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(Sr||{}),gT=/^>|^->|<!--|-->|--!>|<!-$/g,vT=/(<|>)/g,yT="\u200B$1\u200B";function _T(t){return t.replace(gT,e=>e.replace(vT,yT))}var Mv=new Map,xT=0;function wT(){return xT++}function bT(t){Mv.set(t[Zc],t)}function CT(t){Mv.delete(t[Zc])}var Jm="__ngContext__";function Hr(t,e){go(e)?(t[Jm]=e[Zc],bT(e)):t[Jm]=e}var DT;function Th(t,e){return DT(t,e)}function Eh(t){let e=t[it];return jn(e)?e[it]:e}function Nv(t){return Rv(t[Ps])}function Ov(t){return Rv(t[Pn])}function Rv(t){for(;t!==null&&!jn(t);)t=t[Pn];return t}function ii(t,e,n,r,o){if(r!=null){let i,s=!1;jn(r)?i=r:go(r)&&(s=!0,r=r[Tr]);let a=ar(r);t===0&&n!==null?o==null?Lv(e,n,a):Pc(e,n,a,o||null,!0):t===1&&n!==null?Pc(e,n,a,o||null,!0):t===2?UT(e,a,s):t===3&&e.destroyNode(a),i!=null&&$T(e,t,i,n,o)}}function ST(t,e){return t.createText(e)}function TT(t,e,n){t.setValue(e,n)}function ET(t,e){return t.createComment(_T(e))}function kv(t,e,n){return t.createElement(e,n)}function IT(t,e){let n=e[ht];Zs(t,e,n,2,null,null),e[Tr]=null,e[an]=null}function AT(t,e,n,r,o,i){r[Tr]=o,r[an]=e,Zs(t,r,n,1,o,i)}function MT(t,e){Zs(t,e,e[ht],2,null,null)}function NT(t){let e=t[Ps];if(!e)return cd(t[fe],t);for(;e;){let n=null;if(go(e))n=e[Ps];else{let r=e[on];r&&(n=r)}if(!n){for(;e&&!e[Pn]&&e!==t;)go(e)&&cd(e[fe],e),e=e[it];e===null&&(e=t),go(e)&&cd(e[fe],e),n=e&&e[Pn]}e=n}}function OT(t,e,n,r){let o=on+r,i=n.length;r>0&&(n[o-1][Pn]=e),r<i-on?(e[Pn]=n[o],_v(n,on+r,e)):(n.push(e),e[Pn]=null),e[it]=n;let s=e[Hs];s!==null&&n!==s&&RT(s,e);let a=e[or];a!==null&&a.insertView(t),xd(e),e[ie]|=128}function RT(t,e){let n=t[li],o=e[it][it][Ln];e[Ln]!==o&&(t[ie]|=di.HasTransplantedViews),n===null?t[li]=[e]:n.push(e)}function Fv(t,e){let n=t[li],r=n.indexOf(e),o=e[it];n.splice(r,1)}function Ad(t,e){if(t.length<=on)return;let n=on+e,r=t[n];if(r){let o=r[Hs];o!==null&&o!==t&&Fv(o,r),e>0&&(t[n-1][Pn]=r[Pn]);let i=Rc(t,on+e);IT(r[fe],r);let s=i[or];s!==null&&s.detachView(i[fe]),r[it]=null,r[Pn]=null,r[ie]&=-129}return r}function Pv(t,e){if(!(e[ie]&256)){let n=e[ht];n.destroyNode&&Zs(t,e,n,3,null,null),NT(e)}}function cd(t,e){if(!(e[ie]&256)){e[ie]&=-129,e[ie]|=256,e[yo]&&sm(e[yo]),FT(t,e),kT(t,e),e[fe].type===1&&e[ht].destroy();let n=e[Hs];if(n!==null&&jn(e[it])){n!==e[it]&&Fv(n,e);let r=e[or];r!==null&&r.detachView(t)}CT(e)}}function kT(t,e){let n=t.cleanup,r=e[Fs];if(n!==null)for(let i=0;i<n.length-1;i+=2)if(typeof n[i]=="string"){let s=n[i+3];s>=0?r[s]():r[-s].unsubscribe(),i+=2}else{let s=r[n[i+1]];n[i].call(s)}r!==null&&(e[Fs]=null);let o=e[Ur];if(o!==null){e[Ur]=null;for(let i=0;i<o.length;i++){let s=o[i];s()}}}function FT(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let o=e[n[r]];if(!(o instanceof Ls)){let i=n[r+1];if(Array.isArray(i))for(let s=0;s<i.length;s+=2){let a=o[i[s]],c=i[s+1];nr(4,a,c);try{c.call(a)}finally{nr(5,a,c)}}else{nr(4,o,i);try{i.call(o)}finally{nr(5,o,i)}}}}}function Vv(t,e,n){return PT(t,e.parent,n)}function PT(t,e,n){let r=e;for(;r!==null&&r.type&40;)e=r,r=e.parent;if(r===null)return n[Tr];{let{componentOffset:o}=r;if(o>-1){let{encapsulation:i}=t.data[r.directiveStart+o];if(i===ir.None||i===ir.Emulated)return null}return Bn(r,n)}}function Pc(t,e,n,r,o){t.insertBefore(e,n,r,o)}function Lv(t,e,n){t.appendChild(e,n)}function eg(t,e,n,r,o){r!==null?Pc(t,e,n,r,o):Lv(t,e,n)}function VT(t,e,n,r){t.removeChild(e,n,r)}function Ih(t,e){return t.parentNode(e)}function LT(t,e){return t.nextSibling(e)}function jv(t,e,n){return BT(t,e,n)}function jT(t,e,n){return t.type&40?Bn(t,n):null}var BT=jT,tg;function ou(t,e,n,r){let o=Vv(t,r,e),i=e[ht],s=r.parent||e[an],a=jv(s,r,e);if(o!=null)if(Array.isArray(n))for(let c=0;c<n.length;c++)eg(i,o,n[c],a,!1);else eg(i,o,n,a,!1);tg!==void 0&&tg(i,r,e,n,o)}function Tc(t,e){if(e!==null){let n=e.type;if(n&3)return Bn(e,t);if(n&4)return Md(-1,t[e.index]);if(n&8){let r=e.child;if(r!==null)return Tc(t,r);{let o=t[e.index];return jn(o)?Md(-1,o):ar(o)}}else{if(n&32)return Th(e,t)()||ar(t[e.index]);{let r=Bv(t,e);if(r!==null){if(Array.isArray(r))return r[0];let o=Eh(t[Ln]);return Tc(o,r)}else return Tc(t,e.next)}}}return null}function Bv(t,e){if(e!==null){let r=t[Ln][an],o=e.projection;return r.projection[o]}return null}function Md(t,e){let n=on+t+1;if(n<e.length){let r=e[n],o=r[fe].firstChild;if(o!==null)return Tc(r,o)}return e[_o]}function UT(t,e,n){let r=Ih(t,e);r&&VT(t,r,e,n)}function Ah(t,e,n,r,o,i,s){for(;n!=null;){let a=r[n.index],c=n.type;if(s&&e===0&&(a&&Hr(ar(a),r),n.flags|=2),(n.flags&32)!==32)if(c&8)Ah(t,e,n.child,r,o,i,!1),ii(e,t,o,a,i);else if(c&32){let u=Th(n,r),l;for(;l=u();)ii(e,t,o,l,i);ii(e,t,o,a,i)}else c&16?Uv(t,e,r,n,o,i):ii(e,t,o,a,i);n=s?n.projectionNext:n.next}}function Zs(t,e,n,r,o,i){Ah(n,r,t.firstChild,e,o,i,!1)}function qT(t,e,n){let r=e[ht],o=Vv(t,n,e),i=n.parent||e[an],s=jv(i,n,e);Uv(r,0,e,n,o,s)}function Uv(t,e,n,r,o,i){let s=n[Ln],c=s[an].projection[r.projection];if(Array.isArray(c))for(let u=0;u<c.length;u++){let l=c[u];ii(e,t,o,l,i)}else{let u=c,l=s[it];Av(r)&&(u.flags|=128),Ah(t,e,u,l,o,i,!0)}}function $T(t,e,n,r,o){let i=n[_o],s=ar(n);i!==s&&ii(e,t,r,i,o);for(let a=on;a<n.length;a++){let c=n[a];Zs(c[fe],c,t,e,r,i)}}function HT(t,e,n,r,o){if(e)o?t.addClass(n,r):t.removeClass(n,r);else{let i=r.indexOf("-")===-1?void 0:Sr.DashCase;o==null?t.removeStyle(n,r,i):(typeof o=="string"&&o.endsWith("!important")&&(o=o.slice(0,-10),i|=Sr.Important),t.setStyle(n,r,o,i))}}function WT(t,e,n){t.setAttribute(e,"style",n)}function qv(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function $v(t,e,n){let{mergedAttrs:r,classes:o,styles:i}=n;r!==null&&yd(t,e,r),o!==null&&qv(t,e,o),i!==null&&WT(t,e,i)}var Nd=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${vD})`}};function Mh(t){return t instanceof Nd?t.changingThisBreaksApplicationSecurity:t}var Od=class{};var GT="h",zT="b";var ZT=(t,e,n)=>null;function Nh(t,e,n=!1){return ZT(t,e,n)}var Rd=class{},Vc=class{};function YT(t){let e=Error(`No component factory found for ${Tt(t)}.`);return e[QT]=t,e}var QT="ngComponent";var kd=class{resolveComponentFactory(e){throw YT(e)}},iu=(()=>{let e=class e{};e.NULL=new kd;let t=e;return t})();function XT(){return wi(Un(),Ue())}function wi(t,e){return new wn(Bn(t,e))}var wn=(()=>{let e=class e{constructor(r){this.nativeElement=r}};e.__NG_ELEMENT_ID__=XT;let t=e;return t})();function KT(t){return t instanceof wn?t.nativeElement:t}var Bs=class{};var JT=(()=>{let e=class e{};e.\u0275prov=ee({token:e,providedIn:"root",factory:()=>null});let t=e;return t})(),ud={};function Hv(t){return tE(t)?Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t:!1}function eE(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{let n=t[Symbol.iterator](),r;for(;!(r=n.next()).done;)e(r.value)}}function tE(t){return t!==null&&(typeof t=="function"||typeof t=="object")}var Fd=class{constructor(){}supports(e){return Hv(e)}create(e){return new Pd(e)}},nE=(t,e)=>e,Pd=class{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||nE}forEachItem(e){let n;for(n=this._itHead;n!==null;n=n._next)e(n)}forEachOperation(e){let n=this._itHead,r=this._removalsHead,o=0,i=null;for(;n||r;){let s=!r||n&&n.currentIndex<ng(r,o,i)?n:r,a=ng(s,o,i),c=s.currentIndex;if(s===r)o--,r=r._nextRemoved;else if(n=n._next,s.previousIndex==null)o++;else{i||(i=[]);let u=a-o,l=c-o;if(u!=l){for(let h=0;h<u;h++){let f=h<i.length?i[h]:i[h]=0,p=f+h;l<=p&&p<u&&(i[h]=f+1)}let d=s.previousIndex;i[d]=l-u}}a!==c&&e(s,a,c)}}forEachPreviousItem(e){let n;for(n=this._previousItHead;n!==null;n=n._nextPrevious)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;n!==null;n=n._nextAdded)e(n)}forEachMovedItem(e){let n;for(n=this._movesHead;n!==null;n=n._nextMoved)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;n!==null;n=n._nextRemoved)e(n)}forEachIdentityChange(e){let n;for(n=this._identityChangesHead;n!==null;n=n._nextIdentityChange)e(n)}diff(e){if(e==null&&(e=[]),!Hv(e))throw new X(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let n=this._itHead,r=!1,o,i,s;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)i=e[a],s=this._trackByFn(a,i),n===null||!Object.is(n.trackById,s)?(n=this._mismatch(n,i,s,a),r=!0):(r&&(n=this._verifyReinsertion(n,i,s,a)),Object.is(n.item,i)||this._addIdentityChange(n,i)),n=n._next}else o=0,eE(e,a=>{s=this._trackByFn(o,a),n===null||!Object.is(n.trackById,s)?(n=this._mismatch(n,a,s,o),r=!0):(r&&(n=this._verifyReinsertion(n,a,s,o)),Object.is(n.item,a)||this._addIdentityChange(n,a)),n=n._next,o++}),this.length=o;return this._truncate(n),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,n,r,o){let i;return e===null?i=this._itTail:(i=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._reinsertAfter(e,i,o)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,o),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._moveAfter(e,i,o)):e=this._addAfter(new Vd(n,r),i,o)),e}_verifyReinsertion(e,n,r,o){let i=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return i!==null?e=this._reinsertAfter(i,e._prev,o):e.currentIndex!=o&&(e.currentIndex=o,this._addToMoves(e,o)),e}_truncate(e){for(;e!==null;){let n=e._next;this._addToRemovals(this._unlink(e)),e=n}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,n,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let o=e._prevRemoved,i=e._nextRemoved;return o===null?this._removalsHead=i:o._nextRemoved=i,i===null?this._removalsTail=o:i._prevRemoved=o,this._insertAfter(e,n,r),this._addToMoves(e,r),e}_moveAfter(e,n,r){return this._unlink(e),this._insertAfter(e,n,r),this._addToMoves(e,r),e}_addAfter(e,n,r){return this._insertAfter(e,n,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,n,r){let o=n===null?this._itHead:n._next;return e._next=o,e._prev=n,o===null?this._itTail=e:o._prev=e,n===null?this._itHead=e:n._next=e,this._linkedRecords===null&&(this._linkedRecords=new Lc),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let n=e._prev,r=e._next;return n===null?this._itHead=r:n._next=r,r===null?this._itTail=n:r._prev=n,e}_addToMoves(e,n){return e.previousIndex===n||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Lc),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,n){return e.item=n,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},Vd=class{constructor(e,n){this.item=e,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},Ld=class{constructor(){this._head=null,this._tail=null}add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,n){let r;for(r=this._head;r!==null;r=r._nextDup)if((n===null||n<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let n=e._prevDup,r=e._nextDup;return n===null?this._head=r:n._nextDup=r,r===null?this._tail=n:r._prevDup=n,this._head===null}},Lc=class{constructor(){this.map=new Map}put(e){let n=e.trackById,r=this.map.get(n);r||(r=new Ld,this.map.set(n,r)),r.add(e)}get(e,n){let r=e,o=this.map.get(r);return o?o.get(e,n):null}remove(e){let n=e.trackById;return this.map.get(n).remove(e)&&this.map.delete(n),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function ng(t,e,n){let r=t.previousIndex;if(r===null)return r;let o=0;return n&&r<n.length&&(o=n[r]),r+e+o}function rg(){return new Oh([new Fd])}var Oh=(()=>{let e=class e{constructor(r){this.factories=r}static create(r,o){if(o!=null){let i=o.factories.slice();r=r.concat(i)}return new e(r)}static extend(r){return{provide:e,useFactory:o=>e.create(r,o||rg()),deps:[[e,new wh,new tu]]}}find(r){let o=this.factories.find(i=>i.supports(r));if(o!=null)return o;throw new X(901,!1)}};e.\u0275prov=ee({token:e,providedIn:"root",factory:rg});let t=e;return t})();function jc(t,e,n,r,o=!1){for(;n!==null;){let i=e[n.index];i!==null&&r.push(ar(i)),jn(i)&&rE(i,r);let s=n.type;if(s&8)jc(t,e,n.child,r);else if(s&32){let a=Th(n,e),c;for(;c=a();)r.push(c)}else if(s&16){let a=Bv(e,n);if(Array.isArray(a))r.push(...a);else{let c=Eh(e[Ln]);jc(c[fe],c,a,r,!0)}}n=o?n.projectionNext:n.next}return r}function rE(t,e){for(let n=on;n<t.length;n++){let r=t[n],o=r[fe].firstChild;o!==null&&jc(r[fe],r,o,e)}t[_o]!==t[Tr]&&e.push(t[_o])}var Wv=[];function oE(t){return t[yo]??iE(t)}function iE(t){let e=Wv.pop()??Object.create(aE);return e.lView=t,e}function sE(t){t.lView[yo]!==t&&(t.lView=null,Wv.push(t))}var aE=V(x({},rm),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{Vs(t.lView)},consumerOnSignalRead(){this.lView[yo]=this}}),cE="ngOriginalError";function ld(t){return t[cE]}var cr=class{constructor(){this._console=console}handleError(e){let n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&ld(e);for(;n&&ld(n);)n=ld(n);return n||null}},Gv=new ce("",{providedIn:"root",factory:()=>$(cr).handleError.bind(void 0)});var zv=!1,uE=new ce("",{providedIn:"root",factory:()=>zv});var bi={};function Ce(t){Zv(qt(),Ue(),xi()+t,!1)}function Zv(t,e,n,r){if(!r)if((e[ie]&3)===3){let i=t.preOrderCheckHooks;i!==null&&bc(e,i,n)}else{let i=t.preOrderHooks;i!==null&&Cc(e,i,0,n)}xo(n)}function Et(t,e=le.Default){let n=Ue();if(n===null)return J(t,e);let r=Un();return mv(r,n,_n(t),e)}function Yv(){let t="invalid";throw new Error(t)}function lE(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let o=n[r];if(o<0)xo(~o);else{let i=o,s=n[++r],a=n[++r];wS(s,i);let c=e[i];a(2,c)}}}finally{xo(-1)}}function su(t,e,n,r,o,i,s,a,c,u,l){let d=e.blueprint.slice();return d[Tr]=o,d[ie]=r|4|128|8|64,(u!==null||t&&t[ie]&2048)&&(d[ie]|=2048),zg(d),d[it]=d[_i]=t,d[Vn]=n,d[$r]=s||t&&t[$r],d[ht]=a||t&&t[ht],d[ui]=c||t&&t[ui]||null,d[an]=i,d[Zc]=wT(),d[ks]=l,d[Bg]=u,d[Ln]=e.type==2?t[Ln]:d,d}function Ci(t,e,n,r,o){let i=t.data[e];if(i===null)i=dE(t,e,n,r,o),xS()&&(i.flags|=32);else if(i.type&64){i.type=n,i.value=r,i.attrs=o;let s=vS();i.injectorIndex=s===null?-1:s.injectorIndex}return So(i,!0),i}function dE(t,e,n,r,o){let i=Kg(),s=fh(),a=s?i:i&&i.parent,c=t.data[e]=vE(t,a,n,e,r,o);return t.firstChild===null&&(t.firstChild=c),i!==null&&(s?i.child==null&&c.parent!==null&&(i.child=c):i.next===null&&(i.next=c,c.prev=i)),c}function Qv(t,e,n,r){if(n===0)return-1;let o=e.length;for(let i=0;i<n;i++)e.push(r),t.blueprint.push(r),t.data.push(null);return o}function Xv(t,e,n,r,o){let i=xi(),s=r&2;try{xo(-1),s&&e.length>sr&&Zv(t,e,sr,!1),nr(s?2:0,o),n(r,o)}finally{xo(i),nr(s?3:1,o)}}function Rh(t,e,n){if(dh(e)){let r=en(null);try{let o=e.directiveStart,i=e.directiveEnd;for(let s=o;s<i;s++){let a=t.data[s];a.contentQueries&&a.contentQueries(1,n[s],s)}}finally{en(r)}}}function kh(t,e,n){Qg()&&(CE(t,e,n,Bn(n,e)),(n.flags&64)===64&&ty(t,e,n))}function Fh(t,e,n=Bn){let r=e.localNames;if(r!==null){let o=e.index+1;for(let i=0;i<r.length;i+=2){let s=r[i+1],a=s===-1?n(e,t):t[s];t[o++]=a}}}function Kv(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=Ph(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function Ph(t,e,n,r,o,i,s,a,c,u,l){let d=sr+r,h=d+o,f=hE(d,h),p=typeof u=="function"?u():u;return f[fe]={type:t,blueprint:f,template:n,queries:null,viewQuery:a,declTNode:e,data:f.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof i=="function"?i():i,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:c,consts:p,incompleteFirstPass:!1,ssrId:l}}function hE(t,e){let n=[];for(let r=0;r<e;r++)n.push(r<t?null:bi);return n}function fE(t,e,n,r){let i=r.get(uE,zv)||n===ir.ShadowDom,s=t.selectRootElement(e,i);return pE(s),s}function pE(t){mE(t)}var mE=t=>null;function gE(t,e,n,r){let o=iy(e);o.push(n),t.firstCreatePass&&sy(t).push(r,o.length-1)}function vE(t,e,n,r,o,i){let s=e?e.injectorIndex:-1,a=0;return Xg()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:o,attrs:i,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function og(t,e,n,r){for(let o in t)if(t.hasOwnProperty(o)){n=n===null?{}:n;let i=t[o];r===null?ig(n,e,o,i):r.hasOwnProperty(o)&&ig(n,e,r[o],i)}return n}function ig(t,e,n,r){t.hasOwnProperty(n)?t[n].push(e,r):t[n]=[e,r]}function yE(t,e,n){let r=e.directiveStart,o=e.directiveEnd,i=t.data,s=e.attrs,a=[],c=null,u=null;for(let l=r;l<o;l++){let d=i[l],h=n?n.get(d):null,f=h?h.inputs:null,p=h?h.outputs:null;c=og(d.inputs,l,c,f),u=og(d.outputs,l,u,p);let m=c!==null&&s!==null&&!Og(e)?OE(c,l,s):null;a.push(m)}c!==null&&(c.hasOwnProperty("class")&&(e.flags|=8),c.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=c,e.outputs=u}function _E(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function Jv(t,e,n,r,o,i,s,a){let c=Bn(e,n),u=e.inputs,l;!a&&u!=null&&(l=u[r])?(Lh(t,n,l,r,o),Yc(e)&&xE(n,e.index)):e.type&3?(r=_E(r),o=s!=null?s(o,e.value||"",r):o,i.setProperty(c,r,o)):e.type&12}function xE(t,e){let n=Do(e,t);n[ie]&16||(n[ie]|=64)}function Vh(t,e,n,r){if(Qg()){let o=r===null?null:{"":-1},i=SE(t,n),s,a;i===null?s=a=null:[s,a]=i,s!==null&&ey(t,e,n,s,o,a),o&&TE(n,r,o)}n.mergedAttrs=lh(n.mergedAttrs,n.attrs)}function ey(t,e,n,r,o,i){for(let u=0;u<r.length;u++)PS(dv(n,e),t,r[u].type);IE(n,t.data.length,r.length);for(let u=0;u<r.length;u++){let l=r[u];l.providersResolver&&l.providersResolver(l)}let s=!1,a=!1,c=Qv(t,e,r.length,null);for(let u=0;u<r.length;u++){let l=r[u];n.mergedAttrs=lh(n.mergedAttrs,l.hostAttrs),AE(t,n,e,c,l),EE(c,l,o),l.contentQueries!==null&&(n.flags|=4),(l.hostBindings!==null||l.hostAttrs!==null||l.hostVars!==0)&&(n.flags|=64);let d=l.type.prototype;!s&&(d.ngOnChanges||d.ngOnInit||d.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),s=!0),!a&&(d.ngOnChanges||d.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),a=!0),c++}yE(t,n,i)}function wE(t,e,n,r,o){let i=o.hostBindings;if(i){let s=t.hostBindingOpCodes;s===null&&(s=t.hostBindingOpCodes=[]);let a=~e.index;bE(s)!=a&&s.push(a),s.push(n,r,i)}}function bE(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function CE(t,e,n,r){let o=n.directiveStart,i=n.directiveEnd;Yc(n)&&ME(e,n,t.data[o+n.componentOffset]),t.firstCreatePass||dv(n,e),Hr(r,e);let s=n.initialInputs;for(let a=o;a<i;a++){let c=t.data[a],u=pi(e,t,a,n);if(Hr(u,e),s!==null&&NE(e,a-o,u,c,n,s),Ws(c)){let l=Do(n.index,e);l[Vn]=pi(e,t,a,n)}}}function ty(t,e,n){let r=n.directiveStart,o=n.directiveEnd,i=n.index,s=bS();try{xo(i);for(let a=r;a<o;a++){let c=t.data[a],u=e[a];wd(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&DE(c,u)}}finally{xo(-1),wd(s)}}function DE(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function SE(t,e){let n=t.directiveRegistry,r=null,o=null;if(n)for(let i=0;i<n.length;i++){let s=n[i];if(Rg(e,s.selectors,!1))if(r||(r=[]),Ws(s))if(s.findHostDirectiveDefs!==null){let a=[];o=o||new Map,s.findHostDirectiveDefs(s,a,o),r.unshift(...a,s);let c=a.length;jd(t,e,c)}else r.unshift(s),jd(t,e,0);else o=o||new Map,s.findHostDirectiveDefs?.(s,r,o),r.push(s)}return r===null?null:[r,o]}function jd(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function TE(t,e,n){if(e){let r=t.localNames=[];for(let o=0;o<e.length;o+=2){let i=n[e[o+1]];if(i==null)throw new X(-301,!1);r.push(e[o],i)}}}function EE(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;Ws(e)&&(n[""]=t)}}function IE(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function AE(t,e,n,r,o){t.data[r]=o;let i=o.factory||(o.factory=hi(o.type,!0)),s=new Ls(i,Ws(o),Et);t.blueprint[r]=s,n[r]=s,wE(t,e,r,Qv(t,n,o.hostVars,bi),o)}function ME(t,e,n){let r=Bn(e,t),o=Kv(n),i=t[$r].rendererFactory,s=16;n.signals?s=4096:n.onPush&&(s=64);let a=au(t,su(t,o,null,s,r,e,null,i.createRenderer(r,n),null,null,null));t[e.index]=a}function NE(t,e,n,r,o,i){let s=i[e];if(s!==null)for(let a=0;a<s.length;){let c=s[a++],u=s[a++],l=s[a++];ny(r,n,c,u,l)}}function ny(t,e,n,r,o){let i=en(null);try{let s=t.inputTransforms;s!==null&&s.hasOwnProperty(r)&&(o=s[r].call(e,o)),t.setInput!==null?t.setInput(e,o,n,r):e[r]=o}finally{en(i)}}function OE(t,e,n){let r=null,o=0;for(;o<n.length;){let i=n[o];if(i===0){o+=4;continue}else if(i===5){o+=2;continue}if(typeof i=="number")break;if(t.hasOwnProperty(i)){r===null&&(r=[]);let s=t[i];for(let a=0;a<s.length;a+=2)if(s[a]===e){r.push(i,s[a+1],n[o+1]);break}}o+=2}return r}function ry(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function oy(t,e){let n=t.contentQueries;if(n!==null){let r=en(null);try{for(let o=0;o<n.length;o+=2){let i=n[o],s=n[o+1];if(s!==-1){let a=t.data[s];gh(i),a.contentQueries(2,e[s],s)}}}finally{en(r)}}}function au(t,e){return t[Ps]?t[Gm][Pn]=e:t[Ps]=e,t[Gm]=e,e}function Bd(t,e,n){gh(0);let r=en(null);try{e(t,n)}finally{en(r)}}function iy(t){return t[Fs]||(t[Fs]=[])}function sy(t){return t.cleanup||(t.cleanup=[])}function ay(t,e){let n=t[ui],r=n?n.get(cr,null):null;r&&r.handleError(e)}function Lh(t,e,n,r,o){for(let i=0;i<n.length;){let s=n[i++],a=n[i++],c=e[s],u=t.data[s];ny(u,c,r,a,o)}}function RE(t,e,n){let r=Wg(e,t);TT(t[ht],r,n)}var kE=100;function FE(t,e=!0){let n=t[$r],r=n.rendererFactory,o=n.afterRenderEventManager,i=!1;i||(r.begin?.(),o?.begin());try{PE(t)}catch(s){throw e&&ay(t,s),s}finally{i||(r.end?.(),n.inlineEffectRunner?.flush(),o?.end())}}function PE(t){Ud(t,0);let e=0;for(;Zg(t);){if(e===kE)throw new X(103,!1);e++,Ud(t,1)}}function VE(t,e,n,r){let o=e[ie];if((o&256)===256)return;let i=!1;!i&&e[$r].inlineEffectRunner?.flush(),vh(e);let s=null,a=null;!i&&LE(t)&&(a=oE(e),s=om(a));try{zg(e),yS(t.bindingStartIndex),n!==null&&Xv(t,e,n,2,r);let c=(o&3)===3;if(!i)if(c){let d=t.preOrderCheckHooks;d!==null&&bc(e,d,null)}else{let d=t.preOrderHooks;d!==null&&Cc(e,d,0,null),od(e,0)}if(jE(e),cy(e,0),t.contentQueries!==null&&oy(t,e),!i)if(c){let d=t.contentCheckHooks;d!==null&&bc(e,d)}else{let d=t.contentHooks;d!==null&&Cc(e,d,1),od(e,1)}lE(t,e);let u=t.components;u!==null&&ly(e,u,0);let l=t.viewQuery;if(l!==null&&Bd(2,l,r),!i)if(c){let d=t.viewCheckHooks;d!==null&&bc(e,d)}else{let d=t.viewHooks;d!==null&&Cc(e,d,2),od(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[rd]){for(let d of e[rd])d();e[rd]=null}i||(e[ie]&=-73)}catch(c){throw Vs(e),c}finally{a!==null&&(im(a,s),sE(a)),yh()}}function LE(t){return t.type!==2}function cy(t,e){for(let n=Nv(t);n!==null;n=Ov(n)){n[ie]&=~di.HasChildViewsToRefresh;for(let r=on;r<n.length;r++){let o=n[r];uy(o,e)}}}function jE(t){for(let e=Nv(t);e!==null;e=Ov(e)){if(!(e[ie]&di.HasTransplantedViews))continue;let n=e[li];for(let r=0;r<n.length;r++){let o=n[r],i=o[it];uS(o)}}}function BE(t,e,n){let r=Do(e,t);uy(r,n)}function uy(t,e){hh(t)&&Ud(t,e)}function Ud(t,e){let r=t[fe],o=t[ie],i=t[yo],s=!!(e===0&&o&16);if(s||=!!(o&64&&e===0),s||=!!(o&1024),s||=!!(i?.dirty&&Vl(i)),i&&(i.dirty=!1),t[ie]&=-9217,s)VE(r,t,r.template,t[Vn]);else if(o&8192){cy(t,1);let a=r.components;a!==null&&ly(t,a,1)}}function ly(t,e,n){for(let r=0;r<e.length;r++)BE(t,e[r],n)}function jh(t){for(t[$r].changeDetectionScheduler?.notify();t;){t[ie]|=64;let e=Eh(t);if(JD(t)&&!e)return t;t=e}return null}var wo=class{get rootNodes(){let e=this._lView,n=e[fe];return jc(n,e,n.firstChild,[])}constructor(e,n,r=!0){this._lView=e,this._cdRefInjectingView=n,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Vn]}set context(e){this._lView[Vn]=e}get destroyed(){return(this._lView[ie]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[it];if(jn(e)){let n=e[Mc],r=n?n.indexOf(this):-1;r>-1&&(Ad(e,r),Rc(n,r))}this._attachedToViewContainer=!1}Pv(this._lView[fe],this._lView)}onDestroy(e){Yg(this._lView,e)}markForCheck(){jh(this._cdRefInjectingView||this._lView)}detach(){this._lView[ie]&=-129}reattach(){xd(this._lView),this._lView[ie]|=128}detectChanges(){this._lView[ie]|=1024,FE(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new X(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,MT(this._lView[fe],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new X(902,!1);this._appRef=e,xd(this._lView)}},Er=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=UE;let t=e;return t})();function UE(t){return qE(Un(),Ue(),(t&16)===16)}function qE(t,e,n){if(Yc(t)&&!n){let r=Do(t.index,e);return new wo(r,r)}else if(t.type&47){let r=e[Ln];return new wo(r,e)}return null}var dy=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=$E,e.__NG_ENV_ID__=r=>r;let t=e;return t})(),qd=class extends dy{constructor(e){super(),this._lView=e}onDestroy(e){return Yg(this._lView,e),()=>dS(this._lView,e)}};function $E(){return new qd(Ue())}var sg=new Set;function Bh(t){sg.has(t)||(sg.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}var $d=class extends nn{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,n,r){let o=e,i=n||(()=>null),s=r;if(e&&typeof e=="object"){let c=e;o=c.next?.bind(c),i=c.error?.bind(c),s=c.complete?.bind(c)}this.__isAsync&&(i=dd(i),o&&(o=dd(o)),s&&(s=dd(s)));let a=super.subscribe({next:o,error:i,complete:s});return e instanceof Je&&e.add(a),a}};function dd(t){return e=>{setTimeout(t,void 0,e)}}var Me=$d;function ag(...t){}function HE(){let t=typeof rn.requestAnimationFrame=="function",e=rn[t?"requestAnimationFrame":"setTimeout"],n=rn[t?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&n){let r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r);let o=n[Zone.__symbol__("OriginalDelegate")];o&&(n=o)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:n}}var Be=class t{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Me(!1),this.onMicrotaskEmpty=new Me(!1),this.onStable=new Me(!1),this.onError=new Me(!1),typeof Zone>"u")throw new X(908,!1);Zone.assertZonePatched();let o=this;o._nesting=0,o._outer=o._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(o._inner=o._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(o._inner=o._inner.fork(Zone.longStackTraceZoneSpec)),o.shouldCoalesceEventChangeDetection=!r&&n,o.shouldCoalesceRunChangeDetection=r,o.lastRequestAnimationFrameId=-1,o.nativeRequestAnimationFrame=HE().nativeRequestAnimationFrame,zE(o)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get("isAngularZone")===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new X(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new X(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,o){let i=this._inner,s=i.scheduleEventTask("NgZoneEvent: "+o,e,WE,ag,ag);try{return i.runTask(s,n,r)}finally{i.cancelTask(s)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}},WE={};function Uh(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function GE(t){t.isCheckStableRunning||t.lastRequestAnimationFrameId!==-1||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(rn,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,Hd(t),t.isCheckStableRunning=!0,Uh(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),Hd(t))}function zE(t){let e=()=>{GE(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,o,i,s,a)=>{if(ZE(a))return n.invokeTask(o,i,s,a);try{return cg(t),n.invokeTask(o,i,s,a)}finally{(t.shouldCoalesceEventChangeDetection&&i.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),ug(t)}},onInvoke:(n,r,o,i,s,a,c)=>{try{return cg(t),n.invoke(o,i,s,a,c)}finally{t.shouldCoalesceRunChangeDetection&&e(),ug(t)}},onHasTask:(n,r,o,i)=>{n.hasTask(o,i),r===o&&(i.change=="microTask"?(t._hasPendingMicrotasks=i.microTask,Hd(t),Uh(t)):i.change=="macroTask"&&(t.hasPendingMacrotasks=i.macroTask))},onHandleError:(n,r,o,i)=>(n.handleError(o,i),t.runOutsideAngular(()=>t.onError.emit(i)),!1)})}function Hd(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.lastRequestAnimationFrameId!==-1?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function cg(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function ug(t){t._nesting--,Uh(t)}var Wd=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Me,this.onMicrotaskEmpty=new Me,this.onStable=new Me,this.onError=new Me}run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,o){return e.apply(n,r)}};function ZE(t){return!Array.isArray(t)||t.length!==1?!1:t[0].data?.__ignore_ng_zone__===!0}function YE(t="zone.js",e){return t==="noop"?new Wd:t==="zone.js"?new Be(e):t}var si=function(t){return t[t.EarlyRead=0]="EarlyRead",t[t.Write=1]="Write",t[t.MixedReadWrite=2]="MixedReadWrite",t[t.Read=3]="Read",t}(si||{}),QE={destroy(){}};function qh(t,e){!e&&hT(qh);let n=e?.injector??$(xn);if(!mT(n))return QE;Bh("NgAfterNextRender");let r=n.get(hy),o=r.handler??=new zd,i=e?.phase??si.MixedReadWrite,s=()=>{o.unregister(c),a()},a=n.get(dy).onDestroy(s),c=new Gd(n,i,()=>{s(),t()});return o.register(c),{destroy:s}}var Gd=class{constructor(e,n,r){this.phase=n,this.callbackFn=r,this.zone=e.get(Be),this.errorHandler=e.get(cr,null,{optional:!0})}invoke(){try{this.zone.runOutsideAngular(this.callbackFn)}catch(e){this.errorHandler?.handleError(e)}}},zd=class{constructor(){this.executingCallbacks=!1,this.buckets={[si.EarlyRead]:new Set,[si.Write]:new Set,[si.MixedReadWrite]:new Set,[si.Read]:new Set},this.deferredCallbacks=new Set}validateBegin(){if(this.executingCallbacks)throw new X(102,!1)}register(e){(this.executingCallbacks?this.deferredCallbacks:this.buckets[e.phase]).add(e)}unregister(e){this.buckets[e.phase].delete(e),this.deferredCallbacks.delete(e)}execute(){this.executingCallbacks=!0;for(let e of Object.values(this.buckets))for(let n of e)n.invoke();this.executingCallbacks=!1;for(let e of this.deferredCallbacks)this.buckets[e.phase].add(e);this.deferredCallbacks.clear()}destroy(){for(let e of Object.values(this.buckets))e.clear();this.deferredCallbacks.clear()}},hy=(()=>{let e=class e{constructor(){this.renderDepth=0,this.handler=null,this.internalCallbacks=[]}begin(){this.handler?.validateBegin(),this.renderDepth++}end(){if(this.renderDepth--,this.renderDepth===0){for(let r of this.internalCallbacks)r();this.internalCallbacks.length=0,this.handler?.execute()}}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}};e.\u0275prov=ee({token:e,providedIn:"root",factory:()=>new e});let t=e;return t})();function XE(t,e){let n=Do(e,t),r=n[fe];KE(r,n);let o=n[Tr];o!==null&&n[ks]===null&&(n[ks]=Nh(o,n[ui])),$h(r,n,n[Vn])}function KE(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function $h(t,e,n){vh(e);try{let r=t.viewQuery;r!==null&&Bd(1,r,n);let o=t.template;o!==null&&Xv(t,e,o,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&oy(t,e),t.staticViewQueries&&Bd(2,t.viewQuery,n);let i=t.components;i!==null&&JE(e,i)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[ie]&=-5,yh()}}function JE(t,e){for(let n=0;n<e.length;n++)XE(t,e[n])}function Bc(t,e,n){let r=n?t.styles:null,o=n?t.classes:null,i=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")i=a;else if(i==1)o=Pm(o,a);else if(i==2){let c=a,u=e[++s];r=Pm(r,c+": "+u+";")}}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=o:t.classesWithoutHost=o}var Uc=class extends iu{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=qr(e);return new gi(n,this.ngModule)}};function lg(t){let e=[];for(let n in t)if(t.hasOwnProperty(n)){let r=t[n];e.push({propName:r,templateName:n})}return e}function eI(t){let e=t.toLowerCase();return e==="svg"?rS:e==="math"?oS:null}var Zd=class{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){r=zc(r);let o=this.injector.get(e,ud,r);return o!==ud||n===ud?o:this.parentInjector.get(e,n,r)}},gi=class extends Vc{get inputs(){let e=this.componentDef,n=e.inputTransforms,r=lg(e.inputs);if(n!==null)for(let o of r)n.hasOwnProperty(o.propName)&&(o.transform=n[o.propName]);return r}get outputs(){return lg(this.componentDef.outputs)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=ZD(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,r,o){o=o||this.ngModule;let i=o instanceof sn?o:o?.injector;i&&this.componentDef.getStandaloneInjector!==null&&(i=this.componentDef.getStandaloneInjector(i)||i);let s=i?new Zd(e,i):e,a=s.get(Bs,null);if(a===null)throw new X(407,!1);let c=s.get(JT,null),u=s.get(hy,null),l=s.get(Od,null),d={rendererFactory:a,sanitizer:c,inlineEffectRunner:null,afterRenderEventManager:u,changeDetectionScheduler:l},h=a.createRenderer(null,this.componentDef),f=this.componentDef.selectors[0][0]||"div",p=r?fE(h,r,this.componentDef.encapsulation,s):kv(h,f,eI(f)),m=512;this.componentDef.signals?m|=4096:this.componentDef.onPush||(m|=16);let g=null;p!==null&&(g=Nh(p,s,!0));let v=Ph(0,null,null,1,0,null,null,null,null,null,null),D=su(null,v,null,m,null,null,d,h,s,null,g);vh(D);let I,M;try{let C=this.componentDef,b,_=null;C.findHostDirectiveDefs?(b=[],_=new Map,C.findHostDirectiveDefs(C,b,_),b.push(C)):b=[C];let w=tI(D,p),k=nI(w,p,C,b,D,d,h);M=Gg(v,sr),p&&iI(h,C,p,r),n!==void 0&&sI(M,this.ngContentSelectors,n),I=oI(k,C,b,_,D,[aI]),$h(v,D,null)}finally{yh()}return new Yd(this.componentType,I,wi(M,D),D,M)}},Yd=class extends Rd{constructor(e,n,r,o,i){super(),this.location=r,this._rootLView=o,this._tNode=i,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new wo(o,void 0,!1),this.componentType=e}setInput(e,n){let r=this._tNode.inputs,o;if(r!==null&&(o=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let i=this._rootLView;Lh(i[fe],i,o,e,n),this.previousInputValues.set(e,n);let s=Do(this._tNode.index,i);jh(s)}}get injector(){return new vo(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function tI(t,e){let n=t[fe],r=sr;return t[r]=e,Ci(n,r,2,"#host",null)}function nI(t,e,n,r,o,i,s){let a=o[fe];rI(r,t,e,s);let c=null;e!==null&&(c=Nh(e,o[ui]));let u=i.rendererFactory.createRenderer(e,n),l=16;n.signals?l=4096:n.onPush&&(l=64);let d=su(o,Kv(n),null,l,o[t.index],t,i,u,null,null,c);return a.firstCreatePass&&jd(a,t,r.length-1),au(o,d),o[t.index]=d}function rI(t,e,n,r){for(let o of t)e.mergedAttrs=lh(e.mergedAttrs,o.hostAttrs);e.mergedAttrs!==null&&(Bc(e,e.mergedAttrs,!0),n!==null&&$v(r,n,e))}function oI(t,e,n,r,o,i){let s=Un(),a=o[fe],c=Bn(s,o);ey(a,o,s,n,null,r);for(let l=0;l<n.length;l++){let d=s.directiveStart+l,h=pi(o,a,d,s);Hr(h,o)}ty(a,o,s),c&&Hr(c,o);let u=pi(o,a,s.directiveStart+s.componentOffset,s);if(t[Vn]=o[Vn]=u,i!==null)for(let l of i)l(u,e);return Rh(a,s,t),u}function iI(t,e,n,r){if(r)yd(t,n,["ng-version","17.0.8"]);else{let{attrs:o,classes:i}=YD(e.selectors[0]);o&&yd(t,n,o),i&&i.length>0&&qv(t,n,i.join(" "))}}function sI(t,e,n){let r=t.projection=[];for(let o=0;o<e.length;o++){let i=n[o];r.push(i!=null?Array.from(i):null)}}function aI(){let t=Un();Jc(Ue()[fe],t)}function cu(t,e,n){let r=t[e];return Object.is(r,n)?!1:(t[e]=n,!0)}function cI(t,e,n,r){return cu(t,mh(),n)?e+bg(n)+r:bi}function xc(t,e){return t<<17|e<<2}function bo(t){return t>>17&32767}function uI(t){return(t&2)==2}function lI(t,e){return t&131071|e<<17}function Qd(t){return t|2}function vi(t){return(t&131068)>>2}function hd(t,e){return t&-131069|e<<2}function dI(t){return(t&1)===1}function Xd(t){return t|1}function hI(t,e,n,r,o,i){let s=i?e.classBindings:e.styleBindings,a=bo(s),c=vi(s);t[r]=n;let u=!1,l;if(Array.isArray(n)){let d=n;l=d[1],(l===null||zs(d,l)>0)&&(u=!0)}else l=n;if(o)if(c!==0){let h=bo(t[a+1]);t[r+1]=xc(h,a),h!==0&&(t[h+1]=hd(t[h+1],r)),t[a+1]=lI(t[a+1],r)}else t[r+1]=xc(a,0),a!==0&&(t[a+1]=hd(t[a+1],r)),a=r;else t[r+1]=xc(c,0),a===0?a=r:t[c+1]=hd(t[c+1],r),c=r;u&&(t[r+1]=Qd(t[r+1])),dg(t,l,r,!0,i),dg(t,l,r,!1,i),fI(e,l,t,r,i),s=xc(a,c),i?e.classBindings=s:e.styleBindings=s}function fI(t,e,n,r,o){let i=o?t.residualClasses:t.residualStyles;i!=null&&typeof e=="string"&&zs(i,e)>=0&&(n[r+1]=Xd(n[r+1]))}function dg(t,e,n,r,o){let i=t[n+1],s=e===null,a=r?bo(i):vi(i),c=!1;for(;a!==0&&(c===!1||s);){let u=t[a],l=t[a+1];pI(u,e)&&(c=!0,t[a+1]=r?Xd(l):Qd(l)),a=r?bo(l):vi(l)}c&&(t[n+1]=r?Qd(i):Xd(i))}function pI(t,e){return t===null||e==null||(Array.isArray(t)?t[1]:t)===e?!0:Array.isArray(t)&&typeof e=="string"?zs(t,e)>=0:!1}function de(t,e,n){let r=Ue(),o=mh();if(cu(r,o,e)){let i=qt(),s=iv();Jv(i,s,r,t,e,r[ht],n,!1)}return de}function hg(t,e,n,r,o){let i=e.inputs,s=o?"class":"style";Lh(t,n,i[s],s,r)}function uu(t,e,n){return fy(t,e,n,!1),uu}function zr(t,e){return fy(t,e,null,!0),zr}function fy(t,e,n,r){let o=Ue(),i=qt(),s=_S(2);if(i.firstUpdatePass&&gI(i,t,s,r),e!==bi&&cu(o,s,e)){let a=i.data[xi()];wI(i,a,o,o[ht],t,o[s+1]=bI(e,n),r,s)}}function mI(t,e){return e>=t.expandoStartIndex}function gI(t,e,n,r){let o=t.data;if(o[n+1]===null){let i=o[xi()],s=mI(t,n);CI(i,r)&&e===null&&!s&&(e=!1),e=vI(o,i,e,r),hI(o,i,e,n,s,r)}}function vI(t,e,n,r){let o=CS(t),i=r?e.residualClasses:e.residualStyles;if(o===null)(r?e.classBindings:e.styleBindings)===0&&(n=fd(null,t,e,n,r),n=Us(n,e.attrs,r),i=null);else{let s=e.directiveStylingLast;if(s===-1||t[s]!==o)if(n=fd(o,t,e,n,r),i===null){let c=yI(t,e,r);c!==void 0&&Array.isArray(c)&&(c=fd(null,t,e,c[1],r),c=Us(c,e.attrs,r),_I(t,e,r,c))}else i=xI(t,e,r)}return i!==void 0&&(r?e.residualClasses=i:e.residualStyles=i),n}function yI(t,e,n){let r=n?e.classBindings:e.styleBindings;if(vi(r)!==0)return t[bo(r)]}function _I(t,e,n,r){let o=n?e.classBindings:e.styleBindings;t[bo(o)]=r}function xI(t,e,n){let r,o=e.directiveEnd;for(let i=1+e.directiveStylingLast;i<o;i++){let s=t[i].hostAttrs;r=Us(r,s,n)}return Us(r,e.attrs,n)}function fd(t,e,n,r,o){let i=null,s=n.directiveEnd,a=n.directiveStylingLast;for(a===-1?a=n.directiveStart:a++;a<s&&(i=e[a],r=Us(r,i.hostAttrs,o),i!==t);)a++;return t!==null&&(n.directiveStylingLast=a),r}function Us(t,e,n){let r=n?1:2,o=-1;if(e!==null)for(let i=0;i<e.length;i++){let s=e[i];typeof s=="number"?o=s:o===r&&(Array.isArray(t)||(t=t===void 0?[]:["",t]),zS(t,s,n?!0:e[++i]))}return t===void 0?null:t}function wI(t,e,n,r,o,i,s,a){if(!(e.type&3))return;let c=t.data,u=c[a+1],l=dI(u)?fg(c,e,n,o,vi(u),s):void 0;if(!qc(l)){qc(i)||uI(u)&&(i=fg(c,null,n,o,a,s));let d=Wg(xi(),n);HT(r,s,d,o,i)}}function fg(t,e,n,r,o,i){let s=e===null,a;for(;o>0;){let c=t[o],u=Array.isArray(c),l=u?c[1]:c,d=l===null,h=n[o+1];h===bi&&(h=d?Fn:void 0);let f=d?sd(h,r):l===r?h:void 0;if(u&&!qc(f)&&(f=sd(c,r)),qc(f)&&(a=f,s))return a;let p=t[o+1];o=s?bo(p):vi(p)}if(e!==null){let c=i?e.residualClasses:e.residualStyles;c!=null&&(a=sd(c,r))}return a}function qc(t){return t!==void 0}function bI(t,e){return t==null||t===""||(typeof e=="string"?t=t+e:typeof t=="object"&&(t=Tt(Mh(t)))),t}function CI(t,e){return(t.flags&(e?8:16))!==0}var lj=new RegExp(`^(\\d+)*(${zT}|${GT})*(.*)`);var DI=(t,e)=>null;function pg(t,e){return DI(t,e)}function SI(t,e,n,r){let o=e.tView,s=t[ie]&4096?4096:16,a=su(t,o,n,s,null,e,null,null,null,r?.injector??null,r?.dehydratedView??null),c=t[e.index];a[Hs]=c;let u=t[or];return u!==null&&(a[or]=u.createEmbeddedView(o)),$h(o,a,n),a}function mg(t,e){return!e||e.firstChild===null||Av(t)}function TI(t,e,n,r=!0){let o=e[fe];if(OT(o,e,t,n),r){let s=Md(n,t),a=e[ht],c=Ih(a,t[_o]);c!==null&&AT(o,t[an],a,e,c,s)}let i=e[ks];i!==null&&i.firstChild!==null&&(i.firstChild=null)}var Zr=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=EI;let t=e;return t})();function EI(){let t=Un();return my(t,Ue())}var II=Zr,py=class extends II{constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return wi(this._hostTNode,this._hostLView)}get injector(){return new vo(this._hostTNode,this._hostLView)}get parentInjector(){let e=_h(this._hostTNode,this._hostLView);if(cv(e)){let n=Oc(e,this._hostLView),r=Nc(e),o=n[fe].data[r+8];return new vo(o,n)}else return new vo(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=gg(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-on}createEmbeddedView(e,n,r){let o,i;typeof r=="number"?o=r:r!=null&&(o=r.index,i=r.injector);let s=pg(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(n||{},i,s);return this.insertImpl(a,o,mg(this._hostTNode,s)),a}createComponent(e,n,r,o,i){let s=e&&!$S(e),a;if(s)a=n;else{let p=n||{};a=p.index,r=p.injector,o=p.projectableNodes,i=p.environmentInjector||p.ngModuleRef}let c=s?e:new gi(qr(e)),u=r||this.parentInjector;if(!i&&c.ngModule==null){let m=(s?u:this.parentInjector).get(sn,null);m&&(i=m)}let l=qr(c.componentType??{}),d=pg(this._lContainer,l?.id??null),h=d?.firstChild??null,f=c.create(u,o,h,i);return this.insertImpl(f.hostView,a,mg(this._hostTNode,d)),f}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){let o=e._lView;if(cS(o)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=o[it],u=new py(c,c[an],c[it]);u.detach(u.indexOf(e))}}let i=this._adjustIndex(n),s=this._lContainer;return TI(s,o,i,r),e.attachToViewContainerRef(),_v(pd(s),i,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=gg(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),r=Ad(this._lContainer,n);r&&(Rc(pd(this._lContainer),n),Pv(r[fe],r))}detach(e){let n=this._adjustIndex(e,-1),r=Ad(this._lContainer,n);return r&&Rc(pd(this._lContainer),n)!=null?new wo(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function gg(t){return t[Mc]}function pd(t){return t[Mc]||(t[Mc]=[])}function my(t,e){let n,r=e[t.index];return jn(r)?n=r:(n=ry(r,e,null,t),e[t.index]=n,au(e,n)),MI(n,e,t,r),new py(n,t,e)}function AI(t,e){let n=t[ht],r=n.createComment(""),o=Bn(e,t),i=Ih(n,o);return Pc(n,i,r,LT(n,o),!1),r}var MI=RI,NI=(t,e,n)=>!1;function OI(t,e,n){return NI(t,e,n)}function RI(t,e,n,r){if(t[_o])return;let o;n.type&8?o=ar(r):o=AI(e,n),t[_o]=o}function kI(t,e,n,r,o,i,s,a,c){let u=e.consts,l=Ci(e,t,4,s||null,fi(u,a));Vh(e,n,l,fi(u,c)),Jc(e,l);let d=l.tView=Ph(2,l,r,o,i,e.directiveRegistry,e.pipeRegistry,null,e.schemas,u,null);return e.queries!==null&&(e.queries.template(e,l),d.queries=e.queries.embeddedTView(l)),l}function It(t,e,n,r,o,i,s,a){let c=Ue(),u=qt(),l=t+sr,d=u.firstCreatePass?kI(l,u,c,e,n,r,o,i,s):u.data[l];So(d,!1);let h=FI(u,c,d,t);Xc()&&ou(u,c,h,d),Hr(h,c);let f=ry(h,c,h,d);return c[l]=f,au(c,f),OI(f,d,c),Qc(d)&&kh(u,c,d),s!=null&&Fh(c,d,a),It}var FI=PI;function PI(t,e,n,r){return Kc(!0),e[ht].createComment("")}function VI(t,e,n,r,o,i){let s=e.consts,a=fi(s,o),c=Ci(e,t,2,r,a);return Vh(e,n,c,fi(s,i)),c.attrs!==null&&Bc(c,c.attrs,!1),c.mergedAttrs!==null&&Bc(c,c.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,c),c}function Ne(t,e,n,r){let o=Ue(),i=qt(),s=sr+t,a=o[ht],c=i.firstCreatePass?VI(s,i,o,e,n,r):i.data[s],u=LI(i,o,c,a,e,t);o[s]=u;let l=Qc(c);return So(c,!0),$v(a,u,c),(c.flags&32)!==32&&Xc()&&ou(i,o,u,c),hS()===0&&Hr(u,o),fS(),l&&(kh(i,o,c),Rh(i,c,o)),r!==null&&Fh(o,c),Ne}function Oe(){let t=Un();fh()?ph():(t=t.parent,So(t,!1));let e=t;mS(e)&&gS(),pS();let n=qt();return n.firstCreatePass&&(Jc(n,t),dh(t)&&n.queries.elementEnd(t)),e.classesWithoutHost!=null&&MS(e)&&hg(n,e,Ue(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&NS(e)&&hg(n,e,Ue(),e.stylesWithoutHost,!1),Oe}function Ye(t,e,n,r){return Ne(t,e,n,r),Oe(),Ye}var LI=(t,e,n,r,o,i)=>(Kc(!0),kv(r,o,TS()));function jI(t,e,n,r,o){let i=e.consts,s=fi(i,r),a=Ci(e,t,8,"ng-container",s);s!==null&&Bc(a,s,!0);let c=fi(i,o);return Vh(e,n,a,c),e.queries!==null&&e.queries.elementStart(e,a),a}function $t(t,e,n){let r=Ue(),o=qt(),i=t+sr,s=o.firstCreatePass?jI(i,o,r,e,n):o.data[i];So(s,!0);let a=BI(o,r,s,t);return r[i]=a,Xc()&&ou(o,r,a,s),Hr(a,r),Qc(s)&&(kh(o,r,s),Rh(o,s,r)),n!=null&&Fh(r,s),$t}function Ht(){let t=Un(),e=qt();return fh()?ph():(t=t.parent,So(t,!1)),e.firstCreatePass&&(Jc(e,t),dh(t)&&e.queries.elementEnd(t)),Ht}var BI=(t,e,n,r)=>(Kc(!0),ET(e[ht],""));function wt(){return Ue()}function Hh(t,e,n){let r=Ue(),o=mh();if(cu(r,o,e)){let i=qt(),s=iv();Jv(i,s,r,t,e,r[ht],n,!0)}return Hh}var $c="en-US";var UI=$c;function qI(t){DD(t,"Expected localeId to be defined"),typeof t=="string"&&(UI=t.toLowerCase().replace(/_/g,"-"))}function Di(t){return!!t&&typeof t.then=="function"}function gy(t){return!!t&&typeof t.subscribe=="function"}function Re(t,e,n,r){let o=Ue(),i=qt(),s=Un();return HI(i,o,o[ht],s,t,e,r),Re}function $I(t,e,n,r){let o=t.cleanup;if(o!=null)for(let i=0;i<o.length-1;i+=2){let s=o[i];if(s===n&&o[i+1]===r){let a=e[Fs],c=o[i+2];return a.length>c?a[c]:null}typeof s=="string"&&(i+=2)}return null}function HI(t,e,n,r,o,i,s){let a=Qc(r),u=t.firstCreatePass&&sy(t),l=e[Vn],d=iy(e),h=!0;if(r.type&3||s){let m=Bn(r,e),g=s?s(m):m,v=d.length,D=s?M=>s(ar(M[r.index])):r.index,I=null;if(!s&&a&&(I=$I(t,e,o,r.index)),I!==null){let M=I.__ngLastListenerFn__||I;M.__ngNextListenerFn__=i,I.__ngLastListenerFn__=i,h=!1}else{i=yg(r,e,l,i,!1);let M=n.listen(g,o,i);d.push(i,M),u&&u.push(o,D,v,v+1)}}else i=yg(r,e,l,i,!1);let f=r.outputs,p;if(h&&f!==null&&(p=f[o])){let m=p.length;if(m)for(let g=0;g<m;g+=2){let v=p[g],D=p[g+1],C=e[v][D].subscribe(i),b=d.length;d.push(i,C),u&&u.push(o,r.index,b,-(b+1))}}}function vg(t,e,n,r){try{return nr(6,e,n),n(r)!==!1}catch(o){return ay(t,o),!1}finally{nr(7,e,n)}}function yg(t,e,n,r,o){return function i(s){if(s===Function)return r;let a=t.componentOffset>-1?Do(t.index,e):e;jh(a);let c=vg(e,n,r,s),u=i.__ngNextListenerFn__;for(;u;)c=vg(e,n,u,s)&&c,u=u.__ngNextListenerFn__;return o&&c===!1&&s.preventDefault(),c}}function re(t=1){return SS(t)}function WI(t,e){let n=null,r=$D(t);for(let o=0;o<e.length;o++){let i=e[o];if(i==="*"){n=o;continue}if(r===null?Rg(t,i,!0):GD(r,i))return o}return n}function vy(t){let e=Ue()[Ln][an];if(!e.projection){let n=t?t.length:1,r=e.projection=xv(n,null),o=r.slice(),i=e.child;for(;i!==null;){let s=t?WI(i,t):0;s!==null&&(o[s]?o[s].projectionNext=i:r[s]=i,o[s]=i),i=i.next}}}function yy(t,e=0,n){let r=Ue(),o=qt(),i=Ci(o,sr+t,16,null,n||null);i.projection===null&&(i.projection=e),ph(),(!r[ks]||Xg())&&(i.flags&32)!==32&&qT(o,r,i)}function Ot(t,e=""){let n=Ue(),r=qt(),o=t+sr,i=r.firstCreatePass?Ci(r,o,1,e,null):r.data[o],s=GI(r,n,i,e,t);n[o]=s,Xc()&&ou(r,n,s,i),So(i,!1)}var GI=(t,e,n,r,o)=>(Kc(!0),ST(e[ht],r));function Wh(t){return ur("",t,""),Wh}function ur(t,e,n){let r=Ue(),o=cI(r,t,e,n);return o!==bi&&RE(r,xi(),o),ur}var Wr=class{},qs=class{};var Hc=class extends Wr{constructor(e,n,r){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Uc(this);let o=Vg(e);this._bootstrapComponents=Iv(o.bootstrap),this._r3Injector=Tv(e,n,[{provide:Wr,useValue:this},{provide:iu,useValue:this.componentFactoryResolver},...r],Tt(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},Wc=class extends qs{constructor(e){super(),this.moduleType=e}create(e){return new Hc(this.moduleType,e,[])}};function zI(t,e,n){return new Hc(t,e,n)}var Kd=class extends Wr{constructor(e){super(),this.componentFactoryResolver=new Uc(this),this.instance=null;let n=new js([...e.providers,{provide:Wr,useValue:this},{provide:iu,useValue:this.componentFactoryResolver}],e.parent||Ch(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function lu(t,e,n=null){return new Kd({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}var ZI=(()=>{let e=class e{constructor(r){this._injector=r,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(r){if(!r.standalone)return null;if(!this.cachedInjectors.has(r)){let o=Cv(!1,r.type),i=o.length>0?lu([o],this._injector,`Standalone[${r.type.name}]`):null;this.cachedInjectors.set(r,i)}return this.cachedInjectors.get(r)}ngOnDestroy(){try{for(let r of this.cachedInjectors.values())r!==null&&r.destroy()}finally{this.cachedInjectors.clear()}}};e.\u0275prov=ee({token:e,providedIn:"environment",factory:()=>new e(J(sn))});let t=e;return t})();function mt(t){Bh("NgStandalone"),t.getStandaloneInjector=e=>e.get(ZI).getOrCreateStandaloneInjector(t)}function YI(){return this._results[Symbol.iterator]()}var Jd=class t{get changes(){return this._changes??=new Me}constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;let n=t.prototype;n[Symbol.iterator]||(n[Symbol.iterator]=YI)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,n){return this._results.reduce(e,n)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,n){this.dirty=!1;let r=WS(e);(this._changesDetected=!HS(this._results,r,n))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}},Co=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=KI;let t=e;return t})(),QI=Co,XI=class extends QI{constructor(e,n,r){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,n){return this.createEmbeddedViewImpl(e,n)}createEmbeddedViewImpl(e,n,r){let o=SI(this._declarationLView,this._declarationTContainer,e,{injector:n,dehydratedView:r});return new wo(o)}};function KI(){return Gh(Un(),Ue())}function Gh(t,e){return t.type&4?new XI(e,t,wi(t,e)):null}var eh=class t{constructor(e){this.queryList=e,this.matches=null}clone(){return new t(this.queryList)}setDirty(){this.queryList.setDirty()}},th=class t{constructor(e=[]){this.queries=e}createEmbeddedView(e){let n=e.queries;if(n!==null){let r=e.contentQueries!==null?e.contentQueries[0]:n.length,o=[];for(let i=0;i<r;i++){let s=n.getByIndex(i),a=this.queries[s.indexInDeclarationView];o.push(a.clone())}return new t(o)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let n=0;n<this.queries.length;n++)wy(e,n).matches!==null&&this.queries[n].setDirty()}},nh=class{constructor(e,n,r=null){this.predicate=e,this.flags=n,this.read=r}},rh=class t{constructor(e=[]){this.queries=e}elementStart(e,n){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,n)}elementEnd(e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementEnd(e)}embeddedTView(e){let n=null;for(let r=0;r<this.length;r++){let o=n!==null?n.length:0,i=this.getByIndex(r).embeddedTView(e,o);i&&(i.indexInDeclarationView=r,n!==null?n.push(i):n=[i])}return n!==null?new t(n):null}template(e,n){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,n)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},oh=class t{constructor(e,n=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=n}elementStart(e,n){this.isApplyingToNode(n)&&this.matchTNode(e,n)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,n){this.elementStart(e,n)}embeddedTView(e,n){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,n),new t(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let n=this._declarationNodeIndex,r=e.parent;for(;r!==null&&r.type&8&&r.index!==n;)r=r.parent;return n===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(e,n){let r=this.metadata.predicate;if(Array.isArray(r))for(let o=0;o<r.length;o++){let i=r[o];this.matchTNodeWithReadOption(e,n,JI(n,i)),this.matchTNodeWithReadOption(e,n,Dc(n,e,i,!1,!1))}else r===Co?n.type&4&&this.matchTNodeWithReadOption(e,n,-1):this.matchTNodeWithReadOption(e,n,Dc(n,e,r,!1,!1))}matchTNodeWithReadOption(e,n,r){if(r!==null){let o=this.metadata.read;if(o!==null)if(o===wn||o===Zr||o===Co&&n.type&4)this.addMatch(n.index,-2);else{let i=Dc(n,e,o,!1,!1);i!==null&&this.addMatch(n.index,i)}else this.addMatch(n.index,r)}}addMatch(e,n){this.matches===null?this.matches=[e,n]:this.matches.push(e,n)}};function JI(t,e){let n=t.localNames;if(n!==null){for(let r=0;r<n.length;r+=2)if(n[r]===e)return n[r+1]}return null}function eA(t,e){return t.type&11?wi(t,e):t.type&4?Gh(t,e):null}function tA(t,e,n,r){return n===-1?eA(e,t):n===-2?nA(t,e,r):pi(t,t[fe],n,e)}function nA(t,e,n){if(n===wn)return wi(e,t);if(n===Co)return Gh(e,t);if(n===Zr)return my(e,t)}function _y(t,e,n,r){let o=e[or].queries[r];if(o.matches===null){let i=t.data,s=n.matches,a=[];for(let c=0;c<s.length;c+=2){let u=s[c];if(u<0)a.push(null);else{let l=i[u];a.push(tA(e,l,s[c+1],n.metadata.read))}}o.matches=a}return o.matches}function ih(t,e,n,r){let o=t.queries.getByIndex(n),i=o.matches;if(i!==null){let s=_y(t,e,o,n);for(let a=0;a<i.length;a+=2){let c=i[a];if(c>0)r.push(s[a/2]);else{let u=i[a+1],l=e[-c];for(let d=on;d<l.length;d++){let h=l[d];h[Hs]===h[it]&&ih(h[fe],h,u,r)}if(l[li]!==null){let d=l[li];for(let h=0;h<d.length;h++){let f=d[h];ih(f[fe],f,u,r)}}}}}return r}function zh(t){let e=Ue(),n=qt(),r=Jg();gh(r+1);let o=wy(n,r);if(t.dirty&&aS(e)===((o.metadata.flags&2)===2)){if(o.matches===null)t.reset([]);else{let i=o.crossesNgTemplate?ih(n,e,r,[]):_y(n,e,o,r);t.reset(i,KT),t.notifyOnChanges()}return!0}return!1}function xy(t,e,n){let r=qt();r.firstCreatePass&&(iA(r,new nh(t,e,n),-1),(e&2)===2&&(r.staticViewQueries=!0)),oA(r,Ue(),e)}function Zh(){return rA(Ue(),Jg())}function rA(t,e){return t[or].queries[e].queryList}function oA(t,e,n){let r=new Jd((n&4)===4);gE(t,e,r,r.destroy),e[or]===null&&(e[or]=new th),e[or].queries.push(new eh(r))}function iA(t,e,n){t.queries===null&&(t.queries=new rh),t.queries.track(new oh(e,n))}function wy(t,e){return t.queries.getByIndex(e)}var wc=null;function sA(t){wc!==null&&(t.defaultEncapsulation!==wc.defaultEncapsulation||t.preserveWhitespaces!==wc.preserveWhitespaces)||(wc=t)}var du=(()=>{let e=class e{log(r){console.log(r)}warn(r){console.warn(r)}};e.\u0275fac=function(o){return new(o||e)},e.\u0275prov=ee({token:e,factory:e.\u0275fac,providedIn:"platform"});let t=e;return t})(),sh=class{constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},hu=(()=>{let e=class e{compileModuleSync(r){return new Wc(r)}compileModuleAsync(r){return Promise.resolve(this.compileModuleSync(r))}compileModuleAndAllComponentsSync(r){let o=this.compileModuleSync(r),i=Vg(r),s=Iv(i.declarations).reduce((a,c)=>{let u=qr(c);return u&&a.push(new gi(u)),a},[]);return new sh(o,s)}compileModuleAndAllComponentsAsync(r){return Promise.resolve(this.compileModuleAndAllComponentsSync(r))}clearCache(){}clearCacheFor(r){}getModuleId(r){}};e.\u0275fac=function(o){return new(o||e)},e.\u0275prov=ee({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),aA=new ce("compilerOptions");var fu=(()=>{let e=class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new xt(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let r=this.taskId++;return this.pendingTasks.add(r),r}remove(r){this.pendingTasks.delete(r),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}};e.\u0275fac=function(o){return new(o||e)},e.\u0275prov=ee({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var Yh=new ce(""),Ys=new ce(""),pu=(()=>{let e=class e{constructor(r,o,i){this._ngZone=r,this.registry=o,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,Qh||(cA(i),i.addToWindow(o)),this._watchAngularEvents(),r.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Be.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&this._pendingCount===0&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;this._callbacks.length!==0;){let r=this._callbacks.pop();clearTimeout(r.timeoutId),r.doneCb(this._didWork)}this._didWork=!1});else{let r=this.getPendingTasks();this._callbacks=this._callbacks.filter(o=>o.updateCb&&o.updateCb(r)?(clearTimeout(o.timeoutId),!1):!0),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(r=>({source:r.source,creationLocation:r.creationLocation,data:r.data})):[]}addCallback(r,o,i){let s=-1;o&&o>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(a=>a.timeoutId!==s),r(this._didWork,this.getPendingTasks())},o)),this._callbacks.push({doneCb:r,timeoutId:s,updateCb:i})}whenStable(r,o,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(r,o,i),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(r){this.registry.registerApplication(r,this)}unregisterApplication(r){this.registry.unregisterApplication(r)}findProviders(r,o,i){return[]}};e.\u0275fac=function(o){return new(o||e)(J(Be),J(mu),J(Ys))},e.\u0275prov=ee({token:e,factory:e.\u0275fac});let t=e;return t})(),mu=(()=>{let e=class e{constructor(){this._applications=new Map}registerApplication(r,o){this._applications.set(r,o)}unregisterApplication(r){this._applications.delete(r)}unregisterAllApplications(){this._applications.clear()}getTestability(r){return this._applications.get(r)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(r,o=!0){return Qh?.findTestabilityInTree(this,r,o)??null}};e.\u0275fac=function(o){return new(o||e)},e.\u0275prov=ee({token:e,factory:e.\u0275fac,providedIn:"platform"});let t=e;return t})();function cA(t){Qh=t}var Qh,gu=new ce("Application Initializer"),by=(()=>{let e=class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,o)=>{this.resolve=r,this.reject=o}),this.appInits=$(gu,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let r=[];for(let i of this.appInits){let s=i();if(Di(s))r.push(s);else if(gy(s)){let a=new Promise((c,u)=>{s.subscribe({complete:c,error:u})});r.push(a)}}let o=()=>{this.done=!0,this.resolve()};Promise.all(r).then(()=>{o()}).catch(i=>{this.reject(i)}),r.length===0&&o(),this.initialized=!0}};e.\u0275fac=function(o){return new(o||e)},e.\u0275prov=ee({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Xh=new ce("appBootstrapListener");function uA(t,e,n){let r=new Wc(n);return Promise.resolve(r)}function lA(){am(()=>{throw new X(600,!1)})}function dA(t){return t.isBoundToModule}function hA(t,e,n){try{let r=n();return Di(r)?r.catch(o=>{throw e.runOutsideAngular(()=>t.handleError(o)),o}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}function Cy(t,e){return Array.isArray(e)?e.reduce(Cy,t):x(x({},t),e)}var Si=(()=>{let e=class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=$(Gv),this.componentTypes=[],this.components=[],this.isStable=$(fu).hasPendingTasks.pipe(be(r=>!r)),this._injector=$(sn)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(r,o){let i=r instanceof Vc;if(!this._injector.get(by).done){let p="Cannot bootstrap as there are still asynchronous initializers running."+(!i&&Pg(r)?"":" Bootstrap components in the `ngDoBootstrap` method of the root module.");throw new X(405,!1)}let a;i?a=r:a=this._injector.get(iu).resolveComponentFactory(r),this.componentTypes.push(a.componentType);let c=dA(a)?void 0:this._injector.get(Wr),u=o||a.selector,l=a.create(xn.NULL,[],u,c),d=l.location.nativeElement,h=l.injector.get(Yh,null);return h?.registerApplication(d),l.onDestroy(()=>{this.detachView(l.hostView),Ec(this.components,l),h?.unregisterApplication(d)}),this._loadComponent(l),l}tick(){if(this._runningTick)throw new X(101,!1);try{this._runningTick=!0;for(let r of this._views)r.detectChanges()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1}}attachView(r){let o=r;this._views.push(o),o.attachToAppRef(this)}detachView(r){let o=r;Ec(this._views,o),o.detachFromAppRef()}_loadComponent(r){this.attachView(r.hostView),this.tick(),this.components.push(r);let o=this._injector.get(Xh,[]);[...this._bootstrapListeners,...o].forEach(i=>i(r))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(r=>r()),this._views.slice().forEach(r=>r.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(r){return this._destroyListeners.push(r),()=>Ec(this._destroyListeners,r)}destroy(){if(this._destroyed)throw new X(406,!1);let r=this._injector;r.destroy&&!r.destroyed&&r.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}};e.\u0275fac=function(o){return new(o||e)},e.\u0275prov=ee({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function Ec(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function _g(t){for(let e=t.length-1;e>=0;e--)if(t[e]!==void 0)return t[e]}var fA=(()=>{let e=class e{constructor(){this.zone=$(Be),this.applicationRef=$(Si)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}};e.\u0275fac=function(o){return new(o||e)},e.\u0275prov=ee({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function pA(t){return[{provide:Be,useFactory:t},{provide:mi,multi:!0,useFactory:()=>{let e=$(fA,{optional:!0});return()=>e.initialize()}},{provide:mi,multi:!0,useFactory:()=>{let e=$(vA);return()=>{e.initialize()}}},{provide:Gv,useFactory:mA}]}function mA(){let t=$(Be),e=$(cr);return n=>t.runOutsideAngular(()=>e.handleError(n))}function gA(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var vA=(()=>{let e=class e{constructor(){this.subscription=new Je,this.initialized=!1,this.zone=$(Be),this.pendingTasks=$(fu)}initialize(){if(this.initialized)return;this.initialized=!0;let r=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(r=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Be.assertNotInAngularZone(),queueMicrotask(()=>{r!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(r),r=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Be.assertInAngularZone(),r??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}};e.\u0275fac=function(o){return new(o||e)},e.\u0275prov=ee({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function yA(){return typeof $localize<"u"&&$localize.locale||$c}var Kh=new ce("LocaleId",{providedIn:"root",factory:()=>$(Kh,le.Optional|le.SkipSelf)||yA()});var Dy=new ce("PlatformDestroyListeners"),Sy=(()=>{let e=class e{constructor(r){this._injector=r,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(r,o){let i=YE(o?.ngZone,gA({eventCoalescing:o?.ngZoneEventCoalescing,runCoalescing:o?.ngZoneRunCoalescing}));return i.run(()=>{let s=zI(r.moduleType,this.injector,pA(()=>i)),a=s.injector.get(cr,null);return i.runOutsideAngular(()=>{let c=i.onError.subscribe({next:u=>{a.handleError(u)}});s.onDestroy(()=>{Ec(this._modules,s),c.unsubscribe()})}),hA(a,i,()=>{let c=s.injector.get(by);return c.runInitializers(),c.donePromise.then(()=>{let u=s.injector.get(Kh,$c);return qI(u||$c),this._moduleDoBootstrap(s),s})})})}bootstrapModule(r,o=[]){let i=Cy({},o);return uA(this.injector,i,r).then(s=>this.bootstrapModuleFactory(s,i))}_moduleDoBootstrap(r){let o=r.injector.get(Si);if(r._bootstrapComponents.length>0)r._bootstrapComponents.forEach(i=>o.bootstrap(i));else if(r.instance.ngDoBootstrap)r.instance.ngDoBootstrap(o);else throw new X(-403,!1);this._modules.push(r)}onDestroy(r){this._destroyListeners.push(r)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new X(404,!1);this._modules.slice().forEach(o=>o.destroy()),this._destroyListeners.forEach(o=>o());let r=this._injector.get(Dy,null);r&&(r.forEach(o=>o()),r.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}};e.\u0275fac=function(o){return new(o||e)(J(xn))},e.\u0275prov=ee({token:e,factory:e.\u0275fac,providedIn:"platform"});let t=e;return t})(),Ns=null,Ty=new ce("AllowMultipleToken");function _A(t){if(Ns&&!Ns.get(Ty,!1))throw new X(400,!1);lA(),Ns=t;let e=t.get(Sy);return bA(t),e}function Jh(t,e,n=[]){let r=`Platform: ${e}`,o=new ce(r);return(i=[])=>{let s=Ey();if(!s||s.injector.get(Ty,!1)){let a=[...n,...i,{provide:o,useValue:!0}];t?t(a):_A(xA(a,r))}return wA(o)}}function xA(t=[],e){return xn.create({name:e,providers:[{provide:nu,useValue:"platform"},{provide:Dy,useValue:new Set([()=>Ns=null])},...t]})}function wA(t){let e=Ey();if(!e)throw new X(401,!1);return e}function Ey(){return Ns?.get(Sy)??null}function bA(t){t.get(Dh,null)?.forEach(n=>n())}var Iy=Jh(null,"core",[]),Ay=(()=>{let e=class e{constructor(r){}};e.\u0275fac=function(o){return new(o||e)(J(Si))},e.\u0275mod=Ut({type:e}),e.\u0275inj=Bt({});let t=e;return t})();function My(t){let e=qr(t);if(!e)return null;let n=new gi(e);return{get selector(){return n.selector},get type(){return n.componentType},get inputs(){return n.inputs},get outputs(){return n.outputs},get ngContentSelectors(){return n.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var ef=null;function Eo(){return ef}function Py(t){ef||(ef=t)}var vu=class{},Rt=new ce("DocumentToken"),af=(()=>{let e=class e{historyGo(r){throw new Error("Not implemented")}};e.\u0275fac=function(o){return new(o||e)},e.\u0275prov=ee({token:e,factory:()=>(()=>$(SA))(),providedIn:"platform"});let t=e;return t})(),Vy=new ce("Location Initialized"),SA=(()=>{let e=class e extends af{constructor(){super(),this._doc=$(Rt),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Eo().getBaseHref(this._doc)}onPopState(r){let o=Eo().getGlobalEventTarget(this._doc,"window");return o.addEventListener("popstate",r,!1),()=>o.removeEventListener("popstate",r)}onHashChange(r){let o=Eo().getGlobalEventTarget(this._doc,"window");return o.addEventListener("hashchange",r,!1),()=>o.removeEventListener("hashchange",r)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(r){this._location.pathname=r}pushState(r,o,i){this._history.pushState(r,o,i)}replaceState(r,o,i){this._history.replaceState(r,o,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(r=0){this._history.go(r)}getState(){return this._history.state}};e.\u0275fac=function(o){return new(o||e)},e.\u0275prov=ee({token:e,factory:()=>(()=>new e)(),providedIn:"platform"});let t=e;return t})();function cf(t,e){if(t.length==0)return e;if(e.length==0)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,n==2?t+e.substring(1):n==1?t+e:t+"/"+e}function Ny(t){let e=t.match(/#|\?|$/),n=e&&e.index||t.length,r=n-(t[n-1]==="/"?1:0);return t.slice(0,r)+t.slice(n)}function Ir(t){return t&&t[0]!=="?"?"?"+t:t}var Io=(()=>{let e=class e{historyGo(r){throw new Error("Not implemented")}};e.\u0275fac=function(o){return new(o||e)},e.\u0275prov=ee({token:e,factory:()=>(()=>$(uf))(),providedIn:"root"});let t=e;return t})(),Ly=new ce("appBaseHref"),uf=(()=>{let e=class e extends Io{constructor(r,o){super(),this._platformLocation=r,this._removeListenerFns=[],this._baseHref=o??this._platformLocation.getBaseHrefFromDOM()??$(Rt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}prepareExternalUrl(r){return cf(this._baseHref,r)}path(r=!1){let o=this._platformLocation.pathname+Ir(this._platformLocation.search),i=this._platformLocation.hash;return i&&r?`${o}${i}`:o}pushState(r,o,i,s){let a=this.prepareExternalUrl(i+Ir(s));this._platformLocation.pushState(r,o,a)}replaceState(r,o,i,s){let a=this.prepareExternalUrl(i+Ir(s));this._platformLocation.replaceState(r,o,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){this._platformLocation.historyGo?.(r)}};e.\u0275fac=function(o){return new(o||e)(J(af),J(Ly,8))},e.\u0275prov=ee({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),jy=(()=>{let e=class e extends Io{constructor(r,o){super(),this._platformLocation=r,this._baseHref="",this._removeListenerFns=[],o!=null&&(this._baseHref=o)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}path(r=!1){let o=this._platformLocation.hash;return o==null&&(o="#"),o.length>0?o.substring(1):o}prepareExternalUrl(r){let o=cf(this._baseHref,r);return o.length>0?"#"+o:o}pushState(r,o,i,s){let a=this.prepareExternalUrl(i+Ir(s));a.length==0&&(a=this._platformLocation.pathname),this._platformLocation.pushState(r,o,a)}replaceState(r,o,i,s){let a=this.prepareExternalUrl(i+Ir(s));a.length==0&&(a=this._platformLocation.pathname),this._platformLocation.replaceState(r,o,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){this._platformLocation.historyGo?.(r)}};e.\u0275fac=function(o){return new(o||e)(J(af),J(Ly,8))},e.\u0275prov=ee({token:e,factory:e.\u0275fac});let t=e;return t})(),Ti=(()=>{let e=class e{constructor(r){this._subject=new Me,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=r;let o=this._locationStrategy.getBaseHref();this._basePath=IA(Ny(Oy(o))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(r=!1){return this.normalize(this._locationStrategy.path(r))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(r,o=""){return this.path()==this.normalize(r+Ir(o))}normalize(r){return e.stripTrailingSlash(EA(this._basePath,Oy(r)))}prepareExternalUrl(r){return r&&r[0]!=="/"&&(r="/"+r),this._locationStrategy.prepareExternalUrl(r)}go(r,o="",i=null){this._locationStrategy.pushState(i,"",r,o),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+Ir(o)),i)}replaceState(r,o="",i=null){this._locationStrategy.replaceState(i,"",r,o),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+Ir(o)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(r=0){this._locationStrategy.historyGo?.(r)}onUrlChange(r){return this._urlChangeListeners.push(r),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(o=>{this._notifyUrlChangeListeners(o.url,o.state)})),()=>{let o=this._urlChangeListeners.indexOf(r);this._urlChangeListeners.splice(o,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(r="",o){this._urlChangeListeners.forEach(i=>i(r,o))}subscribe(r,o,i){return this._subject.subscribe({next:r,error:o,complete:i})}};e.normalizeQueryParams=Ir,e.joinWithSlash=cf,e.stripTrailingSlash=Ny,e.\u0275fac=function(o){return new(o||e)(J(Io))},e.\u0275prov=ee({token:e,factory:()=>TA(),providedIn:"root"});let t=e;return t})();function TA(){return new Ti(J(Io))}function EA(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function Oy(t){return t.replace(/\/index.html$/,"")}function IA(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}function By(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let r=n.indexOf("="),[o,i]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(o.trim()===e)return decodeURIComponent(i)}return null}var tf=class{constructor(e,n,r,o){this.$implicit=e,this.ngForOf=n,this.index=r,this.count=o}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},Yr=(()=>{let e=class e{set ngForOf(r){this._ngForOf=r,this._ngForOfDirty=!0}set ngForTrackBy(r){this._trackByFn=r}get ngForTrackBy(){return this._trackByFn}constructor(r,o,i){this._viewContainer=r,this._template=o,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(r){r&&(this._template=r)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let r=this._ngForOf;if(!this._differ&&r)if(!1)try{}catch{}else this._differ=this._differs.find(r).create(this.ngForTrackBy)}if(this._differ){let r=this._differ.diff(this._ngForOf);r&&this._applyChanges(r)}}_applyChanges(r){let o=this._viewContainer;r.forEachOperation((i,s,a)=>{if(i.previousIndex==null)o.createEmbeddedView(this._template,new tf(i.item,this._ngForOf,-1,-1),a===null?void 0:a);else if(a==null)o.remove(s===null?void 0:s);else if(s!==null){let c=o.get(s);o.move(c,a),Ry(c,i)}});for(let i=0,s=o.length;i<s;i++){let c=o.get(i).context;c.index=i,c.count=s,c.ngForOf=this._ngForOf}r.forEachIdentityChange(i=>{let s=o.get(i.currentIndex);Ry(s,i)})}static ngTemplateContextGuard(r,o){return!0}};e.\u0275fac=function(o){return new(o||e)(Et(Zr),Et(Co),Et(Oh))},e.\u0275dir=yi({type:e,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0});let t=e;return t})();function Ry(t,e){t.context.$implicit=e.item}var Ei=(()=>{let e=class e{constructor(r,o){this._viewContainer=r,this._context=new nf,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=o}set ngIf(r){this._context.$implicit=this._context.ngIf=r,this._updateView()}set ngIfThen(r){ky("ngIfThen",r),this._thenTemplateRef=r,this._thenViewRef=null,this._updateView()}set ngIfElse(r){ky("ngIfElse",r),this._elseTemplateRef=r,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(r,o){return!0}};e.\u0275fac=function(o){return new(o||e)(Et(Zr),Et(Co))},e.\u0275dir=yi({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0});let t=e;return t})(),nf=class{constructor(){this.$implicit=null,this.ngIf=null}};function ky(t,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${t} must be a TemplateRef, but received '${Tt(e)}'.`)}var At=(()=>{let e=class e{};e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=Ut({type:e}),e.\u0275inj=Bt({});let t=e;return t})(),Uy="browser",AA="server";function lf(t){return t===AA}var qy=(()=>{let e=class e{};e.\u0275prov=ee({token:e,providedIn:"root",factory:()=>new rf(J(Rt),window)});let t=e;return t})(),rf=class{constructor(e,n){this.document=e,this.window=n,this.offset=()=>[0,0]}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;let n=MA(this.document,e);n&&(this.scrollToElement(n),n.focus())}setHistoryScrollRestoration(e){this.supportsScrolling()&&(this.window.history.scrollRestoration=e)}scrollToElement(e){let n=e.getBoundingClientRect(),r=n.left+this.window.pageXOffset,o=n.top+this.window.pageYOffset,i=this.offset();this.window.scrollTo(r-i[0],o-i[1])}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}};function MA(t,e){let n=t.getElementById(e)||t.getElementsByName(e)[0];if(n)return n;if(typeof t.createTreeWalker=="function"&&t.body&&typeof t.body.attachShadow=="function"){let r=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT),o=r.currentNode;for(;o;){let i=o.shadowRoot;if(i){let s=i.getElementById(e)||i.querySelector(`[name="${e}"]`);if(s)return s}o=r.nextNode()}}return null}var yu=class{};var ff=class extends vu{constructor(){super(...arguments),this.supportsDOMEvents=!0}},pf=class t extends ff{static makeCurrent(){Py(new t)}onAndCancel(e,n,r){return e.addEventListener(n,r),()=>{e.removeEventListener(n,r)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=OA();return n==null?null:RA(n)}resetBaseElement(){Xs=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return By(document.cookie,e)}},Xs=null;function OA(){return Xs=Xs||document.querySelector("base"),Xs?Xs.getAttribute("href"):null}function RA(t){return new URL(t,document.baseURI).pathname}var mf=class{addToWindow(e){rn.getAngularTestability=(r,o=!0)=>{let i=e.findTestabilityInTree(r,o);if(i==null)throw new X(5103,!1);return i},rn.getAllAngularTestabilities=()=>e.getAllTestabilities(),rn.getAllAngularRootElements=()=>e.getAllRootElements();let n=r=>{let o=rn.getAllAngularTestabilities(),i=o.length,s=!1,a=function(c){s=s||c,i--,i==0&&r(s)};o.forEach(c=>{c.whenStable(a)})};rn.frameworkStabilizers||(rn.frameworkStabilizers=[]),rn.frameworkStabilizers.push(n)}findTestabilityInTree(e,n,r){if(n==null)return null;let o=e.getTestability(n);return o??(r?Eo().isShadowRoot(n)?this.findTestabilityInTree(e,n.host,!0):this.findTestabilityInTree(e,n.parentElement,!0):null)}},kA=(()=>{let e=class e{build(){return new XMLHttpRequest}};e.\u0275fac=function(o){return new(o||e)},e.\u0275prov=ee({token:e,factory:e.\u0275fac});let t=e;return t})(),gf=new ce("EventManagerPlugins"),Gy=(()=>{let e=class e{constructor(r,o){this._zone=o,this._eventNameToPlugin=new Map,r.forEach(i=>{i.manager=this}),this._plugins=r.slice().reverse()}addEventListener(r,o,i){return this._findPluginFor(o).addEventListener(r,o,i)}getZone(){return this._zone}_findPluginFor(r){let o=this._eventNameToPlugin.get(r);if(o)return o;if(o=this._plugins.find(s=>s.supports(r)),!o)throw new X(5101,!1);return this._eventNameToPlugin.set(r,o),o}};e.\u0275fac=function(o){return new(o||e)(J(gf),J(Be))},e.\u0275prov=ee({token:e,factory:e.\u0275fac});let t=e;return t})(),_u=class{constructor(e){this._doc=e}},df="ng-app-id",zy=(()=>{let e=class e{constructor(r,o,i,s={}){this.doc=r,this.appId=o,this.nonce=i,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=lf(s),this.resetHostNodes()}addStyles(r){for(let o of r)this.changeUsageCount(o,1)===1&&this.onStyleAdded(o)}removeStyles(r){for(let o of r)this.changeUsageCount(o,-1)<=0&&this.onStyleRemoved(o)}ngOnDestroy(){let r=this.styleNodesInDOM;r&&(r.forEach(o=>o.remove()),r.clear());for(let o of this.getAllStyles())this.onStyleRemoved(o);this.resetHostNodes()}addHost(r){this.hostNodes.add(r);for(let o of this.getAllStyles())this.addStyleToHost(r,o)}removeHost(r){this.hostNodes.delete(r)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(r){for(let o of this.hostNodes)this.addStyleToHost(o,r)}onStyleRemoved(r){let o=this.styleRef;o.get(r)?.elements?.forEach(i=>i.remove()),o.delete(r)}collectServerRenderedStyles(){let r=this.doc.head?.querySelectorAll(`style[${df}="${this.appId}"]`);if(r?.length){let o=new Map;return r.forEach(i=>{i.textContent!=null&&o.set(i.textContent,i)}),o}return null}changeUsageCount(r,o){let i=this.styleRef;if(i.has(r)){let s=i.get(r);return s.usage+=o,s.usage}return i.set(r,{usage:o,elements:[]}),o}getStyleElement(r,o){let i=this.styleNodesInDOM,s=i?.get(o);if(s?.parentNode===r)return i.delete(o),s.removeAttribute(df),s;{let a=this.doc.createElement("style");return this.nonce&&a.setAttribute("nonce",this.nonce),a.textContent=o,this.platformIsServer&&a.setAttribute(df,this.appId),r.appendChild(a),a}}addStyleToHost(r,o){let i=this.getStyleElement(r,o),s=this.styleRef,a=s.get(o)?.elements;a?a.push(i):s.set(o,{elements:[i],usage:1})}resetHostNodes(){let r=this.hostNodes;r.clear(),r.add(this.doc.head)}};e.\u0275fac=function(o){return new(o||e)(J(Rt),J(ru),J(Sh,8),J(To))},e.\u0275prov=ee({token:e,factory:e.\u0275fac});let t=e;return t})(),hf={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},yf=/%COMP%/g,Zy="%COMP%",FA=`_nghost-${Zy}`,PA=`_ngcontent-${Zy}`,VA=!0,LA=new ce("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>VA});function jA(t){return PA.replace(yf,t)}function BA(t){return FA.replace(yf,t)}function Yy(t,e){return e.map(n=>n.replace(yf,t))}var $y=(()=>{let e=class e{constructor(r,o,i,s,a,c,u,l=null){this.eventManager=r,this.sharedStylesHost=o,this.appId=i,this.removeStylesOnCompDestroy=s,this.doc=a,this.platformId=c,this.ngZone=u,this.nonce=l,this.rendererByCompId=new Map,this.platformIsServer=lf(c),this.defaultRenderer=new Ks(r,a,u,this.platformIsServer)}createRenderer(r,o){if(!r||!o)return this.defaultRenderer;this.platformIsServer&&o.encapsulation===ir.ShadowDom&&(o=V(x({},o),{encapsulation:ir.Emulated}));let i=this.getOrCreateRenderer(r,o);return i instanceof xu?i.applyToHost(r):i instanceof Js&&i.applyStyles(),i}getOrCreateRenderer(r,o){let i=this.rendererByCompId,s=i.get(o.id);if(!s){let a=this.doc,c=this.ngZone,u=this.eventManager,l=this.sharedStylesHost,d=this.removeStylesOnCompDestroy,h=this.platformIsServer;switch(o.encapsulation){case ir.Emulated:s=new xu(u,l,o,this.appId,d,a,c,h);break;case ir.ShadowDom:return new vf(u,l,r,o,a,c,this.nonce,h);default:s=new Js(u,l,o,d,a,c,h);break}i.set(o.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}};e.\u0275fac=function(o){return new(o||e)(J(Gy),J(zy),J(ru),J(LA),J(Rt),J(To),J(Be),J(Sh))},e.\u0275prov=ee({token:e,factory:e.\u0275fac});let t=e;return t})(),Ks=class{constructor(e,n,r,o){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=o,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(hf[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(Hy(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(Hy(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){e&&e.removeChild(n)}selectRootElement(e,n){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new X(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,o){if(o){n=o+":"+n;let i=hf[o];i?e.setAttributeNS(i,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){let o=hf[r];o?e.removeAttributeNS(o,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,o){o&(Sr.DashCase|Sr.Important)?e.style.setProperty(n,r,o&Sr.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&Sr.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e!=null&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r){if(typeof e=="string"&&(e=Eo().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(r))}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))===!1&&n.preventDefault()}}};function Hy(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var vf=class extends Ks{constructor(e,n,r,o,i,s,a,c){super(e,i,s,c),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let u=Yy(o.id,o.styles);for(let l of u){let d=document.createElement("style");a&&d.setAttribute("nonce",a),d.textContent=l,this.shadowRoot.appendChild(d)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(this.nodeOrShadowRoot(e),n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Js=class extends Ks{constructor(e,n,r,o,i,s,a,c){super(e,i,s,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=o,this.styles=c?Yy(c,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},xu=class extends Js{constructor(e,n,r,o,i,s,a,c){let u=o+"-"+r.id;super(e,n,r,i,s,a,c,u),this.contentAttr=jA(u),this.hostAttr=BA(u)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}},UA=(()=>{let e=class e extends _u{constructor(r){super(r)}supports(r){return!0}addEventListener(r,o,i){return r.addEventListener(o,i,!1),()=>this.removeEventListener(r,o,i)}removeEventListener(r,o,i){return r.removeEventListener(o,i)}};e.\u0275fac=function(o){return new(o||e)(J(Rt))},e.\u0275prov=ee({token:e,factory:e.\u0275fac});let t=e;return t})(),Wy=["alt","control","meta","shift"],qA={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},$A={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},HA=(()=>{let e=class e extends _u{constructor(r){super(r)}supports(r){return e.parseEventName(r)!=null}addEventListener(r,o,i){let s=e.parseEventName(o),a=e.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Eo().onAndCancel(r,s.domEventName,a))}static parseEventName(r){let o=r.toLowerCase().split("."),i=o.shift();if(o.length===0||!(i==="keydown"||i==="keyup"))return null;let s=e._normalizeKey(o.pop()),a="",c=o.indexOf("code");if(c>-1&&(o.splice(c,1),a="code."),Wy.forEach(l=>{let d=o.indexOf(l);d>-1&&(o.splice(d,1),a+=l+".")}),a+=s,o.length!=0||s.length===0)return null;let u={};return u.domEventName=i,u.fullKey=a,u}static matchEventFullKeyCode(r,o){let i=qA[r.key]||r.key,s="";return o.indexOf("code.")>-1&&(i=r.code,s="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),Wy.forEach(a=>{if(a!==i){let c=$A[a];c(r)&&(s+=a+".")}}),s+=i,s===o)}static eventCallback(r,o,i){return s=>{e.matchEventFullKeyCode(s,r)&&i.runGuarded(()=>o(s))}}static _normalizeKey(r){return r==="esc"?"escape":r}};e.\u0275fac=function(o){return new(o||e)(J(Rt))},e.\u0275prov=ee({token:e,factory:e.\u0275fac});let t=e;return t})();function WA(){pf.makeCurrent()}function GA(){return new cr}function zA(){return Ev(document),document}var ZA=[{provide:To,useValue:Uy},{provide:Dh,useValue:WA,multi:!0},{provide:Rt,useFactory:zA,deps:[]}],Qy=Jh(Iy,"browser",ZA),YA=new ce(""),QA=[{provide:Ys,useClass:mf,deps:[]},{provide:Yh,useClass:pu,deps:[Be,mu,Ys]},{provide:pu,useClass:pu,deps:[Be,mu,Ys]}],XA=[{provide:nu,useValue:"root"},{provide:cr,useFactory:GA,deps:[]},{provide:gf,useClass:UA,multi:!0,deps:[Rt,Be,To]},{provide:gf,useClass:HA,multi:!0,deps:[Rt]},$y,zy,Gy,{provide:Bs,useExisting:$y},{provide:yu,useClass:kA,deps:[]},[]],Xy=(()=>{let e=class e{constructor(r){}static withServerTransition(r){return{ngModule:e,providers:[{provide:ru,useValue:r.appId}]}}};e.\u0275fac=function(o){return new(o||e)(J(YA,12))},e.\u0275mod=Ut({type:e}),e.\u0275inj=Bt({providers:[...XA,...QA],imports:[At,Ay]});let t=e;return t})();function KA(){return new _f(J(Rt))}var _f=(()=>{let e=class e{constructor(r){this._doc=r}getTitle(){return this._doc.title}setTitle(r){this._doc.title=r||""}};e.\u0275fac=function(o){return new(o||e)(J(Rt))},e.\u0275prov=ee({token:e,factory:function(o){let i=null;return o?i=new o:i=KA(),i},providedIn:"root"});let t=e;return t})();var ue="primary",pa=Symbol("RouteTitle"),Df=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function Oi(t){return new Df(t)}function eM(t,e,n){let r=n.path.split("/");if(r.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||r.length<t.length))return null;let o={};for(let i=0;i<r.length;i++){let s=r[i],a=t[i];if(s.startsWith(":"))o[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:o}}function tM(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!lr(t[n],e[n]))return!1;return!0}function lr(t,e){let n=t?Sf(t):void 0,r=e?Sf(e):void 0;if(!n||!r||n.length!=r.length)return!1;let o;for(let i=0;i<n.length;i++)if(o=n[i],!a_(t[o],e[o]))return!1;return!0}function Sf(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function a_(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),r=[...e].sort();return n.every((o,i)=>r[i]===o)}else return t===e}function c_(t){return t.length>0?t[t.length-1]:null}function Jr(t){return Ql(t)?t:Di(t)?et(Promise.resolve(t)):ae(t)}var nM={exact:l_,subset:d_},u_={exact:rM,subset:oM,ignored:()=>!0};function Jy(t,e,n){return nM[n.paths](t.root,e.root,n.matrixParams)&&u_[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function rM(t,e){return lr(t,e)}function l_(t,e,n){if(!Mo(t.segments,e.segments)||!Cu(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!t.children[r]||!l_(t.children[r],e.children[r],n))return!1;return!0}function oM(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>a_(t[n],e[n]))}function d_(t,e,n){return h_(t,e,e.segments,n)}function h_(t,e,n,r){if(t.segments.length>n.length){let o=t.segments.slice(0,n.length);return!(!Mo(o,n)||e.hasChildren()||!Cu(o,n,r))}else if(t.segments.length===n.length){if(!Mo(t.segments,n)||!Cu(t.segments,n,r))return!1;for(let o in e.children)if(!t.children[o]||!d_(t.children[o],e.children[o],r))return!1;return!0}else{let o=n.slice(0,t.segments.length),i=n.slice(t.segments.length);return!Mo(t.segments,o)||!Cu(t.segments,o,r)||!t.children[ue]?!1:h_(t.children[ue],e,i,r)}}function Cu(t,e,n){return e.every((r,o)=>u_[n](t[o].parameters,r.parameters))}var Qr=class{constructor(e=new ke([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Oi(this.queryParams)),this._queryParamMap}toString(){return aM.serialize(this)}},ke=class{constructor(e,n){this.segments=e,this.children=n,this.parent=null,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Du(this)}},Ao=class{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap||(this._parameterMap=Oi(this.parameters)),this._parameterMap}toString(){return p_(this)}};function iM(t,e){return Mo(t,e)&&t.every((n,r)=>lr(n.parameters,e[r].parameters))}function Mo(t,e){return t.length!==e.length?!1:t.every((n,r)=>n.path===e[r].path)}function sM(t,e){let n=[];return Object.entries(t.children).forEach(([r,o])=>{r===ue&&(n=n.concat(e(o,r)))}),Object.entries(t.children).forEach(([r,o])=>{r!==ue&&(n=n.concat(e(o,r)))}),n}var ma=(()=>{let e=class e{};e.\u0275fac=function(o){return new(o||e)},e.\u0275prov=ee({token:e,factory:()=>(()=>new sa)(),providedIn:"root"});let t=e;return t})(),sa=class{parse(e){let n=new Ef(e);return new Qr(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${ea(e.root,!0)}`,r=lM(e.queryParams),o=typeof e.fragment=="string"?`#${cM(e.fragment)}`:"";return`${n}${r}${o}`}},aM=new sa;function Du(t){return t.segments.map(e=>p_(e)).join("/")}function ea(t,e){if(!t.hasChildren())return Du(t);if(e){let n=t.children[ue]?ea(t.children[ue],!1):"",r=[];return Object.entries(t.children).forEach(([o,i])=>{o!==ue&&r.push(`${o}:${ea(i,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=sM(t,(r,o)=>o===ue?[ea(t.children[ue],!1)]:[`${o}:${ea(r,!1)}`]);return Object.keys(t.children).length===1&&t.children[ue]!=null?`${Du(t)}/${n[0]}`:`${Du(t)}/(${n.join("//")})`}}function f_(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function wu(t){return f_(t).replace(/%3B/gi,";")}function cM(t){return encodeURI(t)}function Tf(t){return f_(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Su(t){return decodeURIComponent(t)}function e_(t){return Su(t.replace(/\+/g,"%20"))}function p_(t){return`${Tf(t.path)}${uM(t.parameters)}`}function uM(t){return Object.keys(t).map(e=>`;${Tf(e)}=${Tf(t[e])}`).join("")}function lM(t){let e=Object.keys(t).map(n=>{let r=t[n];return Array.isArray(r)?r.map(o=>`${wu(n)}=${wu(o)}`).join("&"):`${wu(n)}=${wu(r)}`}).filter(n=>!!n);return e.length?`?${e.join("&")}`:""}var dM=/^[^\/()?;#]+/;function xf(t){let e=t.match(dM);return e?e[0]:""}var hM=/^[^\/()?;=#]+/;function fM(t){let e=t.match(hM);return e?e[0]:""}var pM=/^[^=?&#]+/;function mM(t){let e=t.match(pM);return e?e[0]:""}var gM=/^[^&#]+/;function vM(t){let e=t.match(gM);return e?e[0]:""}var Ef=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new ke([],{}):new ke([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[ue]=new ke(e,n)),r}parseSegment(){let e=xf(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new X(4009,!1);return this.capture(e),new Ao(Su(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=fM(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let o=xf(this.remaining);o&&(r=o,this.capture(r))}e[Su(n)]=Su(r)}parseQueryParam(e){let n=mM(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let s=vM(this.remaining);s&&(r=s,this.capture(r))}let o=e_(n),i=e_(r);if(e.hasOwnProperty(o)){let s=e[o];Array.isArray(s)||(s=[s],e[o]=s),s.push(i)}else e[o]=i}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=xf(this.remaining),o=this.remaining[r.length];if(o!=="/"&&o!==")"&&o!==";")throw new X(4010,!1);let i;r.indexOf(":")>-1?(i=r.slice(0,r.indexOf(":")),this.capture(i),this.capture(":")):e&&(i=ue);let s=this.parseChildren();n[i]=Object.keys(s).length===1?s[ue]:new ke([],s),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new X(4011,!1)}};function m_(t){return t.segments.length>0?new ke([],{[ue]:t}):t}function g_(t){let e={};for(let r of Object.keys(t.children)){let o=t.children[r],i=g_(o);if(r===ue&&i.segments.length===0&&i.hasChildren())for(let[s,a]of Object.entries(i.children))e[s]=a;else(i.segments.length>0||i.hasChildren())&&(e[r]=i)}let n=new ke(t.segments,e);return yM(n)}function yM(t){if(t.numberOfChildren===1&&t.children[ue]){let e=t.children[ue];return new ke(t.segments.concat(e.segments),e.children)}return t}function Ri(t){return t instanceof Qr}function _M(t,e,n=null,r=null){let o=v_(t);return y_(o,e,n,r)}function v_(t){let e;function n(i){let s={};for(let c of i.children){let u=n(c);s[c.outlet]=u}let a=new ke(i.url,s);return i===t&&(e=a),a}let r=n(t.root),o=m_(r);return e??o}function y_(t,e,n,r){let o=t;for(;o.parent;)o=o.parent;if(e.length===0)return wf(o,o,o,n,r);let i=xM(e);if(i.toRoot())return wf(o,o,new ke([],{}),n,r);let s=wM(i,o,t),a=s.processChildren?ra(s.segmentGroup,s.index,i.commands):x_(s.segmentGroup,s.index,i.commands);return wf(o,s.segmentGroup,a,n,r)}function Tu(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function aa(t){return typeof t=="object"&&t!=null&&t.outlets}function wf(t,e,n,r,o){let i={};r&&Object.entries(r).forEach(([c,u])=>{i[c]=Array.isArray(u)?u.map(l=>`${l}`):`${u}`});let s;t===e?s=n:s=__(t,e,n);let a=m_(g_(s));return new Qr(a,i,o)}function __(t,e,n){let r={};return Object.entries(t.children).forEach(([o,i])=>{i===e?r[o]=n:r[o]=__(i,e,n)}),new ke(t.segments,r)}var Eu=class{constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&Tu(r[0]))throw new X(4003,!1);let o=r.find(aa);if(o&&o!==c_(r))throw new X(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function xM(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new Eu(!0,0,t);let e=0,n=!1,r=t.reduce((o,i,s)=>{if(typeof i=="object"&&i!=null){if(i.outlets){let a={};return Object.entries(i.outlets).forEach(([c,u])=>{a[c]=typeof u=="string"?u.split("/"):u}),[...o,{outlets:a}]}if(i.segmentPath)return[...o,i.segmentPath]}return typeof i!="string"?[...o,i]:s===0?(i.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?n=!0:a===".."?e++:a!=""&&o.push(a))}),o):[...o,i]},[]);return new Eu(n,e,r)}var Mi=class{constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}};function wM(t,e,n){if(t.isAbsolute)return new Mi(e,!0,0);if(!n)return new Mi(e,!1,NaN);if(n.parent===null)return new Mi(n,!0,0);let r=Tu(t.commands[0])?0:1,o=n.segments.length-1+r;return bM(n,o,t.numberOfDoubleDots)}function bM(t,e,n){let r=t,o=e,i=n;for(;i>o;){if(i-=o,r=r.parent,!r)throw new X(4005,!1);o=r.segments.length}return new Mi(r,!1,o-i)}function CM(t){return aa(t[0])?t[0].outlets:{[ue]:t}}function x_(t,e,n){if(t||(t=new ke([],{})),t.segments.length===0&&t.hasChildren())return ra(t,e,n);let r=DM(t,e,n),o=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){let i=new ke(t.segments.slice(0,r.pathIndex),{});return i.children[ue]=new ke(t.segments.slice(r.pathIndex),t.children),ra(i,0,o)}else return r.match&&o.length===0?new ke(t.segments,{}):r.match&&!t.hasChildren()?If(t,e,n):r.match?ra(t,0,o):If(t,e,n)}function ra(t,e,n){if(n.length===0)return new ke(t.segments,{});{let r=CM(n),o={};if(Object.keys(r).some(i=>i!==ue)&&t.children[ue]&&t.numberOfChildren===1&&t.children[ue].segments.length===0){let i=ra(t.children[ue],e,n);return new ke(t.segments,i.children)}return Object.entries(r).forEach(([i,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(o[i]=x_(t.children[i],e,s))}),Object.entries(t.children).forEach(([i,s])=>{r[i]===void 0&&(o[i]=s)}),new ke(t.segments,o)}}function DM(t,e,n){let r=0,o=e,i={match:!1,pathIndex:0,commandIndex:0};for(;o<t.segments.length;){if(r>=n.length)return i;let s=t.segments[o],a=n[r];if(aa(a))break;let c=`${a}`,u=r<n.length-1?n[r+1]:null;if(o>0&&c===void 0)break;if(c&&u&&typeof u=="object"&&u.outlets===void 0){if(!n_(c,u,s))return i;r+=2}else{if(!n_(c,{},s))return i;r++}o++}return{match:!0,pathIndex:o,commandIndex:r}}function If(t,e,n){let r=t.segments.slice(0,e),o=0;for(;o<n.length;){let i=n[o];if(aa(i)){let c=SM(i.outlets);return new ke(r,c)}if(o===0&&Tu(n[0])){let c=t.segments[e];r.push(new Ao(c.path,t_(n[0]))),o++;continue}let s=aa(i)?i.outlets[ue]:`${i}`,a=o<n.length-1?n[o+1]:null;s&&a&&Tu(a)?(r.push(new Ao(s,t_(a))),o+=2):(r.push(new Ao(s,{})),o++)}return new ke(r,{})}function SM(t){let e={};return Object.entries(t).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[n]=If(new ke([],{}),0,r))}),e}function t_(t){let e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function n_(t,e,n){return t==n.path&&lr(e,n.parameters)}var oa="imperative",bn=class{constructor(e,n){this.id=e,this.url=n}},ki=class extends bn{constructor(e,n,r="imperative",o=null){super(e,n),this.type=0,this.navigationTrigger=r,this.restoredState=o}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Ar=class extends bn{constructor(e,n,r){super(e,n),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Xr=class extends bn{constructor(e,n,r,o){super(e,n),this.reason=r,this.code=o,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Kr=class extends bn{constructor(e,n,r,o){super(e,n),this.reason=r,this.code=o,this.type=16}},ca=class extends bn{constructor(e,n,r,o){super(e,n),this.error=r,this.target=o,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Iu=class extends bn{constructor(e,n,r,o){super(e,n),this.urlAfterRedirects=r,this.state=o,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Af=class extends bn{constructor(e,n,r,o){super(e,n),this.urlAfterRedirects=r,this.state=o,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Mf=class extends bn{constructor(e,n,r,o,i){super(e,n),this.urlAfterRedirects=r,this.state=o,this.shouldActivate=i,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Nf=class extends bn{constructor(e,n,r,o){super(e,n),this.urlAfterRedirects=r,this.state=o,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Of=class extends bn{constructor(e,n,r,o){super(e,n),this.urlAfterRedirects=r,this.state=o,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Rf=class{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},kf=class{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Ff=class{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Pf=class{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Vf=class{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Lf=class{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Au=class{constructor(e,n,r){this.routerEvent=e,this.position=n,this.anchor=r,this.type=15}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},ua=class{},la=class{constructor(e){this.url=e}};var jf=class{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new ga,this.attachRef=null}},ga=(()=>{let e=class e{constructor(){this.contexts=new Map}onChildOutletCreated(r,o){let i=this.getOrCreateContext(r);i.outlet=o,this.contexts.set(r,i)}onChildOutletDestroyed(r){let o=this.getContext(r);o&&(o.outlet=null,o.attachRef=null)}onOutletDeactivated(){let r=this.contexts;return this.contexts=new Map,r}onOutletReAttached(r){this.contexts=r}getOrCreateContext(r){let o=this.getContext(r);return o||(o=new jf,this.contexts.set(r,o)),o}getContext(r){return this.contexts.get(r)||null}};e.\u0275fac=function(o){return new(o||e)},e.\u0275prov=ee({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Mu=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=Bf(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){let n=Bf(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=Uf(e,this._root);return n.length<2?[]:n[n.length-2].children.map(o=>o.value).filter(o=>o!==e)}pathFromRoot(e){return Uf(e,this._root).map(n=>n.value)}};function Bf(t,e){if(t===e.value)return e;for(let n of e.children){let r=Bf(t,n);if(r)return r}return null}function Uf(t,e){if(t===e.value)return[e];for(let n of e.children){let r=Uf(t,n);if(r.length)return r.unshift(e),r}return[]}var cn=class{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function Ai(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var Nu=class extends Mu{constructor(e,n){super(e),this.snapshot=n,Xf(this,e)}toString(){return this.snapshot.toString()}};function w_(t,e){let n=TM(t,e),r=new xt([new Ao("",{})]),o=new xt({}),i=new xt({}),s=new xt({}),a=new xt(""),c=new Fi(r,o,s,a,i,ue,e,n.root);return c.snapshot=n.root,new Nu(new cn(c,[]),n)}function TM(t,e){let n={},r={},o={},i="",s=new da([],n,o,i,r,ue,e,null,{});return new Ou("",new cn(s,[]))}var Fi=class{constructor(e,n,r,o,i,s,a,c){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=o,this.dataSubject=i,this.outlet=s,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(be(u=>u[pa]))??ae(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=o,this.data=i}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(be(e=>Oi(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(be(e=>Oi(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Qf(t,e,n="emptyOnly"){let r,{routeConfig:o}=t;return e!==null&&(n==="always"||o?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:x(x({},e.params),t.params),data:x(x({},e.data),t.data),resolve:x(x(x(x({},t.data),e.data),o?.data),t._resolvedData)}:r={params:x({},t.params),data:x({},t.data),resolve:x(x({},t.data),t._resolvedData??{})},o&&C_(o)&&(r.resolve[pa]=o.title),r}var da=class{get title(){return this.data?.[pa]}constructor(e,n,r,o,i,s,a,c,u){this.url=e,this.params=n,this.queryParams=r,this.fragment=o,this.data=i,this.outlet=s,this.component=a,this.routeConfig=c,this._resolve=u}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Oi(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Oi(this.queryParams)),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},Ou=class extends Mu{constructor(e,n){super(n),this.url=e,Xf(this,n)}toString(){return b_(this._root)}};function Xf(t,e){e.value._routerState=t,e.children.forEach(n=>Xf(t,n))}function b_(t){let e=t.children.length>0?` { ${t.children.map(b_).join(", ")} } `:"";return`${t.value}${e}`}function bf(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,lr(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),lr(e.params,n.params)||t.paramsSubject.next(n.params),tM(e.url,n.url)||t.urlSubject.next(n.url),lr(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function qf(t,e){let n=lr(t.params,e.params)&&iM(t.url,e.url),r=!t.parent!=!e.parent;return n&&!r&&(!t.parent||qf(t.parent,e.parent))}function C_(t){return typeof t.title=="string"||t.title===null}var Kf=(()=>{let e=class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=ue,this.activateEvents=new Me,this.deactivateEvents=new Me,this.attachEvents=new Me,this.detachEvents=new Me,this.parentContexts=$(ga),this.location=$(Zr),this.changeDetector=$(Er),this.environmentInjector=$(sn),this.inputBinder=$(Vu,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(r){if(r.name){let{firstChange:o,previousValue:i}=r.name;if(o)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(r){return this.parentContexts.getContext(r)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let r=this.parentContexts.getContext(this.name);r?.route&&(r.attachRef?this.attach(r.attachRef,r.route):this.activateWith(r.route,r.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new X(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new X(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new X(4012,!1);this.location.detach();let r=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(r.instance),r}attach(r,o){this.activated=r,this._activatedRoute=o,this.location.insert(r.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(r.instance)}deactivate(){if(this.activated){let r=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(r)}}activateWith(r,o){if(this.isActivated)throw new X(4013,!1);this._activatedRoute=r;let i=this.location,a=r.snapshot.component,c=this.parentContexts.getOrCreateContext(this.name).children,u=new $f(r,c,i.injector);this.activated=i.createComponent(a,{index:i.length,injector:u,environmentInjector:o??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};e.\u0275fac=function(o){return new(o||e)},e.\u0275dir=yi({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Gs]});let t=e;return t})(),$f=class{constructor(e,n,r){this.route=e,this.childContexts=n,this.parent=r}get(e,n){return e===Fi?this.route:e===ga?this.childContexts:this.parent.get(e,n)}},Vu=new ce(""),r_=(()=>{let e=class e{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(r){this.unsubscribeFromRouteData(r),this.subscribeToRouteData(r)}unsubscribeFromRouteData(r){this.outletDataSubscriptions.get(r)?.unsubscribe(),this.outletDataSubscriptions.delete(r)}subscribeToRouteData(r){let{activatedRoute:o}=r,i=Es([o.queryParams,o.params,o.data]).pipe(vn(([s,a,c],u)=>(c=x(x(x({},s),a),c),u===0?ae(c):Promise.resolve(c)))).subscribe(s=>{if(!r.isActivated||!r.activatedComponentRef||r.activatedRoute!==o||o.component===null){this.unsubscribeFromRouteData(r);return}let a=My(o.component);if(!a){this.unsubscribeFromRouteData(r);return}for(let{templateName:c}of a.inputs)r.activatedComponentRef.setInput(c,s[c])});this.outletDataSubscriptions.set(r,i)}};e.\u0275fac=function(o){return new(o||e)},e.\u0275prov=ee({token:e,factory:e.\u0275fac});let t=e;return t})();function EM(t,e,n){let r=ha(t,e._root,n?n._root:void 0);return new Nu(r,e)}function ha(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=e.value;let o=IM(t,e,n);return new cn(r,o)}else{if(t.shouldAttach(e.value)){let i=t.retrieve(e.value);if(i!==null){let s=i.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>ha(t,a)),s}}let r=AM(e.value),o=e.children.map(i=>ha(t,i));return new cn(r,o)}}function IM(t,e,n){return e.children.map(r=>{for(let o of n.children)if(t.shouldReuseRoute(r.value,o.value.snapshot))return ha(t,r,o);return ha(t,r)})}function AM(t){return new Fi(new xt(t.url),new xt(t.params),new xt(t.queryParams),new xt(t.fragment),new xt(t.data),t.outlet,t.component,t)}var D_="ngNavigationCancelingError";function S_(t,e){let{redirectTo:n,navigationBehaviorOptions:r}=Ri(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,o=T_(!1,0,e);return o.url=n,o.navigationBehaviorOptions=r,o}function T_(t,e,n){let r=new Error("NavigationCancelingError: "+(t||""));return r[D_]=!0,r.cancellationCode=e,n&&(r.url=n),r}function MM(t){return E_(t)&&Ri(t.url)}function E_(t){return t&&t[D_]}var NM=(()=>{let e=class e{};e.\u0275fac=function(o){return new(o||e)},e.\u0275cmp=st({type:e,selectors:[["ng-component"]],standalone:!0,features:[mt],decls:1,vars:0,template:function(o,i){o&1&&Ye(0,"router-outlet")},dependencies:[Kf],encapsulation:2});let t=e;return t})();function OM(t,e){return t.providers&&!t._injector&&(t._injector=lu(t.providers,e,`Route: ${t.path}`)),t._injector??e}function Jf(t){let e=t.children&&t.children.map(Jf),n=e?V(x({},t),{children:e}):x({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==ue&&(n.component=NM),n}function dr(t){return t.outlet||ue}function RM(t,e){let n=t.filter(r=>dr(r)===e);return n.push(...t.filter(r=>dr(r)!==e)),n}function va(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var kM=(t,e,n,r)=>be(o=>(new Hf(e,o.targetRouterState,o.currentRouterState,n,r).activate(t),o)),Hf=class{constructor(e,n,r,o,i){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=o,this.inputBindingEnabled=i}activate(e){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),bf(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){let o=Ai(n);e.children.forEach(i=>{let s=i.value.outlet;this.deactivateRoutes(i,o[s],r),delete o[s]}),Object.values(o).forEach(i=>{this.deactivateRouteAndItsChildren(i,r)})}deactivateRoutes(e,n,r){let o=e.value,i=n?n.value:null;if(o===i)if(o.component){let s=r.getContext(o.outlet);s&&this.deactivateChildRoutes(e,n,s.children)}else this.deactivateChildRoutes(e,n,r);else i&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let r=n.getContext(e.value.outlet),o=r&&e.value.component?r.children:n,i=Ai(e);for(let s of Object.keys(i))this.deactivateRouteAndItsChildren(i[s],o);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){let r=n.getContext(e.value.outlet),o=r&&e.value.component?r.children:n,i=Ai(e);for(let s of Object.keys(i))this.deactivateRouteAndItsChildren(i[s],o);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){let o=Ai(n);e.children.forEach(i=>{this.activateRoutes(i,o[i.value.outlet],r),this.forwardEvent(new Lf(i.value.snapshot))}),e.children.length&&this.forwardEvent(new Pf(e.value.snapshot))}activateRoutes(e,n,r){let o=e.value,i=n?n.value:null;if(bf(o),o===i)if(o.component){let s=r.getOrCreateContext(o.outlet);this.activateChildRoutes(e,n,s.children)}else this.activateChildRoutes(e,n,r);else if(o.component){let s=r.getOrCreateContext(o.outlet);if(this.routeReuseStrategy.shouldAttach(o.snapshot)){let a=this.routeReuseStrategy.retrieve(o.snapshot);this.routeReuseStrategy.store(o.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),bf(a.route.value),this.activateChildRoutes(e,null,s.children)}else{let a=va(o.snapshot);s.attachRef=null,s.route=o,s.injector=a,s.outlet&&s.outlet.activateWith(o,s.injector),this.activateChildRoutes(e,null,s.children)}}else this.activateChildRoutes(e,null,r)}},Ru=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Ni=class{constructor(e,n){this.component=e,this.route=n}};function FM(t,e,n){let r=t._root,o=e?e._root:null;return ta(r,o,n,[r.value])}function PM(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function Vi(t,e){let n=Symbol(),r=e.get(t,n);return r===n?typeof t=="function"&&!Cg(t)?t:e.get(t):r}function ta(t,e,n,r,o={canDeactivateChecks:[],canActivateChecks:[]}){let i=Ai(e);return t.children.forEach(s=>{VM(s,i[s.value.outlet],n,r.concat([s.value]),o),delete i[s.value.outlet]}),Object.entries(i).forEach(([s,a])=>ia(a,n.getContext(s),o)),o}function VM(t,e,n,r,o={canDeactivateChecks:[],canActivateChecks:[]}){let i=t.value,s=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(s&&i.routeConfig===s.routeConfig){let c=LM(s,i,i.routeConfig.runGuardsAndResolvers);c?o.canActivateChecks.push(new Ru(r)):(i.data=s.data,i._resolvedData=s._resolvedData),i.component?ta(t,e,a?a.children:null,r,o):ta(t,e,n,r,o),c&&a&&a.outlet&&a.outlet.isActivated&&o.canDeactivateChecks.push(new Ni(a.outlet.component,s))}else s&&ia(e,a,o),o.canActivateChecks.push(new Ru(r)),i.component?ta(t,null,a?a.children:null,r,o):ta(t,null,n,r,o);return o}function LM(t,e,n){if(typeof n=="function")return n(t,e);switch(n){case"pathParamsChange":return!Mo(t.url,e.url);case"pathParamsOrQueryParamsChange":return!Mo(t.url,e.url)||!lr(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!qf(t,e)||!lr(t.queryParams,e.queryParams);case"paramsChange":default:return!qf(t,e)}}function ia(t,e,n){let r=Ai(t),o=t.value;Object.entries(r).forEach(([i,s])=>{o.component?e?ia(s,e.children.getContext(i),n):ia(s,null,n):ia(s,e,n)}),o.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new Ni(e.outlet.component,o)):n.canDeactivateChecks.push(new Ni(null,o)):n.canDeactivateChecks.push(new Ni(null,o))}function ya(t){return typeof t=="function"}function jM(t){return typeof t=="boolean"}function BM(t){return t&&ya(t.canLoad)}function UM(t){return t&&ya(t.canActivate)}function qM(t){return t&&ya(t.canActivateChild)}function $M(t){return t&&ya(t.canDeactivate)}function HM(t){return t&&ya(t.canMatch)}function I_(t){return t instanceof Cr||t?.name==="EmptyError"}var bu=Symbol("INITIAL_VALUE");function Pi(){return vn(t=>Es(t.map(e=>e.pipe(Dr(1),td(bu)))).pipe(be(e=>{for(let n of e)if(n!==!0){if(n===bu)return bu;if(n===!1||n instanceof Qr)return n}return!0}),gn(e=>e!==bu),Dr(1)))}function WM(t,e){return ze(n=>{let{targetSnapshot:r,currentSnapshot:o,guards:{canActivateChecks:i,canDeactivateChecks:s}}=n;return s.length===0&&i.length===0?ae(V(x({},n),{guardsResult:!0})):GM(s,r,o,t).pipe(ze(a=>a&&jM(a)?zM(r,i,t,e):ae(a)),be(a=>V(x({},n),{guardsResult:a})))})}function GM(t,e,n,r){return et(t).pipe(ze(o=>KM(o.component,o.route,n,e,r)),tr(o=>o!==!0,!0))}function zM(t,e,n,r){return et(e).pipe(mo(o=>ti(YM(o.route.parent,r),ZM(o.route,r),XM(t,o.path,n),QM(t,o.route,n))),tr(o=>o!==!0,!0))}function ZM(t,e){return t!==null&&e&&e(new Vf(t)),ae(!0)}function YM(t,e){return t!==null&&e&&e(new Ff(t)),ae(!0)}function QM(t,e,n){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return ae(!0);let o=r.map(i=>vc(()=>{let s=va(e)??n,a=Vi(i,s),c=UM(a)?a.canActivate(e,t):Gr(s,()=>a(e,t));return Jr(c).pipe(tr())}));return ae(o).pipe(Pi())}function XM(t,e,n){let r=e[e.length-1],i=e.slice(0,e.length-1).reverse().map(s=>PM(s)).filter(s=>s!==null).map(s=>vc(()=>{let a=s.guards.map(c=>{let u=va(s.node)??n,l=Vi(c,u),d=qM(l)?l.canActivateChild(r,t):Gr(u,()=>l(r,t));return Jr(d).pipe(tr())});return ae(a).pipe(Pi())}));return ae(i).pipe(Pi())}function KM(t,e,n,r,o){let i=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!i||i.length===0)return ae(!0);let s=i.map(a=>{let c=va(e)??o,u=Vi(a,c),l=$M(u)?u.canDeactivate(t,e,n,r):Gr(c,()=>u(t,e,n,r));return Jr(l).pipe(tr())});return ae(s).pipe(Pi())}function JM(t,e,n,r){let o=e.canLoad;if(o===void 0||o.length===0)return ae(!0);let i=o.map(s=>{let a=Vi(s,t),c=BM(a)?a.canLoad(e,n):Gr(t,()=>a(e,n));return Jr(c)});return ae(i).pipe(Pi(),A_(r))}function A_(t){return Wl(Ze(e=>{if(Ri(e))throw S_(t,e)}),be(e=>e===!0))}function eN(t,e,n,r){let o=e.canMatch;if(!o||o.length===0)return ae(!0);let i=o.map(s=>{let a=Vi(s,t),c=HM(a)?a.canMatch(e,n):Gr(t,()=>a(e,n));return Jr(c)});return ae(i).pipe(Pi(),A_(r))}var fa=class{constructor(e){this.segmentGroup=e||null}},ku=class extends Error{constructor(e){super(),this.urlTree=e}};function Ii(t){return Jo(new fa(t))}function tN(t){return Jo(new X(4e3,!1))}function nN(t){return Jo(T_(!1,3))}var Wf=class{constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let r=[],o=n.root;for(;;){if(r=r.concat(o.segments),o.numberOfChildren===0)return ae(r);if(o.numberOfChildren>1||!o.children[ue])return tN(e.redirectTo);o=o.children[ue]}}applyRedirectCommands(e,n,r){let o=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,r);if(n.startsWith("/"))throw new ku(o);return o}applyRedirectCreateUrlTree(e,n,r,o){let i=this.createSegmentGroup(e,n.root,r,o);return new Qr(i,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let r={};return Object.entries(e).forEach(([o,i])=>{if(typeof i=="string"&&i.startsWith(":")){let a=i.substring(1);r[o]=n[a]}else r[o]=i}),r}createSegmentGroup(e,n,r,o){let i=this.createSegments(e,n.segments,r,o),s={};return Object.entries(n.children).forEach(([a,c])=>{s[a]=this.createSegmentGroup(e,c,r,o)}),new ke(i,s)}createSegments(e,n,r,o){return n.map(i=>i.path.startsWith(":")?this.findPosParam(e,i,o):this.findOrReturn(i,r))}findPosParam(e,n,r){let o=r[n.path.substring(1)];if(!o)throw new X(4001,!1);return o}findOrReturn(e,n){let r=0;for(let o of n){if(o.path===e.path)return n.splice(r),o;r++}return e}},Gf={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function rN(t,e,n,r,o){let i=ep(t,e,n);return i.matched?(r=OM(e,r),eN(r,e,n,o).pipe(be(s=>s===!0?i:x({},Gf)))):ae(i)}function ep(t,e,n){if(e.path==="**")return oN(n);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?x({},Gf):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let o=(e.matcher||eM)(n,t,e);if(!o)return x({},Gf);let i={};Object.entries(o.posParams??{}).forEach(([a,c])=>{i[a]=c.path});let s=o.consumed.length>0?x(x({},i),o.consumed[o.consumed.length-1].parameters):i;return{matched:!0,consumedSegments:o.consumed,remainingSegments:n.slice(o.consumed.length),parameters:s,positionalParamSegments:o.posParams??{}}}function oN(t){return{matched:!0,parameters:t.length>0?c_(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function o_(t,e,n,r){return n.length>0&&aN(t,n,r)?{segmentGroup:new ke(e,sN(r,new ke(n,t.children))),slicedSegments:[]}:n.length===0&&cN(t,n,r)?{segmentGroup:new ke(t.segments,iN(t,e,n,r,t.children)),slicedSegments:n}:{segmentGroup:new ke(t.segments,t.children),slicedSegments:n}}function iN(t,e,n,r,o){let i={};for(let s of r)if(Lu(t,n,s)&&!o[dr(s)]){let a=new ke([],{});i[dr(s)]=a}return x(x({},o),i)}function sN(t,e){let n={};n[ue]=e;for(let r of t)if(r.path===""&&dr(r)!==ue){let o=new ke([],{});n[dr(r)]=o}return n}function aN(t,e,n){return n.some(r=>Lu(t,e,r)&&dr(r)!==ue)}function cN(t,e,n){return n.some(r=>Lu(t,e,r))}function Lu(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function uN(t,e,n,r){return dr(t)!==r&&(r===ue||!Lu(e,n,t))?!1:ep(e,t,n).matched}function lN(t,e,n){return e.length===0&&!t.children[n]}var zf=class{};function dN(t,e,n,r,o,i,s="emptyOnly"){return new Zf(t,e,n,r,o,s,i).recognize()}var hN=31,Zf=class{constructor(e,n,r,o,i,s,a){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=o,this.urlTree=i,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new Wf(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new X(4002,`'${e.segmentGroup}'`)}recognize(){let e=o_(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(be(n=>{let r=new da([],Object.freeze({}),Object.freeze(x({},this.urlTree.queryParams)),this.urlTree.fragment,{},ue,this.rootComponentType,null,{}),o=new cn(r,n),i=new Ou("",o),s=_M(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,i.url=this.urlSerializer.serialize(s),this.inheritParamsAndData(i._root,null),{state:i,tree:s}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e,ue).pipe(Lr(r=>{if(r instanceof ku)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof fa?this.noMatchError(r):r}))}inheritParamsAndData(e,n){let r=e.value,o=Qf(r,n,this.paramsInheritanceStrategy);r.params=Object.freeze(o.params),r.data=Object.freeze(o.data),e.children.forEach(i=>this.inheritParamsAndData(i,r))}processSegmentGroup(e,n,r,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,n,r):this.processSegment(e,n,r,r.segments,o,!0).pipe(be(i=>i instanceof cn?[i]:[]))}processChildren(e,n,r){let o=[];for(let i of Object.keys(r.children))i==="primary"?o.unshift(i):o.push(i);return et(o).pipe(mo(i=>{let s=r.children[i],a=RM(n,i);return this.processSegmentGroup(e,a,s,i)}),ed((i,s)=>(i.push(...s),i)),jr(null),Jl(),ze(i=>{if(i===null)return Ii(r);let s=M_(i);return fN(s),ae(s)}))}processSegment(e,n,r,o,i,s){return et(n).pipe(mo(a=>this.processSegmentAgainstRoute(a._injector??e,n,a,r,o,i,s).pipe(Lr(c=>{if(c instanceof fa)return ae(null);throw c}))),tr(a=>!!a),Lr(a=>{if(I_(a))return lN(r,o,i)?ae(new zf):Ii(r);throw a}))}processSegmentAgainstRoute(e,n,r,o,i,s,a){return uN(r,o,i,s)?r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,o,r,i,s):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,o,n,r,i,s):Ii(o):Ii(o)}expandSegmentAgainstRouteUsingRedirect(e,n,r,o,i,s){let{matched:a,consumedSegments:c,positionalParamSegments:u,remainingSegments:l}=ep(n,o,i);if(!a)return Ii(n);o.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>hN&&(this.allowRedirects=!1));let d=this.applyRedirects.applyRedirectCommands(c,o.redirectTo,u);return this.applyRedirects.lineralizeSegments(o,d).pipe(ze(h=>this.processSegment(e,r,n,h.concat(l),s,!1)))}matchSegmentAgainstRoute(e,n,r,o,i){let s=rN(n,r,o,e,this.urlSerializer);return r.path==="**"&&(n.children={}),s.pipe(vn(a=>a.matched?(e=r._injector??e,this.getChildConfig(e,r,o).pipe(vn(({routes:c})=>{let u=r._loadedInjector??e,{consumedSegments:l,remainingSegments:d,parameters:h}=a,f=new da(l,h,Object.freeze(x({},this.urlTree.queryParams)),this.urlTree.fragment,mN(r),dr(r),r.component??r._loadedComponent??null,r,gN(r)),{segmentGroup:p,slicedSegments:m}=o_(n,l,d,c);if(m.length===0&&p.hasChildren())return this.processChildren(u,c,p).pipe(be(v=>v===null?null:new cn(f,v)));if(c.length===0&&m.length===0)return ae(new cn(f,[]));let g=dr(r)===i;return this.processSegment(u,c,p,m,g?ue:i,!0).pipe(be(v=>new cn(f,v instanceof cn?[v]:[])))}))):Ii(n)))}getChildConfig(e,n,r){return n.children?ae({routes:n.children,injector:e}):n.loadChildren?n._loadedRoutes!==void 0?ae({routes:n._loadedRoutes,injector:n._loadedInjector}):JM(e,n,r,this.urlSerializer).pipe(ze(o=>o?this.configLoader.loadChildren(e,n).pipe(Ze(i=>{n._loadedRoutes=i.routes,n._loadedInjector=i.injector})):nN(n))):ae({routes:[],injector:e})}};function fN(t){t.sort((e,n)=>e.value.outlet===ue?-1:n.value.outlet===ue?1:e.value.outlet.localeCompare(n.value.outlet))}function pN(t){let e=t.value.routeConfig;return e&&e.path===""}function M_(t){let e=[],n=new Set;for(let r of t){if(!pN(r)){e.push(r);continue}let o=e.find(i=>r.value.routeConfig===i.value.routeConfig);o!==void 0?(o.children.push(...r.children),n.add(o)):e.push(r)}for(let r of n){let o=M_(r.children);e.push(new cn(r.value,o))}return e.filter(r=>!n.has(r))}function mN(t){return t.data||{}}function gN(t){return t.resolve||{}}function vN(t,e,n,r,o,i){return ze(s=>dN(t,e,n,r,s.extractedUrl,o,i).pipe(be(({state:a,tree:c})=>V(x({},s),{targetSnapshot:a,urlAfterRedirects:c}))))}function yN(t,e){return ze(n=>{let{targetSnapshot:r,guards:{canActivateChecks:o}}=n;if(!o.length)return ae(n);let i=new Set(o.map(c=>c.route)),s=new Set;for(let c of i)if(!s.has(c))for(let u of N_(c))s.add(u);let a=0;return et(s).pipe(mo(c=>i.has(c)?_N(c,r,t,e):(c.data=Qf(c,c.parent,t).resolve,ae(void 0))),Ze(()=>a++),ni(1),ze(c=>a===s.size?ae(n):mn))})}function N_(t){let e=t.children.map(n=>N_(n)).flat();return[t,...e]}function _N(t,e,n,r){let o=t.routeConfig,i=t._resolve;return o?.title!==void 0&&!C_(o)&&(i[pa]=o.title),xN(i,t,e,r).pipe(be(s=>(t._resolvedData=s,t.data=Qf(t,t.parent,n).resolve,null)))}function xN(t,e,n,r){let o=Sf(t);if(o.length===0)return ae({});let i={};return et(o).pipe(ze(s=>wN(t[s],e,n,r).pipe(tr(),Ze(a=>{i[s]=a}))),ni(1),Kl(i),Lr(s=>I_(s)?mn:Jo(s)))}function wN(t,e,n,r){let o=va(e)??r,i=Vi(t,o),s=i.resolve?i.resolve(e,n):Gr(o,()=>i(e,n));return Jr(s)}function Cf(t){return vn(e=>{let n=t(e);return n?et(n).pipe(be(()=>e)):ae(e)})}var O_=(()=>{let e=class e{buildTitle(r){let o,i=r.root;for(;i!==void 0;)o=this.getResolvedTitleForRoute(i)??o,i=i.children.find(s=>s.outlet===ue);return o}getResolvedTitleForRoute(r){return r.data[pa]}};e.\u0275fac=function(o){return new(o||e)},e.\u0275prov=ee({token:e,factory:()=>(()=>$(bN))(),providedIn:"root"});let t=e;return t})(),bN=(()=>{let e=class e extends O_{constructor(r){super(),this.title=r}updateTitle(r){let o=this.buildTitle(r);o!==void 0&&this.title.setTitle(o)}};e.\u0275fac=function(o){return new(o||e)(J(_f))},e.\u0275prov=ee({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),_a=new ce("",{providedIn:"root",factory:()=>({})}),Fu=new ce("ROUTES"),tp=(()=>{let e=class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=$(hu)}loadComponent(r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return ae(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let o=Jr(r.loadComponent()).pipe(be(R_),Ze(s=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=s}),As(()=>{this.componentLoaders.delete(r)})),i=new Qo(o,()=>new nn).pipe(Yo());return this.componentLoaders.set(r,i),i}loadChildren(r,o){if(this.childrenLoaders.get(o))return this.childrenLoaders.get(o);if(o._loadedRoutes)return ae({routes:o._loadedRoutes,injector:o._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(o);let s=CN(o,this.compiler,r,this.onLoadEndListener).pipe(As(()=>{this.childrenLoaders.delete(o)})),a=new Qo(s,()=>new nn).pipe(Yo());return this.childrenLoaders.set(o,a),a}};e.\u0275fac=function(o){return new(o||e)},e.\u0275prov=ee({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function CN(t,e,n,r){return Jr(t.loadChildren()).pipe(be(R_),ze(o=>o instanceof qs||Array.isArray(o)?ae(o):et(e.compileModuleAsync(o))),be(o=>{r&&r(t);let i,s,a=!1;return Array.isArray(o)?(s=o,a=!0):(i=o.create(n).injector,s=i.get(Fu,[],{optional:!0,self:!0}).flat()),{routes:s.map(Jf),injector:i}}))}function DN(t){return t&&typeof t=="object"&&"default"in t}function R_(t){return DN(t)?t.default:t}var np=(()=>{let e=class e{};e.\u0275fac=function(o){return new(o||e)},e.\u0275prov=ee({token:e,factory:()=>(()=>$(SN))(),providedIn:"root"});let t=e;return t})(),SN=(()=>{let e=class e{shouldProcessUrl(r){return!0}extract(r){return r}merge(r,o){return r}};e.\u0275fac=function(o){return new(o||e)},e.\u0275prov=ee({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),k_=new ce(""),F_=new ce("");function TN(t,e,n){let r=t.get(F_),o=t.get(Rt);return t.get(Be).runOutsideAngular(()=>{if(!o.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,Promise.resolve();let i,s=new Promise(u=>{i=u}),a=o.startViewTransition(()=>(i(),EN(t))),{onViewTransitionCreated:c}=r;return c&&Gr(t,()=>c({transition:a,from:e,to:n})),s})}function EN(t){return new Promise(e=>{qh(e,{injector:t})})}var rp=(()=>{let e=class e{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new nn,this.transitionAbortSubject=new nn,this.configLoader=$(tp),this.environmentInjector=$(sn),this.urlSerializer=$(ma),this.rootContexts=$(ga),this.location=$(Ti),this.inputBindingEnabled=$(Vu,{optional:!0})!==null,this.titleStrategy=$(O_),this.options=$(_a,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=$(np),this.createViewTransition=$(k_,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>ae(void 0),this.rootComponentType=null;let r=i=>this.events.next(new Rf(i)),o=i=>this.events.next(new kf(i));this.configLoader.onLoadEndListener=o,this.configLoader.onLoadStartListener=r}complete(){this.transitions?.complete()}handleNavigationRequest(r){let o=++this.navigationId;this.transitions?.next(V(x(x({},this.transitions.value),r),{id:o}))}setupNavigations(r,o,i){return this.transitions=new xt({id:0,currentUrlTree:o,currentRawUrl:o,extractedUrl:this.urlHandlingStrategy.extract(o),urlAfterRedirects:this.urlHandlingStrategy.extract(o),rawUrl:o,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:oa,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(gn(s=>s.id!==0),be(s=>V(x({},s),{extractedUrl:this.urlHandlingStrategy.extract(s.rawUrl)})),vn(s=>{this.currentTransition=s;let a=!1,c=!1;return ae(s).pipe(Ze(u=>{this.currentNavigation={id:u.id,initialUrl:u.rawUrl,extractedUrl:u.extractedUrl,trigger:u.source,extras:u.extras,previousNavigation:this.lastSuccessfulNavigation?V(x({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),vn(u=>{let l=!r.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),d=u.extras.onSameUrlNavigation??r.onSameUrlNavigation;if(!l&&d!=="reload"){let h="";return this.events.next(new Kr(u.id,this.urlSerializer.serialize(u.rawUrl),h,0)),u.resolve(null),mn}if(this.urlHandlingStrategy.shouldProcessUrl(u.rawUrl))return ae(u).pipe(vn(h=>{let f=this.transitions?.getValue();return this.events.next(new ki(h.id,this.urlSerializer.serialize(h.extractedUrl),h.source,h.restoredState)),f!==this.transitions?.getValue()?mn:Promise.resolve(h)}),vN(this.environmentInjector,this.configLoader,this.rootComponentType,r.config,this.urlSerializer,this.paramsInheritanceStrategy),Ze(h=>{s.targetSnapshot=h.targetSnapshot,s.urlAfterRedirects=h.urlAfterRedirects,this.currentNavigation=V(x({},this.currentNavigation),{finalUrl:h.urlAfterRedirects});let f=new Iu(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(f)}));if(l&&this.urlHandlingStrategy.shouldProcessUrl(u.currentRawUrl)){let{id:h,extractedUrl:f,source:p,restoredState:m,extras:g}=u,v=new ki(h,this.urlSerializer.serialize(f),p,m);this.events.next(v);let D=w_(f,this.rootComponentType).snapshot;return this.currentTransition=s=V(x({},u),{targetSnapshot:D,urlAfterRedirects:f,extras:V(x({},g),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=f,ae(s)}else{let h="";return this.events.next(new Kr(u.id,this.urlSerializer.serialize(u.extractedUrl),h,1)),u.resolve(null),mn}}),Ze(u=>{let l=new Af(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(l)}),be(u=>(this.currentTransition=s=V(x({},u),{guards:FM(u.targetSnapshot,u.currentSnapshot,this.rootContexts)}),s)),WM(this.environmentInjector,u=>this.events.next(u)),Ze(u=>{if(s.guardsResult=u.guardsResult,Ri(u.guardsResult))throw S_(this.urlSerializer,u.guardsResult);let l=new Mf(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot,!!u.guardsResult);this.events.next(l)}),gn(u=>u.guardsResult?!0:(this.cancelNavigationTransition(u,"",3),!1)),Cf(u=>{if(u.guards.canActivateChecks.length)return ae(u).pipe(Ze(l=>{let d=new Nf(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(d)}),vn(l=>{let d=!1;return ae(l).pipe(yN(this.paramsInheritanceStrategy,this.environmentInjector),Ze({next:()=>d=!0,complete:()=>{d||this.cancelNavigationTransition(l,"",2)}}))}),Ze(l=>{let d=new Of(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(d)}))}),Cf(u=>{let l=d=>{let h=[];d.routeConfig?.loadComponent&&!d.routeConfig._loadedComponent&&h.push(this.configLoader.loadComponent(d.routeConfig).pipe(Ze(f=>{d.component=f}),be(()=>{})));for(let f of d.children)h.push(...l(f));return h};return Es(l(u.targetSnapshot.root)).pipe(jr(null),Dr(1))}),Cf(()=>this.afterPreactivation()),vn(()=>{let{currentSnapshot:u,targetSnapshot:l}=s,d=this.createViewTransition?.(this.environmentInjector,u.root,l.root);return d?et(d).pipe(be(()=>s)):ae(s)}),be(u=>{let l=EM(r.routeReuseStrategy,u.targetSnapshot,u.currentRouterState);return this.currentTransition=s=V(x({},u),{targetRouterState:l}),this.currentNavigation.targetRouterState=l,s}),Ze(()=>{this.events.next(new ua)}),kM(this.rootContexts,r.routeReuseStrategy,u=>this.events.next(u),this.inputBindingEnabled),Dr(1),Ze({next:u=>{a=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Ar(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects))),this.titleStrategy?.updateTitle(u.targetRouterState.snapshot),u.resolve(!0)},complete:()=>{a=!0}}),nd(this.transitionAbortSubject.pipe(Ze(u=>{throw u}))),As(()=>{if(!a&&!c){let u="";this.cancelNavigationTransition(s,u,1)}this.currentNavigation?.id===s.id&&(this.currentNavigation=null)}),Lr(u=>{if(c=!0,E_(u))this.events.next(new Xr(s.id,this.urlSerializer.serialize(s.extractedUrl),u.message,u.cancellationCode)),MM(u)?this.events.next(new la(u.url)):s.resolve(!1);else{this.events.next(new ca(s.id,this.urlSerializer.serialize(s.extractedUrl),u,s.targetSnapshot??void 0));try{s.resolve(r.errorHandler(u))}catch(l){s.reject(l)}}return mn}))}))}cancelNavigationTransition(r,o,i){let s=new Xr(r.id,this.urlSerializer.serialize(r.extractedUrl),o,i);this.events.next(s),r.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}};e.\u0275fac=function(o){return new(o||e)},e.\u0275prov=ee({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function IN(t){return t!==oa}var AN=(()=>{let e=class e{};e.\u0275fac=function(o){return new(o||e)},e.\u0275prov=ee({token:e,factory:()=>(()=>$(MN))(),providedIn:"root"});let t=e;return t})(),Yf=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}},MN=(()=>{let e=class e extends Yf{};e.\u0275fac=(()=>{let r;return function(i){return(r||(r=eu(e)))(i||e)}})(),e.\u0275prov=ee({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),P_=(()=>{let e=class e{};e.\u0275fac=function(o){return new(o||e)},e.\u0275prov=ee({token:e,factory:()=>(()=>$(NN))(),providedIn:"root"});let t=e;return t})(),NN=(()=>{let e=class e extends P_{constructor(){super(...arguments),this.location=$(Ti),this.urlSerializer=$(ma),this.options=$(_a,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=$(np),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new Qr,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=w_(this.currentUrlTree,null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(r){return this.location.subscribe(o=>{o.type==="popstate"&&r(o.url,o.state)})}handleRouterEvent(r,o){if(r instanceof ki)this.stateMemento=this.createStateMemento();else if(r instanceof Kr)this.rawUrlTree=o.initialUrl;else if(r instanceof Iu){if(this.urlUpdateStrategy==="eager"&&!o.extras.skipLocationChange){let i=this.urlHandlingStrategy.merge(o.finalUrl,o.initialUrl);this.setBrowserUrl(i,o)}}else r instanceof ua?(this.currentUrlTree=o.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(o.finalUrl,o.initialUrl),this.routerState=o.targetRouterState,this.urlUpdateStrategy==="deferred"&&(o.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,o))):r instanceof Xr&&(r.code===3||r.code===2)?this.restoreHistory(o):r instanceof ca?this.restoreHistory(o,!0):r instanceof Ar&&(this.lastSuccessfulId=r.id,this.currentPageId=this.browserPageId)}setBrowserUrl(r,o){let i=this.urlSerializer.serialize(r);if(this.location.isCurrentPathEqualTo(i)||o.extras.replaceUrl){let s=this.browserPageId,a=x(x({},o.extras.state),this.generateNgRouterState(o.id,s));this.location.replaceState(i,"",a)}else{let s=x(x({},o.extras.state),this.generateNgRouterState(o.id,this.browserPageId+1));this.location.go(i,"",s)}}restoreHistory(r,o=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,s=this.currentPageId-i;s!==0?this.location.historyGo(s):this.currentUrlTree===r.finalUrl&&s===0&&(this.resetState(r),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(o&&this.resetState(r),this.resetUrlToCurrentUrlTree())}resetState(r){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,r.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(r,o){return this.canceledNavigationResolution==="computed"?{navigationId:r,\u0275routerPageId:o}:{navigationId:r}}};e.\u0275fac=(()=>{let r;return function(i){return(r||(r=eu(e)))(i||e)}})(),e.\u0275prov=ee({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),na=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}(na||{});function V_(t,e){t.events.pipe(gn(n=>n instanceof Ar||n instanceof Xr||n instanceof ca||n instanceof Kr),be(n=>n instanceof Ar||n instanceof Kr?na.COMPLETE:(n instanceof Xr?n.code===0||n.code===1:!1)?na.REDIRECTING:na.FAILED),gn(n=>n!==na.REDIRECTING),Dr(1)).subscribe(()=>{e()})}function ON(t){throw t}var RN={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},kN={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},No=(()=>{let e=class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.isNgZoneEnabled=!1,this.console=$(du),this.stateManager=$(P_),this.options=$(_a,{optional:!0})||{},this.pendingTasks=$(fu),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=$(rp),this.urlSerializer=$(ma),this.location=$(Ti),this.urlHandlingStrategy=$(np),this._events=new nn,this.errorHandler=this.options.errorHandler||ON,this.navigated=!1,this.routeReuseStrategy=$(AN),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=$(Fu,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!$(Vu,{optional:!0}),this.eventsSubscription=new Je,this.isNgZoneEnabled=$(Be)instanceof Be&&Be.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:r=>{this.console.warn(r)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let r=this.navigationTransitions.events.subscribe(o=>{try{let i=this.navigationTransitions.currentTransition,s=this.navigationTransitions.currentNavigation;if(i!==null&&s!==null){if(this.stateManager.handleRouterEvent(o,s),o instanceof Xr&&o.code!==0&&o.code!==1)this.navigated=!0;else if(o instanceof Ar)this.navigated=!0;else if(o instanceof la){let a=this.urlHandlingStrategy.merge(o.url,i.currentRawUrl),c={skipLocationChange:i.extras.skipLocationChange,replaceUrl:this.urlUpdateStrategy==="eager"||IN(i.source)};this.scheduleNavigation(a,oa,null,c,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}PN(o)&&this._events.next(o)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(r)}resetRootComponentType(r){this.routerState.root.component=r,this.navigationTransitions.rootComponentType=r}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),oa,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription||(this.nonRouterCurrentEntryChangeSubscription=this.stateManager.registerNonRouterCurrentEntryChangeListener((r,o)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(r,"popstate",o)},0)}))}navigateToSyncWithBrowser(r,o,i){let s={replaceUrl:!0},a=i?.navigationId?i:null;if(i){let u=x({},i);delete u.navigationId,delete u.\u0275routerPageId,Object.keys(u).length!==0&&(s.state=u)}let c=this.parseUrl(r);this.scheduleNavigation(c,o,a,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(r){this.config=r.map(Jf),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(r,o={}){let{relativeTo:i,queryParams:s,fragment:a,queryParamsHandling:c,preserveFragment:u}=o,l=u?this.currentUrlTree.fragment:a,d=null;switch(c){case"merge":d=x(x({},this.currentUrlTree.queryParams),s);break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=s||null}d!==null&&(d=this.removeEmptyProps(d));let h;try{let f=i?i.snapshot:this.routerState.snapshot.root;h=v_(f)}catch{(typeof r[0]!="string"||!r[0].startsWith("/"))&&(r=[]),h=this.currentUrlTree.root}return y_(h,r,d,l??null)}navigateByUrl(r,o={skipLocationChange:!1}){let i=Ri(r)?r:this.parseUrl(r),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,oa,null,o)}navigate(r,o={skipLocationChange:!1}){return FN(r),this.navigateByUrl(this.createUrlTree(r,o),o)}serializeUrl(r){return this.urlSerializer.serialize(r)}parseUrl(r){try{return this.urlSerializer.parse(r)}catch{return this.urlSerializer.parse("/")}}isActive(r,o){let i;if(o===!0?i=x({},RN):o===!1?i=x({},kN):i=o,Ri(r))return Jy(this.currentUrlTree,r,i);let s=this.parseUrl(r);return Jy(this.currentUrlTree,s,i)}removeEmptyProps(r){return Object.keys(r).reduce((o,i)=>{let s=r[i];return s!=null&&(o[i]=s),o},{})}scheduleNavigation(r,o,i,s,a){if(this.disposed)return Promise.resolve(!1);let c,u,l;a?(c=a.resolve,u=a.reject,l=a.promise):l=new Promise((h,f)=>{c=h,u=f});let d=this.pendingTasks.add();return V_(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(d))}),this.navigationTransitions.handleNavigationRequest({source:o,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:r,extras:s,resolve:c,reject:u,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(h=>Promise.reject(h))}};e.\u0275fac=function(o){return new(o||e)},e.\u0275prov=ee({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function FN(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new X(4008,!1)}function PN(t){return!(t instanceof ua)&&!(t instanceof la)}var Pu=class{};var VN=(()=>{let e=class e{constructor(r,o,i,s,a){this.router=r,this.injector=i,this.preloadingStrategy=s,this.loader=a}setUpPreloading(){this.subscription=this.router.events.pipe(gn(r=>r instanceof Ar),mo(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(r,o){let i=[];for(let s of o){s.providers&&!s._injector&&(s._injector=lu(s.providers,r,`Route: ${s.path}`));let a=s._injector??r,c=s._loadedInjector??a;(s.loadChildren&&!s._loadedRoutes&&s.canLoad===void 0||s.loadComponent&&!s._loadedComponent)&&i.push(this.preloadConfig(a,s)),(s.children||s._loadedRoutes)&&i.push(this.processRoutes(c,s.children??s._loadedRoutes))}return et(i).pipe(ei())}preloadConfig(r,o){return this.preloadingStrategy.preload(o,()=>{let i;o.loadChildren&&o.canLoad===void 0?i=this.loader.loadChildren(r,o):i=ae(null);let s=i.pipe(ze(a=>a===null?ae(void 0):(o._loadedRoutes=a.routes,o._loadedInjector=a.injector,this.processRoutes(a.injector??r,a.routes))));if(o.loadComponent&&!o._loadedComponent){let a=this.loader.loadComponent(o);return et([s,a]).pipe(ei())}else return s})}};e.\u0275fac=function(o){return new(o||e)(J(No),J(hu),J(sn),J(Pu),J(tp))},e.\u0275prov=ee({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),L_=new ce(""),LN=(()=>{let e=class e{constructor(r,o,i,s,a={}){this.urlSerializer=r,this.transitions=o,this.viewportScroller=i,this.zone=s,this.options=a,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},a.scrollPositionRestoration=a.scrollPositionRestoration||"disabled",a.anchorScrolling=a.anchorScrolling||"disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(r=>{r instanceof ki?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=r.navigationTrigger,this.restoredId=r.restoredState?r.restoredState.navigationId:0):r instanceof Ar?(this.lastId=r.id,this.scheduleScrollEvent(r,this.urlSerializer.parse(r.urlAfterRedirects).fragment)):r instanceof Kr&&r.code===0&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(r,this.urlSerializer.parse(r.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(r=>{r instanceof Au&&(r.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(r.position):r.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(r.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(r,o){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new Au(r,this.lastSource==="popstate"?this.store[this.restoredId]:null,o))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}};e.\u0275fac=function(o){Yv()},e.\u0275prov=ee({token:e,factory:e.\u0275fac});let t=e;return t})();function jN(t){return t.routerState.root}function xa(t,e){return{\u0275kind:t,\u0275providers:e}}function BN(){let t=$(xn);return e=>{let n=t.get(Si);if(e!==n.components[0])return;let r=t.get(No),o=t.get(j_);t.get(op)===1&&r.initialNavigation(),t.get(B_,null,le.Optional)?.setUpPreloading(),t.get(L_,null,le.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),o.closed||(o.next(),o.complete(),o.unsubscribe())}}var j_=new ce("",{factory:()=>new nn}),op=new ce("",{providedIn:"root",factory:()=>1});function UN(){return xa(2,[{provide:op,useValue:0},{provide:gu,multi:!0,deps:[xn],useFactory:e=>{let n=e.get(Vy,Promise.resolve());return()=>n.then(()=>new Promise(r=>{let o=e.get(No),i=e.get(j_);V_(o,()=>{r(!0)}),e.get(rp).afterPreactivation=()=>(r(!0),i.closed?ae(void 0):i),o.initialNavigation()}))}}])}function qN(){return xa(3,[{provide:gu,multi:!0,useFactory:()=>{let e=$(No);return()=>{e.setUpLocationChangeListener()}}},{provide:op,useValue:2}])}var B_=new ce("");function $N(t){return xa(0,[{provide:B_,useExisting:VN},{provide:Pu,useExisting:t}])}function HN(){return xa(8,[r_,{provide:Vu,useExisting:r_}])}function WN(t){let e=[{provide:k_,useValue:TN},{provide:F_,useValue:x({skipNextTransition:!!t?.skipInitialTransition},t)}];return xa(9,e)}var i_=new ce("ROUTER_FORROOT_GUARD"),GN=[Ti,{provide:ma,useClass:sa},No,ga,{provide:Fi,useFactory:jN,deps:[No]},tp,[]],U_=(()=>{let e=class e{constructor(r){}static forRoot(r,o){return{ngModule:e,providers:[GN,[],{provide:Fu,multi:!0,useValue:r},{provide:i_,useFactory:QN,deps:[[No,new tu,new wh]]},{provide:_a,useValue:o||{}},o?.useHash?ZN():YN(),zN(),o?.preloadingStrategy?$N(o.preloadingStrategy).\u0275providers:[],o?.initialNavigation?XN(o):[],o?.bindToComponentInputs?HN().\u0275providers:[],o?.enableViewTransitions?WN().\u0275providers:[],KN()]}}static forChild(r){return{ngModule:e,providers:[{provide:Fu,multi:!0,useValue:r}]}}};e.\u0275fac=function(o){return new(o||e)(J(i_,8))},e.\u0275mod=Ut({type:e}),e.\u0275inj=Bt({});let t=e;return t})();function zN(){return{provide:L_,useFactory:()=>{let t=$(qy),e=$(Be),n=$(_a),r=$(rp),o=$(ma);return n.scrollOffset&&t.setOffset(n.scrollOffset),new LN(o,r,t,e,n)}}}function ZN(){return{provide:Io,useClass:jy}}function YN(){return{provide:Io,useClass:uf}}function QN(t){return"guarded"}function XN(t){return[t.initialNavigation==="disabled"?qN().\u0275providers:[],t.initialNavigation==="enabledBlocking"?UN().\u0275providers:[]]}var s_=new ce("");function KN(){return[{provide:s_,useFactory:BN},{provide:Xh,multi:!0,useExisting:s_}]}var e1={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},j3=V(x({},e1),{"[class.ng-submitted]":"isSubmitted"});var q_=new ce("CallSetDisabledState",{providedIn:"root",factory:()=>ip}),ip="always";var t1=(()=>{let e=class e{};e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=Ut({type:e}),e.\u0275inj=Bt({});let t=e;return t})();var n1=new ce("NgModelWithFormControlWarning");var $_=(()=>{let e=class e{};e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=Ut({type:e}),e.\u0275inj=Bt({imports:[t1]});let t=e;return t})();var H_=(()=>{let e=class e{static withConfig(r){return{ngModule:e,providers:[{provide:q_,useValue:r.callSetDisabledState??ip}]}}};e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=Ut({type:e}),e.\u0275inj=Bt({imports:[$_]});let t=e;return t})(),W_=(()=>{let e=class e{static withConfig(r){return{ngModule:e,providers:[{provide:n1,useValue:r.warnOnNgModelWithFormControl??"always"},{provide:q_,useValue:r.callSetDisabledState??ip}]}}};e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=Ut({type:e}),e.\u0275inj=Bt({imports:[$_]});let t=e;return t})();var G_=(()=>{let e=class e{};e.\u0275fac=function(o){return new(o||e)},e.\u0275cmp=st({type:e,selectors:[["app-root"]],decls:2,vars:0,consts:[[1,"container"]],template:function(o,i){o&1&&(Ne(0,"div",0),Ye(1,"router-outlet"),Oe())},dependencies:[Kf]});let t=e;return t})();function Li(t,e=0){return Array.from(new Array(t).keys()).map(n=>n+e)}var ji=class t{constructor(e=1,n=1,r=1,o=""){this.bar=e,this.beat=n,this.division=r,this.note=o}static from(e){return Object.assign(new t,e)}static fromEach(e){return e.map(n=>this.from(n))}get timeCode(){return sp(this.bar,this.beat,this.division)}};function sp(t=1,e=1,n=1){let r=n>1?`.${n}`:"";return(r||e>1)&&(r=`.${e}${r}`),`${t}${r}`}var ap=(()=>{let e=class e{get timeCode(){return sp(this.barNumber,this.beatNumber,this.beatDivisionNumber)}get onTheBeat(){return this.beatDivisionNumber==1}get title(){return this.timeCode}get event(){return this.events.find(r=>r.bar===this.barNumber&&r.beat===this.beatNumber&&r.division===this.beatDivisionNumber&&r.note===this.note)}onClick(){return this.clickLine.emit(this),!1}get height(){return this.el.nativeElement.getBoundingClientRect().height}get top(){return this.el.nativeElement.getBoundingClientRect().top}constructor(r){this.el=r,this.lineIndex=0,this.note="",this.barNumber=1,this.beatNumber=1,this.beatDivisionNumber=1,this.events=[],this.clickLine=new Me}};e.\u0275fac=function(o){return new(o||e)(Et(wn))},e.\u0275cmp=st({type:e,selectors:[["app-rythm-bar-beat-division-line"]],hostVars:5,hostBindings:function(o,i){o&1&&Re("click",function(){return i.onClick()}),o&2&&(Hh("title",i.title),zr("on-the-beat",i.onTheBeat)("bottom-line",i.bottomLine))},inputs:{lineIndex:"lineIndex",note:"note",barNumber:"barNumber",beatNumber:"beatNumber",beatDivisionNumber:"beatDivisionNumber",events:"events",bottomLine:"bottomLine"},outputs:{clickLine:"clickLine"},standalone:!0,features:[mt],decls:0,vars:0,template:function(o,i){},dependencies:[At],styles:["[_nghost-%COMP%]{background:white;aspect-ratio:1.7142857143;font-size:10pt;border-top:solid 1px black}.bottom-line[_nghost-%COMP%]{border-bottom:solid 1px black}.on-the-beat[_nghost-%COMP%]{background:#EEE}[_nghost-%COMP%]:hover{background:rgb(255,255,155)}"]});let t=e;return t})();var z_=(()=>{let e=class e{};e.\u0275fac=function(o){return new(o||e)},e.\u0275cmp=st({type:e,selectors:[["app-note"]],standalone:!0,features:[mt],decls:1,vars:0,consts:[["src","assets/images/WholeNote-centered.svg"]],template:function(o,i){o&1&&Ye(0,"img",0)},styles:["[_nghost-%COMP%]{aspect-ratio:12/7;pointer-events:none}img[_ngcontent-%COMP%]{display:block;width:100%;pointer-events:none}"]});let t=e;return t})();function r1(t,e){if(t&1){let n=wt();Ne(0,"app-rythm-bar-beat-division-line",2),Re("clickLine",function(o){xe(n);let i=re();return we(i.onClickLine(o))}),Oe()}if(t&2){let n=e.$implicit,r=re();de("barNumber",r.barNumber)("beatNumber",r.beatNumber)("beatDivisionNumber",r.number)("lineIndex",n)("note",r.note(n+1))("bottomLine",n+1===r.linesArray.length)("events",r.events)}}function o1(t,e){if(t&1&&($t(0),Ne(1,"div",3),Ot(2),Oe(),Ht()),t&2){let n=re();Ce(2),ur("V",n.beatNumber,"")}}function i1(t,e){if(t&1&&Ye(0,"app-note"),t&2){let n=e.ngIf,r=re(3);uu("width",r.width,"px")("top",r.getNoteOffsetTop(n),"px")}}function s1(t,e){if(t&1&&($t(0),It(1,i1,1,4,"app-note",5),Ht()),t&2){let n=e.$implicit,r=re(2);Ce(1),de("ngIf",r.line(n))}}function a1(t,e){if(t&1&&($t(0),It(1,s1,2,1,"ng-container",4),Ht()),t&2){let n=re();Ce(1),de("ngForOf",n.eventsOnThisDivision)}}var Z_=(()=>{let e=class e{get active(){if(!this.timecode)return!1;let r=this.timecode.split(":"),o=+r[0],i=+r[1],s=+r[2];return o===this.barNumber&&i===this.beatNumber&&s===this.number}get width(){return this.widthV2}get top(){return this.el.nativeElement.getBoundingClientRect().top}get widthV1(){return this.el.nativeElement.offsetWidth}get widthV2(){return this.el.nativeElement.getBoundingClientRect().width}getNoteOffsetTop(r){return this.getNoteOffsetTopV2(r)}getNoteOffsetTopV1(r){let i=this.width/1.7142857142857142*.97,s=1;return(r-1)*(i+s)}getNoteOffsetTopV2(r){if(this.lineComponents){let o=this.minLineComponent(r);if(o?.top!==void 0){let i=this.maxLineComponent(r);if(i===o)return o.top-this.top;if(i?.top!==void 0){let s=r%1;return o.top-this.top+(i.top-this.top)*s}}}return console.warn("Impossible de calculer getNoteOffsetTopV2 => on utilise getNoteOffsetTopV1"),this.getNoteOffsetTopV1(r)}lineComponent(r){return this.lineComponents?.get(r-1)}minLineComponent(r){return this.lineComponent(Math.floor(r))}maxLineComponent(r){return this.lineComponent(Math.ceil(r))}get eventsOnThisDivision(){return this.events.filter(r=>r.bar===this.barNumber&&r.beat===this.beatNumber&&r.division==this.number)}get linesArray(){return this._linesArray||(this._linesArray=Li(this.lines)),this._linesArray}constructor(r,o){this.el=r,this.changeDetectorRef=o,this.number=1,this.barNumber=1,this.beatNumber=1,this.lines=2,this.events=[],this.addEvent=new Me,this.removeEvent=new Me}ngAfterViewInit(){this.changeDetectorRef.detectChanges(),this.detectChangesOnWindowResize()}detectChangesOnWindowResize(){Is(window,"resize").pipe(Ze(()=>console.log("window resize")),Xl(1e3),Ze(()=>console.log("debounced window resize"))).subscribe()}line(r){switch(r.note){case"kick":return this.lines;case"snare":return this.lines-1;default:throw new Error("Unknown note "+r.note)}}note(r){switch(r){case this.lines:return"kick";case this.lines-1:return"snare";default:throw new Error("Unknown line "+r)}}onClickLine(r){let o=r.event;if(o)return this.removeEvent.emit(o);let i=this.note(r.lineIndex+1),s=new ji(this.barNumber,this.beatNumber,r.beatDivisionNumber,i);this.addEvent.emit(s)}};e.\u0275fac=function(o){return new(o||e)(Et(wn),Et(Er))},e.\u0275cmp=st({type:e,selectors:[["app-rythm-bar-beat-division"]],viewQuery:function(o,i){if(o&1&&xy(ap,5),o&2){let s;zh(s=Zh())&&(i.lineComponents=s)}},hostVars:2,hostBindings:function(o,i){o&2&&zr("active",i.active)},inputs:{number:"number",barNumber:"barNumber",beatNumber:"beatNumber",lines:"lines",events:"events",timecode:"timecode"},outputs:{addEvent:"addEvent",removeEvent:"removeEvent"},standalone:!0,features:[mt],decls:3,vars:3,consts:[[3,"barNumber","beatNumber","beatDivisionNumber","lineIndex","note","bottomLine","events","clickLine",4,"ngFor","ngForOf"],[4,"ngIf"],[3,"barNumber","beatNumber","beatDivisionNumber","lineIndex","note","bottomLine","events","clickLine"],[1,"beat-number"],[4,"ngFor","ngForOf"],[3,"width","top",4,"ngIf"]],template:function(o,i){o&1&&It(0,r1,1,7,"app-rythm-bar-beat-division-line",0)(1,o1,3,1,"ng-container",1)(2,a1,2,1,"ng-container",1),o&2&&(de("ngForOf",i.linesArray),Ce(1),de("ngIf",i.number==1),Ce(1),de("ngIf",i.lineComponents))},dependencies:[At,Yr,Ei,ap,z_],styles:['[_nghost-%COMP%]{flex:1;display:flex;flex-direction:column;position:relative}@font-face{font-family:Beats;src:local("Beats"),url("./media/Beats-JVHCVOT7.woff2") format("woff2")}.beat-number[_ngcontent-%COMP%]{font-family:Beats;font-size:4vw}app-note[_ngcontent-%COMP%]{position:absolute;width:24px}[_nghost-%COMP%]:hover, .active[_nghost-%COMP%]{background:rgb(255,255,155);color:#000}']});let t=e;return t})();function c1(t,e){if(t&1){let n=wt();Ne(0,"app-rythm-bar-beat-division",1),Re("addEvent",function(o){xe(n);let i=re();return we(i.addEvent.emit(o))})("removeEvent",function(o){xe(n);let i=re();return we(i.removeEvent.emit(o))}),Oe()}if(t&2){let n=e.$implicit,r=re();de("barNumber",r.barNumber)("beatNumber",r.number)("number",n)("events",r.events)("timecode",r.timecode)}}var Y_=(()=>{let e=class e{constructor(){this.number=1,this.barNumber=1,this.beatDivision=4,this.events=[],this.addEvent=new Me,this.removeEvent=new Me}get beatDivisionArray(){return this._beatDivisionArray||(this._beatDivisionArray=Li(this.beatDivision,1)),this._beatDivisionArray}};e.\u0275fac=function(o){return new(o||e)},e.\u0275cmp=st({type:e,selectors:[["app-rythm-bar-beat"]],inputs:{number:"number",barNumber:"barNumber",beatDivision:"beatDivision",events:"events",timecode:"timecode"},outputs:{addEvent:"addEvent",removeEvent:"removeEvent"},standalone:!0,features:[mt],decls:1,vars:1,consts:[[3,"barNumber","beatNumber","number","events","timecode","addEvent","removeEvent",4,"ngFor","ngForOf"],[3,"barNumber","beatNumber","number","events","timecode","addEvent","removeEvent"]],template:function(o,i){o&1&&It(0,c1,1,5,"app-rythm-bar-beat-division",0),o&2&&de("ngForOf",i.beatDivisionArray)},dependencies:[At,Yr,Z_],styles:["[_nghost-%COMP%]{flex:1;display:flex;flex-direction:row}"]});let t=e;return t})();function u1(t,e){if(t&1){let n=wt();Ne(0,"app-rythm-bar-beat",1),Re("addEvent",function(o){xe(n);let i=re();return we(i.addEvent.emit(o))})("removeEvent",function(o){xe(n);let i=re();return we(i.removeEvent.emit(o))}),Oe()}if(t&2){let n=e.$implicit,r=re();de("number",n)("barNumber",r.number)("beatDivision",r.beatDivision)("events",r.events)("timecode",r.timecode)}}var Q_=(()=>{let e=class e{constructor(){this.number=1,this.beats=4,this.beatDivision=4,this.events=[],this.addEvent=new Me,this.removeEvent=new Me}get beatsArray(){return this._beatsArray||(this._beatsArray=Li(this.beats,1)),this._beatsArray}};e.\u0275fac=function(o){return new(o||e)},e.\u0275cmp=st({type:e,selectors:[["app-rythm-bar"]],inputs:{number:"number",beats:"beats",beatDivision:"beatDivision",events:"events",timecode:"timecode"},outputs:{addEvent:"addEvent",removeEvent:"removeEvent"},standalone:!0,features:[mt],decls:1,vars:1,consts:[[3,"number","barNumber","beatDivision","events","timecode","addEvent","removeEvent",4,"ngFor","ngForOf"],[3,"number","barNumber","beatDivision","events","timecode","addEvent","removeEvent"]],template:function(o,i){o&1&&It(0,u1,1,5,"app-rythm-bar-beat",0),o&2&&de("ngForOf",i.beatsArray)},dependencies:[At,Yr,Y_],styles:["[_nghost-%COMP%]{display:flex}"]});let t=e;return t})();var cp=[{bar:1,beat:1,division:1,note:"kick"},{bar:1,beat:2,division:1,note:"snare"},{bar:1,beat:2,division:4,note:"kick"},{bar:1,beat:3,division:2,note:"kick"},{bar:1,beat:3,division:3,note:"kick"},{bar:1,beat:4,division:1,note:"snare"},{bar:2,beat:1,division:1,note:"kick"},{bar:2,beat:2,division:1,note:"snare"},{bar:2,beat:2,division:4,note:"kick"},{bar:2,beat:3,division:3,note:"kick"},{bar:2,beat:4,division:1,note:"snare"},{bar:3,beat:1,division:1,note:"kick"},{bar:3,beat:2,division:1,note:"snare"},{bar:3,beat:3,division:3,note:"kick"},{bar:3,beat:4,division:1,note:"snare"},{bar:4,beat:1,division:1,note:"kick"},{bar:4,beat:2,division:1,note:"snare"},{bar:4,beat:3,division:3,note:"kick"},{bar:4,beat:4,division:1,note:"snare"},{bar:3,beat:2,division:4,note:"kick"},{bar:1,beat:4,division:4,note:"kick"},{bar:2,beat:1,division:3,note:"kick"},{bar:2,beat:3,division:2,note:"kick"},{bar:4,beat:2,division:4,note:"kick"},{bar:4,beat:1,division:3,note:"kick"},{bar:5,beat:1,division:1,note:"kick"},{bar:5,beat:2,division:1,note:"snare"},{bar:5,beat:4,division:1,note:"snare"},{bar:6,beat:2,division:1,note:"snare"},{bar:6,beat:4,division:1,note:"snare"},{bar:7,beat:2,division:1,note:"snare"},{bar:7,beat:4,division:1,note:"snare"},{bar:8,beat:2,division:1,note:"snare"},{bar:8,beat:4,division:1,note:"snare"},{bar:8,beat:4,division:2,note:"snare"},{bar:8,beat:4,division:3,note:"snare"},{bar:8,beat:4,division:4,note:"snare"},{bar:6,beat:1,division:1,note:"kick"},{bar:6,beat:1,division:3,note:"kick"},{bar:7,beat:1,division:1,note:"kick"},{bar:8,beat:1,division:1,note:"kick"},{bar:8,beat:1,division:3,note:"kick"},{bar:5,beat:3,division:3,note:"kick"},{bar:6,beat:3,division:3,note:"kick"},{bar:7,beat:3,division:3,note:"kick"},{bar:8,beat:3,division:3,note:"snare"}];var d1=["*"],X_=(()=>{let e=class e{};e.\u0275fac=function(o){return new(o||e)},e.\u0275cmp=st({type:e,selectors:[["app-pattern"]],standalone:!0,features:[mt],ngContentSelectors:d1,decls:1,vars:0,template:function(o,i){o&1&&(vy(),yy(0))},styles:["[_nghost-%COMP%]{display:block;flex:0 1cm}"]});let t=e;return t})();function h1(t,e){if(t&1){let n=wt();Ne(0,"app-pattern",2),Re("click",function(){let i=xe(n).$implicit,s=re(2);return we(s.onClickPatternInStructure(i))}),Ot(1),Oe()}if(t&2){let n=e.$implicit,r=re(2);zr("active",n==r.currentPatternInStructure),Ce(1),Wh(n.initial)}}function f1(t,e){if(t&1&&($t(0),It(1,h1,2,3,"app-pattern",1),Ht()),t&2){let n=re();Ce(1),de("ngForOf",n.structure.patternsInStructure)}}var K_=(()=>{let e=class e{constructor(){this.clickPatternInStructure=new Me}onClickPatternInStructure(r){this.clickPatternInStructure.emit(r)}};e.\u0275fac=function(o){return new(o||e)},e.\u0275cmp=st({type:e,selectors:[["app-structure"]],inputs:{structure:"structure",currentPatternInStructure:"currentPatternInStructure"},outputs:{clickPatternInStructure:"clickPatternInStructure"},standalone:!0,features:[mt],decls:1,vars:1,consts:[[4,"ngIf"],[3,"active","click",4,"ngFor","ngForOf"],[3,"click"]],template:function(o,i){o&1&&It(0,f1,2,1,"ng-container",0),o&2&&de("ngIf",i.structure)},dependencies:[X_,At,Yr,Ei],styles:["[_nghost-%COMP%]{display:flex;flex-wrap:wrap}app-pattern.active[_ngcontent-%COMP%]{color:#fff}"]});let t=e;return t})();var wa="14.7.77";var Gt=tm(dp());var fx=()=>new DOMException("","AbortError");var px=t=>(e,n,[r,o,i],s)=>{t(e[o],[n,r,i],a=>a[0]===n&&a[1]===r,s)};var mx=t=>(e,n,r)=>{let o=[];for(let i=0;i<r.numberOfInputs;i+=1)o.push(new Set);t.set(e,{activeInputs:o,outputs:new Set,passiveInputs:new WeakMap,renderer:n})};var gx=t=>(e,n)=>{t.set(e,{activeInputs:new Set,passiveInputs:new WeakMap,renderer:n})};var hr=new WeakSet,Bu=new WeakMap,Bi=new WeakMap,Uu=new WeakMap,Oa=new WeakMap,Ui=new WeakMap,qu=new WeakMap,Ra=new WeakMap,ka=new WeakMap,Fa=new WeakMap;var vx={construct(){return vx}},yx=t=>{try{let e=new Proxy(t,vx);new e}catch{return!1}return!0};var _x=/^import(?:(?:[\s]+[\w]+|(?:[\s]+[\w]+[\s]*,)?[\s]*\{[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?(?:[\s]*,[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?)*[\s]*}|(?:[\s]+[\w]+[\s]*,)?[\s]*\*[\s]+as[\s]+[\w]+)[\s]+from)?(?:[\s]*)("([^"\\]|\\.)+"|'([^'\\]|\\.)+')(?:[\s]*);?/,hp=(t,e)=>{let n=[],r=t.replace(/^[\s]+/,""),o=r.match(_x);for(;o!==null;){let i=o[1].slice(1,-1),s=o[0].replace(/([\s]+)?;?$/,"").replace(i,new URL(i,e).toString());n.push(s),r=r.slice(o[0].length).replace(/^[\s]+/,""),o=r.match(_x)}return[n.join(";"),r]};var xx=t=>{if(t!==void 0&&!Array.isArray(t))throw new TypeError("The parameterDescriptors property of given value for processorCtor is not an array.")},wx=t=>{if(!yx(t))throw new TypeError("The given value for processorCtor should be a constructor.");if(t.prototype===null||typeof t.prototype!="object")throw new TypeError("The given value for processorCtor should have a prototype.")},bx=(t,e,n,r,o,i,s,a,c,u,l,d,h)=>{let f=0;return(p,m,g={credentials:"omit"})=>{let v=l.get(p);if(v!==void 0&&v.has(m))return Promise.resolve();let D=u.get(p);if(D!==void 0){let C=D.get(m);if(C!==void 0)return C}let I=i(p),M=I.audioWorklet===void 0?o(m).then(([C,b])=>{let[_,w]=hp(C,b),k=`${_};((a,b)=>{(a[b]=a[b]||[]).push((AudioWorkletProcessor,global,registerProcessor,sampleRate,self,window)=>{${w}
})})(window,'_AWGS')`;return n(k)}).then(()=>{let C=h._AWGS.pop();if(C===void 0)throw new SyntaxError;r(I.currentTime,I.sampleRate,()=>C(class{},void 0,(b,_)=>{if(b.trim()==="")throw e();let w=ka.get(I);if(w!==void 0){if(w.has(b))throw e();wx(_),xx(_.parameterDescriptors),w.set(b,_)}else wx(_),xx(_.parameterDescriptors),ka.set(I,new Map([[b,_]]))},I.sampleRate,void 0,void 0))}):Promise.all([o(m),Promise.resolve(t(d,d))]).then(([[C,b],_])=>{let w=f+1;f=w;let[k,H]=hp(C,b),E=`${k};((AudioWorkletProcessor,registerProcessor)=>{${H}
})(${_?"AudioWorkletProcessor":"class extends AudioWorkletProcessor {__b=new WeakSet();constructor(){super();(p=>p.postMessage=(q=>(m,t)=>q.call(p,m,t?t.filter(u=>!this.__b.has(u)):t))(p.postMessage))(this.port)}}"},(n,p)=>registerProcessor(n,class extends p{${_?"":"__c = (a) => a.forEach(e=>this.__b.add(e.buffer));"}process(i,o,p){${_?"":"i.forEach(this.__c);o.forEach(this.__c);this.__c(Object.values(p));"}return super.process(i.map(j=>j.some(k=>k.length===0)?[]:j),o,p)}}));registerProcessor('__sac${w}',class extends AudioWorkletProcessor{process(){return !1}})`,S=new Blob([E],{type:"application/javascript; charset=utf-8"}),A=URL.createObjectURL(S);return I.audioWorklet.addModule(A,g).then(()=>{if(a(I))return I;let T=s(I);return T.audioWorklet.addModule(A,g).then(()=>T)}).then(T=>{if(c===null)throw new SyntaxError;try{new c(T,`__sac${w}`)}catch{throw new SyntaxError}}).finally(()=>URL.revokeObjectURL(A))});return D===void 0?u.set(p,new Map([[m,M]])):D.set(m,M),M.then(()=>{let C=l.get(p);C===void 0?l.set(p,new Set([m])):C.add(m)}).finally(()=>{let C=u.get(p);C!==void 0&&C.delete(m)}),M}};var at=(t,e)=>{let n=t.get(e);if(n===void 0)throw new Error("A value with the given key could not be found.");return n};var eo=(t,e)=>{let n=Array.from(t).filter(e);if(n.length>1)throw Error("More than one element was found.");if(n.length===0)throw Error("No element was found.");let[r]=n;return t.delete(r),r};var $u=(t,e,n,r)=>{let o=at(t,e),i=eo(o,s=>s[0]===n&&s[1]===r);return o.size===0&&t.delete(e),i};var fr=t=>at(qu,t);var qn=t=>{if(hr.has(t))throw new Error("The AudioNode is already stored.");hr.add(t),fr(t).forEach(e=>e(!0))};var Hu=t=>"port"in t;var pr=t=>{if(!hr.has(t))throw new Error("The AudioNode is not stored.");hr.delete(t),fr(t).forEach(e=>e(!1))};var Pa=(t,e)=>{!Hu(t)&&e.every(n=>n.size===0)&&pr(t)};var Cx=(t,e,n,r,o,i,s,a,c,u,l,d,h)=>{let f=new WeakMap;return(p,m,g,v,D)=>{let{activeInputs:I,passiveInputs:M}=i(m),{outputs:C}=i(p),b=a(p),_=w=>{let k=c(m),H=c(p);if(w){let R=$u(M,p,g,v);t(I,p,R,!1),!D&&!d(p)&&n(H,k,g,v),h(m)&&qn(m)}else{let R=r(I,p,g,v);e(M,v,R,!1),!D&&!d(p)&&o(H,k,g,v);let N=s(m);if(N===0)l(m)&&Pa(m,I);else{let W=f.get(m);W!==void 0&&clearTimeout(W),f.set(m,setTimeout(()=>{l(m)&&Pa(m,I)},N*1e3))}}};return u(C,[m,g,v],w=>w[0]===m&&w[1]===g&&w[2]===v,!0)?(b.add(_),l(p)?t(I,p,[g,v,_],!0):e(M,v,[p,g,_],!0),!0):!1}};var Dx=t=>(e,n,[r,o,i],s)=>{let a=e.get(r);a===void 0?e.set(r,new Set([[o,n,i]])):t(a,[o,n,i],c=>c[0]===o&&c[1]===n,s)};var Sx=t=>(e,n)=>{let r=t(e,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});n.connect(r).connect(e.destination);let o=()=>{n.removeEventListener("ended",o),n.disconnect(r),r.disconnect()};n.addEventListener("ended",o)};var Tx=t=>(e,n)=>{t(e).add(n)};var N1={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",fftSize:2048,maxDecibels:-30,minDecibels:-100,smoothingTimeConstant:.8},Ex=(t,e,n,r,o,i)=>class extends t{constructor(a,c){let u=o(a),l=x(x({},N1),c),d=r(u,l),h=i(u)?e():null;super(a,!1,d,h),this._nativeAnalyserNode=d}get fftSize(){return this._nativeAnalyserNode.fftSize}set fftSize(a){this._nativeAnalyserNode.fftSize=a}get frequencyBinCount(){return this._nativeAnalyserNode.frequencyBinCount}get maxDecibels(){return this._nativeAnalyserNode.maxDecibels}set maxDecibels(a){let c=this._nativeAnalyserNode.maxDecibels;if(this._nativeAnalyserNode.maxDecibels=a,!(a>this._nativeAnalyserNode.minDecibels))throw this._nativeAnalyserNode.maxDecibels=c,n()}get minDecibels(){return this._nativeAnalyserNode.minDecibels}set minDecibels(a){let c=this._nativeAnalyserNode.minDecibels;if(this._nativeAnalyserNode.minDecibels=a,!(this._nativeAnalyserNode.maxDecibels>a))throw this._nativeAnalyserNode.minDecibels=c,n()}get smoothingTimeConstant(){return this._nativeAnalyserNode.smoothingTimeConstant}set smoothingTimeConstant(a){this._nativeAnalyserNode.smoothingTimeConstant=a}getByteFrequencyData(a){this._nativeAnalyserNode.getByteFrequencyData(a)}getByteTimeDomainData(a){this._nativeAnalyserNode.getByteTimeDomainData(a)}getFloatFrequencyData(a){this._nativeAnalyserNode.getFloatFrequencyData(a)}getFloatTimeDomainData(a){this._nativeAnalyserNode.getFloatTimeDomainData(a)}};var De=(t,e)=>t.context===e;var Ix=(t,e,n)=>()=>{let r=new WeakMap,o=(i,s)=>z(void 0,null,function*(){let a=e(i);if(!De(a,s)){let u={channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,fftSize:a.fftSize,maxDecibels:a.maxDecibels,minDecibels:a.minDecibels,smoothingTimeConstant:a.smoothingTimeConstant};a=t(s,u)}return r.set(s,a),yield n(i,s,a),a});return{render(i,s){let a=r.get(s);return a!==void 0?Promise.resolve(a):o(i,s)}}};var qi=t=>{try{t.copyToChannel(new Float32Array(1),0,-1)}catch{return!1}return!0};var Cn=()=>new DOMException("","IndexSizeError");var $i=t=>{t.getChannelData=(e=>n=>{try{return e.call(t,n)}catch(r){throw r.code===12?Cn():r}})(t.getChannelData)};var O1={numberOfChannels:1},Ax=(t,e,n,r,o,i,s,a)=>{let c=null;return class Mx{constructor(l){if(o===null)throw new Error("Missing the native OfflineAudioContext constructor.");let{length:d,numberOfChannels:h,sampleRate:f}=x(x({},O1),l);c===null&&(c=new o(1,1,44100));let p=r!==null&&e(i,i)?new r({length:d,numberOfChannels:h,sampleRate:f}):c.createBuffer(h,d,f);if(p.numberOfChannels===0)throw n();return typeof p.copyFromChannel!="function"?(s(p),$i(p)):e(qi,()=>qi(p))||a(p),t.add(p),p}static[Symbol.hasInstance](l){return l!==null&&typeof l=="object"&&Object.getPrototypeOf(l)===Mx.prototype||t.has(l)}}};var tt=-34028234663852886e22,Qe=-tt;var kt=t=>hr.has(t);var R1={buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1},Nx=(t,e,n,r,o,i,s,a)=>class extends t{constructor(u,l){let d=i(u),h=x(x({},R1),l),f=o(d,h),p=s(d),m=p?e():null;super(u,!1,f,m),this._audioBufferSourceNodeRenderer=m,this._isBufferNullified=!1,this._isBufferSet=h.buffer!==null,this._nativeAudioBufferSourceNode=f,this._onended=null,this._playbackRate=n(this,p,f.playbackRate,Qe,tt)}get buffer(){return this._isBufferNullified?null:this._nativeAudioBufferSourceNode.buffer}set buffer(u){if(this._nativeAudioBufferSourceNode.buffer=u,u!==null){if(this._isBufferSet)throw r();this._isBufferSet=!0}}get loop(){return this._nativeAudioBufferSourceNode.loop}set loop(u){this._nativeAudioBufferSourceNode.loop=u}get loopEnd(){return this._nativeAudioBufferSourceNode.loopEnd}set loopEnd(u){this._nativeAudioBufferSourceNode.loopEnd=u}get loopStart(){return this._nativeAudioBufferSourceNode.loopStart}set loopStart(u){this._nativeAudioBufferSourceNode.loopStart=u}get onended(){return this._onended}set onended(u){let l=typeof u=="function"?a(this,u):null;this._nativeAudioBufferSourceNode.onended=l;let d=this._nativeAudioBufferSourceNode.onended;this._onended=d!==null&&d===l?u:d}get playbackRate(){return this._playbackRate}start(u=0,l=0,d){if(this._nativeAudioBufferSourceNode.start(u,l,d),this._audioBufferSourceNodeRenderer!==null&&(this._audioBufferSourceNodeRenderer.start=d===void 0?[u,l]:[u,l,d]),this.context.state!=="closed"){qn(this);let h=()=>{this._nativeAudioBufferSourceNode.removeEventListener("ended",h),kt(this)&&pr(this)};this._nativeAudioBufferSourceNode.addEventListener("ended",h)}}stop(u=0){this._nativeAudioBufferSourceNode.stop(u),this._audioBufferSourceNodeRenderer!==null&&(this._audioBufferSourceNodeRenderer.stop=u)}};var Ox=(t,e,n,r,o)=>()=>{let i=new WeakMap,s=null,a=null,c=(u,l)=>z(void 0,null,function*(){let d=n(u),h=De(d,l);if(!h){let f={buffer:d.buffer,channelCount:d.channelCount,channelCountMode:d.channelCountMode,channelInterpretation:d.channelInterpretation,loop:d.loop,loopEnd:d.loopEnd,loopStart:d.loopStart,playbackRate:d.playbackRate.value};d=e(l,f),s!==null&&d.start(...s),a!==null&&d.stop(a)}return i.set(l,d),h?yield t(l,u.playbackRate,d.playbackRate):yield r(l,u.playbackRate,d.playbackRate),yield o(u,l,d),d});return{set start(u){s=u},set stop(u){a=u},render(u,l){let d=i.get(l);return d!==void 0?Promise.resolve(d):c(u,l)}}};var Rx=t=>"playbackRate"in t;var kx=t=>"frequency"in t&&"gain"in t;var Fx=t=>"offset"in t;var Px=t=>!("frequency"in t)&&"gain"in t;var Vx=t=>"detune"in t&&"frequency"in t;var Lx=t=>"pan"in t;var ft=t=>at(Bu,t);var to=t=>at(Uu,t);var Wu=(t,e)=>{let{activeInputs:n}=ft(t);n.forEach(o=>o.forEach(([i])=>{e.includes(t)||Wu(i,[...e,t])}));let r=Rx(t)?[t.playbackRate]:Hu(t)?Array.from(t.parameters.values()):kx(t)?[t.Q,t.detune,t.frequency,t.gain]:Fx(t)?[t.offset]:Px(t)?[t.gain]:Vx(t)?[t.detune,t.frequency]:Lx(t)?[t.pan]:[];for(let o of r){let i=to(o);i!==void 0&&i.activeInputs.forEach(([s])=>Wu(s,e))}kt(t)&&pr(t)};var no=t=>{Wu(t.destination,[])};var Gu=t=>t===void 0||typeof t=="number"||typeof t=="string"&&(t==="balanced"||t==="interactive"||t==="playback");var jx=(t,e,n,r,o,i,s,a,c)=>class extends t{constructor(l={}){if(c===null)throw new Error("Missing the native AudioContext constructor.");let d;try{d=new c(l)}catch(p){throw p.code===12&&p.message==="sampleRate is not in range"?n():p}if(d===null)throw r();if(!Gu(l.latencyHint))throw new TypeError(`The provided value '${l.latencyHint}' is not a valid enum value of type AudioContextLatencyCategory.`);if(l.sampleRate!==void 0&&d.sampleRate!==l.sampleRate)throw n();super(d,2);let{latencyHint:h}=l,{sampleRate:f}=d;if(this._baseLatency=typeof d.baseLatency=="number"?d.baseLatency:h==="balanced"?512/f:h==="interactive"||h===void 0?256/f:h==="playback"?1024/f:Math.max(2,Math.min(128,Math.round(h*f/128)))*128/f,this._nativeAudioContext=d,c.name==="webkitAudioContext"?(this._nativeGainNode=d.createGain(),this._nativeOscillatorNode=d.createOscillator(),this._nativeGainNode.gain.value=1e-37,this._nativeOscillatorNode.connect(this._nativeGainNode).connect(d.destination),this._nativeOscillatorNode.start()):(this._nativeGainNode=null,this._nativeOscillatorNode=null),this._state=null,d.state==="running"){this._state="suspended";let p=()=>{this._state==="suspended"&&(this._state=null),d.removeEventListener("statechange",p)};d.addEventListener("statechange",p)}}get baseLatency(){return this._baseLatency}get state(){return this._state!==null?this._state:this._nativeAudioContext.state}close(){return this.state==="closed"?this._nativeAudioContext.close().then(()=>{throw e()}):(this._state==="suspended"&&(this._state=null),this._nativeAudioContext.close().then(()=>{this._nativeGainNode!==null&&this._nativeOscillatorNode!==null&&(this._nativeOscillatorNode.stop(),this._nativeGainNode.disconnect(),this._nativeOscillatorNode.disconnect()),no(this)}))}createMediaElementSource(l){return new o(this,{mediaElement:l})}createMediaStreamDestination(){return new i(this)}createMediaStreamSource(l){return new s(this,{mediaStream:l})}createMediaStreamTrackSource(l){return new a(this,{mediaStreamTrack:l})}resume(){return this._state==="suspended"?new Promise((l,d)=>{let h=()=>{this._nativeAudioContext.removeEventListener("statechange",h),this._nativeAudioContext.state==="running"?l():this.resume().then(l,d)};this._nativeAudioContext.addEventListener("statechange",h)}):this._nativeAudioContext.resume().catch(l=>{throw l===void 0||l.code===15?e():l})}suspend(){return this._nativeAudioContext.suspend().catch(l=>{throw l===void 0?e():l})}};var Bx=(t,e,n,r,o,i,s,a)=>class extends t{constructor(u,l){let d=i(u),h=s(d),f=o(d,l,h),p=h?e(a):null;super(u,!1,f,p),this._isNodeOfNativeOfflineAudioContext=h,this._nativeAudioDestinationNode=f}get channelCount(){return this._nativeAudioDestinationNode.channelCount}set channelCount(u){if(this._isNodeOfNativeOfflineAudioContext)throw r();if(u>this._nativeAudioDestinationNode.maxChannelCount)throw n();this._nativeAudioDestinationNode.channelCount=u}get channelCountMode(){return this._nativeAudioDestinationNode.channelCountMode}set channelCountMode(u){if(this._isNodeOfNativeOfflineAudioContext)throw r();this._nativeAudioDestinationNode.channelCountMode=u}get maxChannelCount(){return this._nativeAudioDestinationNode.maxChannelCount}};var Ux=t=>{let e=new WeakMap,n=(r,o)=>z(void 0,null,function*(){let i=o.destination;return e.set(o,i),yield t(r,o,i),i});return{render(r,o){let i=e.get(o);return i!==void 0?Promise.resolve(i):n(r,o)}}};var qx=(t,e,n,r,o,i,s,a)=>(c,u)=>{let l=u.listener,d=()=>{let C=new Float32Array(1),b=e(u,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:9}),_=s(u),w=!1,k=[0,0,-1,0,1,0],H=[0,0,0],R=()=>{if(w)return;w=!0;let S=r(u,256,9,0);S.onaudioprocess=({inputBuffer:A})=>{let T=[i(A,C,0),i(A,C,1),i(A,C,2),i(A,C,3),i(A,C,4),i(A,C,5)];T.some((O,U)=>O!==k[U])&&(l.setOrientation(...T),k=T);let L=[i(A,C,6),i(A,C,7),i(A,C,8)];L.some((O,U)=>O!==H[U])&&(l.setPosition(...L),H=L)},b.connect(S)},N=S=>A=>{A!==k[S]&&(k[S]=A,l.setOrientation(...k))},W=S=>A=>{A!==H[S]&&(H[S]=A,l.setPosition(...H))},E=(S,A,T)=>{let L=n(u,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:A});L.connect(b,0,S),L.start(),Object.defineProperty(L.offset,"defaultValue",{get(){return A}});let O=t({context:c},_,L.offset,Qe,tt);return a(O,"value",U=>()=>U.call(O),U=>P=>{try{U.call(O,P)}catch(Te){if(Te.code!==9)throw Te}R(),_&&T(P)}),O.cancelAndHoldAtTime=(U=>_?()=>{throw o()}:(...P)=>{let Te=U.apply(O,P);return R(),Te})(O.cancelAndHoldAtTime),O.cancelScheduledValues=(U=>_?()=>{throw o()}:(...P)=>{let Te=U.apply(O,P);return R(),Te})(O.cancelScheduledValues),O.exponentialRampToValueAtTime=(U=>_?()=>{throw o()}:(...P)=>{let Te=U.apply(O,P);return R(),Te})(O.exponentialRampToValueAtTime),O.linearRampToValueAtTime=(U=>_?()=>{throw o()}:(...P)=>{let Te=U.apply(O,P);return R(),Te})(O.linearRampToValueAtTime),O.setTargetAtTime=(U=>_?()=>{throw o()}:(...P)=>{let Te=U.apply(O,P);return R(),Te})(O.setTargetAtTime),O.setValueAtTime=(U=>_?()=>{throw o()}:(...P)=>{let Te=U.apply(O,P);return R(),Te})(O.setValueAtTime),O.setValueCurveAtTime=(U=>_?()=>{throw o()}:(...P)=>{let Te=U.apply(O,P);return R(),Te})(O.setValueCurveAtTime),O};return{forwardX:E(0,0,N(0)),forwardY:E(1,0,N(1)),forwardZ:E(2,-1,N(2)),positionX:E(6,0,W(0)),positionY:E(7,0,W(1)),positionZ:E(8,0,W(2)),upX:E(3,0,N(3)),upY:E(4,1,N(4)),upZ:E(5,0,N(5))}},{forwardX:h,forwardY:f,forwardZ:p,positionX:m,positionY:g,positionZ:v,upX:D,upY:I,upZ:M}=l.forwardX===void 0?d():l;return{get forwardX(){return h},get forwardY(){return f},get forwardZ(){return p},get positionX(){return m},get positionY(){return g},get positionZ(){return v},get upX(){return D},get upY(){return I},get upZ(){return M}}};var Oo=t=>"context"in t;var ro=t=>Oo(t[0]);var $n=(t,e,n,r)=>{for(let o of t)if(n(o)){if(r)return!1;throw Error("The set contains at least one similar element.")}return t.add(e),!0};var fp=(t,e,[n,r],o)=>{$n(t,[e,n,r],i=>i[0]===e&&i[1]===n,o)};var pp=(t,[e,n,r],o)=>{let i=t.get(e);i===void 0?t.set(e,new Set([[n,r]])):$n(i,[n,r],s=>s[0]===n,o)};var Dn=t=>"inputs"in t;var Hi=(t,e,n,r)=>{if(Dn(e)){let o=e.inputs[r];return t.connect(o,n,0),[o,n,0]}return t.connect(e,n,r),[e,n,r]};var mp=(t,e,n)=>{for(let r of t)if(r[0]===e&&r[1]===n)return t.delete(r),r;return null};var $x=(t,e,n)=>eo(t,r=>r[0]===e&&r[1]===n);var gp=(t,e)=>{if(!fr(t).delete(e))throw new Error("Missing the expected event listener.")};var vp=(t,e,n)=>{let r=at(t,e),o=eo(r,i=>i[0]===n);return r.size===0&&t.delete(e),o};var Wi=(t,e,n,r)=>{Dn(e)?t.disconnect(e.inputs[r],n,0):t.disconnect(e,n,r)};var Pe=t=>at(Bi,t);var Ro=t=>at(Oa,t);var Nr=t=>Ra.has(t);var Gi=t=>!hr.has(t);var yp=(t,e)=>new Promise(n=>{if(e!==null)n(!0);else{let r=t.createScriptProcessor(256,1,1),o=t.createGain(),i=t.createBuffer(1,2,44100),s=i.getChannelData(0);s[0]=1,s[1]=1;let a=t.createBufferSource();a.buffer=i,a.loop=!0,a.connect(r).connect(t.destination),a.connect(o),a.disconnect(o),r.onaudioprocess=c=>{let u=c.inputBuffer.getChannelData(0);Array.prototype.some.call(u,l=>l===1)?n(!0):n(!1),a.stop(),r.onaudioprocess=null,a.disconnect(r),r.disconnect(t.destination)},a.start()}});var zu=(t,e)=>{let n=new Map;for(let r of t)for(let o of r){let i=n.get(o);n.set(o,i===void 0?1:i+1)}n.forEach((r,o)=>e(o,r))};var ko=t=>"context"in t;var Hx=t=>{let e=new Map;t.connect=(n=>(r,o=0,i=0)=>{let s=ko(r)?n(r,o,i):n(r,o),a=e.get(r);return a===void 0?e.set(r,[{input:i,output:o}]):a.every(c=>c.input!==i||c.output!==o)&&a.push({input:i,output:o}),s})(t.connect.bind(t)),t.disconnect=(n=>(r,o,i)=>{if(n.apply(t),r===void 0)e.clear();else if(typeof r=="number")for(let[s,a]of e){let c=a.filter(u=>u.output!==r);c.length===0?e.delete(s):e.set(s,c)}else if(e.has(r))if(o===void 0)e.delete(r);else{let s=e.get(r);if(s!==void 0){let a=s.filter(c=>c.output!==o&&(c.input!==i||i===void 0));a.length===0?e.delete(r):e.set(r,a)}}for(let[s,a]of e)a.forEach(c=>{ko(s)?t.connect(s,c.output,c.input):t.connect(s,c.output)})})(t.disconnect)};var k1=(t,e,n,r)=>{let{activeInputs:o,passiveInputs:i}=to(e),{outputs:s}=ft(t),a=fr(t),c=u=>{let l=Pe(t),d=Ro(e);if(u){let h=vp(i,t,n);fp(o,t,h,!1),!r&&!Nr(t)&&l.connect(d,n)}else{let h=$x(o,t,n);pp(i,h,!1),!r&&!Nr(t)&&l.disconnect(d,n)}};return $n(s,[e,n],u=>u[0]===e&&u[1]===n,!0)?(a.add(c),kt(t)?fp(o,t,[n,c],!0):pp(i,[t,n,c],!0),!0):!1},F1=(t,e,n,r)=>{let{activeInputs:o,passiveInputs:i}=ft(e),s=mp(o[r],t,n);return s===null?[$u(i,t,n,r)[2],!1]:[s[2],!0]},P1=(t,e,n)=>{let{activeInputs:r,passiveInputs:o}=to(e),i=mp(r,t,n);return i===null?[vp(o,t,n)[1],!1]:[i[2],!0]},_p=(t,e,n,r,o)=>{let[i,s]=F1(t,n,r,o);if(i!==null&&(gp(t,i),s&&!e&&!Nr(t)&&Wi(Pe(t),Pe(n),r,o)),kt(n)){let{activeInputs:a}=ft(n);Pa(n,a)}},xp=(t,e,n,r)=>{let[o,i]=P1(t,n,r);o!==null&&(gp(t,o),i&&!e&&!Nr(t)&&Pe(t).disconnect(Ro(n),r))},V1=(t,e)=>{let n=ft(t),r=[];for(let o of n.outputs)ro(o)?_p(t,e,...o):xp(t,e,...o),r.push(o[0]);return n.outputs.clear(),r},L1=(t,e,n)=>{let r=ft(t),o=[];for(let i of r.outputs)i[1]===n&&(ro(i)?_p(t,e,...i):xp(t,e,...i),o.push(i[0]),r.outputs.delete(i));return o},j1=(t,e,n,r,o)=>{let i=ft(t);return Array.from(i.outputs).filter(s=>s[0]===n&&(r===void 0||s[1]===r)&&(o===void 0||s[2]===o)).map(s=>(ro(s)?_p(t,e,...s):xp(t,e,...s),i.outputs.delete(s),s[0]))},Wx=(t,e,n,r,o,i,s,a,c,u,l,d,h,f,p,m)=>class extends u{constructor(v,D,I,M){super(I),this._context=v,this._nativeAudioNode=I;let C=l(v);d(C)&&n(yp,()=>yp(C,m))!==!0&&Hx(I),Bi.set(this,I),qu.set(this,new Set),v.state!=="closed"&&D&&qn(this),t(this,M,I)}get channelCount(){return this._nativeAudioNode.channelCount}set channelCount(v){this._nativeAudioNode.channelCount=v}get channelCountMode(){return this._nativeAudioNode.channelCountMode}set channelCountMode(v){this._nativeAudioNode.channelCountMode=v}get channelInterpretation(){return this._nativeAudioNode.channelInterpretation}set channelInterpretation(v){this._nativeAudioNode.channelInterpretation=v}get context(){return this._context}get numberOfInputs(){return this._nativeAudioNode.numberOfInputs}get numberOfOutputs(){return this._nativeAudioNode.numberOfOutputs}connect(v,D=0,I=0){if(D<0||D>=this._nativeAudioNode.numberOfOutputs)throw o();let M=l(this._context),C=p(M);if(h(v)||f(v))throw i();if(Oo(v)){let w=Pe(v);try{let H=Hi(this._nativeAudioNode,w,D,I),R=Gi(this);(C||R)&&this._nativeAudioNode.disconnect(...H),this.context.state!=="closed"&&!R&&Gi(v)&&qn(v)}catch(H){throw H.code===12?i():H}if(e(this,v,D,I,C)){let H=c([this],v);zu(H,r(C))}return v}let b=Ro(v);if(b.name==="playbackRate"&&b.maxValue===1024)throw s();try{this._nativeAudioNode.connect(b,D),(C||Gi(this))&&this._nativeAudioNode.disconnect(b,D)}catch(w){throw w.code===12?i():w}if(k1(this,v,D,C)){let w=c([this],v);zu(w,r(C))}}disconnect(v,D,I){let M,C=l(this._context),b=p(C);if(v===void 0)M=V1(this,b);else if(typeof v=="number"){if(v<0||v>=this.numberOfOutputs)throw o();M=L1(this,b,v)}else{if(D!==void 0&&(D<0||D>=this.numberOfOutputs)||Oo(v)&&I!==void 0&&(I<0||I>=v.numberOfInputs))throw o();if(M=j1(this,b,v,D,I),M.length===0)throw i()}for(let _ of M){let w=c([this],_);zu(w,a)}}};var Gx=tm(dp()),zx=(t,e,n,r,o,i,s,a,c,u,l,d,h)=>(f,p,m,g=null,v=null)=>{let D=m.value,I=new Gx.AutomationEventList(D),M=p?r(I):null,C={get defaultValue(){return D},get maxValue(){return g===null?m.maxValue:g},get minValue(){return v===null?m.minValue:v},get value(){return m.value},set value(b){m.value=b,C.setValueAtTime(b,f.context.currentTime)},cancelAndHoldAtTime(b){if(typeof m.cancelAndHoldAtTime=="function")M===null&&I.flush(f.context.currentTime),I.add(o(b)),m.cancelAndHoldAtTime(b);else{let _=Array.from(I).pop();M===null&&I.flush(f.context.currentTime),I.add(o(b));let w=Array.from(I).pop();m.cancelScheduledValues(b),_!==w&&w!==void 0&&(w.type==="exponentialRampToValue"?m.exponentialRampToValueAtTime(w.value,w.endTime):w.type==="linearRampToValue"?m.linearRampToValueAtTime(w.value,w.endTime):w.type==="setValue"?m.setValueAtTime(w.value,w.startTime):w.type==="setValueCurve"&&m.setValueCurveAtTime(w.values,w.startTime,w.duration))}return C},cancelScheduledValues(b){return M===null&&I.flush(f.context.currentTime),I.add(i(b)),m.cancelScheduledValues(b),C},exponentialRampToValueAtTime(b,_){if(b===0)throw new RangeError;if(!Number.isFinite(_)||_<0)throw new RangeError;let w=f.context.currentTime;return M===null&&I.flush(w),Array.from(I).length===0&&(I.add(u(D,w)),m.setValueAtTime(D,w)),I.add(s(b,_)),m.exponentialRampToValueAtTime(b,_),C},linearRampToValueAtTime(b,_){let w=f.context.currentTime;return M===null&&I.flush(w),Array.from(I).length===0&&(I.add(u(D,w)),m.setValueAtTime(D,w)),I.add(a(b,_)),m.linearRampToValueAtTime(b,_),C},setTargetAtTime(b,_,w){return M===null&&I.flush(f.context.currentTime),I.add(c(b,_,w)),m.setTargetAtTime(b,_,w),C},setValueAtTime(b,_){return M===null&&I.flush(f.context.currentTime),I.add(u(b,_)),m.setValueAtTime(b,_),C},setValueCurveAtTime(b,_,w){let k=b instanceof Float32Array?b:new Float32Array(b);if(d!==null&&d.name==="webkitAudioContext"){let H=_+w,R=f.context.sampleRate,N=Math.ceil(_*R),W=Math.floor(H*R),E=W-N,S=new Float32Array(E);for(let T=0;T<E;T+=1){let L=(k.length-1)/w*((N+T)/R-_),O=Math.floor(L),U=Math.ceil(L);S[T]=O===U?k[O]:(1-(L-O))*k[O]+(1-(U-L))*k[U]}M===null&&I.flush(f.context.currentTime),I.add(l(S,_,w)),m.setValueCurveAtTime(S,_,w);let A=W/R;A<H&&h(C,S[S.length-1],A),h(C,k[k.length-1],H)}else M===null&&I.flush(f.context.currentTime),I.add(l(k,_,w)),m.setValueCurveAtTime(k,_,w);return C}};return n.set(C,m),e.set(C,f),t(C,M),C};var Zx=t=>({replay(e){for(let n of t)if(n.type==="exponentialRampToValue"){let{endTime:r,value:o}=n;e.exponentialRampToValueAtTime(o,r)}else if(n.type==="linearRampToValue"){let{endTime:r,value:o}=n;e.linearRampToValueAtTime(o,r)}else if(n.type==="setTarget"){let{startTime:r,target:o,timeConstant:i}=n;e.setTargetAtTime(o,r,i)}else if(n.type==="setValue"){let{startTime:r,value:o}=n;e.setValueAtTime(o,r)}else if(n.type==="setValueCurve"){let{duration:r,startTime:o,values:i}=n;e.setValueCurveAtTime(i,o,r)}else throw new Error("Can't apply an unknown automation.")}});var zi=class{constructor(e){this._map=new Map(e)}get size(){return this._map.size}entries(){return this._map.entries()}forEach(e,n=null){return this._map.forEach((r,o)=>e.call(n,r,o,this))}get(e){return this._map.get(e)}has(e){return this._map.has(e)}keys(){return this._map.keys()}values(){return this._map.values()}};var B1={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:1,numberOfOutputs:1,parameterData:{},processorOptions:{}},Yx=(t,e,n,r,o,i,s,a,c,u,l,d,h,f)=>class extends e{constructor(m,g,v){var D;let I=a(m),M=c(I),C=l(x(x({},B1),v));h(C);let b=ka.get(I),_=b?.get(g),w=M||I.state!=="closed"?I:(D=s(I))!==null&&D!==void 0?D:I,k=o(w,M?null:m.baseLatency,u,g,_,C),H=M?r(g,C,_):null;super(m,!0,k,H);let R=[];k.parameters.forEach((W,E)=>{let S=n(this,M,W);R.push([E,S])}),this._nativeAudioWorkletNode=k,this._onprocessorerror=null,this._parameters=new zi(R),M&&t(I,this);let{activeInputs:N}=i(this);d(k,N)}get onprocessorerror(){return this._onprocessorerror}set onprocessorerror(m){let g=typeof m=="function"?f(this,m):null;this._nativeAudioWorkletNode.onprocessorerror=g;let v=this._nativeAudioWorkletNode.onprocessorerror;this._onprocessorerror=v!==null&&v===g?m:v}get parameters(){return this._parameters===null?this._nativeAudioWorkletNode.parameters:this._parameters}get port(){return this._nativeAudioWorkletNode.port}};function Zi(t,e,n,r,o){if(typeof t.copyFromChannel=="function")e[n].byteLength===0&&(e[n]=new Float32Array(128)),t.copyFromChannel(e[n],r,o);else{let i=t.getChannelData(r);if(e[n].byteLength===0)e[n]=i.slice(o,o+128);else{let s=new Float32Array(i.buffer,o*Float32Array.BYTES_PER_ELEMENT,128);e[n].set(s)}}}var Zu=(t,e,n,r,o)=>{typeof t.copyToChannel=="function"?e[n].byteLength!==0&&t.copyToChannel(e[n],r,o):e[n].byteLength!==0&&t.getChannelData(r).set(e[n],o)};var Yi=(t,e)=>{let n=[];for(let r=0;r<t;r+=1){let o=[],i=typeof e=="number"?e:e[r];for(let s=0;s<i;s+=1)o.push(new Float32Array(128));n.push(o)}return n};var Qx=(t,e)=>{let n=at(Fa,t),r=Pe(e);return at(n,r)};var U1=(t,e,n,r,o,i,s)=>z(void 0,null,function*(){let a=e===null?Math.ceil(t.context.length/128)*128:e.length,c=r.channelCount*r.numberOfInputs,u=o.reduce((g,v)=>g+v,0),l=u===0?null:n.createBuffer(u,a,n.sampleRate);if(i===void 0)throw new Error("Missing the processor constructor.");let d=ft(t),h=yield Qx(n,t),f=Yi(r.numberOfInputs,r.channelCount),p=Yi(r.numberOfOutputs,o),m=Array.from(t.parameters.keys()).reduce((g,v)=>V(x({},g),{[v]:new Float32Array(128)}),{});for(let g=0;g<a;g+=128){if(r.numberOfInputs>0&&e!==null)for(let v=0;v<r.numberOfInputs;v+=1)for(let D=0;D<r.channelCount;D+=1)Zi(e,f[v],D,D,g);i.parameterDescriptors!==void 0&&e!==null&&i.parameterDescriptors.forEach(({name:v},D)=>{Zi(e,m,v,c+D,g)});for(let v=0;v<r.numberOfInputs;v+=1)for(let D=0;D<o[v];D+=1)p[v][D].byteLength===0&&(p[v][D]=new Float32Array(128));try{let v=f.map((I,M)=>d.activeInputs[M].size===0?[]:I),D=s(g/n.sampleRate,n.sampleRate,()=>h.process(v,p,m));if(l!==null)for(let I=0,M=0;I<r.numberOfOutputs;I+=1){for(let C=0;C<o[I];C+=1)Zu(l,p[I],C,M+C,g);M+=o[I]}if(!D)break}catch(v){t.dispatchEvent(new ErrorEvent("processorerror",{colno:v.colno,filename:v.filename,lineno:v.lineno,message:v.message}));break}}return l}),Xx=(t,e,n,r,o,i,s,a,c,u,l,d,h,f,p,m)=>(g,v,D)=>{let I=new WeakMap,M=null,C=(b,_)=>z(void 0,null,function*(){let w=l(b),k=null,H=De(w,_),R=Array.isArray(v.outputChannelCount)?v.outputChannelCount:Array.from(v.outputChannelCount);if(d===null){let N=R.reduce((A,T)=>A+T,0),W=o(_,{channelCount:Math.max(1,N),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,N)}),E=[];for(let A=0;A<b.numberOfOutputs;A+=1)E.push(r(_,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:R[A]}));let S=s(_,{channelCount:v.channelCount,channelCountMode:v.channelCountMode,channelInterpretation:v.channelInterpretation,gain:1});S.connect=e.bind(null,E),S.disconnect=c.bind(null,E),k=[W,E,S]}else H||(w=new d(_,g));if(I.set(_,k===null?w:k[2]),k!==null){if(M===null){if(D===void 0)throw new Error("Missing the processor constructor.");if(h===null)throw new Error("Missing the native OfflineAudioContext constructor.");let T=b.channelCount*b.numberOfInputs,L=D.parameterDescriptors===void 0?0:D.parameterDescriptors.length,O=T+L;M=U1(b,O===0?null:yield(()=>z(void 0,null,function*(){let P=new h(O,Math.ceil(b.context.length/128)*128,_.sampleRate),Te=[],Le=[];for(let _e=0;_e<v.numberOfInputs;_e+=1)Te.push(s(P,{channelCount:v.channelCount,channelCountMode:v.channelCountMode,channelInterpretation:v.channelInterpretation,gain:1})),Le.push(o(P,{channelCount:v.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:v.channelCount}));let pt=yield Promise.all(Array.from(b.parameters.values()).map(_e=>z(void 0,null,function*(){let ne=i(P,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:_e.value});return yield f(P,_e,ne.offset),ne}))),_t=r(P,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,T+L)});for(let _e=0;_e<v.numberOfInputs;_e+=1){Te[_e].connect(Le[_e]);for(let ne=0;ne<v.channelCount;ne+=1)Le[_e].connect(_t,ne,_e*v.channelCount+ne)}for(let[_e,ne]of pt.entries())ne.connect(_t,0,T+_e),ne.start(0);return _t.connect(P.destination),yield Promise.all(Te.map(_e=>p(b,P,_e))),m(P)}))(),_,v,R,D,u)}let N=yield M,W=n(_,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),[E,S,A]=k;N!==null&&(W.buffer=N,W.start(0)),W.connect(E);for(let T=0,L=0;T<b.numberOfOutputs;T+=1){let O=S[T];for(let U=0;U<R[T];U+=1)E.connect(O,L+U,U);L+=R[T]}return A}if(H)for(let[N,W]of b.parameters.entries())yield t(_,W,w.parameters.get(N));else for(let[N,W]of b.parameters.entries())yield f(_,W,w.parameters.get(N));return yield p(b,_,w),w});return{render(b,_){a(_,b);let w=I.get(_);return w!==void 0?Promise.resolve(w):C(b,_)}}};var Kx=(t,e,n,r,o,i,s,a,c,u,l,d,h,f,p,m,g,v,D,I)=>class extends p{constructor(C,b){super(C,b),this._nativeContext=C,this._audioWorklet=t===void 0?void 0:{addModule:(_,w)=>t(this,_,w)}}get audioWorklet(){return this._audioWorklet}createAnalyser(){return new e(this)}createBiquadFilter(){return new o(this)}createBuffer(C,b,_){return new n({length:b,numberOfChannels:C,sampleRate:_})}createBufferSource(){return new r(this)}createChannelMerger(C=6){return new i(this,{numberOfInputs:C})}createChannelSplitter(C=6){return new s(this,{numberOfOutputs:C})}createConstantSource(){return new a(this)}createConvolver(){return new c(this)}createDelay(C=1){return new l(this,{maxDelayTime:C})}createDynamicsCompressor(){return new d(this)}createGain(){return new h(this)}createIIRFilter(C,b){return new f(this,{feedback:b,feedforward:C})}createOscillator(){return new m(this)}createPanner(){return new g(this)}createPeriodicWave(C,b,_={disableNormalization:!1}){return new v(this,V(x({},_),{imag:b,real:C}))}createStereoPanner(){return new D(this)}createWaveShaper(){return new I(this)}decodeAudioData(C,b,_){return u(this._nativeContext,C).then(w=>(typeof b=="function"&&b(w),w),w=>{throw typeof _=="function"&&_(w),w})}};var q1={Q:1,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:350,gain:0,type:"lowpass"},Jx=(t,e,n,r,o,i,s,a)=>class extends t{constructor(u,l){let d=i(u),h=x(x({},q1),l),f=o(d,h),p=s(d),m=p?n():null;super(u,!1,f,m),this._Q=e(this,p,f.Q,Qe,tt),this._detune=e(this,p,f.detune,1200*Math.log2(Qe),-1200*Math.log2(Qe)),this._frequency=e(this,p,f.frequency,u.sampleRate/2,0),this._gain=e(this,p,f.gain,40*Math.log10(Qe),tt),this._nativeBiquadFilterNode=f,a(this,1)}get detune(){return this._detune}get frequency(){return this._frequency}get gain(){return this._gain}get Q(){return this._Q}get type(){return this._nativeBiquadFilterNode.type}set type(u){this._nativeBiquadFilterNode.type=u}getFrequencyResponse(u,l,d){try{this._nativeBiquadFilterNode.getFrequencyResponse(u,l,d)}catch(h){throw h.code===11?r():h}if(u.length!==l.length||l.length!==d.length)throw r()}};var ew=(t,e,n,r,o)=>()=>{let i=new WeakMap,s=(a,c)=>z(void 0,null,function*(){let u=n(a),l=De(u,c);if(!l){let d={Q:u.Q.value,channelCount:u.channelCount,channelCountMode:u.channelCountMode,channelInterpretation:u.channelInterpretation,detune:u.detune.value,frequency:u.frequency.value,gain:u.gain.value,type:u.type};u=e(c,d)}return i.set(c,u),l?(yield t(c,a.Q,u.Q),yield t(c,a.detune,u.detune),yield t(c,a.frequency,u.frequency),yield t(c,a.gain,u.gain)):(yield r(c,a.Q,u.Q),yield r(c,a.detune,u.detune),yield r(c,a.frequency,u.frequency),yield r(c,a.gain,u.gain)),yield o(a,c,u),u});return{render(a,c){let u=i.get(c);return u!==void 0?Promise.resolve(u):s(a,c)}}};var tw=(t,e)=>(n,r)=>{let o=e.get(n);if(o!==void 0)return o;let i=t.get(n);if(i!==void 0)return i;try{let s=r();return s instanceof Promise?(t.set(n,s),s.catch(()=>!1).then(a=>(t.delete(n),e.set(n,a),a))):(e.set(n,s),s)}catch{return e.set(n,!1),!1}};var $1={channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6},nw=(t,e,n,r,o)=>class extends t{constructor(s,a){let c=r(s),u=x(x({},$1),a),l=n(c,u),d=o(c)?e():null;super(s,!1,l,d)}};var rw=(t,e,n)=>()=>{let r=new WeakMap,o=(i,s)=>z(void 0,null,function*(){let a=e(i);if(!De(a,s)){let u={channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,numberOfInputs:a.numberOfInputs};a=t(s,u)}return r.set(s,a),yield n(i,s,a),a});return{render(i,s){let a=r.get(s);return a!==void 0?Promise.resolve(a):o(i,s)}}};var H1={channelCount:6,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:6},ow=(t,e,n,r,o,i)=>class extends t{constructor(a,c){let u=r(a),l=i(x(x({},H1),c)),d=n(u,l),h=o(u)?e():null;super(a,!1,d,h)}};var iw=(t,e,n)=>()=>{let r=new WeakMap,o=(i,s)=>z(void 0,null,function*(){let a=e(i);if(!De(a,s)){let u={channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,numberOfOutputs:a.numberOfOutputs};a=t(s,u)}return r.set(s,a),yield n(i,s,a),a});return{render(i,s){let a=r.get(s);return a!==void 0?Promise.resolve(a):o(i,s)}}};var sw=t=>(e,n,r)=>t(n,e,r);var aw=t=>(e,n,r=0,o=0)=>{let i=e[r];if(i===void 0)throw t();return ko(n)?i.connect(n,0,o):i.connect(n,0)};var cw=t=>(e,n)=>{let r=t(e,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),o=e.createBuffer(1,2,44100);return r.buffer=o,r.loop=!0,r.connect(n),r.start(),()=>{r.stop(),r.disconnect(n)}};var W1={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",offset:1},uw=(t,e,n,r,o,i,s)=>class extends t{constructor(c,u){let l=o(c),d=x(x({},W1),u),h=r(l,d),f=i(l),p=f?n():null;super(c,!1,h,p),this._constantSourceNodeRenderer=p,this._nativeConstantSourceNode=h,this._offset=e(this,f,h.offset,Qe,tt),this._onended=null}get offset(){return this._offset}get onended(){return this._onended}set onended(c){let u=typeof c=="function"?s(this,c):null;this._nativeConstantSourceNode.onended=u;let l=this._nativeConstantSourceNode.onended;this._onended=l!==null&&l===u?c:l}start(c=0){if(this._nativeConstantSourceNode.start(c),this._constantSourceNodeRenderer!==null&&(this._constantSourceNodeRenderer.start=c),this.context.state!=="closed"){qn(this);let u=()=>{this._nativeConstantSourceNode.removeEventListener("ended",u),kt(this)&&pr(this)};this._nativeConstantSourceNode.addEventListener("ended",u)}}stop(c=0){this._nativeConstantSourceNode.stop(c),this._constantSourceNodeRenderer!==null&&(this._constantSourceNodeRenderer.stop=c)}};var lw=(t,e,n,r,o)=>()=>{let i=new WeakMap,s=null,a=null,c=(u,l)=>z(void 0,null,function*(){let d=n(u),h=De(d,l);if(!h){let f={channelCount:d.channelCount,channelCountMode:d.channelCountMode,channelInterpretation:d.channelInterpretation,offset:d.offset.value};d=e(l,f),s!==null&&d.start(s),a!==null&&d.stop(a)}return i.set(l,d),h?yield t(l,u.offset,d.offset):yield r(l,u.offset,d.offset),yield o(u,l,d),d});return{set start(u){s=u},set stop(u){a=u},render(u,l){let d=i.get(l);return d!==void 0?Promise.resolve(d):c(u,l)}}};var dw=t=>e=>(t[0]=e,t[0]);var G1={buffer:null,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",disableNormalization:!1},hw=(t,e,n,r,o,i)=>class extends t{constructor(a,c){let u=r(a),l=x(x({},G1),c),d=n(u,l),f=o(u)?e():null;super(a,!1,d,f),this._isBufferNullified=!1,this._nativeConvolverNode=d,l.buffer!==null&&i(this,l.buffer.duration)}get buffer(){return this._isBufferNullified?null:this._nativeConvolverNode.buffer}set buffer(a){if(this._nativeConvolverNode.buffer=a,a===null&&this._nativeConvolverNode.buffer!==null){let c=this._nativeConvolverNode.context;this._nativeConvolverNode.buffer=c.createBuffer(1,1,c.sampleRate),this._isBufferNullified=!0,i(this,0)}else this._isBufferNullified=!1,i(this,this._nativeConvolverNode.buffer===null?0:this._nativeConvolverNode.buffer.duration)}get normalize(){return this._nativeConvolverNode.normalize}set normalize(a){this._nativeConvolverNode.normalize=a}};var fw=(t,e,n)=>()=>{let r=new WeakMap,o=(i,s)=>z(void 0,null,function*(){let a=e(i);if(!De(a,s)){let u={buffer:a.buffer,channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,disableNormalization:!a.normalize};a=t(s,u)}return r.set(s,a),Dn(a)?yield n(i,s,a.inputs[0]):yield n(i,s,a),a});return{render(i,s){let a=r.get(s);return a!==void 0?Promise.resolve(a):o(i,s)}}};var pw=(t,e)=>(n,r,o)=>{if(e===null)throw new Error("Missing the native OfflineAudioContext constructor.");try{return new e(n,r,o)}catch(i){throw i.name==="SyntaxError"?t():i}};var mw=()=>new DOMException("","DataCloneError");var wp=t=>{let{port1:e,port2:n}=new MessageChannel;return new Promise(r=>{let o=()=>{n.onmessage=null,e.close(),n.close(),r()};n.onmessage=()=>o();try{e.postMessage(t,[t])}catch{}finally{o()}})};var gw=(t,e,n,r,o,i,s,a,c,u,l)=>(d,h)=>{let f=s(d)?d:i(d);if(o.has(h)){let p=n();return Promise.reject(p)}try{o.add(h)}catch{}return e(c,()=>c(f))?f.decodeAudioData(h).then(p=>(wp(h).catch(()=>{}),e(a,()=>a(p))||l(p),t.add(p),p)):new Promise((p,m)=>{let g=()=>z(void 0,null,function*(){try{yield wp(h)}catch{}}),v=D=>{m(D),g()};try{f.decodeAudioData(h,D=>{typeof D.copyFromChannel!="function"&&(u(D),$i(D)),t.add(D),g().then(()=>p(D))},D=>{v(D===null?r():D)})}catch(D){v(D)}})};var vw=(t,e,n,r,o,i,s,a)=>(c,u)=>{let l=e.get(c);if(l===void 0)throw new Error("Missing the expected cycle count.");let d=i(c.context),h=a(d);if(l===u){if(e.delete(c),!h&&s(c)){let f=r(c),{outputs:p}=n(c);for(let m of p)if(ro(m)){let g=r(m[0]);t(f,g,m[1],m[2])}else{let g=o(m[0]);f.connect(g,m[1])}}}else e.set(c,l-u)};var z1={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",delayTime:0,maxDelayTime:1},yw=(t,e,n,r,o,i,s)=>class extends t{constructor(c,u){let l=o(c),d=x(x({},z1),u),h=r(l,d),f=i(l),p=f?n(d.maxDelayTime):null;super(c,!1,h,p),this._delayTime=e(this,f,h.delayTime),s(this,d.maxDelayTime)}get delayTime(){return this._delayTime}};var _w=(t,e,n,r,o)=>i=>{let s=new WeakMap,a=(c,u)=>z(void 0,null,function*(){let l=n(c),d=De(l,u);if(!d){let h={channelCount:l.channelCount,channelCountMode:l.channelCountMode,channelInterpretation:l.channelInterpretation,delayTime:l.delayTime.value,maxDelayTime:i};l=e(u,h)}return s.set(u,l),d?yield t(u,c.delayTime,l.delayTime):yield r(u,c.delayTime,l.delayTime),yield o(c,u,l),l});return{render(c,u){let l=s.get(u);return l!==void 0?Promise.resolve(l):a(c,u)}}};var xw=t=>(e,n,r,o)=>t(e[o],i=>i[0]===n&&i[1]===r);var ww=t=>(e,n)=>{t(e).delete(n)};var bw=t=>"delayTime"in t;var Cw=(t,e,n)=>function r(o,i){let s=Oo(i)?i:n(t,i);if(bw(s))return[];if(o[0]===s)return[o];if(o.includes(s))return[];let{outputs:a}=e(s);return Array.from(a).map(c=>r([...o,s],c[0])).reduce((c,u)=>c.concat(u),[])};var Yu=(t,e,n)=>{let r=e[n];if(r===void 0)throw t();return r},Dw=t=>(e,n=void 0,r=void 0,o=0)=>n===void 0?e.forEach(i=>i.disconnect()):typeof n=="number"?Yu(t,e,n).disconnect():ko(n)?r===void 0?e.forEach(i=>i.disconnect(n)):o===void 0?Yu(t,e,r).disconnect(n,0):Yu(t,e,r).disconnect(n,0,o):r===void 0?e.forEach(i=>i.disconnect(n)):Yu(t,e,r).disconnect(n,0);var Z1={attack:.003,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",knee:30,ratio:12,release:.25,threshold:-24},Sw=(t,e,n,r,o,i,s,a)=>class extends t{constructor(u,l){let d=i(u),h=x(x({},Z1),l),f=r(d,h),p=s(d),m=p?n():null;super(u,!1,f,m),this._attack=e(this,p,f.attack),this._knee=e(this,p,f.knee),this._nativeDynamicsCompressorNode=f,this._ratio=e(this,p,f.ratio),this._release=e(this,p,f.release),this._threshold=e(this,p,f.threshold),a(this,.006)}get attack(){return this._attack}get channelCount(){return this._nativeDynamicsCompressorNode.channelCount}set channelCount(u){let l=this._nativeDynamicsCompressorNode.channelCount;if(this._nativeDynamicsCompressorNode.channelCount=u,u>2)throw this._nativeDynamicsCompressorNode.channelCount=l,o()}get channelCountMode(){return this._nativeDynamicsCompressorNode.channelCountMode}set channelCountMode(u){let l=this._nativeDynamicsCompressorNode.channelCountMode;if(this._nativeDynamicsCompressorNode.channelCountMode=u,u==="max")throw this._nativeDynamicsCompressorNode.channelCountMode=l,o()}get knee(){return this._knee}get ratio(){return this._ratio}get reduction(){return typeof this._nativeDynamicsCompressorNode.reduction.value=="number"?this._nativeDynamicsCompressorNode.reduction.value:this._nativeDynamicsCompressorNode.reduction}get release(){return this._release}get threshold(){return this._threshold}};var Tw=(t,e,n,r,o)=>()=>{let i=new WeakMap,s=(a,c)=>z(void 0,null,function*(){let u=n(a),l=De(u,c);if(!l){let d={attack:u.attack.value,channelCount:u.channelCount,channelCountMode:u.channelCountMode,channelInterpretation:u.channelInterpretation,knee:u.knee.value,ratio:u.ratio.value,release:u.release.value,threshold:u.threshold.value};u=e(c,d)}return i.set(c,u),l?(yield t(c,a.attack,u.attack),yield t(c,a.knee,u.knee),yield t(c,a.ratio,u.ratio),yield t(c,a.release,u.release),yield t(c,a.threshold,u.threshold)):(yield r(c,a.attack,u.attack),yield r(c,a.knee,u.knee),yield r(c,a.ratio,u.ratio),yield r(c,a.release,u.release),yield r(c,a.threshold,u.threshold)),yield o(a,c,u),u});return{render(a,c){let u=i.get(c);return u!==void 0?Promise.resolve(u):s(a,c)}}};var Ew=()=>new DOMException("","EncodingError");var Iw=t=>e=>new Promise((n,r)=>{if(t===null){r(new SyntaxError);return}let o=t.document.head;if(o===null)r(new SyntaxError);else{let i=t.document.createElement("script"),s=new Blob([e],{type:"application/javascript"}),a=URL.createObjectURL(s),c=t.onerror,u=()=>{t.onerror=c,URL.revokeObjectURL(a)};t.onerror=(l,d,h,f,p)=>{if(d===a||d===t.location.href&&h===1&&f===1)return u(),r(p),!1;if(c!==null)return c(l,d,h,f,p)},i.onerror=()=>{u(),r(new SyntaxError)},i.onload=()=>{u(),n()},i.src=a,i.type="module",o.appendChild(i)}});var Aw=t=>class{constructor(n){this._nativeEventTarget=n,this._listeners=new WeakMap}addEventListener(n,r,o){if(r!==null){let i=this._listeners.get(r);i===void 0&&(i=t(this,r),typeof r=="function"&&this._listeners.set(r,i)),this._nativeEventTarget.addEventListener(n,i,o)}}dispatchEvent(n){return this._nativeEventTarget.dispatchEvent(n)}removeEventListener(n,r,o){let i=r===null?void 0:this._listeners.get(r);this._nativeEventTarget.removeEventListener(n,i===void 0?null:i,o)}};var Mw=t=>(e,n,r)=>{Object.defineProperties(t,{currentFrame:{configurable:!0,get(){return Math.round(e*n)}},currentTime:{configurable:!0,get(){return e}}});try{return r()}finally{t!==null&&(delete t.currentFrame,delete t.currentTime)}};var Nw=t=>e=>z(void 0,null,function*(){try{let n=yield fetch(e);if(n.ok)return[yield n.text(),n.url]}catch{}throw t()});var Y1={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",gain:1},Ow=(t,e,n,r,o,i)=>class extends t{constructor(a,c){let u=o(a),l=x(x({},Y1),c),d=r(u,l),h=i(u),f=h?n():null;super(a,!1,d,f),this._gain=e(this,h,d.gain,Qe,tt)}get gain(){return this._gain}};var Rw=(t,e,n,r,o)=>()=>{let i=new WeakMap,s=(a,c)=>z(void 0,null,function*(){let u=n(a),l=De(u,c);if(!l){let d={channelCount:u.channelCount,channelCountMode:u.channelCountMode,channelInterpretation:u.channelInterpretation,gain:u.gain.value};u=e(c,d)}return i.set(c,u),l?yield t(c,a.gain,u.gain):yield r(c,a.gain,u.gain),yield o(a,c,u),u});return{render(a,c){let u=i.get(c);return u!==void 0?Promise.resolve(u):s(a,c)}}};var kw=(t,e)=>n=>e(t,n);var Fw=t=>e=>{let n=t(e);if(n.renderer===null)throw new Error("Missing the renderer of the given AudioNode in the audio graph.");return n.renderer};var Pw=t=>e=>{var n;return(n=t.get(e))!==null&&n!==void 0?n:0};var Vw=t=>e=>{let n=t(e);if(n.renderer===null)throw new Error("Missing the renderer of the given AudioParam in the audio graph.");return n.renderer};var Lw=t=>e=>t.get(e);var $e=()=>new DOMException("","InvalidStateError");var jw=t=>e=>{let n=t.get(e);if(n===void 0)throw $e();return n};var Bw=(t,e)=>n=>{let r=t.get(n);if(r!==void 0)return r;if(e===null)throw new Error("Missing the native OfflineAudioContext constructor.");return r=new e(1,1,44100),t.set(n,r),r};var Uw=t=>e=>{let n=t.get(e);if(n===void 0)throw new Error("The context has no set of AudioWorkletNodes.");return n};var Qi=()=>new DOMException("","InvalidAccessError");var qw=t=>{t.getFrequencyResponse=(e=>(n,r,o)=>{if(n.length!==r.length||r.length!==o.length)throw Qi();return e.call(t,n,r,o)})(t.getFrequencyResponse)};var Q1={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers"},$w=(t,e,n,r,o,i)=>class extends t{constructor(a,c){let u=r(a),l=o(u),d=x(x({},Q1),c),h=e(u,l?null:a.baseLatency,d),f=l?n(d.feedback,d.feedforward):null;super(a,!1,h,f),qw(h),this._nativeIIRFilterNode=h,i(this,1)}getFrequencyResponse(a,c,u){return this._nativeIIRFilterNode.getFrequencyResponse(a,c,u)}};var Qu=(t,e,n,r,o,i,s,a,c,u,l)=>{let d=u.length,h=a;for(let f=0;f<d;f+=1){let p=n[0]*u[f];for(let m=1;m<o;m+=1){let g=h-m&c-1;p+=n[m]*i[g],p-=t[m]*s[g]}for(let m=o;m<r;m+=1)p+=n[m]*i[h-m&c-1];for(let m=o;m<e;m+=1)p-=t[m]*s[h-m&c-1];i[h]=u[f],s[h]=p,h=h+1&c-1,l[f]=p}return h};var X1=(t,e,n,r)=>{let o=n instanceof Float64Array?n:new Float64Array(n),i=r instanceof Float64Array?r:new Float64Array(r),s=o.length,a=i.length,c=Math.min(s,a);if(o[0]!==1){for(let p=0;p<s;p+=1)i[p]/=o[0];for(let p=1;p<a;p+=1)o[p]/=o[0]}let u=32,l=new Float32Array(u),d=new Float32Array(u),h=e.createBuffer(t.numberOfChannels,t.length,t.sampleRate),f=t.numberOfChannels;for(let p=0;p<f;p+=1){let m=t.getChannelData(p),g=h.getChannelData(p);l.fill(0),d.fill(0),Qu(o,s,i,a,c,l,d,0,u,m,g)}return h},Hw=(t,e,n,r,o)=>(i,s)=>{let a=new WeakMap,c=null,u=(l,d)=>z(void 0,null,function*(){let h=null,f=e(l),p=De(f,d);if(d.createIIRFilter===void 0?h=t(d,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}):p||(f=d.createIIRFilter(s,i)),a.set(d,h===null?f:h),h!==null){if(c===null){if(n===null)throw new Error("Missing the native OfflineAudioContext constructor.");let g=new n(l.context.destination.channelCount,l.context.length,d.sampleRate);c=(()=>z(void 0,null,function*(){yield r(l,g,g.destination);let v=yield o(g);return X1(v,d,i,s)}))()}let m=yield c;return h.buffer=m,h.start(0),h}return yield r(l,d,f),f});return{render(l,d){let h=a.get(d);return h!==void 0?Promise.resolve(h):u(l,d)}}};var Ww=(t,e,n,r,o,i)=>s=>(a,c)=>{let u=t.get(a);if(u===void 0){if(!s&&i(a)){let l=r(a),{outputs:d}=n(a);for(let h of d)if(ro(h)){let f=r(h[0]);e(l,f,h[1],h[2])}else{let f=o(h[0]);l.disconnect(f,h[1])}}t.set(a,c)}else t.set(a,u+c)};var Gw=(t,e)=>n=>{let r=t.get(n);return e(r)||e(n)};var zw=(t,e)=>n=>t.has(n)||e(n);var Zw=(t,e)=>n=>t.has(n)||e(n);var Yw=(t,e)=>n=>{let r=t.get(n);return e(r)||e(n)};var Qw=t=>e=>t!==null&&e instanceof t;var Xw=t=>e=>t!==null&&typeof t.AudioNode=="function"&&e instanceof t.AudioNode;var Kw=t=>e=>t!==null&&typeof t.AudioParam=="function"&&e instanceof t.AudioParam;var Jw=(t,e)=>n=>t(n)||e(n);var e0=t=>e=>t!==null&&e instanceof t;var t0=t=>t!==null&&t.isSecureContext;var n0=(t,e,n,r)=>class extends t{constructor(i,s){let a=n(i),c=e(a,s);if(r(a))throw TypeError();super(i,!0,c,null),this._nativeMediaElementAudioSourceNode=c}get mediaElement(){return this._nativeMediaElementAudioSourceNode.mediaElement}};var K1={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers"},r0=(t,e,n,r)=>class extends t{constructor(i,s){let a=n(i);if(r(a))throw new TypeError;let c=x(x({},K1),s),u=e(a,c);super(i,!1,u,null),this._nativeMediaStreamAudioDestinationNode=u}get stream(){return this._nativeMediaStreamAudioDestinationNode.stream}};var o0=(t,e,n,r)=>class extends t{constructor(i,s){let a=n(i),c=e(a,s);if(r(a))throw new TypeError;super(i,!0,c,null),this._nativeMediaStreamAudioSourceNode=c}get mediaStream(){return this._nativeMediaStreamAudioSourceNode.mediaStream}};var i0=(t,e,n)=>class extends t{constructor(o,i){let s=n(o),a=e(s,i);super(o,!0,a,null)}};var s0=(t,e,n,r,o)=>class extends r{constructor(s={}){if(o===null)throw new Error("Missing the native AudioContext constructor.");let a;try{a=new o(s)}catch(l){throw l.code===12&&l.message==="sampleRate is not in range"?e():l}if(a===null)throw n();if(!Gu(s.latencyHint))throw new TypeError(`The provided value '${s.latencyHint}' is not a valid enum value of type AudioContextLatencyCategory.`);if(s.sampleRate!==void 0&&a.sampleRate!==s.sampleRate)throw e();super(a,2);let{latencyHint:c}=s,{sampleRate:u}=a;if(this._baseLatency=typeof a.baseLatency=="number"?a.baseLatency:c==="balanced"?512/u:c==="interactive"||c===void 0?256/u:c==="playback"?1024/u:Math.max(2,Math.min(128,Math.round(c*u/128)))*128/u,this._nativeAudioContext=a,o.name==="webkitAudioContext"?(this._nativeGainNode=a.createGain(),this._nativeOscillatorNode=a.createOscillator(),this._nativeGainNode.gain.value=1e-37,this._nativeOscillatorNode.connect(this._nativeGainNode).connect(a.destination),this._nativeOscillatorNode.start()):(this._nativeGainNode=null,this._nativeOscillatorNode=null),this._state=null,a.state==="running"){this._state="suspended";let l=()=>{this._state==="suspended"&&(this._state=null),a.removeEventListener("statechange",l)};a.addEventListener("statechange",l)}}get baseLatency(){return this._baseLatency}get state(){return this._state!==null?this._state:this._nativeAudioContext.state}close(){return this.state==="closed"?this._nativeAudioContext.close().then(()=>{throw t()}):(this._state==="suspended"&&(this._state=null),this._nativeAudioContext.close().then(()=>{this._nativeGainNode!==null&&this._nativeOscillatorNode!==null&&(this._nativeOscillatorNode.stop(),this._nativeGainNode.disconnect(),this._nativeOscillatorNode.disconnect()),no(this)}))}resume(){return this._state==="suspended"?new Promise((s,a)=>{let c=()=>{this._nativeAudioContext.removeEventListener("statechange",c),this._nativeAudioContext.state==="running"?s():this.resume().then(s,a)};this._nativeAudioContext.addEventListener("statechange",c)}):this._nativeAudioContext.resume().catch(s=>{throw s===void 0||s.code===15?t():s})}suspend(){return this._nativeAudioContext.suspend().catch(s=>{throw s===void 0?t():s})}};var a0=(t,e,n,r,o,i)=>class extends n{constructor(a,c){super(a),this._nativeContext=a,Ui.set(this,a),r(a)&&o.set(a,new Set),this._destination=new t(this,c),this._listener=e(this,a),this._onstatechange=null}get currentTime(){return this._nativeContext.currentTime}get destination(){return this._destination}get listener(){return this._listener}get onstatechange(){return this._onstatechange}set onstatechange(a){let c=typeof a=="function"?i(this,a):null;this._nativeContext.onstatechange=c;let u=this._nativeContext.onstatechange;this._onstatechange=u!==null&&u===c?a:u}get sampleRate(){return this._nativeContext.sampleRate}get state(){return this._nativeContext.state}};var Hn=t=>{let e=new Uint32Array([1179011410,40,1163280727,544501094,16,131073,44100,176400,1048580,1635017060,4,0]);try{let n=t.decodeAudioData(e.buffer,()=>{});return n===void 0?!1:(n.catch(()=>{}),!0)}catch{}return!1};var J1={numberOfChannels:1},c0=(t,e,n,r,o)=>class extends r{constructor(s){let{length:a,numberOfChannels:c,sampleRate:u}=x(x({},J1),s),l=n(c,a,u);t(Hn,()=>Hn(l))||l.addEventListener("statechange",(()=>{let d=0,h=f=>{this._state==="running"&&(d>0?(l.removeEventListener("statechange",h),f.stopImmediatePropagation(),this._waitForThePromiseToSettle(f)):d+=1)};return h})()),super(l,c),this._length=a,this._nativeOfflineAudioContext=l,this._state=null}get length(){return this._nativeOfflineAudioContext.length===void 0?this._length:this._nativeOfflineAudioContext.length}get state(){return this._state===null?this._nativeOfflineAudioContext.state:this._state}startRendering(){return this._state==="running"?Promise.reject(e()):(this._state="running",o(this.destination,this._nativeOfflineAudioContext).finally(()=>{this._state=null,no(this)}))}_waitForThePromiseToSettle(s){this._state===null?this._nativeOfflineAudioContext.dispatchEvent(s):setTimeout(()=>this._waitForThePromiseToSettle(s))}};var u0=(t,e)=>(n,r,o)=>{let i=new Set;return n.connect=(s=>(a,c=0,u=0)=>{let l=i.size===0;if(e(a))return s.call(n,a,c,u),t(i,[a,c,u],d=>d[0]===a&&d[1]===c&&d[2]===u,!0),l&&r(),a;s.call(n,a,c),t(i,[a,c],d=>d[0]===a&&d[1]===c,!0),l&&r()})(n.connect),n.disconnect=(s=>(a,c,u)=>{let l=i.size>0;if(a===void 0)s.apply(n),i.clear();else if(typeof a=="number"){s.call(n,a);for(let h of i)h[1]===a&&i.delete(h)}else{e(a)?s.call(n,a,c,u):s.call(n,a,c);for(let h of i)h[0]===a&&(c===void 0||h[1]===c)&&(u===void 0||h[2]===u)&&i.delete(h)}let d=i.size===0;l&&d&&o()})(n.disconnect),n};var Se=(t,e,n)=>{let r=e[n];r!==void 0&&r!==t[n]&&(t[n]=r)};var me=(t,e)=>{Se(t,e,"channelCount"),Se(t,e,"channelCountMode"),Se(t,e,"channelInterpretation")};var bp=t=>typeof t.getFloatTimeDomainData=="function";var l0=t=>{t.getFloatTimeDomainData=e=>{let n=new Uint8Array(e.length);t.getByteTimeDomainData(n);let r=Math.max(n.length,t.fftSize);for(let o=0;o<r;o+=1)e[o]=(n[o]-128)*.0078125;return e}};var d0=(t,e)=>(n,r)=>{let o=n.createAnalyser();if(me(o,r),!(r.maxDecibels>r.minDecibels))throw e();return Se(o,r,"fftSize"),Se(o,r,"maxDecibels"),Se(o,r,"minDecibels"),Se(o,r,"smoothingTimeConstant"),t(bp,()=>bp(o))||l0(o),o};var h0=t=>t===null?null:t.hasOwnProperty("AudioBuffer")?t.AudioBuffer:null;var Ie=(t,e,n)=>{let r=e[n];r!==void 0&&r!==t[n].value&&(t[n].value=r)};var f0=t=>{t.start=(e=>{let n=!1;return(r=0,o=0,i)=>{if(n)throw $e();e.call(t,r,o,i),n=!0}})(t.start)};var Xi=t=>{t.start=(e=>(n=0,r=0,o)=>{if(typeof o=="number"&&o<0||r<0||n<0)throw new RangeError("The parameters can't be negative.");e.call(t,n,r,o)})(t.start)};var Ki=t=>{t.stop=(e=>(n=0)=>{if(n<0)throw new RangeError("The parameter can't be negative.");e.call(t,n)})(t.stop)};var p0=(t,e,n,r,o,i,s,a,c,u,l)=>(d,h)=>{let f=d.createBufferSource();return me(f,h),Ie(f,h,"playbackRate"),Se(f,h,"buffer"),Se(f,h,"loop"),Se(f,h,"loopEnd"),Se(f,h,"loopStart"),e(n,()=>n(d))||f0(f),e(r,()=>r(d))||c(f),e(o,()=>o(d))||u(f,d),e(i,()=>i(d))||Xi(f),e(s,()=>s(d))||l(f,d),e(a,()=>a(d))||Ki(f),t(d,f),f};var m0=t=>t===null?null:t.hasOwnProperty("AudioContext")?t.AudioContext:t.hasOwnProperty("webkitAudioContext")?t.webkitAudioContext:null;var g0=(t,e)=>(n,r,o)=>{let i=n.destination;if(i.channelCount!==r)try{i.channelCount=r}catch{}o&&i.channelCountMode!=="explicit"&&(i.channelCountMode="explicit"),i.maxChannelCount===0&&Object.defineProperty(i,"maxChannelCount",{value:r});let s=t(n,{channelCount:r,channelCountMode:i.channelCountMode,channelInterpretation:i.channelInterpretation,gain:1});return e(s,"channelCount",a=>()=>a.call(s),a=>c=>{a.call(s,c);try{i.channelCount=c}catch(u){if(c>i.maxChannelCount)throw u}}),e(s,"channelCountMode",a=>()=>a.call(s),a=>c=>{a.call(s,c),i.channelCountMode=c}),e(s,"channelInterpretation",a=>()=>a.call(s),a=>c=>{a.call(s,c),i.channelInterpretation=c}),Object.defineProperty(s,"maxChannelCount",{get:()=>i.maxChannelCount}),s.connect(i),s};var v0=t=>t===null?null:t.hasOwnProperty("AudioWorkletNode")?t.AudioWorkletNode:null;var y0=t=>{let{port1:e}=new MessageChannel;try{e.postMessage(t)}finally{e.close()}};var _0=(t,e,n,r,o)=>(i,s,a,c,u,l)=>{if(a!==null)try{let d=new a(i,c,l),h=new Map,f=null;if(Object.defineProperties(d,{channelCount:{get:()=>l.channelCount,set:()=>{throw t()}},channelCountMode:{get:()=>"explicit",set:()=>{throw t()}},onprocessorerror:{get:()=>f,set:p=>{typeof f=="function"&&d.removeEventListener("processorerror",f),f=typeof p=="function"?p:null,typeof f=="function"&&d.addEventListener("processorerror",f)}}}),d.addEventListener=(p=>(...m)=>{if(m[0]==="processorerror"){let g=typeof m[1]=="function"?m[1]:typeof m[1]=="object"&&m[1]!==null&&typeof m[1].handleEvent=="function"?m[1].handleEvent:null;if(g!==null){let v=h.get(m[1]);v!==void 0?m[1]=v:(m[1]=D=>{D.type==="error"?(Object.defineProperties(D,{type:{value:"processorerror"}}),g(D)):g(new ErrorEvent(m[0],x({},D)))},h.set(g,m[1]))}}return p.call(d,"error",m[1],m[2]),p.call(d,...m)})(d.addEventListener),d.removeEventListener=(p=>(...m)=>{if(m[0]==="processorerror"){let g=h.get(m[1]);g!==void 0&&(h.delete(m[1]),m[1]=g)}return p.call(d,"error",m[1],m[2]),p.call(d,m[0],m[1],m[2])})(d.removeEventListener),l.numberOfOutputs!==0){let p=n(i,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return d.connect(p).connect(i.destination),o(d,()=>p.disconnect(),()=>p.connect(i.destination))}return d}catch(d){throw d.code===11?r():d}if(u===void 0)throw r();return y0(l),e(i,s,u,l)};var Xu=(t,e)=>t===null?512:Math.max(512,Math.min(16384,Math.pow(2,Math.round(Math.log2(t*e)))));var x0=t=>new Promise((e,n)=>{let{port1:r,port2:o}=new MessageChannel;r.onmessage=({data:i})=>{r.close(),o.close(),e(i)},r.onmessageerror=({data:i})=>{r.close(),o.close(),n(i)},o.postMessage(t)});var w0=(t,e)=>z(void 0,null,function*(){let n=yield x0(e);return new t(n)});var b0=(t,e,n,r)=>{let o=Fa.get(t);o===void 0&&(o=new WeakMap,Fa.set(t,o));let i=w0(n,r);return o.set(e,i),i};var C0=(t,e,n,r,o,i,s,a,c,u,l,d,h)=>(f,p,m,g)=>{if(g.numberOfInputs===0&&g.numberOfOutputs===0)throw c();let v=Array.isArray(g.outputChannelCount)?g.outputChannelCount:Array.from(g.outputChannelCount);if(v.some(q=>q<1))throw c();if(v.length!==g.numberOfOutputs)throw e();if(g.channelCountMode!=="explicit")throw c();let D=g.channelCount*g.numberOfInputs,I=v.reduce((q,Y)=>q+Y,0),M=m.parameterDescriptors===void 0?0:m.parameterDescriptors.length;if(D+M>6||I>6)throw c();let C=new MessageChannel,b=[],_=[];for(let q=0;q<g.numberOfInputs;q+=1)b.push(s(f,{channelCount:g.channelCount,channelCountMode:g.channelCountMode,channelInterpretation:g.channelInterpretation,gain:1})),_.push(o(f,{channelCount:g.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:g.channelCount}));let w=[];if(m.parameterDescriptors!==void 0)for(let{defaultValue:q,maxValue:Y,minValue:dt,name:We}of m.parameterDescriptors){let Ee=i(f,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:g.parameterData[We]!==void 0?g.parameterData[We]:q===void 0?0:q});Object.defineProperties(Ee.offset,{defaultValue:{get:()=>q===void 0?0:q},maxValue:{get:()=>Y===void 0?Qe:Y},minValue:{get:()=>dt===void 0?tt:dt}}),w.push(Ee)}let k=r(f,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,D+M)}),H=Xu(p,f.sampleRate),R=a(f,H,D+M,Math.max(1,I)),N=o(f,{channelCount:Math.max(1,I),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,I)}),W=[];for(let q=0;q<g.numberOfOutputs;q+=1)W.push(r(f,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:v[q]}));for(let q=0;q<g.numberOfInputs;q+=1){b[q].connect(_[q]);for(let Y=0;Y<g.channelCount;Y+=1)_[q].connect(k,Y,q*g.channelCount+Y)}let E=new zi(m.parameterDescriptors===void 0?[]:m.parameterDescriptors.map(({name:q},Y)=>{let dt=w[Y];return dt.connect(k,0,D+Y),dt.start(0),[q,dt.offset]}));k.connect(R);let S=g.channelInterpretation,A=null,T=g.numberOfOutputs===0?[R]:W,L={get bufferSize(){return H},get channelCount(){return g.channelCount},set channelCount(q){throw n()},get channelCountMode(){return g.channelCountMode},set channelCountMode(q){throw n()},get channelInterpretation(){return S},set channelInterpretation(q){for(let Y of b)Y.channelInterpretation=q;S=q},get context(){return R.context},get inputs(){return b},get numberOfInputs(){return g.numberOfInputs},get numberOfOutputs(){return g.numberOfOutputs},get onprocessorerror(){return A},set onprocessorerror(q){typeof A=="function"&&L.removeEventListener("processorerror",A),A=typeof q=="function"?q:null,typeof A=="function"&&L.addEventListener("processorerror",A)},get parameters(){return E},get port(){return C.port2},addEventListener(...q){return R.addEventListener(q[0],q[1],q[2])},connect:t.bind(null,T),disconnect:u.bind(null,T),dispatchEvent(...q){return R.dispatchEvent(q[0])},removeEventListener(...q){return R.removeEventListener(q[0],q[1],q[2])}},O=new Map;C.port1.addEventListener=(q=>(...Y)=>{if(Y[0]==="message"){let dt=typeof Y[1]=="function"?Y[1]:typeof Y[1]=="object"&&Y[1]!==null&&typeof Y[1].handleEvent=="function"?Y[1].handleEvent:null;if(dt!==null){let We=O.get(Y[1]);We!==void 0?Y[1]=We:(Y[1]=Ee=>{l(f.currentTime,f.sampleRate,()=>dt(Ee))},O.set(dt,Y[1]))}}return q.call(C.port1,Y[0],Y[1],Y[2])})(C.port1.addEventListener),C.port1.removeEventListener=(q=>(...Y)=>{if(Y[0]==="message"){let dt=O.get(Y[1]);dt!==void 0&&(O.delete(Y[1]),Y[1]=dt)}return q.call(C.port1,Y[0],Y[1],Y[2])})(C.port1.removeEventListener);let U=null;Object.defineProperty(C.port1,"onmessage",{get:()=>U,set:q=>{typeof U=="function"&&C.port1.removeEventListener("message",U),U=typeof q=="function"?q:null,typeof U=="function"&&(C.port1.addEventListener("message",U),C.port1.start())}}),m.prototype.port=C.port1;let P=null;b0(f,L,m,g).then(q=>P=q);let Le=Yi(g.numberOfInputs,g.channelCount),pt=Yi(g.numberOfOutputs,v),_t=m.parameterDescriptors===void 0?[]:m.parameterDescriptors.reduce((q,{name:Y})=>V(x({},q),{[Y]:new Float32Array(128)}),{}),_e=!0,ne=()=>{g.numberOfOutputs>0&&R.disconnect(N);for(let q=0,Y=0;q<g.numberOfOutputs;q+=1){let dt=W[q];for(let We=0;We<v[q];We+=1)N.disconnect(dt,Y+We,We);Y+=v[q]}},hn=new Map;R.onaudioprocess=({inputBuffer:q,outputBuffer:Y})=>{if(P!==null){let dt=d(L);for(let We=0;We<H;We+=128){for(let Ee=0;Ee<g.numberOfInputs;Ee+=1)for(let Ge=0;Ge<g.channelCount;Ge+=1)Zi(q,Le[Ee],Ge,Ge,We);m.parameterDescriptors!==void 0&&m.parameterDescriptors.forEach(({name:Ee},Ge)=>{Zi(q,_t,Ee,D+Ge,We)});for(let Ee=0;Ee<g.numberOfInputs;Ee+=1)for(let Ge=0;Ge<v[Ee];Ge+=1)pt[Ee][Ge].byteLength===0&&(pt[Ee][Ge]=new Float32Array(128));try{let Ee=Le.map((fn,Fr)=>{if(dt[Fr].size>0)return hn.set(Fr,H/128),fn;let Rl=hn.get(Fr);return Rl===void 0?[]:(fn.every(MC=>MC.every(NC=>NC===0))&&(Rl===1?hn.delete(Fr):hn.set(Fr,Rl-1)),fn)});_e=l(f.currentTime+We/f.sampleRate,f.sampleRate,()=>P.process(Ee,pt,_t));for(let fn=0,Fr=0;fn<g.numberOfOutputs;fn+=1){for(let Ds=0;Ds<v[fn];Ds+=1)Zu(Y,pt[fn],Ds,Fr+Ds,We);Fr+=v[fn]}}catch(Ee){_e=!1,L.dispatchEvent(new ErrorEvent("processorerror",{colno:Ee.colno,filename:Ee.filename,lineno:Ee.lineno,message:Ee.message}))}if(!_e){for(let Ee=0;Ee<g.numberOfInputs;Ee+=1){b[Ee].disconnect(_[Ee]);for(let Ge=0;Ge<g.channelCount;Ge+=1)_[We].disconnect(k,Ge,Ee*g.channelCount+Ge)}if(m.parameterDescriptors!==void 0){let Ee=m.parameterDescriptors.length;for(let Ge=0;Ge<Ee;Ge+=1){let fn=w[Ge];fn.disconnect(k,0,D+Ge),fn.stop()}}k.disconnect(R),R.onaudioprocess=null,Jn?ne():br();break}}}};let Jn=!1,Z=s(f,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0}),Jt=()=>R.connect(Z).connect(f.destination),br=()=>{R.disconnect(Z),Z.disconnect()},On=()=>{if(_e){br(),g.numberOfOutputs>0&&R.connect(N);for(let q=0,Y=0;q<g.numberOfOutputs;q+=1){let dt=W[q];for(let We=0;We<v[q];We+=1)N.connect(dt,Y+We,We);Y+=v[q]}}Jn=!0},er=()=>{_e&&(Jt(),ne()),Jn=!1};return Jt(),h(L,On,er)};var Cp=(t,e)=>{let n=t.createBiquadFilter();return me(n,e),Ie(n,e,"Q"),Ie(n,e,"detune"),Ie(n,e,"frequency"),Ie(n,e,"gain"),Se(n,e,"type"),n};var D0=(t,e)=>(n,r)=>{let o=n.createChannelMerger(r.numberOfInputs);return t!==null&&t.name==="webkitAudioContext"&&e(n,o),me(o,r),o};var S0=t=>{let e=t.numberOfOutputs;Object.defineProperty(t,"channelCount",{get:()=>e,set:n=>{if(n!==e)throw $e()}}),Object.defineProperty(t,"channelCountMode",{get:()=>"explicit",set:n=>{if(n!=="explicit")throw $e()}}),Object.defineProperty(t,"channelInterpretation",{get:()=>"discrete",set:n=>{if(n!=="discrete")throw $e()}})};var Ji=(t,e)=>{let n=t.createChannelSplitter(e.numberOfOutputs);return me(n,e),S0(n),n};var T0=(t,e,n,r,o)=>(i,s)=>{if(i.createConstantSource===void 0)return n(i,s);let a=i.createConstantSource();return me(a,s),Ie(a,s,"offset"),e(r,()=>r(i))||Xi(a),e(o,()=>o(i))||Ki(a),t(i,a),a};var Sn=(t,e)=>(t.connect=e.connect.bind(e),t.disconnect=e.disconnect.bind(e),t);var E0=(t,e,n,r)=>(o,a)=>{var c=a,{offset:i}=c,s=Pr(c,["offset"]);let u=o.createBuffer(1,2,44100),l=e(o,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),d=n(o,V(x({},s),{gain:i})),h=u.getChannelData(0);h[0]=1,h[1]=1,l.buffer=u,l.loop=!0;let f={get bufferSize(){},get channelCount(){return d.channelCount},set channelCount(g){d.channelCount=g},get channelCountMode(){return d.channelCountMode},set channelCountMode(g){d.channelCountMode=g},get channelInterpretation(){return d.channelInterpretation},set channelInterpretation(g){d.channelInterpretation=g},get context(){return d.context},get inputs(){return[]},get numberOfInputs(){return l.numberOfInputs},get numberOfOutputs(){return d.numberOfOutputs},get offset(){return d.gain},get onended(){return l.onended},set onended(g){l.onended=g},addEventListener(...g){return l.addEventListener(g[0],g[1],g[2])},dispatchEvent(...g){return l.dispatchEvent(g[0])},removeEventListener(...g){return l.removeEventListener(g[0],g[1],g[2])},start(g=0){l.start.call(l,g)},stop(g=0){l.stop.call(l,g)}},p=()=>l.connect(d),m=()=>l.disconnect(d);return t(o,l),r(Sn(f,d),p,m)};var I0=(t,e)=>(n,r)=>{let o=n.createConvolver();if(me(o,r),r.disableNormalization===o.normalize&&(o.normalize=!r.disableNormalization),Se(o,r,"buffer"),r.channelCount>2||(e(o,"channelCount",i=>()=>i.call(o),i=>s=>{if(s>2)throw t();return i.call(o,s)}),r.channelCountMode==="max"))throw t();return e(o,"channelCountMode",i=>()=>i.call(o),i=>s=>{if(s==="max")throw t();return i.call(o,s)}),o};var Dp=(t,e)=>{let n=t.createDelay(e.maxDelayTime);return me(n,e),Ie(n,e,"delayTime"),n};var A0=t=>(e,n)=>{let r=e.createDynamicsCompressor();if(me(r,n),n.channelCount>2||n.channelCountMode==="max")throw t();return Ie(r,n,"attack"),Ie(r,n,"knee"),Ie(r,n,"ratio"),Ie(r,n,"release"),Ie(r,n,"threshold"),r};var Ft=(t,e)=>{let n=t.createGain();return me(n,e),Ie(n,e,"gain"),n};var M0=t=>(e,n,r)=>{if(e.createIIRFilter===void 0)return t(e,n,r);let o=e.createIIRFilter(r.feedforward,r.feedback);return me(o,r),o};function eO(t,e){let n=e[0]*e[0]+e[1]*e[1];return[(t[0]*e[0]+t[1]*e[1])/n,(t[1]*e[0]-t[0]*e[1])/n]}function tO(t,e){return[t[0]*e[0]-t[1]*e[1],t[0]*e[1]+t[1]*e[0]]}function N0(t,e){let n=[0,0];for(let r=t.length-1;r>=0;r-=1)n=tO(n,e),n[0]+=t[r];return n}var O0=(t,e,n,r)=>(o,i,{channelCount:s,channelCountMode:a,channelInterpretation:c,feedback:u,feedforward:l})=>{let d=Xu(i,o.sampleRate),h=u instanceof Float64Array?u:new Float64Array(u),f=l instanceof Float64Array?l:new Float64Array(l),p=h.length,m=f.length,g=Math.min(p,m);if(p===0||p>20)throw r();if(h[0]===0)throw e();if(m===0||m>20)throw r();if(f[0]===0)throw e();if(h[0]!==1){for(let w=0;w<m;w+=1)f[w]/=h[0];for(let w=1;w<p;w+=1)h[w]/=h[0]}let v=n(o,d,s,s);v.channelCount=s,v.channelCountMode=a,v.channelInterpretation=c;let D=32,I=[],M=[],C=[];for(let w=0;w<s;w+=1){I.push(0);let k=new Float32Array(D),H=new Float32Array(D);k.fill(0),H.fill(0),M.push(k),C.push(H)}v.onaudioprocess=w=>{let k=w.inputBuffer,H=w.outputBuffer,R=k.numberOfChannels;for(let N=0;N<R;N+=1){let W=k.getChannelData(N),E=H.getChannelData(N);I[N]=Qu(h,p,f,m,g,M[N],C[N],I[N],D,W,E)}};let b=o.sampleRate/2;return Sn({get bufferSize(){return d},get channelCount(){return v.channelCount},set channelCount(w){v.channelCount=w},get channelCountMode(){return v.channelCountMode},set channelCountMode(w){v.channelCountMode=w},get channelInterpretation(){return v.channelInterpretation},set channelInterpretation(w){v.channelInterpretation=w},get context(){return v.context},get inputs(){return[v]},get numberOfInputs(){return v.numberOfInputs},get numberOfOutputs(){return v.numberOfOutputs},addEventListener(...w){return v.addEventListener(w[0],w[1],w[2])},dispatchEvent(...w){return v.dispatchEvent(w[0])},getFrequencyResponse(w,k,H){if(w.length!==k.length||k.length!==H.length)throw t();let R=w.length;for(let N=0;N<R;N+=1){let W=-Math.PI*(w[N]/b),E=[Math.cos(W),Math.sin(W)],S=N0(f,E),A=N0(h,E),T=eO(S,A);k[N]=Math.sqrt(T[0]*T[0]+T[1]*T[1]),H[N]=Math.atan2(T[1],T[0])}},removeEventListener(...w){return v.removeEventListener(w[0],w[1],w[2])}},v)};var R0=(t,e)=>t.createMediaElementSource(e.mediaElement);var k0=(t,e)=>{let n=t.createMediaStreamDestination();return me(n,e),n.numberOfOutputs===1&&Object.defineProperty(n,"numberOfOutputs",{get:()=>0}),n};var F0=(t,{mediaStream:e})=>{let n=e.getAudioTracks();n.sort((i,s)=>i.id<s.id?-1:i.id>s.id?1:0);let r=n.slice(0,1),o=t.createMediaStreamSource(new MediaStream(r));return Object.defineProperty(o,"mediaStream",{value:e}),o};var P0=(t,e)=>(n,{mediaStreamTrack:r})=>{if(typeof n.createMediaStreamTrackSource=="function")return n.createMediaStreamTrackSource(r);let o=new MediaStream([r]),i=n.createMediaStreamSource(o);if(r.kind!=="audio")throw t();if(e(n))throw new TypeError;return i};var V0=t=>t===null?null:t.hasOwnProperty("OfflineAudioContext")?t.OfflineAudioContext:t.hasOwnProperty("webkitOfflineAudioContext")?t.webkitOfflineAudioContext:null;var L0=(t,e,n,r,o,i)=>(s,a)=>{let c=s.createOscillator();return me(c,a),Ie(c,a,"detune"),Ie(c,a,"frequency"),a.periodicWave!==void 0?c.setPeriodicWave(a.periodicWave):Se(c,a,"type"),e(n,()=>n(s))||Xi(c),e(r,()=>r(s))||i(c,s),e(o,()=>o(s))||Ki(c),t(s,c),c};var j0=t=>(e,n)=>{let r=e.createPanner();return r.orientationX===void 0?t(e,n):(me(r,n),Ie(r,n,"orientationX"),Ie(r,n,"orientationY"),Ie(r,n,"orientationZ"),Ie(r,n,"positionX"),Ie(r,n,"positionY"),Ie(r,n,"positionZ"),Se(r,n,"coneInnerAngle"),Se(r,n,"coneOuterAngle"),Se(r,n,"coneOuterGain"),Se(r,n,"distanceModel"),Se(r,n,"maxDistance"),Se(r,n,"panningModel"),Se(r,n,"refDistance"),Se(r,n,"rolloffFactor"),r)};var B0=(t,e,n,r,o,i,s,a,c,u)=>(l,H)=>{var R=H,{coneInnerAngle:d,coneOuterAngle:h,coneOuterGain:f,distanceModel:p,maxDistance:m,orientationX:g,orientationY:v,orientationZ:D,panningModel:I,positionX:M,positionY:C,positionZ:b,refDistance:_,rolloffFactor:w}=R,k=Pr(R,["coneInnerAngle","coneOuterAngle","coneOuterGain","distanceModel","maxDistance","orientationX","orientationY","orientationZ","panningModel","positionX","positionY","positionZ","refDistance","rolloffFactor"]);let N=l.createPanner();if(k.channelCount>2||k.channelCountMode==="max")throw s();me(N,k);let W={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},E=n(l,V(x({},W),{channelInterpretation:"speakers",numberOfInputs:6})),S=r(l,V(x({},k),{gain:1})),A=r(l,V(x({},W),{gain:1})),T=r(l,V(x({},W),{gain:0})),L=r(l,V(x({},W),{gain:0})),O=r(l,V(x({},W),{gain:0})),U=r(l,V(x({},W),{gain:0})),P=r(l,V(x({},W),{gain:0})),Te=o(l,256,6,1),Le=i(l,V(x({},W),{curve:new Float32Array([1,1]),oversample:"none"})),pt=[g,v,D],_t=[M,C,b],_e=new Float32Array(1);Te.onaudioprocess=({inputBuffer:Z})=>{let Jt=[c(Z,_e,0),c(Z,_e,1),c(Z,_e,2)];Jt.some((On,er)=>On!==pt[er])&&(N.setOrientation(...Jt),pt=Jt);let br=[c(Z,_e,3),c(Z,_e,4),c(Z,_e,5)];br.some((On,er)=>On!==_t[er])&&(N.setPosition(...br),_t=br)},Object.defineProperty(T.gain,"defaultValue",{get:()=>0}),Object.defineProperty(L.gain,"defaultValue",{get:()=>0}),Object.defineProperty(O.gain,"defaultValue",{get:()=>0}),Object.defineProperty(U.gain,"defaultValue",{get:()=>0}),Object.defineProperty(P.gain,"defaultValue",{get:()=>0});let ne={get bufferSize(){},get channelCount(){return N.channelCount},set channelCount(Z){if(Z>2)throw s();S.channelCount=Z,N.channelCount=Z},get channelCountMode(){return N.channelCountMode},set channelCountMode(Z){if(Z==="max")throw s();S.channelCountMode=Z,N.channelCountMode=Z},get channelInterpretation(){return N.channelInterpretation},set channelInterpretation(Z){S.channelInterpretation=Z,N.channelInterpretation=Z},get coneInnerAngle(){return N.coneInnerAngle},set coneInnerAngle(Z){N.coneInnerAngle=Z},get coneOuterAngle(){return N.coneOuterAngle},set coneOuterAngle(Z){N.coneOuterAngle=Z},get coneOuterGain(){return N.coneOuterGain},set coneOuterGain(Z){if(Z<0||Z>1)throw e();N.coneOuterGain=Z},get context(){return N.context},get distanceModel(){return N.distanceModel},set distanceModel(Z){N.distanceModel=Z},get inputs(){return[S]},get maxDistance(){return N.maxDistance},set maxDistance(Z){if(Z<0)throw new RangeError;N.maxDistance=Z},get numberOfInputs(){return N.numberOfInputs},get numberOfOutputs(){return N.numberOfOutputs},get orientationX(){return A.gain},get orientationY(){return T.gain},get orientationZ(){return L.gain},get panningModel(){return N.panningModel},set panningModel(Z){N.panningModel=Z},get positionX(){return O.gain},get positionY(){return U.gain},get positionZ(){return P.gain},get refDistance(){return N.refDistance},set refDistance(Z){if(Z<0)throw new RangeError;N.refDistance=Z},get rolloffFactor(){return N.rolloffFactor},set rolloffFactor(Z){if(Z<0)throw new RangeError;N.rolloffFactor=Z},addEventListener(...Z){return S.addEventListener(Z[0],Z[1],Z[2])},dispatchEvent(...Z){return S.dispatchEvent(Z[0])},removeEventListener(...Z){return S.removeEventListener(Z[0],Z[1],Z[2])}};d!==ne.coneInnerAngle&&(ne.coneInnerAngle=d),h!==ne.coneOuterAngle&&(ne.coneOuterAngle=h),f!==ne.coneOuterGain&&(ne.coneOuterGain=f),p!==ne.distanceModel&&(ne.distanceModel=p),m!==ne.maxDistance&&(ne.maxDistance=m),g!==ne.orientationX.value&&(ne.orientationX.value=g),v!==ne.orientationY.value&&(ne.orientationY.value=v),D!==ne.orientationZ.value&&(ne.orientationZ.value=D),I!==ne.panningModel&&(ne.panningModel=I),M!==ne.positionX.value&&(ne.positionX.value=M),C!==ne.positionY.value&&(ne.positionY.value=C),b!==ne.positionZ.value&&(ne.positionZ.value=b),_!==ne.refDistance&&(ne.refDistance=_),w!==ne.rolloffFactor&&(ne.rolloffFactor=w),(pt[0]!==1||pt[1]!==0||pt[2]!==0)&&N.setOrientation(...pt),(_t[0]!==0||_t[1]!==0||_t[2]!==0)&&N.setPosition(..._t);let hn=()=>{S.connect(N),t(S,Le,0,0),Le.connect(A).connect(E,0,0),Le.connect(T).connect(E,0,1),Le.connect(L).connect(E,0,2),Le.connect(O).connect(E,0,3),Le.connect(U).connect(E,0,4),Le.connect(P).connect(E,0,5),E.connect(Te).connect(l.destination)},Jn=()=>{S.disconnect(N),a(S,Le,0,0),Le.disconnect(A),A.disconnect(E),Le.disconnect(T),T.disconnect(E),Le.disconnect(L),L.disconnect(E),Le.disconnect(O),O.disconnect(E),Le.disconnect(U),U.disconnect(E),Le.disconnect(P),P.disconnect(E),E.disconnect(Te),Te.disconnect(l.destination)};return u(Sn(ne,N),hn,Jn)};var U0=t=>(e,{disableNormalization:n,imag:r,real:o})=>{let i=r instanceof Float32Array?r:new Float32Array(r),s=o instanceof Float32Array?o:new Float32Array(o),a=e.createPeriodicWave(s,i,{disableNormalization:n});if(Array.from(r).length<2)throw t();return a};var es=(t,e,n,r)=>t.createScriptProcessor(e,n,r);var q0=(t,e)=>(n,r)=>{let o=r.channelCountMode;if(o==="clamped-max")throw e();if(n.createStereoPanner===void 0)return t(n,r);let i=n.createStereoPanner();return me(i,r),Ie(i,r,"pan"),Object.defineProperty(i,"channelCountMode",{get:()=>o,set:s=>{if(s!==o)throw e()}}),i};var $0=(t,e,n,r,o,i)=>{let a=new Float32Array([1,1]),c=Math.PI/2,u={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},l=V(x({},u),{oversample:"none"}),d=(p,m,g,v)=>{let D=new Float32Array(16385),I=new Float32Array(16385);for(let k=0;k<16385;k+=1){let H=k/16384*c;D[k]=Math.cos(H),I[k]=Math.sin(H)}let M=n(p,V(x({},u),{gain:0})),C=r(p,V(x({},l),{curve:D})),b=r(p,V(x({},l),{curve:a})),_=n(p,V(x({},u),{gain:0})),w=r(p,V(x({},l),{curve:I}));return{connectGraph(){m.connect(M),m.connect(b.inputs===void 0?b:b.inputs[0]),m.connect(_),b.connect(g),g.connect(C.inputs===void 0?C:C.inputs[0]),g.connect(w.inputs===void 0?w:w.inputs[0]),C.connect(M.gain),w.connect(_.gain),M.connect(v,0,0),_.connect(v,0,1)},disconnectGraph(){m.disconnect(M),m.disconnect(b.inputs===void 0?b:b.inputs[0]),m.disconnect(_),b.disconnect(g),g.disconnect(C.inputs===void 0?C:C.inputs[0]),g.disconnect(w.inputs===void 0?w:w.inputs[0]),C.disconnect(M.gain),w.disconnect(_.gain),M.disconnect(v,0,0),_.disconnect(v,0,1)}}},h=(p,m,g,v)=>{let D=new Float32Array(16385),I=new Float32Array(16385),M=new Float32Array(16385),C=new Float32Array(16385),b=Math.floor(16385/2);for(let T=0;T<16385;T+=1)if(T>b){let L=(T-b)/(16384-b)*c;D[T]=Math.cos(L),I[T]=Math.sin(L),M[T]=0,C[T]=1}else{let L=T/(16384-b)*c;D[T]=1,I[T]=0,M[T]=Math.cos(L),C[T]=Math.sin(L)}let _=e(p,{channelCount:2,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:2}),w=n(p,V(x({},u),{gain:0})),k=r(p,V(x({},l),{curve:D})),H=n(p,V(x({},u),{gain:0})),R=r(p,V(x({},l),{curve:I})),N=r(p,V(x({},l),{curve:a})),W=n(p,V(x({},u),{gain:0})),E=r(p,V(x({},l),{curve:M})),S=n(p,V(x({},u),{gain:0})),A=r(p,V(x({},l),{curve:C}));return{connectGraph(){m.connect(_),m.connect(N.inputs===void 0?N:N.inputs[0]),_.connect(w,0),_.connect(H,0),_.connect(W,1),_.connect(S,1),N.connect(g),g.connect(k.inputs===void 0?k:k.inputs[0]),g.connect(R.inputs===void 0?R:R.inputs[0]),g.connect(E.inputs===void 0?E:E.inputs[0]),g.connect(A.inputs===void 0?A:A.inputs[0]),k.connect(w.gain),R.connect(H.gain),E.connect(W.gain),A.connect(S.gain),w.connect(v,0,0),W.connect(v,0,0),H.connect(v,0,1),S.connect(v,0,1)},disconnectGraph(){m.disconnect(_),m.disconnect(N.inputs===void 0?N:N.inputs[0]),_.disconnect(w,0),_.disconnect(H,0),_.disconnect(W,1),_.disconnect(S,1),N.disconnect(g),g.disconnect(k.inputs===void 0?k:k.inputs[0]),g.disconnect(R.inputs===void 0?R:R.inputs[0]),g.disconnect(E.inputs===void 0?E:E.inputs[0]),g.disconnect(A.inputs===void 0?A:A.inputs[0]),k.disconnect(w.gain),R.disconnect(H.gain),E.disconnect(W.gain),A.disconnect(S.gain),w.disconnect(v,0,0),W.disconnect(v,0,0),H.disconnect(v,0,1),S.disconnect(v,0,1)}}},f=(p,m,g,v,D)=>{if(m===1)return d(p,g,v,D);if(m===2)return h(p,g,v,D);throw o()};return(p,I)=>{var M=I,{channelCount:m,channelCountMode:g,pan:v}=M,D=Pr(M,["channelCount","channelCountMode","pan"]);if(g==="max")throw o();let C=t(p,V(x({},D),{channelCount:1,channelCountMode:g,numberOfInputs:2})),b=n(p,V(x({},D),{channelCount:m,channelCountMode:g,gain:1})),_=n(p,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:v}),{connectGraph:w,disconnectGraph:k}=f(p,m,b,_,C);Object.defineProperty(_.gain,"defaultValue",{get:()=>0}),Object.defineProperty(_.gain,"maxValue",{get:()=>1}),Object.defineProperty(_.gain,"minValue",{get:()=>-1});let H={get bufferSize(){},get channelCount(){return b.channelCount},set channelCount(E){b.channelCount!==E&&(R&&k(),{connectGraph:w,disconnectGraph:k}=f(p,E,b,_,C),R&&w()),b.channelCount=E},get channelCountMode(){return b.channelCountMode},set channelCountMode(E){if(E==="clamped-max"||E==="max")throw o();b.channelCountMode=E},get channelInterpretation(){return b.channelInterpretation},set channelInterpretation(E){b.channelInterpretation=E},get context(){return b.context},get inputs(){return[b]},get numberOfInputs(){return b.numberOfInputs},get numberOfOutputs(){return b.numberOfOutputs},get pan(){return _.gain},addEventListener(...E){return b.addEventListener(E[0],E[1],E[2])},dispatchEvent(...E){return b.dispatchEvent(E[0])},removeEventListener(...E){return b.removeEventListener(E[0],E[1],E[2])}},R=!1,N=()=>{w(),R=!0},W=()=>{k(),R=!1};return i(Sn(H,C),N,W)}};var H0=(t,e,n,r,o,i,s)=>(a,c)=>{let u=a.createWaveShaper();if(i!==null&&i.name==="webkitAudioContext"&&a.createGain().gain.automationRate===void 0)return n(a,c);me(u,c);let l=c.curve===null||c.curve instanceof Float32Array?c.curve:new Float32Array(c.curve);if(l!==null&&l.length<2)throw e();Se(u,{curve:l},"curve"),Se(u,c,"oversample");let d=null,h=!1;return s(u,"curve",m=>()=>m.call(u),m=>g=>(m.call(u,g),h&&(r(g)&&d===null?d=t(a,u):!r(g)&&d!==null&&(d(),d=null)),g)),o(u,()=>{h=!0,r(u.curve)&&(d=t(a,u))},()=>{h=!1,d!==null&&(d(),d=null)})};var W0=(t,e,n,r,o)=>(i,u)=>{var l=u,{curve:s,oversample:a}=l,c=Pr(l,["curve","oversample"]);let d=i.createWaveShaper(),h=i.createWaveShaper();me(d,c),me(h,c);let f=n(i,V(x({},c),{gain:1})),p=n(i,V(x({},c),{gain:-1})),m=n(i,V(x({},c),{gain:1})),g=n(i,V(x({},c),{gain:-1})),v=null,D=!1,I=null,M={get bufferSize(){},get channelCount(){return d.channelCount},set channelCount(_){f.channelCount=_,p.channelCount=_,d.channelCount=_,m.channelCount=_,h.channelCount=_,g.channelCount=_},get channelCountMode(){return d.channelCountMode},set channelCountMode(_){f.channelCountMode=_,p.channelCountMode=_,d.channelCountMode=_,m.channelCountMode=_,h.channelCountMode=_,g.channelCountMode=_},get channelInterpretation(){return d.channelInterpretation},set channelInterpretation(_){f.channelInterpretation=_,p.channelInterpretation=_,d.channelInterpretation=_,m.channelInterpretation=_,h.channelInterpretation=_,g.channelInterpretation=_},get context(){return d.context},get curve(){return I},set curve(_){if(_!==null&&_.length<2)throw e();if(_===null)d.curve=_,h.curve=_;else{let w=_.length,k=new Float32Array(w+2-w%2),H=new Float32Array(w+2-w%2);k[0]=_[0],H[0]=-_[w-1];let R=Math.ceil((w+1)/2),N=(w+1)/2-1;for(let W=1;W<R;W+=1){let E=W/R*N,S=Math.floor(E),A=Math.ceil(E);k[W]=S===A?_[S]:(1-(E-S))*_[S]+(1-(A-E))*_[A],H[W]=S===A?-_[w-1-S]:-((1-(E-S))*_[w-1-S])-(1-(A-E))*_[w-1-A]}k[R]=w%2===1?_[R-1]:(_[R-2]+_[R-1])/2,d.curve=k,h.curve=H}I=_,D&&(r(I)&&v===null?v=t(i,f):v!==null&&(v(),v=null))},get inputs(){return[f]},get numberOfInputs(){return d.numberOfInputs},get numberOfOutputs(){return d.numberOfOutputs},get oversample(){return d.oversample},set oversample(_){d.oversample=_,h.oversample=_},addEventListener(..._){return f.addEventListener(_[0],_[1],_[2])},dispatchEvent(..._){return f.dispatchEvent(_[0])},removeEventListener(..._){return f.removeEventListener(_[0],_[1],_[2])}};s!==null&&(M.curve=s instanceof Float32Array?s:new Float32Array(s)),a!==M.oversample&&(M.oversample=a);let C=()=>{f.connect(d).connect(m),f.connect(p).connect(h).connect(g).connect(m),D=!0,r(I)&&(v=t(i,f))},b=()=>{f.disconnect(d),d.disconnect(m),f.disconnect(p),p.disconnect(h),h.disconnect(g),g.disconnect(m),D=!1,v!==null&&(v(),v=null)};return o(Sn(M,m),C,b)};var bt=()=>new DOMException("","NotSupportedError");var nO={numberOfChannels:1},G0=(t,e,n,r,o)=>class extends t{constructor(s,a,c){let u;if(typeof s=="number"&&a!==void 0&&c!==void 0)u={length:a,numberOfChannels:s,sampleRate:c};else if(typeof s=="object")u=s;else throw new Error("The given parameters are not valid.");let{length:l,numberOfChannels:d,sampleRate:h}=x(x({},nO),u),f=r(d,l,h);e(Hn,()=>Hn(f))||f.addEventListener("statechange",(()=>{let p=0,m=g=>{this._state==="running"&&(p>0?(f.removeEventListener("statechange",m),g.stopImmediatePropagation(),this._waitForThePromiseToSettle(g)):p+=1)};return m})()),super(f,d),this._length=l,this._nativeOfflineAudioContext=f,this._state=null}get length(){return this._nativeOfflineAudioContext.length===void 0?this._length:this._nativeOfflineAudioContext.length}get state(){return this._state===null?this._nativeOfflineAudioContext.state:this._state}startRendering(){return this._state==="running"?Promise.reject(n()):(this._state="running",o(this.destination,this._nativeOfflineAudioContext).finally(()=>{this._state=null,no(this)}))}_waitForThePromiseToSettle(s){this._state===null?this._nativeOfflineAudioContext.dispatchEvent(s):setTimeout(()=>this._waitForThePromiseToSettle(s))}};var rO={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:440,periodicWave:void 0,type:"sine"},z0=(t,e,n,r,o,i,s)=>class extends t{constructor(c,u){let l=o(c),d=x(x({},rO),u),h=n(l,d),f=i(l),p=f?r():null,m=c.sampleRate/2;super(c,!1,h,p),this._detune=e(this,f,h.detune,153600,-153600),this._frequency=e(this,f,h.frequency,m,-m),this._nativeOscillatorNode=h,this._onended=null,this._oscillatorNodeRenderer=p,this._oscillatorNodeRenderer!==null&&d.periodicWave!==void 0&&(this._oscillatorNodeRenderer.periodicWave=d.periodicWave)}get detune(){return this._detune}get frequency(){return this._frequency}get onended(){return this._onended}set onended(c){let u=typeof c=="function"?s(this,c):null;this._nativeOscillatorNode.onended=u;let l=this._nativeOscillatorNode.onended;this._onended=l!==null&&l===u?c:l}get type(){return this._nativeOscillatorNode.type}set type(c){this._nativeOscillatorNode.type=c,this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.periodicWave=null)}setPeriodicWave(c){this._nativeOscillatorNode.setPeriodicWave(c),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.periodicWave=c)}start(c=0){if(this._nativeOscillatorNode.start(c),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.start=c),this.context.state!=="closed"){qn(this);let u=()=>{this._nativeOscillatorNode.removeEventListener("ended",u),kt(this)&&pr(this)};this._nativeOscillatorNode.addEventListener("ended",u)}}stop(c=0){this._nativeOscillatorNode.stop(c),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.stop=c)}};var Z0=(t,e,n,r,o)=>()=>{let i=new WeakMap,s=null,a=null,c=null,u=(l,d)=>z(void 0,null,function*(){let h=n(l),f=De(h,d);if(!f){let p={channelCount:h.channelCount,channelCountMode:h.channelCountMode,channelInterpretation:h.channelInterpretation,detune:h.detune.value,frequency:h.frequency.value,periodicWave:s===null?void 0:s,type:h.type};h=e(d,p),a!==null&&h.start(a),c!==null&&h.stop(c)}return i.set(d,h),f?(yield t(d,l.detune,h.detune),yield t(d,l.frequency,h.frequency)):(yield r(d,l.detune,h.detune),yield r(d,l.frequency,h.frequency)),yield o(l,d,h),h});return{set periodicWave(l){s=l},set start(l){a=l},set stop(l){c=l},render(l,d){let h=i.get(d);return h!==void 0?Promise.resolve(h):u(l,d)}}};var oO={channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",coneInnerAngle:360,coneOuterAngle:360,coneOuterGain:0,distanceModel:"inverse",maxDistance:1e4,orientationX:1,orientationY:0,orientationZ:0,panningModel:"equalpower",positionX:0,positionY:0,positionZ:0,refDistance:1,rolloffFactor:1},Y0=(t,e,n,r,o,i,s)=>class extends t{constructor(c,u){let l=o(c),d=x(x({},oO),u),h=n(l,d),f=i(l),p=f?r():null;super(c,!1,h,p),this._nativePannerNode=h,this._orientationX=e(this,f,h.orientationX,Qe,tt),this._orientationY=e(this,f,h.orientationY,Qe,tt),this._orientationZ=e(this,f,h.orientationZ,Qe,tt),this._positionX=e(this,f,h.positionX,Qe,tt),this._positionY=e(this,f,h.positionY,Qe,tt),this._positionZ=e(this,f,h.positionZ,Qe,tt),s(this,1)}get coneInnerAngle(){return this._nativePannerNode.coneInnerAngle}set coneInnerAngle(c){this._nativePannerNode.coneInnerAngle=c}get coneOuterAngle(){return this._nativePannerNode.coneOuterAngle}set coneOuterAngle(c){this._nativePannerNode.coneOuterAngle=c}get coneOuterGain(){return this._nativePannerNode.coneOuterGain}set coneOuterGain(c){this._nativePannerNode.coneOuterGain=c}get distanceModel(){return this._nativePannerNode.distanceModel}set distanceModel(c){this._nativePannerNode.distanceModel=c}get maxDistance(){return this._nativePannerNode.maxDistance}set maxDistance(c){this._nativePannerNode.maxDistance=c}get orientationX(){return this._orientationX}get orientationY(){return this._orientationY}get orientationZ(){return this._orientationZ}get panningModel(){return this._nativePannerNode.panningModel}set panningModel(c){this._nativePannerNode.panningModel=c}get positionX(){return this._positionX}get positionY(){return this._positionY}get positionZ(){return this._positionZ}get refDistance(){return this._nativePannerNode.refDistance}set refDistance(c){this._nativePannerNode.refDistance=c}get rolloffFactor(){return this._nativePannerNode.rolloffFactor}set rolloffFactor(c){this._nativePannerNode.rolloffFactor=c}};var Q0=(t,e,n,r,o,i,s,a,c,u)=>()=>{let l=new WeakMap,d=null,h=(f,p)=>z(void 0,null,function*(){let m=null,g=i(f),v={channelCount:g.channelCount,channelCountMode:g.channelCountMode,channelInterpretation:g.channelInterpretation},D=V(x({},v),{coneInnerAngle:g.coneInnerAngle,coneOuterAngle:g.coneOuterAngle,coneOuterGain:g.coneOuterGain,distanceModel:g.distanceModel,maxDistance:g.maxDistance,panningModel:g.panningModel,refDistance:g.refDistance,rolloffFactor:g.rolloffFactor}),I=De(g,p);if("bufferSize"in g)m=r(p,V(x({},v),{gain:1}));else if(!I){let M=V(x({},D),{orientationX:g.orientationX.value,orientationY:g.orientationY.value,orientationZ:g.orientationZ.value,positionX:g.positionX.value,positionY:g.positionY.value,positionZ:g.positionZ.value});g=o(p,M)}if(l.set(p,m===null?g:m),m!==null){if(d===null){if(s===null)throw new Error("Missing the native OfflineAudioContext constructor.");let R=new s(6,f.context.length,p.sampleRate),N=e(R,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6});N.connect(R.destination),d=(()=>z(void 0,null,function*(){let W=yield Promise.all([f.orientationX,f.orientationY,f.orientationZ,f.positionX,f.positionY,f.positionZ].map((E,S)=>z(void 0,null,function*(){let A=n(R,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:S===0?1:0});return yield a(R,E,A.offset),A})));for(let E=0;E<6;E+=1)W[E].connect(N,0,E),W[E].start(0);return u(R)}))()}let M=yield d,C=r(p,V(x({},v),{gain:1}));yield c(f,p,C);let b=[];for(let R=0;R<M.numberOfChannels;R+=1)b.push(M.getChannelData(R));let _=[b[0][0],b[1][0],b[2][0]],w=[b[3][0],b[4][0],b[5][0]],k=r(p,V(x({},v),{gain:1})),H=o(p,V(x({},D),{orientationX:_[0],orientationY:_[1],orientationZ:_[2],positionX:w[0],positionY:w[1],positionZ:w[2]}));C.connect(k).connect(H.inputs[0]),H.connect(m);for(let R=128;R<M.length;R+=128){let N=[b[0][R],b[1][R],b[2][R]],W=[b[3][R],b[4][R],b[5][R]];if(N.some((E,S)=>E!==_[S])||W.some((E,S)=>E!==w[S])){_=N,w=W;let E=R/p.sampleRate;k.gain.setValueAtTime(0,E),k=r(p,V(x({},v),{gain:0})),H=o(p,V(x({},D),{orientationX:_[0],orientationY:_[1],orientationZ:_[2],positionX:w[0],positionY:w[1],positionZ:w[2]})),k.gain.setValueAtTime(1,E),C.connect(k).connect(H.inputs[0]),H.connect(m)}}return m}return I?(yield t(p,f.orientationX,g.orientationX),yield t(p,f.orientationY,g.orientationY),yield t(p,f.orientationZ,g.orientationZ),yield t(p,f.positionX,g.positionX),yield t(p,f.positionY,g.positionY),yield t(p,f.positionZ,g.positionZ)):(yield a(p,f.orientationX,g.orientationX),yield a(p,f.orientationY,g.orientationY),yield a(p,f.orientationZ,g.orientationZ),yield a(p,f.positionX,g.positionX),yield a(p,f.positionY,g.positionY),yield a(p,f.positionZ,g.positionZ)),Dn(g)?yield c(f,p,g.inputs[0]):yield c(f,p,g),g});return{render(f,p){let m=l.get(p);return m!==void 0?Promise.resolve(m):h(f,p)}}};var iO={disableNormalization:!1},X0=(t,e,n,r)=>class K0{constructor(i,s){let a=e(i),c=r(x(x({},iO),s)),u=t(a,c);return n.add(u),u}static[Symbol.hasInstance](i){return i!==null&&typeof i=="object"&&Object.getPrototypeOf(i)===K0.prototype||n.has(i)}};var J0=(t,e)=>(n,r,o)=>(t(r).replay(o),e(r,n,o));var eb=(t,e,n)=>(r,o,i)=>z(void 0,null,function*(){let s=t(r);yield Promise.all(s.activeInputs.map((a,c)=>Array.from(a).map(d=>z(void 0,[d],function*([u,l]){let f=yield e(u).render(u,o),p=r.context.destination;!n(u)&&(r!==p||!n(r))&&f.connect(i,l,c)}))).reduce((a,c)=>[...a,...c],[]))});var tb=(t,e,n)=>(r,o,i)=>z(void 0,null,function*(){let s=e(r);yield Promise.all(Array.from(s.activeInputs).map(u=>z(void 0,[u],function*([a,c]){let d=yield t(a).render(a,o);n(a)||d.connect(i,c)})))});var nb=(t,e,n,r)=>o=>t(Hn,()=>Hn(o))?Promise.resolve(t(r,r)).then(i=>{if(!i){let s=n(o,512,0,1);o.oncomplete=()=>{s.onaudioprocess=null,s.disconnect()},s.onaudioprocess=()=>o.currentTime,s.connect(o.destination)}return o.startRendering()}):new Promise(i=>{let s=e(o,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});o.oncomplete=a=>{s.disconnect(),i(a.renderedBuffer)},s.connect(o.destination),o.startRendering()});var rb=t=>(e,n)=>{t.set(e,n)};var ob=t=>(e,n)=>t.set(e,n);var ib=(t,e,n,r,o,i,s,a)=>(c,u)=>n(c).render(c,u).then(()=>Promise.all(Array.from(r(u)).map(l=>n(l).render(l,u)))).then(()=>o(u)).then(l=>(typeof l.copyFromChannel!="function"?(s(l),$i(l)):e(i,()=>i(l))||a(l),t.add(l),l));var sO={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",pan:0},sb=(t,e,n,r,o,i)=>class extends t{constructor(a,c){let u=o(a),l=x(x({},sO),c),d=n(u,l),h=i(u),f=h?r():null;super(a,!1,d,f),this._pan=e(this,h,d.pan)}get pan(){return this._pan}};var ab=(t,e,n,r,o)=>()=>{let i=new WeakMap,s=(a,c)=>z(void 0,null,function*(){let u=n(a),l=De(u,c);if(!l){let d={channelCount:u.channelCount,channelCountMode:u.channelCountMode,channelInterpretation:u.channelInterpretation,pan:u.pan.value};u=e(c,d)}return i.set(c,u),l?yield t(c,a.pan,u.pan):yield r(c,a.pan,u.pan),Dn(u)?yield o(a,c,u.inputs[0]):yield o(a,c,u),u});return{render(a,c){let u=i.get(c);return u!==void 0?Promise.resolve(u):s(a,c)}}};var cb=t=>()=>{if(t===null)return!1;try{new t({length:1,sampleRate:44100})}catch{return!1}return!0};var ub=(t,e)=>()=>z(void 0,null,function*(){if(t===null)return!0;if(e===null)return!1;let n=new Blob(['class A extends AudioWorkletProcessor{process(i){this.port.postMessage(i,[i[0][0].buffer])}}registerProcessor("a",A)'],{type:"application/javascript; charset=utf-8"}),r=new e(1,128,44100),o=URL.createObjectURL(n),i=!1,s=!1;try{yield r.audioWorklet.addModule(o);let a=new t(r,"a",{numberOfOutputs:0}),c=r.createOscillator();a.port.onmessage=()=>i=!0,a.onprocessorerror=()=>s=!0,c.connect(a),c.start(0),yield r.startRendering(),yield new Promise(u=>setTimeout(u))}catch{}finally{URL.revokeObjectURL(o)}return i&&!s});var lb=(t,e)=>()=>{if(e===null)return Promise.resolve(!1);let n=new e(1,1,44100),r=t(n,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return new Promise(o=>{n.oncomplete=()=>{r.disconnect(),o(n.currentTime!==0)},n.startRendering()})};var Sp=()=>new DOMException("","UnknownError");var aO={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",curve:null,oversample:"none"},db=(t,e,n,r,o,i,s)=>class extends t{constructor(c,u){let l=o(c),d=x(x({},aO),u),h=n(l,d),p=i(l)?r():null;super(c,!0,h,p),this._isCurveNullified=!1,this._nativeWaveShaperNode=h,s(this,1)}get curve(){return this._isCurveNullified?null:this._nativeWaveShaperNode.curve}set curve(c){if(c===null)this._isCurveNullified=!0,this._nativeWaveShaperNode.curve=new Float32Array([0,0]);else{if(c.length<2)throw e();this._isCurveNullified=!1,this._nativeWaveShaperNode.curve=c}}get oversample(){return this._nativeWaveShaperNode.oversample}set oversample(c){this._nativeWaveShaperNode.oversample=c}};var hb=(t,e,n)=>()=>{let r=new WeakMap,o=(i,s)=>z(void 0,null,function*(){let a=e(i);if(!De(a,s)){let u={channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,curve:a.curve,oversample:a.oversample};a=t(s,u)}return r.set(s,a),Dn(a)?yield n(i,s,a.inputs[0]):yield n(i,s,a),a});return{render(i,s){let a=r.get(s);return a!==void 0?Promise.resolve(a):o(i,s)}}};var fb=()=>typeof window>"u"?null:window;var pb=(t,e)=>n=>{n.copyFromChannel=(r,o,i=0)=>{let s=t(i),a=t(o);if(a>=n.numberOfChannels)throw e();let c=n.length,u=n.getChannelData(a),l=r.length;for(let d=s<0?-s:0;d+s<c&&d<l;d+=1)r[d]=u[d+s]},n.copyToChannel=(r,o,i=0)=>{let s=t(i),a=t(o);if(a>=n.numberOfChannels)throw e();let c=n.length,u=n.getChannelData(a),l=r.length;for(let d=s<0?-s:0;d+s<c&&d<l;d+=1)u[d+s]=r[d]}};var mb=t=>e=>{e.copyFromChannel=(n=>(r,o,i=0)=>{let s=t(i),a=t(o);if(s<e.length)return n.call(e,r,a,s)})(e.copyFromChannel),e.copyToChannel=(n=>(r,o,i=0)=>{let s=t(i),a=t(o);if(s<e.length)return n.call(e,r,a,s)})(e.copyToChannel)};var gb=t=>(e,n)=>{let r=n.createBuffer(1,1,44100);e.buffer===null&&(e.buffer=r),t(e,"buffer",o=>()=>{let i=o.call(e);return i===r?null:i},o=>i=>o.call(e,i===null?r:i))};var vb=(t,e)=>(n,r)=>{r.channelCount=1,r.channelCountMode="explicit",Object.defineProperty(r,"channelCount",{get:()=>1,set:()=>{throw t()}}),Object.defineProperty(r,"channelCountMode",{get:()=>"explicit",set:()=>{throw t()}});let o=n.createBufferSource();e(r,()=>{let a=r.numberOfInputs;for(let c=0;c<a;c+=1)o.connect(r,0,c)},()=>o.disconnect(r))};var Tp=(t,e,n)=>t.copyFromChannel===void 0?t.getChannelData(n)[0]:(t.copyFromChannel(e,n),e[0]);var Ep=t=>{if(t===null)return!1;let e=t.length;return e%2!==0?t[Math.floor(e/2)]!==0:t[e/2-1]+t[e/2]!==0};var ts=(t,e,n,r)=>{let o=t;for(;!o.hasOwnProperty(e);)o=Object.getPrototypeOf(o);let{get:i,set:s}=Object.getOwnPropertyDescriptor(o,e);Object.defineProperty(t,e,{get:n(i),set:r(s)})};var yb=t=>V(x({},t),{outputChannelCount:t.outputChannelCount!==void 0?t.outputChannelCount:t.numberOfInputs===1&&t.numberOfOutputs===1?[t.channelCount]:Array.from({length:t.numberOfOutputs},()=>1)});var _b=t=>V(x({},t),{channelCount:t.numberOfOutputs});var xb=t=>{let{imag:e,real:n}=t;return e===void 0?n===void 0?V(x({},t),{imag:[0,0],real:[0,0]}):V(x({},t),{imag:Array.from(n,()=>0),real:n}):n===void 0?V(x({},t),{imag:e,real:Array.from(e,()=>0)}):V(x({},t),{imag:e,real:n})};var Ip=(t,e,n)=>{try{t.setValueAtTime(e,n)}catch(r){if(r.code!==9)throw r;Ip(t,e,n+1e-7)}};var wb=t=>{let e=t.createBufferSource();e.start();try{e.start()}catch{return!0}return!1};var bb=t=>{let e=t.createBufferSource(),n=t.createBuffer(1,1,44100);e.buffer=n;try{e.start(0,1)}catch{return!1}return!0};var Cb=t=>{let e=t.createBufferSource();e.start();try{e.stop()}catch{return!1}return!0};var Ku=t=>{let e=t.createOscillator();try{e.start(-1)}catch(n){return n instanceof RangeError}return!1};var Ap=t=>{let e=t.createBuffer(1,1,44100),n=t.createBufferSource();n.buffer=e,n.start(),n.stop();try{return n.stop(),!0}catch{return!1}};var Ju=t=>{let e=t.createOscillator();try{e.stop(-1)}catch(n){return n instanceof RangeError}return!1};var Db=t=>{let{port1:e,port2:n}=new MessageChannel;try{e.postMessage(t)}finally{e.close(),n.close()}};var Sb=t=>{t.start=(e=>(n=0,r=0,o)=>{let i=t.buffer,s=i===null?r:Math.min(i.duration,r);i!==null&&s>i.duration-.5/t.context.sampleRate?e.call(t,n,0,0):e.call(t,n,s,o)})(t.start)};var Mp=(t,e)=>{let n=e.createGain();t.connect(n);let r=(o=>()=>{o.call(t,n),t.removeEventListener("ended",r)})(t.disconnect);t.addEventListener("ended",r),Sn(t,n),t.stop=(o=>{let i=!1;return(s=0)=>{if(i)try{o.call(t,s)}catch{n.gain.setValueAtTime(0,s)}else o.call(t,s),i=!0}})(t.stop)};var Fo=(t,e)=>n=>{let r={value:t};return Object.defineProperties(n,{currentTarget:r,target:r}),typeof e=="function"?e.call(t,n):e.handleEvent.call(t,n)};var cO=px($n),uO=Dx($n),lO=xw(eo),Eb=new WeakMap,dO=Pw(Eb),Tn=tw(new Map,new WeakMap),mr=fb(),Ib=d0(Tn,Cn),Np=Fw(ft),Ct=eb(ft,Np,Nr),hO=Ix(Ib,Pe,Ct),qe=jw(Ui),Or=V0(mr),Ve=e0(Or),Ab=new WeakMap,Mb=Aw(Fo),ns=m0(mr),Op=Qw(ns),Rp=Xw(mr),Nb=Kw(mr),Va=v0(mr),nt=Wx(mx(Bu),Cx(cO,uO,Hi,lO,Wi,ft,dO,fr,Pe,$n,kt,Nr,Gi),Tn,Ww(Ra,Wi,ft,Pe,Ro,kt),Cn,Qi,bt,vw(Hi,Ra,ft,Pe,Ro,qe,kt,Ve),Cw(Ab,ft,at),Mb,qe,Op,Rp,Nb,Ve,Va),fO=Ex(nt,hO,Cn,Ib,qe,Ve);var kp=new WeakSet,Tb=h0(mr),Ob=dw(new Uint32Array(1)),Fp=pb(Ob,Cn),Pp=mb(Ob),pO=Ax(kp,Tn,bt,Tb,Or,cb(Tb),Fp,Pp);var el=Sx(Ft),Rb=tb(Np,to,Nr),gr=sw(Rb),rs=p0(el,Tn,wb,bb,Cb,Ku,Ap,Ju,Sb,gb(ts),Mp),vr=J0(Vw(to),Rb),mO=Ox(gr,rs,Pe,vr,Ct),Wn=zx(gx(Uu),Ab,Oa,Zx,Gt.createCancelAndHoldAutomationEvent,Gt.createCancelScheduledValuesAutomationEvent,Gt.createExponentialRampToValueAutomationEvent,Gt.createLinearRampToValueAutomationEvent,Gt.createSetTargetAutomationEvent,Gt.createSetValueAutomationEvent,Gt.createSetValueCurveAutomationEvent,ns,Ip),gO=Nx(nt,mO,Wn,$e,rs,qe,Ve,Fo);var vO=Bx(nt,Ux,Cn,$e,g0(Ft,ts),qe,Ve,Ct),yO=ew(gr,Cp,Pe,vr,Ct),Po=ob(Eb),_O=Jx(nt,Wn,yO,Qi,Cp,qe,Ve,Po),oo=u0($n,Rp),xO=vb($e,oo),io=D0(ns,xO),wO=rw(io,Pe,Ct),bO=nw(nt,wO,io,qe,Ve),CO=iw(Ji,Pe,Ct),DO=ow(nt,CO,Ji,qe,Ve,_b),SO=E0(el,rs,Ft,oo),os=T0(el,Tn,SO,Ku,Ju),TO=lw(gr,os,Pe,vr,Ct),EO=uw(nt,Wn,TO,os,qe,Ve,Fo),kb=I0(bt,ts),IO=fw(kb,Pe,Ct),AO=hw(nt,IO,kb,qe,Ve,Po),MO=_w(gr,Dp,Pe,vr,Ct),NO=yw(nt,Wn,MO,Dp,qe,Ve,Po),Fb=A0(bt),OO=Tw(gr,Fb,Pe,vr,Ct),RO=Sw(nt,Wn,OO,Fb,bt,qe,Ve,Po),kO=Rw(gr,Ft,Pe,vr,Ct),FO=Ow(nt,Wn,kO,Ft,qe,Ve),PO=O0(Qi,$e,es,bt),tl=nb(Tn,Ft,es,lb(Ft,Or)),VO=Hw(rs,Pe,Or,Ct,tl),LO=M0(PO),jO=$w(nt,LO,VO,qe,Ve,Po),BO=qx(Wn,io,os,es,bt,Tp,Ve,ts),Pb=new WeakMap,Vp=a0(vO,BO,Mb,Ve,Pb,Fo),Vb=L0(el,Tn,Ku,Ap,Ju,Mp),UO=Z0(gr,Vb,Pe,vr,Ct),qO=z0(nt,Wn,Vb,UO,qe,Ve,Fo),Lb=cw(rs),$O=W0(Lb,$e,Ft,Ep,oo),nl=H0(Lb,$e,$O,Ep,oo,ns,ts),HO=B0(Hi,$e,io,Ft,es,nl,bt,Wi,Tp,oo),jb=j0(HO),WO=Q0(gr,io,os,Ft,jb,Pe,Or,vr,Ct,tl),GO=Y0(nt,Wn,jb,WO,qe,Ve,Po),zO=U0(Cn),ZO=X0(zO,qe,new WeakSet,xb),YO=$0(io,Ji,Ft,nl,bt,oo),Bb=q0(YO,bt),QO=ab(gr,Bb,Pe,vr,Ct),XO=sb(nt,Wn,Bb,QO,qe,Ve),KO=hb(nl,Pe,Ct),JO=db(nt,$e,nl,KO,qe,Ve,Po),Ub=t0(mr),Lp=Mw(mr),qb=new WeakMap,eR=Bw(qb,Or),tR=Ub?bx(Tn,bt,Iw(mr),Lp,Nw(fx),qe,eR,Ve,Va,new WeakMap,new WeakMap,ub(Va,Or),mr):void 0,nR=Jw(Op,Ve),rR=gw(kp,Tn,mw,Ew,new WeakSet,qe,nR,qi,Hn,Fp,Pp),$b=Kx(tR,fO,pO,gO,_O,bO,DO,EO,AO,rR,NO,RO,FO,jO,Vp,qO,GO,ZO,XO,JO),oR=n0(nt,R0,qe,Ve),iR=r0(nt,k0,qe,Ve),sR=o0(nt,F0,qe,Ve),aR=P0($e,Ve),cR=i0(nt,aR,qe),Hb=jx($b,$e,bt,Sp,oR,iR,sR,cR,ns);var jp=Uw(Pb),uR=Tx(jp),Wb=aw(Cn),lR=ww(jp),Gb=Dw(Cn),zb=new WeakMap,dR=kw(zb,at),hR=C0(Wb,Cn,$e,io,Ji,os,Ft,es,bt,Gb,Lp,dR,oo),fR=_0($e,hR,Ft,bt,oo),pR=Xx(gr,Wb,rs,io,Ji,os,Ft,lR,Gb,Lp,Pe,Va,Or,vr,Ct,tl),mR=Lw(qb),gR=rb(zb),Bp=Ub?Yx(uR,nt,Wn,pR,fR,ft,mR,qe,Ve,Va,yb,gR,Db,Fo):void 0;var noe=s0($e,bt,Sp,Vp,ns);var Zb=pw(bt,Or),Yb=ib(kp,Tn,Np,jp,tl,qi,Fp,Pp),roe=c0(Tn,$e,Zb,Vp,Yb);var Qb=G0($b,Tn,$e,Zb,Yb);var Xb=Gw(Ui,Op),Kb=zw(Bi,Rp),Jb=Zw(Oa,Nb),eC=Yw(Ui,Ve);function G(t,e){if(!t)throw new Error(e)}function gt(t,e,n=1/0){if(!(e<=t&&t<=n))throw new RangeError(`Value must be within [${e}, ${n}], got: ${t}`)}function rl(t){!t.isOffline&&t.state!=="running"&&La('The AudioContext is "suspended". Invoke Tone.start() from a user action to start the audio.')}var tC=console;function nC(...t){tC.log(...t)}function La(...t){tC.warn(...t)}function ct(t){return typeof t>"u"}function te(t){return!ct(t)}function rC(t){return typeof t=="function"}function Dt(t){return typeof t=="number"}function Gn(t){return Object.prototype.toString.call(t)==="[object Object]"&&t.constructor===Object}function ol(t){return typeof t=="boolean"}function rt(t){return Array.isArray(t)}function vt(t){return typeof t=="string"}function ja(t){return vt(t)&&/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i.test(t)}function oC(t){return new Hb(t)}function iC(t,e,n){return new Qb(t,e,n)}var yr=typeof self=="object"?self:null,sC=yr&&(yr.hasOwnProperty("AudioContext")||yr.hasOwnProperty("webkitAudioContext"));function aC(t,e,n){return G(te(Bp),"This node only works in a secure context (https or localhost)"),new Bp(t,e,n)}var il=class{constructor(e,n,r){this._callback=e,this._type=n,this._updateInterval=r,this._createClock()}_createWorker(){let e=new Blob([`
			// the initial timeout time
			let timeoutTime =  ${(this._updateInterval*1e3).toFixed(1)};
			// onmessage callback
			self.onmessage = function(msg){
				timeoutTime = parseInt(msg.data);
			};
			// the tick function which posts a message
			// and schedules a new tick
			function tick(){
				setTimeout(tick, timeoutTime);
				self.postMessage('tick');
			}
			// call tick initially
			tick();
			`],{type:"text/javascript"}),n=URL.createObjectURL(e),r=new Worker(n);r.onmessage=this._callback.bind(this),this._worker=r}_createTimeout(){this._timeout=setTimeout(()=>{this._createTimeout(),this._callback()},this._updateInterval*1e3)}_createClock(){if(this._type==="worker")try{this._createWorker()}catch{this._type="timeout",this._createClock()}else this._type==="timeout"&&this._createTimeout()}_disposeClock(){this._timeout&&(clearTimeout(this._timeout),this._timeout=0),this._worker&&(this._worker.terminate(),this._worker.onmessage=null)}get updateInterval(){return this._updateInterval}set updateInterval(e){this._updateInterval=Math.max(e,128/44100),this._type==="worker"&&this._worker.postMessage(Math.max(e*1e3,1))}get type(){return this._type}set type(e){this._disposeClock(),this._type=e,this._createClock()}dispose(){this._disposeClock()}};function zn(t){return Jb(t)}function _r(t){return Kb(t)}function is(t){return eC(t)}function so(t){return Xb(t)}function sl(t){return t instanceof AudioBuffer}function _R(t,e){return t==="value"||zn(e)||_r(e)||sl(e)}function Zn(t,...e){if(!e.length)return t;let n=e.shift();if(Gn(t)&&Gn(n))for(let r in n)_R(r,n[r])?t[r]=n[r]:Gn(n[r])?(t[r]||Object.assign(t,{[r]:{}}),Zn(t[r],n[r])):Object.assign(t,{[r]:n[r]});return Zn(t,...e)}function cC(t,e){return t.length===e.length&&t.every((n,r)=>e[r]===n)}function y(t,e,n=[],r){let o={},i=Array.from(e);if(Gn(i[0])&&r&&!Reflect.has(i[0],r)&&(Object.keys(i[0]).some(a=>Reflect.has(t,a))||(Zn(o,{[r]:i[0]}),n.splice(n.indexOf(r),1),i.shift())),i.length===1&&Gn(i[0]))Zn(o,i[0]);else for(let s=0;s<n.length;s++)te(i[s])&&(o[n[s]]=i[s]);return Zn(t,o)}function uC(t){return t.constructor.getDefaults()}function zt(t,e){return ct(t)?e:t}function xr(t,e){return e.forEach(n=>{Reflect.has(t,n)&&delete t[n]}),t}var Mt=(()=>{class t{constructor(){this.debug=!1,this._wasDisposed=!1}static getDefaults(){return{}}log(...n){(this.debug||yr&&this.toString()===yr.TONE_DEBUG_CLASS)&&nC(this,...n)}dispose(){return this._wasDisposed=!0,this}get disposed(){return this._wasDisposed}toString(){return this.name}}return t.version=wa,t})();function ss(t,e){return t>e+1e-6}function Ba(t,e){return ss(t,e)||Pt(t,e)}function al(t,e){return t+1e-6<e}function Pt(t,e){return Math.abs(t-e)<1e-6}function Up(t,e,n){return Math.max(Math.min(t,n),e)}var yt=class t extends Mt{constructor(){super(),this.name="Timeline",this._timeline=[];let e=y(t.getDefaults(),arguments,["memory"]);this.memory=e.memory,this.increasing=e.increasing}static getDefaults(){return{memory:1/0,increasing:!1}}get length(){return this._timeline.length}add(e){if(G(Reflect.has(e,"time"),"Timeline: events must have a time attribute"),e.time=e.time.valueOf(),this.increasing&&this.length){let n=this._timeline[this.length-1];G(Ba(e.time,n.time),"The time must be greater than or equal to the last scheduled time"),this._timeline.push(e)}else{let n=this._search(e.time);this._timeline.splice(n+1,0,e)}if(this.length>this.memory){let n=this.length-this.memory;this._timeline.splice(0,n)}return this}remove(e){let n=this._timeline.indexOf(e);return n!==-1&&this._timeline.splice(n,1),this}get(e,n="time"){let r=this._search(e,n);return r!==-1?this._timeline[r]:null}peek(){return this._timeline[0]}shift(){return this._timeline.shift()}getAfter(e,n="time"){let r=this._search(e,n);return r+1<this._timeline.length?this._timeline[r+1]:null}getBefore(e){let n=this._timeline.length;if(n>0&&this._timeline[n-1].time<e)return this._timeline[n-1];let r=this._search(e);return r-1>=0?this._timeline[r-1]:null}cancel(e){if(this._timeline.length>1){let n=this._search(e);if(n>=0)if(Pt(this._timeline[n].time,e)){for(let r=n;r>=0&&Pt(this._timeline[r].time,e);r--)n=r;this._timeline=this._timeline.slice(0,n)}else this._timeline=this._timeline.slice(0,n+1);else this._timeline=[]}else this._timeline.length===1&&Ba(this._timeline[0].time,e)&&(this._timeline=[]);return this}cancelBefore(e){let n=this._search(e);return n>=0&&(this._timeline=this._timeline.slice(n+1)),this}previousEvent(e){let n=this._timeline.indexOf(e);return n>0?this._timeline[n-1]:null}_search(e,n="time"){if(this._timeline.length===0)return-1;let r=0,o=this._timeline.length,i=o;if(o>0&&this._timeline[o-1][n]<=e)return o-1;for(;r<i;){let s=Math.floor(r+(i-r)/2),a=this._timeline[s],c=this._timeline[s+1];if(Pt(a[n],e)){for(let u=s;u<this._timeline.length;u++){let l=this._timeline[u];if(Pt(l[n],e))s=u;else break}return s}else{if(al(a[n],e)&&ss(c[n],e))return s;ss(a[n],e)?i=s:r=s+1}}return-1}_iterate(e,n=0,r=this._timeline.length-1){this._timeline.slice(n,r+1).forEach(e)}forEach(e){return this._iterate(e),this}forEachBefore(e,n){let r=this._search(e);return r!==-1&&this._iterate(n,0,r),this}forEachAfter(e,n){let r=this._search(e);return this._iterate(n,r+1),this}forEachBetween(e,n,r){let o=this._search(e),i=this._search(n);return o!==-1&&i!==-1?(this._timeline[o].time!==e&&(o+=1),this._timeline[i].time===n&&(i-=1),this._iterate(r,o,i)):o===-1&&this._iterate(r,0,i),this}forEachFrom(e,n){let r=this._search(e);for(;r>=0&&this._timeline[r].time>=e;)r--;return this._iterate(n,r+1),this}forEachAtTime(e,n){let r=this._search(e);if(r!==-1&&Pt(this._timeline[r].time,e)){let o=r;for(let i=r;i>=0&&Pt(this._timeline[i].time,e);i--)o=i;this._iterate(i=>{n(i)},o,r)}return this}dispose(){return super.dispose(),this._timeline=[],this}};var lC=[];function ao(t){lC.push(t)}function dC(t){lC.forEach(e=>e(t))}var hC=[];function co(t){hC.push(t)}function fC(t){hC.forEach(e=>e(t))}var uo=class t extends Mt{constructor(){super(...arguments),this.name="Emitter"}on(e,n){return e.split(/\W+/).forEach(o=>{ct(this._events)&&(this._events={}),this._events.hasOwnProperty(o)||(this._events[o]=[]),this._events[o].push(n)}),this}once(e,n){let r=(...o)=>{n(...o),this.off(e,r)};return this.on(e,r),this}off(e,n){return e.split(/\W+/).forEach(o=>{if(ct(this._events)&&(this._events={}),this._events.hasOwnProperty(e))if(ct(n))this._events[e]=[];else{let i=this._events[e];for(let s=i.length-1;s>=0;s--)i[s]===n&&i.splice(s,1)}}),this}emit(e,...n){if(this._events&&this._events.hasOwnProperty(e)){let r=this._events[e].slice(0);for(let o=0,i=r.length;o<i;o++)r[o].apply(this,n)}return this}static mixin(e){["on","once","off","emit"].forEach(n=>{let r=Object.getOwnPropertyDescriptor(t.prototype,n);Object.defineProperty(e.prototype,n,r)})}dispose(){return super.dispose(),this._events=void 0,this}};var as=class extends uo{constructor(){super(...arguments),this.isOffline=!1}toJSON(){return{}}};var Vo=class t extends as{constructor(){super(),this.name="Context",this._constants=new Map,this._timeouts=new yt,this._timeoutIds=0,this._initialized=!1,this.isOffline=!1,this._workletModules=new Map;let e=y(t.getDefaults(),arguments,["context"]);e.context?this._context=e.context:this._context=oC({latencyHint:e.latencyHint}),this._ticker=new il(this.emit.bind(this,"tick"),e.clockSource,e.updateInterval),this.on("tick",this._timeoutLoop.bind(this)),this._context.onstatechange=()=>{this.emit("statechange",this.state)},this._setLatencyHint(e.latencyHint),this.lookAhead=e.lookAhead}static getDefaults(){return{clockSource:"worker",latencyHint:"interactive",lookAhead:.1,updateInterval:.05}}initialize(){return this._initialized||(dC(this),this._initialized=!0),this}createAnalyser(){return this._context.createAnalyser()}createOscillator(){return this._context.createOscillator()}createBufferSource(){return this._context.createBufferSource()}createBiquadFilter(){return this._context.createBiquadFilter()}createBuffer(e,n,r){return this._context.createBuffer(e,n,r)}createChannelMerger(e){return this._context.createChannelMerger(e)}createChannelSplitter(e){return this._context.createChannelSplitter(e)}createConstantSource(){return this._context.createConstantSource()}createConvolver(){return this._context.createConvolver()}createDelay(e){return this._context.createDelay(e)}createDynamicsCompressor(){return this._context.createDynamicsCompressor()}createGain(){return this._context.createGain()}createIIRFilter(e,n){return this._context.createIIRFilter(e,n)}createPanner(){return this._context.createPanner()}createPeriodicWave(e,n,r){return this._context.createPeriodicWave(e,n,r)}createStereoPanner(){return this._context.createStereoPanner()}createWaveShaper(){return this._context.createWaveShaper()}createMediaStreamSource(e){return G(so(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamSource(e)}createMediaElementSource(e){return G(so(this._context),"Not available if OfflineAudioContext"),this._context.createMediaElementSource(e)}createMediaStreamDestination(){return G(so(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamDestination()}decodeAudioData(e){return this._context.decodeAudioData(e)}get currentTime(){return this._context.currentTime}get state(){return this._context.state}get sampleRate(){return this._context.sampleRate}get listener(){return this.initialize(),this._listener}set listener(e){G(!this._initialized,"The listener cannot be set after initialization."),this._listener=e}get transport(){return this.initialize(),this._transport}set transport(e){G(!this._initialized,"The transport cannot be set after initialization."),this._transport=e}get draw(){return this.initialize(),this._draw}set draw(e){G(!this._initialized,"Draw cannot be set after initialization."),this._draw=e}get destination(){return this.initialize(),this._destination}set destination(e){G(!this._initialized,"The destination cannot be set after initialization."),this._destination=e}createAudioWorkletNode(e,n){return aC(this.rawContext,e,n)}addAudioWorkletModule(e,n){return ye(this,void 0,void 0,function*(){G(te(this.rawContext.audioWorklet),"AudioWorkletNode is only available in a secure context (https or localhost)"),this._workletModules.has(n)||this._workletModules.set(n,this.rawContext.audioWorklet.addModule(e)),yield this._workletModules.get(n)})}workletsAreReady(){return ye(this,void 0,void 0,function*(){let e=[];this._workletModules.forEach(n=>e.push(n)),yield Promise.all(e)})}get updateInterval(){return this._ticker.updateInterval}set updateInterval(e){this._ticker.updateInterval=e}get clockSource(){return this._ticker.type}set clockSource(e){this._ticker.type=e}get latencyHint(){return this._latencyHint}_setLatencyHint(e){let n=0;if(this._latencyHint=e,vt(e))switch(e){case"interactive":n=.1;break;case"playback":n=.5;break;case"balanced":n=.25;break}this.lookAhead=n,this.updateInterval=n/2}get rawContext(){return this._context}now(){return this._context.currentTime+this.lookAhead}immediate(){return this._context.currentTime}resume(){return so(this._context)?this._context.resume():Promise.resolve()}close(){return ye(this,void 0,void 0,function*(){so(this._context)&&(yield this._context.close()),this._initialized&&fC(this)})}getConstant(e){if(this._constants.has(e))return this._constants.get(e);{let n=this._context.createBuffer(1,128,this._context.sampleRate),r=n.getChannelData(0);for(let i=0;i<r.length;i++)r[i]=e;let o=this._context.createBufferSource();return o.channelCount=1,o.channelCountMode="explicit",o.buffer=n,o.loop=!0,o.start(0),this._constants.set(e,o),o}}dispose(){return super.dispose(),this._ticker.dispose(),this._timeouts.dispose(),Object.keys(this._constants).map(e=>this._constants[e].disconnect()),this}_timeoutLoop(){let e=this.now(),n=this._timeouts.peek();for(;this._timeouts.length&&n&&n.time<=e;)n.callback(),this._timeouts.shift(),n=this._timeouts.peek()}setTimeout(e,n){this._timeoutIds++;let r=this.now();return this._timeouts.add({callback:e,id:this._timeoutIds,time:r+n}),this._timeoutIds}clearTimeout(e){return this._timeouts.forEach(n=>{n.id===e&&this._timeouts.remove(n)}),this}clearInterval(e){return this.clearTimeout(e)}setInterval(e,n){let r=++this._timeoutIds,o=()=>{let i=this.now();this._timeouts.add({callback:()=>{e(),o()},id:r,time:i+n})};return o(),r}};var cl=class extends as{constructor(){super(...arguments),this.lookAhead=0,this.latencyHint=0,this.isOffline=!1}createAnalyser(){return{}}createOscillator(){return{}}createBufferSource(){return{}}createBiquadFilter(){return{}}createBuffer(e,n,r){return{}}createChannelMerger(e){return{}}createChannelSplitter(e){return{}}createConstantSource(){return{}}createConvolver(){return{}}createDelay(e){return{}}createDynamicsCompressor(){return{}}createGain(){return{}}createIIRFilter(e,n){return{}}createPanner(){return{}}createPeriodicWave(e,n,r){return{}}createStereoPanner(){return{}}createWaveShaper(){return{}}createMediaStreamSource(e){return{}}createMediaElementSource(e){return{}}createMediaStreamDestination(){return{}}decodeAudioData(e){return Promise.resolve({})}createAudioWorkletNode(e,n){return{}}get rawContext(){return{}}addAudioWorkletModule(e,n){return ye(this,void 0,void 0,function*(){return Promise.resolve()})}resume(){return Promise.resolve()}setTimeout(e,n){return 0}clearTimeout(e){return this}setInterval(e,n){return 0}clearInterval(e){return this}getConstant(e){return{}}get currentTime(){return 0}get state(){return{}}get sampleRate(){return 0}get listener(){return{}}get transport(){return{}}get draw(){return{}}set draw(e){}get destination(){return{}}set destination(e){}now(){return 0}immediate(){return 0}};function B(t,e){rt(e)?e.forEach(n=>B(t,n)):Object.defineProperty(t,e,{enumerable:!0,writable:!1})}function cs(t,e){rt(e)?e.forEach(n=>cs(t,n)):Object.defineProperty(t,e,{writable:!0})}var oe=()=>{};var Nt=(()=>{class t extends Mt{constructor(){super(),this.name="ToneAudioBuffer",this.onload=oe;let n=y(t.getDefaults(),arguments,["url","onload","onerror"]);this.reverse=n.reverse,this.onload=n.onload,n.url&&sl(n.url)||n.url instanceof t?this.set(n.url):vt(n.url)&&this.load(n.url).catch(n.onerror)}static getDefaults(){return{onerror:oe,onload:oe,reverse:!1}}get sampleRate(){return this._buffer?this._buffer.sampleRate:Xe().sampleRate}set(n){return n instanceof t?n.loaded?this._buffer=n.get():n.onload=()=>{this.set(n),this.onload(this)}:this._buffer=n,this._reversed&&this._reverse(),this}get(){return this._buffer}load(n){return ye(this,void 0,void 0,function*(){let r=t.load(n).then(o=>{this.set(o),this.onload(this)});t.downloads.push(r);try{yield r}finally{let o=t.downloads.indexOf(r);t.downloads.splice(o,1)}return this})}dispose(){return super.dispose(),this._buffer=void 0,this}fromArray(n){let r=rt(n)&&n[0].length>0,o=r?n.length:1,i=r?n[0].length:n.length,s=Xe(),a=s.createBuffer(o,i,s.sampleRate),c=!r&&o===1?[n]:n;for(let u=0;u<o;u++)a.copyToChannel(c[u],u);return this._buffer=a,this}toMono(n){if(Dt(n))this.fromArray(this.toArray(n));else{let r=new Float32Array(this.length),o=this.numberOfChannels;for(let i=0;i<o;i++){let s=this.toArray(i);for(let a=0;a<s.length;a++)r[a]+=s[a]}r=r.map(i=>i/o),this.fromArray(r)}return this}toArray(n){if(Dt(n))return this.getChannelData(n);if(this.numberOfChannels===1)return this.toArray(0);{let r=[];for(let o=0;o<this.numberOfChannels;o++)r[o]=this.getChannelData(o);return r}}getChannelData(n){return this._buffer?this._buffer.getChannelData(n):new Float32Array(0)}slice(n,r=this.duration){let o=Math.floor(n*this.sampleRate),i=Math.floor(r*this.sampleRate);G(o<i,"The start time must be less than the end time");let s=i-o,a=Xe().createBuffer(this.numberOfChannels,s,this.sampleRate);for(let c=0;c<this.numberOfChannels;c++)a.copyToChannel(this.getChannelData(c).subarray(o,i),c);return new t(a)}_reverse(){if(this.loaded)for(let n=0;n<this.numberOfChannels;n++)this.getChannelData(n).reverse();return this}get loaded(){return this.length>0}get duration(){return this._buffer?this._buffer.duration:0}get length(){return this._buffer?this._buffer.length:0}get numberOfChannels(){return this._buffer?this._buffer.numberOfChannels:0}get reverse(){return this._reversed}set reverse(n){this._reversed!==n&&(this._reversed=n,this._reverse())}static fromArray(n){return new t().fromArray(n)}static fromUrl(n){return ye(this,void 0,void 0,function*(){return yield new t().load(n)})}static load(n){return ye(this,void 0,void 0,function*(){let r=n.match(/\[([^\]\[]+\|.+)\]$/);if(r){let c=r[1].split("|"),u=c[0];for(let l of c)if(t.supportsType(l)){u=l;break}n=n.replace(r[0],u)}let o=t.baseUrl===""||t.baseUrl.endsWith("/")?t.baseUrl:t.baseUrl+"/",i=yield fetch(o+n);if(!i.ok)throw new Error(`could not load url: ${n}`);let s=yield i.arrayBuffer();return yield Xe().decodeAudioData(s)})}static supportsType(n){let r=n.split("."),o=r[r.length-1];return document.createElement("audio").canPlayType("audio/"+o)!==""}static loaded(){return ye(this,void 0,void 0,function*(){for(yield Promise.resolve();t.downloads.length;)yield t.downloads[0]})}}return t.baseUrl="",t.downloads=[],t})();var wr=class extends Vo{constructor(){super({clockSource:"offline",context:is(arguments[0])?arguments[0]:iC(arguments[0],arguments[1]*arguments[2],arguments[2]),lookAhead:0,updateInterval:is(arguments[0])?128/arguments[0].sampleRate:128/arguments[2]}),this.name="OfflineContext",this._currentTime=0,this.isOffline=!0,this._duration=is(arguments[0])?arguments[0].length/arguments[0].sampleRate:arguments[1]}now(){return this._currentTime}get currentTime(){return this._currentTime}_renderClock(e){return ye(this,void 0,void 0,function*(){let n=0;for(;this._duration-this._currentTime>=0;){this.emit("tick"),this._currentTime+=128/this.sampleRate,n++;let r=Math.floor(this.sampleRate/128);e&&n%r===0&&(yield new Promise(o=>setTimeout(o,1)))}})}render(e=!0){return ye(this,void 0,void 0,function*(){yield this.workletsAreReady(),yield this._renderClock(e);let n=yield this._context.startRendering();return new Nt(n)})}close(){return Promise.resolve()}};var pC=new cl,us=pC;function Xe(){return us===pC&&sC&&qp(new Vo),us}function qp(t){so(t)?us=new Vo(t):is(t)?us=new wr(t):us=t}function Ua(){return us.resume()}if(yr&&!yr.TONE_SILENCE_LOGGING){let t="v";wa==="dev"&&(t="");let e=` * Tone.js ${t}${wa} * `;console.log(`%c${e}`,"background: #000; color: #fff")}function ls(t){return Math.pow(10,t/20)}function ds(t){return 20*(Math.log(t)/Math.LN10)}function Lo(t){return Math.pow(2,t/12)}var ul=440;function mC(){return ul}function gC(t){ul=t}function jo(t){return Math.round($p(t))}function $p(t){return 69+12*Math.log2(t/ul)}function ll(t){return ul*Math.pow(2,(t-69)/12)}var dl=class t extends Mt{constructor(e,n,r){super(),this.defaultUnits="s",this._val=n,this._units=r,this.context=e,this._expressions=this._getExpressions()}_getExpressions(){return{hz:{method:e=>this._frequencyToUnits(parseFloat(e)),regexp:/^(\d+(?:\.\d+)?)hz$/i},i:{method:e=>this._ticksToUnits(parseInt(e,10)),regexp:/^(\d+)i$/i},m:{method:e=>this._beatsToUnits(parseInt(e,10)*this._getTimeSignature()),regexp:/^(\d+)m$/i},n:{method:(e,n)=>{let r=parseInt(e,10),o=n==="."?1.5:1;return r===1?this._beatsToUnits(this._getTimeSignature())*o:this._beatsToUnits(4/r)*o},regexp:/^(\d+)n(\.?)$/i},number:{method:e=>this._expressions[this.defaultUnits].method.call(this,e),regexp:/^(\d+(?:\.\d+)?)$/},s:{method:e=>this._secondsToUnits(parseFloat(e)),regexp:/^(\d+(?:\.\d+)?)s$/},samples:{method:e=>parseInt(e,10)/this.context.sampleRate,regexp:/^(\d+)samples$/},t:{method:e=>{let n=parseInt(e,10);return this._beatsToUnits(8/(Math.floor(n)*3))},regexp:/^(\d+)t$/i},tr:{method:(e,n,r)=>{let o=0;return e&&e!=="0"&&(o+=this._beatsToUnits(this._getTimeSignature()*parseFloat(e))),n&&n!=="0"&&(o+=this._beatsToUnits(parseFloat(n))),r&&r!=="0"&&(o+=this._beatsToUnits(parseFloat(r)/4)),o},regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?$/}}}valueOf(){if(this._val instanceof t&&this.fromType(this._val),ct(this._val))return this._noArg();if(vt(this._val)&&ct(this._units)){for(let e in this._expressions)if(this._expressions[e].regexp.test(this._val.trim())){this._units=e;break}}else if(Gn(this._val)){let e=0;for(let n in this._val)if(te(this._val[n])){let r=this._val[n],o=new this.constructor(this.context,n).valueOf()*r;e+=o}return e}if(te(this._units)){let e=this._expressions[this._units],n=this._val.toString().trim().match(e.regexp);return n?e.method.apply(this,n.slice(1)):e.method.call(this,this._val)}else return vt(this._val)?parseFloat(this._val):this._val}_frequencyToUnits(e){return 1/e}_beatsToUnits(e){return 60/this._getBpm()*e}_secondsToUnits(e){return e}_ticksToUnits(e){return e*this._beatsToUnits(1)/this._getPPQ()}_noArg(){return this._now()}_getBpm(){return this.context.transport.bpm.value}_getTimeSignature(){return this.context.transport.timeSignature}_getPPQ(){return this.context.transport.PPQ}fromType(e){switch(this._units=void 0,this.defaultUnits){case"s":this._val=e.toSeconds();break;case"i":this._val=e.toTicks();break;case"hz":this._val=e.toFrequency();break;case"midi":this._val=e.toMidi();break}return this}toFrequency(){return 1/this.toSeconds()}toSamples(){return this.toSeconds()*this.context.sampleRate}toMilliseconds(){return this.toSeconds()*1e3}};var Zt=class t extends dl{constructor(){super(...arguments),this.name="TimeClass"}_getExpressions(){return Object.assign(super._getExpressions(),{now:{method:e=>this._now()+new this.constructor(this.context,e).valueOf(),regexp:/^\+(.+)/},quantize:{method:e=>{let n=new t(this.context,e).valueOf();return this._secondsToUnits(this.context.transport.nextSubdivision(n))},regexp:/^@(.+)/}})}quantize(e,n=1){let r=new this.constructor(this.context,e).valueOf(),o=this.valueOf(),a=Math.round(o/r)*r-o;return o+a*n}toNotation(){let e=this.toSeconds(),n=["1m"];for(let i=1;i<9;i++){let s=Math.pow(2,i);n.push(s+"n."),n.push(s+"n"),n.push(s+"t")}n.push("0");let r=n[0],o=new t(this.context,n[0]).toSeconds();return n.forEach(i=>{let s=new t(this.context,i).toSeconds();Math.abs(s-e)<Math.abs(o-e)&&(r=i,o=s)}),r}toBarsBeatsSixteenths(){let e=this._beatsToUnits(1),n=this.valueOf()/e;n=parseFloat(n.toFixed(4));let r=Math.floor(n/this._getTimeSignature()),o=n%1*4;n=Math.floor(n)%this._getTimeSignature();let i=o.toString();return i.length>3&&(o=parseFloat(parseFloat(i).toFixed(3))),[r,n,o].join(":")}toTicks(){let e=this._beatsToUnits(1),n=this.valueOf()/e;return Math.round(n*this._getPPQ())}toSeconds(){return this.valueOf()}toMidi(){return jo(this.toFrequency())}_now(){return this.context.now()}};function un(t,e){return new Zt(Xe(),t,e)}var Yt=class t extends Zt{constructor(){super(...arguments),this.name="Frequency",this.defaultUnits="hz"}static get A4(){return mC()}static set A4(e){gC(e)}_getExpressions(){return Object.assign({},super._getExpressions(),{midi:{regexp:/^(\d+(?:\.\d+)?midi)/,method(e){return this.defaultUnits==="midi"?e:t.mtof(e)}},note:{regexp:/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i,method(e,n){let o=xR[e.toLowerCase()]+(parseInt(n,10)+1)*12;return this.defaultUnits==="midi"?o:t.mtof(o)}},tr:{regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?/,method(e,n,r){let o=1;return e&&e!=="0"&&(o*=this._beatsToUnits(this._getTimeSignature()*parseFloat(e))),n&&n!=="0"&&(o*=this._beatsToUnits(parseFloat(n))),r&&r!=="0"&&(o*=this._beatsToUnits(parseFloat(r)/4)),o}}})}transpose(e){return new t(this.context,this.valueOf()*Lo(e))}harmonize(e){return e.map(n=>this.transpose(n))}toMidi(){return jo(this.valueOf())}toNote(){let e=this.toFrequency(),n=Math.log2(e/t.A4),r=Math.round(12*n)+57,o=Math.floor(r/12);return o<0&&(r+=-12*o),wR[r%12]+o.toString()}toSeconds(){return 1/super.toSeconds()}toTicks(){let e=this._beatsToUnits(1),n=this.valueOf()/e;return Math.floor(n*this._getPPQ())}_noArg(){return 0}_frequencyToUnits(e){return e}_ticksToUnits(e){return 1/(e*60/(this._getBpm()*this._getPPQ()))}_beatsToUnits(e){return 1/super._beatsToUnits(e)}_secondsToUnits(e){return 1/e}static mtof(e){return ll(e)}static ftom(e){return jo(e)}},xR={cbb:-2,cb:-1,c:0,"c#":1,cx:2,dbb:0,db:1,d:2,"d#":3,dx:4,ebb:2,eb:3,e:4,"e#":5,ex:6,fbb:3,fb:4,f:5,"f#":6,fx:7,gbb:5,gb:6,g:7,"g#":8,gx:9,abb:7,ab:8,a:9,"a#":10,ax:11,bbb:9,bb:10,b:11,"b#":12,bx:13},wR=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];var En=class extends Zt{constructor(){super(...arguments),this.name="TransportTime"}_now(){return this.context.transport.seconds}};var He=class t extends Mt{constructor(){super();let e=y(t.getDefaults(),arguments,["context"]);this.defaultContext?this.context=this.defaultContext:this.context=e.context}static getDefaults(){return{context:Xe()}}now(){return this.context.currentTime+this.context.lookAhead}immediate(){return this.context.currentTime}get sampleTime(){return 1/this.context.sampleRate}get blockTime(){return 128/this.context.sampleRate}toSeconds(e){return new Zt(this.context,e).toSeconds()}toFrequency(e){return new Yt(this.context,e).toFrequency()}toTicks(e){return new En(this.context,e).toTicks()}_getPartialProperties(e){let n=this.get();return Object.keys(n).forEach(r=>{ct(e[r])&&delete n[r]}),n}get(){let e=uC(this);return Object.keys(e).forEach(n=>{if(Reflect.has(this,n)){let r=this[n];te(r)&&te(r.value)&&te(r.setValueAtTime)?e[n]=r.value:r instanceof t?e[n]=r._getPartialProperties(e[n]):rt(r)||Dt(r)||vt(r)||ol(r)?e[n]=r:delete e[n]}}),e}set(e){return Object.keys(e).forEach(n=>{Reflect.has(this,n)&&te(this[n])&&(this[n]&&te(this[n].value)&&te(this[n].setValueAtTime)?this[n].value!==e[n]&&(this[n].value=e[n]):this[n]instanceof t?this[n].set(e[n]):this[n]=e[n])}),this}};var Yn=class extends yt{constructor(e="stopped"){super(),this.name="StateTimeline",this._initial=e,this.setStateAtTime(this._initial,0)}getValueAtTime(e){let n=this.get(e);return n!==null?n.state:this._initial}setStateAtTime(e,n,r){return gt(n,0),this.add(Object.assign({},r,{state:e,time:n})),this}getLastState(e,n){let r=this._search(n);for(let o=r;o>=0;o--){let i=this._timeline[o];if(i.state===e)return i}}getNextState(e,n){let r=this._search(n);if(r!==-1)for(let o=r;o<this._timeline.length;o++){let i=this._timeline[o];if(i.state===e)return i}}};var he=class t extends He{constructor(){super(y(t.getDefaults(),arguments,["param","units","convert"])),this.name="Param",this.overridden=!1,this._minOutput=1e-7;let e=y(t.getDefaults(),arguments,["param","units","convert"]);for(G(te(e.param)&&(zn(e.param)||e.param instanceof t),"param must be an AudioParam");!zn(e.param);)e.param=e.param._param;this._swappable=te(e.swappable)?e.swappable:!1,this._swappable?(this.input=this.context.createGain(),this._param=e.param,this.input.connect(this._param)):this._param=this.input=e.param,this._events=new yt(1e3),this._initialValue=this._param.defaultValue,this.units=e.units,this.convert=e.convert,this._minValue=e.minValue,this._maxValue=e.maxValue,te(e.value)&&e.value!==this._toType(this._initialValue)&&this.setValueAtTime(e.value,0)}static getDefaults(){return Object.assign(He.getDefaults(),{convert:!0,units:"number"})}get value(){let e=this.now();return this.getValueAtTime(e)}set value(e){this.cancelScheduledValues(this.now()),this.setValueAtTime(e,this.now())}get minValue(){return te(this._minValue)?this._minValue:this.units==="time"||this.units==="frequency"||this.units==="normalRange"||this.units==="positive"||this.units==="transportTime"||this.units==="ticks"||this.units==="bpm"||this.units==="hertz"||this.units==="samples"?0:this.units==="audioRange"?-1:this.units==="decibels"?-1/0:this._param.minValue}get maxValue(){return te(this._maxValue)?this._maxValue:this.units==="normalRange"||this.units==="audioRange"?1:this._param.maxValue}_is(e,n){return this.units===n}_assertRange(e){return te(this.maxValue)&&te(this.minValue)&&gt(e,this._fromType(this.minValue),this._fromType(this.maxValue)),e}_fromType(e){return this.convert&&!this.overridden?this._is(e,"time")?this.toSeconds(e):this._is(e,"decibels")?ls(e):this._is(e,"frequency")?this.toFrequency(e):e:this.overridden?0:e}_toType(e){return this.convert&&this.units==="decibels"?ds(e):e}setValueAtTime(e,n){let r=this.toSeconds(n),o=this._fromType(e);return G(isFinite(o)&&isFinite(r),`Invalid argument(s) to setValueAtTime: ${JSON.stringify(e)}, ${JSON.stringify(n)}`),this._assertRange(o),this.log(this.units,"setValueAtTime",e,r),this._events.add({time:r,type:"setValueAtTime",value:o}),this._param.setValueAtTime(o,r),this}getValueAtTime(e){let n=Math.max(this.toSeconds(e),0),r=this._events.getAfter(n),o=this._events.get(n),i=this._initialValue;if(o===null)i=this._initialValue;else if(o.type==="setTargetAtTime"&&(r===null||r.type==="setValueAtTime")){let s=this._events.getBefore(o.time),a;s===null?a=this._initialValue:a=s.value,o.type==="setTargetAtTime"&&(i=this._exponentialApproach(o.time,a,o.value,o.constant,n))}else if(r===null)i=o.value;else if(r.type==="linearRampToValueAtTime"||r.type==="exponentialRampToValueAtTime"){let s=o.value;if(o.type==="setTargetAtTime"){let a=this._events.getBefore(o.time);a===null?s=this._initialValue:s=a.value}r.type==="linearRampToValueAtTime"?i=this._linearInterpolate(o.time,s,r.time,r.value,n):i=this._exponentialInterpolate(o.time,s,r.time,r.value,n)}else i=o.value;return this._toType(i)}setRampPoint(e){e=this.toSeconds(e);let n=this.getValueAtTime(e);return this.cancelAndHoldAtTime(e),this._fromType(n)===0&&(n=this._toType(this._minOutput)),this.setValueAtTime(n,e),this}linearRampToValueAtTime(e,n){let r=this._fromType(e),o=this.toSeconds(n);return G(isFinite(r)&&isFinite(o),`Invalid argument(s) to linearRampToValueAtTime: ${JSON.stringify(e)}, ${JSON.stringify(n)}`),this._assertRange(r),this._events.add({time:o,type:"linearRampToValueAtTime",value:r}),this.log(this.units,"linearRampToValueAtTime",e,o),this._param.linearRampToValueAtTime(r,o),this}exponentialRampToValueAtTime(e,n){let r=this._fromType(e);r=Pt(r,0)?this._minOutput:r,this._assertRange(r);let o=this.toSeconds(n);return G(isFinite(r)&&isFinite(o),`Invalid argument(s) to exponentialRampToValueAtTime: ${JSON.stringify(e)}, ${JSON.stringify(n)}`),this._events.add({time:o,type:"exponentialRampToValueAtTime",value:r}),this.log(this.units,"exponentialRampToValueAtTime",e,o),this._param.exponentialRampToValueAtTime(r,o),this}exponentialRampTo(e,n,r){return r=this.toSeconds(r),this.setRampPoint(r),this.exponentialRampToValueAtTime(e,r+this.toSeconds(n)),this}linearRampTo(e,n,r){return r=this.toSeconds(r),this.setRampPoint(r),this.linearRampToValueAtTime(e,r+this.toSeconds(n)),this}targetRampTo(e,n,r){return r=this.toSeconds(r),this.setRampPoint(r),this.exponentialApproachValueAtTime(e,r,n),this}exponentialApproachValueAtTime(e,n,r){n=this.toSeconds(n),r=this.toSeconds(r);let o=Math.log(r+1)/Math.log(200);return this.setTargetAtTime(e,n,o),this.cancelAndHoldAtTime(n+r*.9),this.linearRampToValueAtTime(e,n+r),this}setTargetAtTime(e,n,r){let o=this._fromType(e);G(isFinite(r)&&r>0,"timeConstant must be a number greater than 0");let i=this.toSeconds(n);return this._assertRange(o),G(isFinite(o)&&isFinite(i),`Invalid argument(s) to setTargetAtTime: ${JSON.stringify(e)}, ${JSON.stringify(n)}`),this._events.add({constant:r,time:i,type:"setTargetAtTime",value:o}),this.log(this.units,"setTargetAtTime",e,i,r),this._param.setTargetAtTime(o,i,r),this}setValueCurveAtTime(e,n,r,o=1){r=this.toSeconds(r),n=this.toSeconds(n);let i=this._fromType(e[0])*o;this.setValueAtTime(this._toType(i),n);let s=r/(e.length-1);for(let a=1;a<e.length;a++){let c=this._fromType(e[a])*o;this.linearRampToValueAtTime(this._toType(c),n+a*s)}return this}cancelScheduledValues(e){let n=this.toSeconds(e);return G(isFinite(n),`Invalid argument to cancelScheduledValues: ${JSON.stringify(e)}`),this._events.cancel(n),this._param.cancelScheduledValues(n),this.log(this.units,"cancelScheduledValues",n),this}cancelAndHoldAtTime(e){let n=this.toSeconds(e),r=this._fromType(this.getValueAtTime(n));G(isFinite(n),`Invalid argument to cancelAndHoldAtTime: ${JSON.stringify(e)}`),this.log(this.units,"cancelAndHoldAtTime",n,"value="+r);let o=this._events.get(n),i=this._events.getAfter(n);return o&&Pt(o.time,n)?i?(this._param.cancelScheduledValues(i.time),this._events.cancel(i.time)):(this._param.cancelAndHoldAtTime(n),this._events.cancel(n+this.sampleTime)):i&&(this._param.cancelScheduledValues(i.time),this._events.cancel(i.time),i.type==="linearRampToValueAtTime"?this.linearRampToValueAtTime(this._toType(r),n):i.type==="exponentialRampToValueAtTime"&&this.exponentialRampToValueAtTime(this._toType(r),n)),this._events.add({time:n,type:"setValueAtTime",value:r}),this._param.setValueAtTime(r,n),this}rampTo(e,n=.1,r){return this.units==="frequency"||this.units==="bpm"||this.units==="decibels"?this.exponentialRampTo(e,n,r):this.linearRampTo(e,n,r),this}apply(e){let n=this.context.currentTime;e.setValueAtTime(this.getValueAtTime(n),n);let r=this._events.get(n);if(r&&r.type==="setTargetAtTime"){let o=this._events.getAfter(r.time),i=o?o.time:n+2,s=(i-n)/10;for(let a=n;a<i;a+=s)e.linearRampToValueAtTime(this.getValueAtTime(a),a)}return this._events.forEachAfter(this.context.currentTime,o=>{o.type==="cancelScheduledValues"?e.cancelScheduledValues(o.time):o.type==="setTargetAtTime"?e.setTargetAtTime(o.value,o.time,o.constant):e[o.type](o.value,o.time)}),this}setParam(e){G(this._swappable,"The Param must be assigned as 'swappable' in the constructor");let n=this.input;return n.disconnect(this._param),this.apply(e),this._param=e,n.connect(this._param),this}dispose(){return super.dispose(),this._events.dispose(),this}get defaultValue(){return this._toType(this._param.defaultValue)}_exponentialApproach(e,n,r,o,i){return r+(n-r)*Math.exp(-(i-e)/o)}_linearInterpolate(e,n,r,o,i){return n+(o-n)*((i-e)/(r-e))}_exponentialInterpolate(e,n,r,o,i){return n*Math.pow(o/n,(i-e)/(r-e))}};var F=class t extends He{constructor(){super(...arguments),this.name="ToneAudioNode",this._internalChannels=[]}get numberOfInputs(){return te(this.input)?zn(this.input)||this.input instanceof he?1:this.input.numberOfInputs:0}get numberOfOutputs(){return te(this.output)?this.output.numberOfOutputs:0}_isAudioNode(e){return te(e)&&(e instanceof t||_r(e))}_getInternalNodes(){let e=this._internalChannels.slice(0);return this._isAudioNode(this.input)&&e.push(this.input),this._isAudioNode(this.output)&&this.input!==this.output&&e.push(this.output),e}_setChannelProperties(e){this._getInternalNodes().forEach(r=>{r.channelCount=e.channelCount,r.channelCountMode=e.channelCountMode,r.channelInterpretation=e.channelInterpretation})}_getChannelProperties(){let e=this._getInternalNodes();G(e.length>0,"ToneAudioNode does not have any internal nodes");let n=e[0];return{channelCount:n.channelCount,channelCountMode:n.channelCountMode,channelInterpretation:n.channelInterpretation}}get channelCount(){return this._getChannelProperties().channelCount}set channelCount(e){let n=this._getChannelProperties();this._setChannelProperties(Object.assign(n,{channelCount:e}))}get channelCountMode(){return this._getChannelProperties().channelCountMode}set channelCountMode(e){let n=this._getChannelProperties();this._setChannelProperties(Object.assign(n,{channelCountMode:e}))}get channelInterpretation(){return this._getChannelProperties().channelInterpretation}set channelInterpretation(e){let n=this._getChannelProperties();this._setChannelProperties(Object.assign(n,{channelInterpretation:e}))}connect(e,n=0,r=0){return Vt(this,e,n,r),this}toDestination(){return this.connect(this.context.destination),this}toMaster(){return La("toMaster() has been renamed toDestination()"),this.toDestination()}disconnect(e,n=0,r=0){return vC(this,e,n,r),this}chain(...e){return Qn(this,...e),this}fan(...e){return e.forEach(n=>this.connect(n)),this}dispose(){return super.dispose(),te(this.input)&&(this.input instanceof t?this.input.dispose():_r(this.input)&&this.input.disconnect()),te(this.output)&&(this.output instanceof t?this.output.dispose():_r(this.output)&&this.output.disconnect()),this._internalChannels=[],this}};function Qn(...t){let e=t.shift();t.reduce((n,r)=>(n instanceof F?n.connect(r):_r(n)&&Vt(n,r),r),e)}function Vt(t,e,n=0,r=0){for(G(te(t),"Cannot connect from undefined node"),G(te(e),"Cannot connect to undefined node"),(e instanceof F||_r(e))&&G(e.numberOfInputs>0,"Cannot connect to node with no inputs"),G(t.numberOfOutputs>0,"Cannot connect from node with no outputs");e instanceof F||e instanceof he;)te(e.input)&&(e=e.input);for(;t instanceof F;)te(t.output)&&(t=t.output);zn(e)?t.connect(e,n):t.connect(e,n,r)}function vC(t,e,n=0,r=0){if(te(e))for(;e instanceof F;)e=e.input;for(;!_r(t);)te(t.output)&&(t=t.output);zn(e)?t.disconnect(e,n):_r(e)?t.disconnect(e,n,r):t.disconnect()}var Q=class t extends F{constructor(){super(y(t.getDefaults(),arguments,["gain","units"])),this.name="Gain",this._gainNode=this.context.createGain(),this.input=this._gainNode,this.output=this._gainNode;let e=y(t.getDefaults(),arguments,["gain","units"]);this.gain=new he({context:this.context,convert:e.convert,param:this._gainNode.gain,units:e.units,value:e.gain,minValue:e.minValue,maxValue:e.maxValue}),B(this,"gain")}static getDefaults(){return Object.assign(F.getDefaults(),{convert:!0,gain:1,units:"gain"})}dispose(){return super.dispose(),this._gainNode.disconnect(),this.gain.dispose(),this}};var Xn=class extends F{constructor(e){super(e),this.onended=oe,this._startTime=-1,this._stopTime=-1,this._timeout=-1,this.output=new Q({context:this.context,gain:0}),this._gainNode=this.output,this.getStateAtTime=function(n){let r=this.toSeconds(n);return this._startTime!==-1&&r>=this._startTime&&(this._stopTime===-1||r<=this._stopTime)?"started":"stopped"},this._fadeIn=e.fadeIn,this._fadeOut=e.fadeOut,this._curve=e.curve,this.onended=e.onended}static getDefaults(){return Object.assign(F.getDefaults(),{curve:"linear",fadeIn:0,fadeOut:0,onended:oe})}_startGain(e,n=1){G(this._startTime===-1,"Source cannot be started more than once");let r=this.toSeconds(this._fadeIn);return this._startTime=e+r,this._startTime=Math.max(this._startTime,this.context.currentTime),r>0?(this._gainNode.gain.setValueAtTime(0,e),this._curve==="linear"?this._gainNode.gain.linearRampToValueAtTime(n,e+r):this._gainNode.gain.exponentialApproachValueAtTime(n,e,r)):this._gainNode.gain.setValueAtTime(n,e),this}stop(e){return this.log("stop",e),this._stopGain(this.toSeconds(e)),this}_stopGain(e){G(this._startTime!==-1,"'start' must be called before 'stop'"),this.cancelStop();let n=this.toSeconds(this._fadeOut);return this._stopTime=this.toSeconds(e)+n,this._stopTime=Math.max(this._stopTime,this.context.currentTime),n>0?this._curve==="linear"?this._gainNode.gain.linearRampTo(0,n,e):this._gainNode.gain.targetRampTo(0,n,e):(this._gainNode.gain.cancelAndHoldAtTime(e),this._gainNode.gain.setValueAtTime(0,e)),this.context.clearTimeout(this._timeout),this._timeout=this.context.setTimeout(()=>{let r=this._curve==="exponential"?n*2:0;this._stopSource(this.now()+r),this._onended()},this._stopTime-this.context.currentTime),this}_onended(){if(this.onended!==oe&&(this.onended(this),this.onended=oe,!this.context.isOffline)){let e=()=>this.dispose();typeof window.requestIdleCallback<"u"?window.requestIdleCallback(e):setTimeout(e,1e3)}}get state(){return this.getStateAtTime(this.now())}cancelStop(){return this.log("cancelStop"),G(this._startTime!==-1,"Source is not started"),this._gainNode.gain.cancelScheduledValues(this._startTime+this.sampleTime),this.context.clearTimeout(this._timeout),this._stopTime=-1,this}dispose(){return super.dispose(),this._gainNode.disconnect(),this}};var qa=class t extends Xn{constructor(){super(y(t.getDefaults(),arguments,["offset"])),this.name="ToneConstantSource",this._source=this.context.createConstantSource();let e=y(t.getDefaults(),arguments,["offset"]);Vt(this._source,this._gainNode),this.offset=new he({context:this.context,convert:e.convert,param:this._source.offset,units:e.units,value:e.offset,minValue:e.minValue,maxValue:e.maxValue})}static getDefaults(){return Object.assign(Xn.getDefaults(),{convert:!0,offset:1,units:"number"})}start(e){let n=this.toSeconds(e);return this.log("start",n),this._startGain(n),this._source.start(n),this}_stopSource(e){this._source.stop(e)}dispose(){return super.dispose(),this.state==="started"&&this.stop(),this._source.disconnect(),this.offset.dispose(),this}};var se=class t extends F{constructor(){super(y(t.getDefaults(),arguments,["value","units"])),this.name="Signal",this.override=!0;let e=y(t.getDefaults(),arguments,["value","units"]);this.output=this._constantSource=new qa({context:this.context,convert:e.convert,offset:e.value,units:e.units,minValue:e.minValue,maxValue:e.maxValue}),this._constantSource.start(0),this.input=this._param=this._constantSource.offset}static getDefaults(){return Object.assign(F.getDefaults(),{convert:!0,units:"number",value:0})}connect(e,n=0,r=0){return hs(this,e,n,r),this}dispose(){return super.dispose(),this._param.dispose(),this._constantSource.dispose(),this}setValueAtTime(e,n){return this._param.setValueAtTime(e,n),this}getValueAtTime(e){return this._param.getValueAtTime(e)}setRampPoint(e){return this._param.setRampPoint(e),this}linearRampToValueAtTime(e,n){return this._param.linearRampToValueAtTime(e,n),this}exponentialRampToValueAtTime(e,n){return this._param.exponentialRampToValueAtTime(e,n),this}exponentialRampTo(e,n,r){return this._param.exponentialRampTo(e,n,r),this}linearRampTo(e,n,r){return this._param.linearRampTo(e,n,r),this}targetRampTo(e,n,r){return this._param.targetRampTo(e,n,r),this}exponentialApproachValueAtTime(e,n,r){return this._param.exponentialApproachValueAtTime(e,n,r),this}setTargetAtTime(e,n,r){return this._param.setTargetAtTime(e,n,r),this}setValueCurveAtTime(e,n,r,o){return this._param.setValueCurveAtTime(e,n,r,o),this}cancelScheduledValues(e){return this._param.cancelScheduledValues(e),this}cancelAndHoldAtTime(e){return this._param.cancelAndHoldAtTime(e),this}rampTo(e,n,r){return this._param.rampTo(e,n,r),this}get value(){return this._param.value}set value(e){this._param.value=e}get convert(){return this._param.convert}set convert(e){this._param.convert=e}get units(){return this._param.units}get overridden(){return this._param.overridden}set overridden(e){this._param.overridden=e}get maxValue(){return this._param.maxValue}get minValue(){return this._param.minValue}apply(e){return this._param.apply(e),this}};function hs(t,e,n,r){(e instanceof he||zn(e)||e instanceof se&&e.override)&&(e.cancelScheduledValues(0),e.setValueAtTime(0,0),e instanceof se&&(e.overridden=!0)),Vt(t,e,n,r)}var hl=class t extends he{constructor(){super(y(t.getDefaults(),arguments,["value"])),this.name="TickParam",this._events=new yt(1/0),this._multiplier=1;let e=y(t.getDefaults(),arguments,["value"]);this._multiplier=e.multiplier,this._events.cancel(0),this._events.add({ticks:0,time:0,type:"setValueAtTime",value:this._fromType(e.value)}),this.setValueAtTime(e.value,0)}static getDefaults(){return Object.assign(he.getDefaults(),{multiplier:1,units:"hertz",value:1})}setTargetAtTime(e,n,r){n=this.toSeconds(n),this.setRampPoint(n);let o=this._fromType(e),i=this._events.get(n),s=Math.round(Math.max(1/r,1));for(let a=0;a<=s;a++){let c=r*a+n,u=this._exponentialApproach(i.time,i.value,o,r,c);this.linearRampToValueAtTime(this._toType(u),c)}return this}setValueAtTime(e,n){let r=this.toSeconds(n);super.setValueAtTime(e,n);let o=this._events.get(r),i=this._events.previousEvent(o),s=this._getTicksUntilEvent(i,r);return o.ticks=Math.max(s,0),this}linearRampToValueAtTime(e,n){let r=this.toSeconds(n);super.linearRampToValueAtTime(e,n);let o=this._events.get(r),i=this._events.previousEvent(o),s=this._getTicksUntilEvent(i,r);return o.ticks=Math.max(s,0),this}exponentialRampToValueAtTime(e,n){n=this.toSeconds(n);let r=this._fromType(e),o=this._events.get(n),i=Math.round(Math.max((n-o.time)*10,1)),s=(n-o.time)/i;for(let a=0;a<=i;a++){let c=s*a+o.time,u=this._exponentialInterpolate(o.time,o.value,n,r,c);this.linearRampToValueAtTime(this._toType(u),c)}return this}_getTicksUntilEvent(e,n){if(e===null)e={ticks:0,time:0,type:"setValueAtTime",value:0};else if(ct(e.ticks)){let s=this._events.previousEvent(e);e.ticks=this._getTicksUntilEvent(s,e.time)}let r=this._fromType(this.getValueAtTime(e.time)),o=this._fromType(this.getValueAtTime(n)),i=this._events.get(n);return i&&i.time===n&&i.type==="setValueAtTime"&&(o=this._fromType(this.getValueAtTime(n-this.sampleTime))),.5*(n-e.time)*(r+o)+e.ticks}getTicksAtTime(e){let n=this.toSeconds(e),r=this._events.get(n);return Math.max(this._getTicksUntilEvent(r,n),0)}getDurationOfTicks(e,n){let r=this.toSeconds(n),o=this.getTicksAtTime(n);return this.getTimeOfTick(o+e)-r}getTimeOfTick(e){let n=this._events.get(e,"ticks"),r=this._events.getAfter(e,"ticks");if(n&&n.ticks===e)return n.time;if(n&&r&&r.type==="linearRampToValueAtTime"&&n.value!==r.value){let o=this._fromType(this.getValueAtTime(n.time)),s=(this._fromType(this.getValueAtTime(r.time))-o)/(r.time-n.time),a=Math.sqrt(Math.pow(o,2)-2*s*(n.ticks-e)),c=(-o+a)/s,u=(-o-a)/s;return(c>0?c:u)+n.time}else return n?n.value===0?1/0:n.time+(e-n.ticks)/n.value:e/this._initialValue}ticksToTime(e,n){return this.getDurationOfTicks(e,n)}timeToTicks(e,n){let r=this.toSeconds(n),o=this.toSeconds(e),i=this.getTicksAtTime(r);return this.getTicksAtTime(r+o)-i}_fromType(e){return this.units==="bpm"&&this.multiplier?1/(60/e/this.multiplier):super._fromType(e)}_toType(e){return this.units==="bpm"&&this.multiplier?e/this.multiplier*60:super._toType(e)}get multiplier(){return this._multiplier}set multiplier(e){let n=this.value;this._multiplier=e,this.cancelScheduledValues(0),this.setValueAtTime(n,0)}};var fl=class t extends se{constructor(){super(y(t.getDefaults(),arguments,["value"])),this.name="TickSignal";let e=y(t.getDefaults(),arguments,["value"]);this.input=this._param=new hl({context:this.context,convert:e.convert,multiplier:e.multiplier,param:this._constantSource.offset,units:e.units,value:e.value})}static getDefaults(){return Object.assign(se.getDefaults(),{multiplier:1,units:"hertz",value:1})}ticksToTime(e,n){return this._param.ticksToTime(e,n)}timeToTicks(e,n){return this._param.timeToTicks(e,n)}getTimeOfTick(e){return this._param.getTimeOfTick(e)}getDurationOfTicks(e,n){return this._param.getDurationOfTicks(e,n)}getTicksAtTime(e){return this._param.getTicksAtTime(e)}get multiplier(){return this._param.multiplier}set multiplier(e){this._param.multiplier=e}dispose(){return super.dispose(),this._param.dispose(),this}};var pl=class t extends He{constructor(){super(y(t.getDefaults(),arguments,["frequency"])),this.name="TickSource",this._state=new Yn,this._tickOffset=new yt;let e=y(t.getDefaults(),arguments,["frequency"]);this.frequency=new fl({context:this.context,units:e.units,value:e.frequency}),B(this,"frequency"),this._state.setStateAtTime("stopped",0),this.setTicksAtTime(0,0)}static getDefaults(){return Object.assign({frequency:1,units:"hertz"},He.getDefaults())}get state(){return this.getStateAtTime(this.now())}start(e,n){let r=this.toSeconds(e);return this._state.getValueAtTime(r)!=="started"&&(this._state.setStateAtTime("started",r),te(n)&&this.setTicksAtTime(n,r)),this}stop(e){let n=this.toSeconds(e);if(this._state.getValueAtTime(n)==="stopped"){let r=this._state.get(n);r&&r.time>0&&(this._tickOffset.cancel(r.time),this._state.cancel(r.time))}return this._state.cancel(n),this._state.setStateAtTime("stopped",n),this.setTicksAtTime(0,n),this}pause(e){let n=this.toSeconds(e);return this._state.getValueAtTime(n)==="started"&&this._state.setStateAtTime("paused",n),this}cancel(e){return e=this.toSeconds(e),this._state.cancel(e),this._tickOffset.cancel(e),this}getTicksAtTime(e){let n=this.toSeconds(e),r=this._state.getLastState("stopped",n),o={state:"paused",time:n};this._state.add(o);let i=r,s=0;return this._state.forEachBetween(r.time,n+this.sampleTime,a=>{let c=i.time,u=this._tickOffset.get(a.time);u&&u.time>=i.time&&(s=u.ticks,c=u.time),i.state==="started"&&a.state!=="started"&&(s+=this.frequency.getTicksAtTime(a.time)-this.frequency.getTicksAtTime(c)),i=a}),this._state.remove(o),s}get ticks(){return this.getTicksAtTime(this.now())}set ticks(e){this.setTicksAtTime(e,this.now())}get seconds(){return this.getSecondsAtTime(this.now())}set seconds(e){let n=this.now(),r=this.frequency.timeToTicks(e,n);this.setTicksAtTime(r,n)}getSecondsAtTime(e){e=this.toSeconds(e);let n=this._state.getLastState("stopped",e),r={state:"paused",time:e};this._state.add(r);let o=n,i=0;return this._state.forEachBetween(n.time,e+this.sampleTime,s=>{let a=o.time,c=this._tickOffset.get(s.time);c&&c.time>=o.time&&(i=c.seconds,a=c.time),o.state==="started"&&s.state!=="started"&&(i+=s.time-a),o=s}),this._state.remove(r),i}setTicksAtTime(e,n){return n=this.toSeconds(n),this._tickOffset.cancel(n),this._tickOffset.add({seconds:this.frequency.getDurationOfTicks(e,n),ticks:e,time:n}),this}getStateAtTime(e){return e=this.toSeconds(e),this._state.getValueAtTime(e)}getTimeOfTick(e,n=this.now()){let r=this._tickOffset.get(n),o=this._state.get(n),i=Math.max(r.time,o.time),s=this.frequency.getTicksAtTime(i)+e-r.ticks;return this.frequency.getTimeOfTick(s)}forEachTickBetween(e,n,r){let o=this._state.get(e);this._state.forEachBetween(e,n,s=>{o&&o.state==="started"&&s.state!=="started"&&this.forEachTickBetween(Math.max(o.time,e),s.time-this.sampleTime,r),o=s});let i=null;if(o&&o.state==="started"){let s=Math.max(o.time,e),a=this.frequency.getTicksAtTime(s),c=this.frequency.getTicksAtTime(o.time),u=a-c,l=Math.ceil(u)-u;l=Pt(l,1)?0:l;let d=this.frequency.getTimeOfTick(a+l);for(;d<n;){try{r(d,Math.round(this.getTicksAtTime(d)))}catch(h){i=h;break}d+=this.frequency.getDurationOfTicks(1,d)}}if(i)throw i;return this}dispose(){return super.dispose(),this._state.dispose(),this._tickOffset.dispose(),this.frequency.dispose(),this}};var fs=class t extends He{constructor(){super(y(t.getDefaults(),arguments,["callback","frequency"])),this.name="Clock",this.callback=oe,this._lastUpdate=0,this._state=new Yn("stopped"),this._boundLoop=this._loop.bind(this);let e=y(t.getDefaults(),arguments,["callback","frequency"]);this.callback=e.callback,this._tickSource=new pl({context:this.context,frequency:e.frequency,units:e.units}),this._lastUpdate=0,this.frequency=this._tickSource.frequency,B(this,"frequency"),this._state.setStateAtTime("stopped",0),this.context.on("tick",this._boundLoop)}static getDefaults(){return Object.assign(He.getDefaults(),{callback:oe,frequency:1,units:"hertz"})}get state(){return this._state.getValueAtTime(this.now())}start(e,n){rl(this.context);let r=this.toSeconds(e);return this.log("start",r),this._state.getValueAtTime(r)!=="started"&&(this._state.setStateAtTime("started",r),this._tickSource.start(r,n),r<this._lastUpdate&&this.emit("start",r,n)),this}stop(e){let n=this.toSeconds(e);return this.log("stop",n),this._state.cancel(n),this._state.setStateAtTime("stopped",n),this._tickSource.stop(n),n<this._lastUpdate&&this.emit("stop",n),this}pause(e){let n=this.toSeconds(e);return this._state.getValueAtTime(n)==="started"&&(this._state.setStateAtTime("paused",n),this._tickSource.pause(n),n<this._lastUpdate&&this.emit("pause",n)),this}get ticks(){return Math.ceil(this.getTicksAtTime(this.now()))}set ticks(e){this._tickSource.ticks=e}get seconds(){return this._tickSource.seconds}set seconds(e){this._tickSource.seconds=e}getSecondsAtTime(e){return this._tickSource.getSecondsAtTime(e)}setTicksAtTime(e,n){return this._tickSource.setTicksAtTime(e,n),this}getTimeOfTick(e,n=this.now()){return this._tickSource.getTimeOfTick(e,n)}getTicksAtTime(e){return this._tickSource.getTicksAtTime(e)}nextTickTime(e,n){let r=this.toSeconds(n),o=this.getTicksAtTime(r);return this._tickSource.getTimeOfTick(o+e,r)}_loop(){let e=this._lastUpdate,n=this.now();this._lastUpdate=n,this.log("loop",e,n),e!==n&&(this._state.forEachBetween(e,n,r=>{switch(r.state){case"started":let o=this._tickSource.getTicksAtTime(r.time);this.emit("start",r.time,o);break;case"stopped":r.time!==0&&this.emit("stop",r.time);break;case"paused":this.emit("pause",r.time);break}}),this._tickSource.forEachTickBetween(e,n,(r,o)=>{this.callback(r,o)}))}getStateAtTime(e){let n=this.toSeconds(e);return this._state.getValueAtTime(n)}dispose(){return super.dispose(),this.context.off("tick",this._boundLoop),this._tickSource.dispose(),this._state.dispose(),this}};uo.mixin(fs);var ps=class t extends Mt{constructor(){super(),this.name="ToneAudioBuffers",this._buffers=new Map,this._loadingCount=0;let e=y(t.getDefaults(),arguments,["urls","onload","baseUrl"],"urls");this.baseUrl=e.baseUrl,Object.keys(e.urls).forEach(n=>{this._loadingCount++;let r=e.urls[n];this.add(n,r,this._bufferLoaded.bind(this,e.onload),e.onerror)})}static getDefaults(){return{baseUrl:"",onerror:oe,onload:oe,urls:{}}}has(e){return this._buffers.has(e.toString())}get(e){return G(this.has(e),`ToneAudioBuffers has no buffer named: ${e}`),this._buffers.get(e.toString())}_bufferLoaded(e){this._loadingCount--,this._loadingCount===0&&e&&e()}get loaded(){return Array.from(this._buffers).every(([e,n])=>n.loaded)}add(e,n,r=oe,o=oe){return vt(n)?this._buffers.set(e.toString(),new Nt(this.baseUrl+n,r,o)):this._buffers.set(e.toString(),new Nt(n,r,o)),this}dispose(){return super.dispose(),this._buffers.forEach(e=>e.dispose()),this._buffers.clear(),this}};var Ke=class extends En{constructor(){super(...arguments),this.name="Ticks",this.defaultUnits="i"}_now(){return this.context.transport.ticks}_beatsToUnits(e){return this._getPPQ()*e}_secondsToUnits(e){return Math.floor(e/(60/this._getBpm())*this._getPPQ())}_ticksToUnits(e){return e}toTicks(){return this.valueOf()}toSeconds(){return this.valueOf()/this._getPPQ()*(60/this._getBpm())}};var Hp=class extends He{constructor(){super(...arguments),this.name="Draw",this.expiration=.25,this.anticipation=.008,this._events=new yt,this._boundDrawLoop=this._drawLoop.bind(this),this._animationFrame=-1}schedule(e,n){return this._events.add({callback:e,time:this.toSeconds(n)}),this._events.length===1&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop)),this}cancel(e){return this._events.cancel(this.toSeconds(e)),this}_drawLoop(){let e=this.context.currentTime;for(;this._events.length&&this._events.peek().time-this.anticipation<=e;){let n=this._events.shift();n&&e-n.time<=this.expiration&&n.callback()}this._events.length>0&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop))}dispose(){return super.dispose(),this._events.dispose(),cancelAnimationFrame(this._animationFrame),this}};ao(t=>{t.draw=new Hp({context:t})});co(t=>{t.draw.dispose()});var ml=class extends Mt{constructor(){super(...arguments),this.name="IntervalTimeline",this._root=null,this._length=0}add(e){G(te(e.time),"Events must have a time property"),G(te(e.duration),"Events must have a duration parameter"),e.time=e.time.valueOf();let n=new Wp(e.time,e.time+e.duration,e);for(this._root===null?this._root=n:this._root.insert(n),this._length++;n!==null;)n.updateHeight(),n.updateMax(),this._rebalance(n),n=n.parent;return this}remove(e){if(this._root!==null){let n=[];this._root.search(e.time,n);for(let r of n)if(r.event===e){this._removeNode(r),this._length--;break}}return this}get length(){return this._length}cancel(e){return this.forEachFrom(e,n=>this.remove(n)),this}_setRoot(e){this._root=e,this._root!==null&&(this._root.parent=null)}_replaceNodeInParent(e,n){e.parent!==null?(e.isLeftChild()?e.parent.left=n:e.parent.right=n,this._rebalance(e.parent)):this._setRoot(n)}_removeNode(e){if(e.left===null&&e.right===null)this._replaceNodeInParent(e,null);else if(e.right===null)this._replaceNodeInParent(e,e.left);else if(e.left===null)this._replaceNodeInParent(e,e.right);else{let n=e.getBalance(),r,o=null;if(n>0)if(e.left.right===null)r=e.left,r.right=e.right,o=r;else{for(r=e.left.right;r.right!==null;)r=r.right;r.parent&&(r.parent.right=r.left,o=r.parent,r.left=e.left,r.right=e.right)}else if(e.right.left===null)r=e.right,r.left=e.left,o=r;else{for(r=e.right.left;r.left!==null;)r=r.left;r.parent&&(r.parent.left=r.right,o=r.parent,r.left=e.left,r.right=e.right)}e.parent!==null?e.isLeftChild()?e.parent.left=r:e.parent.right=r:this._setRoot(r),o&&this._rebalance(o)}e.dispose()}_rotateLeft(e){let n=e.parent,r=e.isLeftChild(),o=e.right;o&&(e.right=o.left,o.left=e),n!==null?r?n.left=o:n.right=o:this._setRoot(o)}_rotateRight(e){let n=e.parent,r=e.isLeftChild(),o=e.left;o&&(e.left=o.right,o.right=e),n!==null?r?n.left=o:n.right=o:this._setRoot(o)}_rebalance(e){let n=e.getBalance();n>1&&e.left?e.left.getBalance()<0?this._rotateLeft(e.left):this._rotateRight(e):n<-1&&e.right&&(e.right.getBalance()>0?this._rotateRight(e.right):this._rotateLeft(e))}get(e){if(this._root!==null){let n=[];if(this._root.search(e,n),n.length>0){let r=n[0];for(let o=1;o<n.length;o++)n[o].low>r.low&&(r=n[o]);return r.event}}return null}forEach(e){if(this._root!==null){let n=[];this._root.traverse(r=>n.push(r)),n.forEach(r=>{r.event&&e(r.event)})}return this}forEachAtTime(e,n){if(this._root!==null){let r=[];this._root.search(e,r),r.forEach(o=>{o.event&&n(o.event)})}return this}forEachFrom(e,n){if(this._root!==null){let r=[];this._root.searchAfter(e,r),r.forEach(o=>{o.event&&n(o.event)})}return this}dispose(){return super.dispose(),this._root!==null&&this._root.traverse(e=>e.dispose()),this._root=null,this}},Wp=class{constructor(e,n,r){this._left=null,this._right=null,this.parent=null,this.height=0,this.event=r,this.low=e,this.high=n,this.max=this.high}insert(e){e.low<=this.low?this.left===null?this.left=e:this.left.insert(e):this.right===null?this.right=e:this.right.insert(e)}search(e,n){e>this.max||(this.left!==null&&this.left.search(e,n),this.low<=e&&this.high>e&&n.push(this),!(this.low>e)&&this.right!==null&&this.right.search(e,n))}searchAfter(e,n){this.low>=e&&(n.push(this),this.left!==null&&this.left.searchAfter(e,n)),this.right!==null&&this.right.searchAfter(e,n)}traverse(e){e(this),this.left!==null&&this.left.traverse(e),this.right!==null&&this.right.traverse(e)}updateHeight(){this.left!==null&&this.right!==null?this.height=Math.max(this.left.height,this.right.height)+1:this.right!==null?this.height=this.right.height+1:this.left!==null?this.height=this.left.height+1:this.height=0}updateMax(){this.max=this.high,this.left!==null&&(this.max=Math.max(this.max,this.left.max)),this.right!==null&&(this.max=Math.max(this.max,this.right.max))}getBalance(){let e=0;return this.left!==null&&this.right!==null?e=this.left.height-this.right.height:this.left!==null?e=this.left.height+1:this.right!==null&&(e=-(this.right.height+1)),e}isLeftChild(){return this.parent!==null&&this.parent.left===this}get left(){return this._left}set left(e){this._left=e,e!==null&&(e.parent=this),this.updateHeight(),this.updateMax()}get right(){return this._right}set right(e){this._right=e,e!==null&&(e.parent=this),this.updateHeight(),this.updateMax()}dispose(){this.parent=null,this._left=null,this._right=null,this.event=null}};var In=class t extends F{constructor(){super(y(t.getDefaults(),arguments,["volume"])),this.name="Volume";let e=y(t.getDefaults(),arguments,["volume"]);this.input=this.output=new Q({context:this.context,gain:e.volume,units:"decibels"}),this.volume=this.output.gain,B(this,"volume"),this._unmutedVolume=e.volume,this.mute=e.mute}static getDefaults(){return Object.assign(F.getDefaults(),{mute:!1,volume:0})}get mute(){return this.volume.value===-1/0}set mute(e){!this.mute&&e?(this._unmutedVolume=this.volume.value,this.volume.value=-1/0):this.mute&&!e&&(this.volume.value=this._unmutedVolume)}dispose(){return super.dispose(),this.input.dispose(),this.volume.dispose(),this}};var Gp=class t extends F{constructor(){super(y(t.getDefaults(),arguments)),this.name="Destination",this.input=new In({context:this.context}),this.output=new Q({context:this.context}),this.volume=this.input.volume;let e=y(t.getDefaults(),arguments);Qn(this.input,this.output,this.context.rawContext.destination),this.mute=e.mute,this._internalChannels=[this.input,this.context.rawContext.destination,this.output]}static getDefaults(){return Object.assign(F.getDefaults(),{mute:!1,volume:0})}get mute(){return this.input.mute}set mute(e){this.input.mute=e}chain(...e){return this.input.disconnect(),e.unshift(this.input),e.push(this.output),Qn(...e),this}get maxChannelCount(){return this.context.rawContext.destination.maxChannelCount}dispose(){return super.dispose(),this.volume.dispose(),this}};ao(t=>{t.destination=new Gp({context:t})});co(t=>{t.destination.dispose()});var gl=class extends Mt{constructor(e){super(),this.name="TimelineValue",this._timeline=new yt({memory:10}),this._initialValue=e}set(e,n){return this._timeline.add({value:e,time:n}),this}get(e){let n=this._timeline.get(e);return n?n.value:this._initialValue}};var ms=(()=>{class t{constructor(n,r){this.id=t._eventId++;let o=Object.assign(t.getDefaults(),r);this.transport=n,this.callback=o.callback,this._once=o.once,this.time=o.time}static getDefaults(){return{callback:oe,once:!1,time:0}}invoke(n){this.callback&&(this.callback(n),this._once&&this.transport.clear(this.id))}dispose(){return this.callback=void 0,this}}return t._eventId=0,t})();var vl=class t extends ms{constructor(e,n){super(e,n),this._currentId=-1,this._nextId=-1,this._nextTick=this.time,this._boundRestart=this._restart.bind(this);let r=Object.assign(t.getDefaults(),n);this.duration=new Ke(e.context,r.duration).valueOf(),this._interval=new Ke(e.context,r.interval).valueOf(),this._nextTick=r.time,this.transport.on("start",this._boundRestart),this.transport.on("loopStart",this._boundRestart),this.context=this.transport.context,this._restart()}static getDefaults(){return Object.assign({},ms.getDefaults(),{duration:1/0,interval:1,once:!1})}invoke(e){this._createEvents(e),super.invoke(e)}_createEvents(e){let n=this.transport.getTicksAtTime(e);n>=this.time&&n>=this._nextTick&&this._nextTick+this._interval<this.time+this.duration&&(this._nextTick+=this._interval,this._currentId=this._nextId,this._nextId=this.transport.scheduleOnce(this.invoke.bind(this),new Ke(this.context,this._nextTick).toSeconds()))}_restart(e){this.transport.clear(this._currentId),this.transport.clear(this._nextId),this._nextTick=this.time;let n=this.transport.getTicksAtTime(e);n>this.time&&(this._nextTick=this.time+Math.ceil((n-this.time)/this._interval)*this._interval),this._currentId=this.transport.scheduleOnce(this.invoke.bind(this),new Ke(this.context,this._nextTick).toSeconds()),this._nextTick+=this._interval,this._nextId=this.transport.scheduleOnce(this.invoke.bind(this),new Ke(this.context,this._nextTick).toSeconds())}dispose(){return super.dispose(),this.transport.clear(this._currentId),this.transport.clear(this._nextId),this.transport.off("start",this._boundRestart),this.transport.off("loopStart",this._boundRestart),this}};var yl=class t extends He{constructor(){super(y(t.getDefaults(),arguments)),this.name="Transport",this._loop=new gl(!1),this._loopStart=0,this._loopEnd=0,this._scheduledEvents={},this._timeline=new yt,this._repeatedEvents=new ml,this._syncedSignals=[],this._swingAmount=0;let e=y(t.getDefaults(),arguments);this._ppq=e.ppq,this._clock=new fs({callback:this._processTick.bind(this),context:this.context,frequency:0,units:"bpm"}),this._bindClockEvents(),this.bpm=this._clock.frequency,this._clock.frequency.multiplier=e.ppq,this.bpm.setValueAtTime(e.bpm,0),B(this,"bpm"),this._timeSignature=e.timeSignature,this._swingTicks=e.ppq/2}static getDefaults(){return Object.assign(He.getDefaults(),{bpm:120,loopEnd:"4m",loopStart:0,ppq:192,swing:0,swingSubdivision:"8n",timeSignature:4})}_processTick(e,n){if(this._loop.get(e)&&n>=this._loopEnd&&(this.emit("loopEnd",e),this._clock.setTicksAtTime(this._loopStart,e),n=this._loopStart,this.emit("loopStart",e,this._clock.getSecondsAtTime(e)),this.emit("loop",e)),this._swingAmount>0&&n%this._ppq!==0&&n%(this._swingTicks*2)!==0){let r=n%(this._swingTicks*2)/(this._swingTicks*2),o=Math.sin(r*Math.PI)*this._swingAmount;e+=new Ke(this.context,this._swingTicks*2/3).toSeconds()*o}this._timeline.forEachAtTime(n,r=>r.invoke(e))}schedule(e,n){let r=new ms(this,{callback:e,time:new En(this.context,n).toTicks()});return this._addEvent(r,this._timeline)}scheduleRepeat(e,n,r,o=1/0){let i=new vl(this,{callback:e,duration:new Zt(this.context,o).toTicks(),interval:new Zt(this.context,n).toTicks(),time:new En(this.context,r).toTicks()});return this._addEvent(i,this._repeatedEvents)}scheduleOnce(e,n){let r=new ms(this,{callback:e,once:!0,time:new En(this.context,n).toTicks()});return this._addEvent(r,this._timeline)}clear(e){if(this._scheduledEvents.hasOwnProperty(e)){let n=this._scheduledEvents[e.toString()];n.timeline.remove(n.event),n.event.dispose(),delete this._scheduledEvents[e.toString()]}return this}_addEvent(e,n){return this._scheduledEvents[e.id.toString()]={event:e,timeline:n},n.add(e),e.id}cancel(e=0){let n=this.toTicks(e);return this._timeline.forEachFrom(n,r=>this.clear(r.id)),this._repeatedEvents.forEachFrom(n,r=>this.clear(r.id)),this}_bindClockEvents(){this._clock.on("start",(e,n)=>{n=new Ke(this.context,n).toSeconds(),this.emit("start",e,n)}),this._clock.on("stop",e=>{this.emit("stop",e)}),this._clock.on("pause",e=>{this.emit("pause",e)})}get state(){return this._clock.getStateAtTime(this.now())}start(e,n){let r;return te(n)&&(r=this.toTicks(n)),this._clock.start(e,r),this}stop(e){return this._clock.stop(e),this}pause(e){return this._clock.pause(e),this}toggle(e){return e=this.toSeconds(e),this._clock.getStateAtTime(e)!=="started"?this.start(e):this.stop(e),this}get timeSignature(){return this._timeSignature}set timeSignature(e){rt(e)&&(e=e[0]/e[1]*4),this._timeSignature=e}get loopStart(){return new Zt(this.context,this._loopStart,"i").toSeconds()}set loopStart(e){this._loopStart=this.toTicks(e)}get loopEnd(){return new Zt(this.context,this._loopEnd,"i").toSeconds()}set loopEnd(e){this._loopEnd=this.toTicks(e)}get loop(){return this._loop.get(this.now())}set loop(e){this._loop.set(e,this.now())}setLoopPoints(e,n){return this.loopStart=e,this.loopEnd=n,this}get swing(){return this._swingAmount}set swing(e){this._swingAmount=e}get swingSubdivision(){return new Ke(this.context,this._swingTicks).toNotation()}set swingSubdivision(e){this._swingTicks=this.toTicks(e)}get position(){let e=this.now(),n=this._clock.getTicksAtTime(e);return new Ke(this.context,n).toBarsBeatsSixteenths()}set position(e){let n=this.toTicks(e);this.ticks=n}get seconds(){return this._clock.seconds}set seconds(e){let n=this.now(),r=this._clock.frequency.timeToTicks(e,n);this.ticks=r}get progress(){if(this.loop){let e=this.now();return(this._clock.getTicksAtTime(e)-this._loopStart)/(this._loopEnd-this._loopStart)}else return 0}get ticks(){return this._clock.ticks}set ticks(e){if(this._clock.ticks!==e){let n=this.now();if(this.state==="started"){let r=this._clock.getTicksAtTime(n),o=this._clock.frequency.getDurationOfTicks(Math.ceil(r)-r,n),i=n+o;this.emit("stop",i),this._clock.setTicksAtTime(e,i),this.emit("start",i,this._clock.getSecondsAtTime(i))}else this._clock.setTicksAtTime(e,n)}}getTicksAtTime(e){return Math.round(this._clock.getTicksAtTime(e))}getSecondsAtTime(e){return this._clock.getSecondsAtTime(e)}get PPQ(){return this._clock.frequency.multiplier}set PPQ(e){this._clock.frequency.multiplier=e}nextSubdivision(e){if(e=this.toTicks(e),this.state!=="started")return 0;{let n=this.now(),r=this.getTicksAtTime(n),o=e-r%e;return this._clock.nextTickTime(o,n)}}syncSignal(e,n){if(!n){let o=this.now();if(e.getValueAtTime(o)!==0){let s=1/(60/this.bpm.getValueAtTime(o)/this.PPQ);n=e.getValueAtTime(o)/s}else n=0}let r=new Q(n);return this.bpm.connect(r),r.connect(e._param),this._syncedSignals.push({initial:e.value,ratio:r,signal:e}),e.value=0,this}unsyncSignal(e){for(let n=this._syncedSignals.length-1;n>=0;n--){let r=this._syncedSignals[n];r.signal===e&&(r.ratio.dispose(),r.signal.value=r.initial,this._syncedSignals.splice(n,1))}return this}dispose(){return super.dispose(),this._clock.dispose(),cs(this,"bpm"),this._timeline.dispose(),this._repeatedEvents.dispose(),this}};uo.mixin(yl);ao(t=>{t.transport=new yl({context:t})});co(t=>{t.transport.dispose()});var Fe=class extends F{constructor(e){super(e),this.input=void 0,this._state=new Yn("stopped"),this._synced=!1,this._scheduled=[],this._syncedStart=oe,this._syncedStop=oe,this._state.memory=100,this._state.increasing=!0,this._volume=this.output=new In({context:this.context,mute:e.mute,volume:e.volume}),this.volume=this._volume.volume,B(this,"volume"),this.onstop=e.onstop}static getDefaults(){return Object.assign(F.getDefaults(),{mute:!1,onstop:oe,volume:0})}get state(){return this._synced?this.context.transport.state==="started"?this._state.getValueAtTime(this.context.transport.seconds):"stopped":this._state.getValueAtTime(this.now())}get mute(){return this._volume.mute}set mute(e){this._volume.mute=e}_clampToCurrentTime(e){return this._synced?e:Math.max(e,this.context.currentTime)}start(e,n,r){let o=ct(e)&&this._synced?this.context.transport.seconds:this.toSeconds(e);if(o=this._clampToCurrentTime(o),!this._synced&&this._state.getValueAtTime(o)==="started")G(ss(o,this._state.get(o).time),"Start time must be strictly greater than previous start time"),this._state.cancel(o),this._state.setStateAtTime("started",o),this.log("restart",o),this.restart(o,n,r);else if(this.log("start",o),this._state.setStateAtTime("started",o),this._synced){let i=this._state.get(o);i&&(i.offset=this.toSeconds(zt(n,0)),i.duration=r?this.toSeconds(r):void 0);let s=this.context.transport.schedule(a=>{this._start(a,n,r)},o);this._scheduled.push(s),this.context.transport.state==="started"&&this.context.transport.getSecondsAtTime(this.immediate())>o&&this._syncedStart(this.now(),this.context.transport.seconds)}else rl(this.context),this._start(o,n,r);return this}stop(e){let n=ct(e)&&this._synced?this.context.transport.seconds:this.toSeconds(e);if(n=this._clampToCurrentTime(n),this._state.getValueAtTime(n)==="started"||te(this._state.getNextState("started",n))){if(this.log("stop",n),!this._synced)this._stop(n);else{let r=this.context.transport.schedule(this._stop.bind(this),n);this._scheduled.push(r)}this._state.cancel(n),this._state.setStateAtTime("stopped",n)}return this}restart(e,n,r){return e=this.toSeconds(e),this._state.getValueAtTime(e)==="started"&&(this._state.cancel(e),this._restart(e,n,r)),this}sync(){return this._synced||(this._synced=!0,this._syncedStart=(e,n)=>{if(n>0){let r=this._state.get(n);if(r&&r.state==="started"&&r.time!==n){let o=n-this.toSeconds(r.time),i;r.duration&&(i=this.toSeconds(r.duration)-o),this._start(e,this.toSeconds(r.offset)+o,i)}}},this._syncedStop=e=>{let n=this.context.transport.getSecondsAtTime(Math.max(e-this.sampleTime,0));this._state.getValueAtTime(n)==="started"&&this._stop(e)},this.context.transport.on("start",this._syncedStart),this.context.transport.on("loopStart",this._syncedStart),this.context.transport.on("stop",this._syncedStop),this.context.transport.on("pause",this._syncedStop),this.context.transport.on("loopEnd",this._syncedStop)),this}unsync(){return this._synced&&(this.context.transport.off("stop",this._syncedStop),this.context.transport.off("pause",this._syncedStop),this.context.transport.off("loopEnd",this._syncedStop),this.context.transport.off("start",this._syncedStart),this.context.transport.off("loopStart",this._syncedStart)),this._synced=!1,this._scheduled.forEach(e=>this.context.transport.clear(e)),this._scheduled=[],this._state.cancel(0),this._stop(0),this}dispose(){return super.dispose(),this.onstop=oe,this.unsync(),this._volume.dispose(),this._state.dispose(),this}};var Rr=class t extends Xn{constructor(){super(y(t.getDefaults(),arguments,["url","onload"])),this.name="ToneBufferSource",this._source=this.context.createBufferSource(),this._internalChannels=[this._source],this._sourceStarted=!1,this._sourceStopped=!1;let e=y(t.getDefaults(),arguments,["url","onload"]);Vt(this._source,this._gainNode),this._source.onended=()=>this._stopSource(),this.playbackRate=new he({context:this.context,param:this._source.playbackRate,units:"positive",value:e.playbackRate}),this.loop=e.loop,this.loopStart=e.loopStart,this.loopEnd=e.loopEnd,this._buffer=new Nt(e.url,e.onload,e.onerror),this._internalChannels.push(this._source)}static getDefaults(){return Object.assign(Xn.getDefaults(),{url:new Nt,loop:!1,loopEnd:0,loopStart:0,onload:oe,onerror:oe,playbackRate:1})}get fadeIn(){return this._fadeIn}set fadeIn(e){this._fadeIn=e}get fadeOut(){return this._fadeOut}set fadeOut(e){this._fadeOut=e}get curve(){return this._curve}set curve(e){this._curve=e}start(e,n,r,o=1){G(this.buffer.loaded,"buffer is either not set or not loaded");let i=this.toSeconds(e);this._startGain(i,o),this.loop?n=zt(n,this.loopStart):n=zt(n,0);let s=Math.max(this.toSeconds(n),0);if(this.loop){let a=this.toSeconds(this.loopEnd)||this.buffer.duration,c=this.toSeconds(this.loopStart),u=a-c;Ba(s,a)&&(s=(s-c)%u+c),Pt(s,this.buffer.duration)&&(s=0)}if(this._source.buffer=this.buffer.get(),this._source.loopEnd=this.toSeconds(this.loopEnd)||this.buffer.duration,al(s,this.buffer.duration)&&(this._sourceStarted=!0,this._source.start(i,s)),te(r)){let a=this.toSeconds(r);a=Math.max(a,0),this.stop(i+a)}return this}_stopSource(e){!this._sourceStopped&&this._sourceStarted&&(this._sourceStopped=!0,this._source.stop(this.toSeconds(e)),this._onended())}get loopStart(){return this._source.loopStart}set loopStart(e){this._source.loopStart=this.toSeconds(e)}get loopEnd(){return this._source.loopEnd}set loopEnd(e){this._source.loopEnd=this.toSeconds(e)}get buffer(){return this._buffer}set buffer(e){this._buffer.set(e)}get loop(){return this._source.loop}set loop(e){this._source.loop=e,this._sourceStarted&&this.cancelStop()}dispose(){return super.dispose(),this._source.onended=null,this._source.disconnect(),this._buffer.dispose(),this.playbackRate.dispose(),this}};var fue=44100*5;function Qt(t,e){return ye(this,void 0,void 0,function*(){let n=e/t.context.sampleRate,r=new wr(1,n,t.context.sampleRate);return new t.constructor(Object.assign(t.get(),{frequency:2/n,detune:0,context:r})).toDestination().start(0),(yield r.render()).getChannelData(0)})}var $a=class t extends Xn{constructor(){super(y(t.getDefaults(),arguments,["frequency","type"])),this.name="ToneOscillatorNode",this._oscillator=this.context.createOscillator(),this._internalChannels=[this._oscillator];let e=y(t.getDefaults(),arguments,["frequency","type"]);Vt(this._oscillator,this._gainNode),this.type=e.type,this.frequency=new he({context:this.context,param:this._oscillator.frequency,units:"frequency",value:e.frequency}),this.detune=new he({context:this.context,param:this._oscillator.detune,units:"cents",value:e.detune}),B(this,["frequency","detune"])}static getDefaults(){return Object.assign(Xn.getDefaults(),{detune:0,frequency:440,type:"sine"})}start(e){let n=this.toSeconds(e);return this.log("start",n),this._startGain(n),this._oscillator.start(n),this}_stopSource(e){this._oscillator.stop(e)}setPeriodicWave(e){return this._oscillator.setPeriodicWave(e),this}get type(){return this._oscillator.type}set type(e){this._oscillator.type=e}dispose(){return super.dispose(),this.state==="started"&&this.stop(),this._oscillator.disconnect(),this.frequency.dispose(),this.detune.dispose(),this}};var ut=(()=>{class t extends Fe{constructor(){super(y(t.getDefaults(),arguments,["frequency","type"])),this.name="Oscillator",this._oscillator=null;let n=y(t.getDefaults(),arguments,["frequency","type"]);this.frequency=new se({context:this.context,units:"frequency",value:n.frequency}),B(this,"frequency"),this.detune=new se({context:this.context,units:"cents",value:n.detune}),B(this,"detune"),this._partials=n.partials,this._partialCount=n.partialCount,this._type=n.type,n.partialCount&&n.type!=="custom"&&(this._type=this.baseType+n.partialCount.toString()),this.phase=n.phase}static getDefaults(){return Object.assign(Fe.getDefaults(),{detune:0,frequency:440,partialCount:0,partials:[],phase:0,type:"sine"})}_start(n){let r=this.toSeconds(n),o=new $a({context:this.context,onended:()=>this.onstop(this)});this._oscillator=o,this._wave?this._oscillator.setPeriodicWave(this._wave):this._oscillator.type=this._type,this._oscillator.connect(this.output),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.start(r)}_stop(n){let r=this.toSeconds(n);this._oscillator&&this._oscillator.stop(r)}_restart(n){let r=this.toSeconds(n);return this.log("restart",r),this._oscillator&&this._oscillator.cancelStop(),this._state.cancel(r),this}syncFrequency(){return this.context.transport.syncSignal(this.frequency),this}unsyncFrequency(){return this.context.transport.unsyncSignal(this.frequency),this}_getCachedPeriodicWave(){if(this._type==="custom")return t._periodicWaveCache.find(r=>r.phase===this._phase&&cC(r.partials,this._partials));{let n=t._periodicWaveCache.find(r=>r.type===this._type&&r.phase===this._phase);return this._partialCount=n?n.partialCount:this._partialCount,n}}get type(){return this._type}set type(n){this._type=n;let r=["sine","square","sawtooth","triangle"].indexOf(n)!==-1;if(this._phase===0&&r)this._wave=void 0,this._partialCount=0,this._oscillator!==null&&(this._oscillator.type=n);else{let o=this._getCachedPeriodicWave();if(te(o)){let{partials:i,wave:s}=o;this._wave=s,this._partials=i,this._oscillator!==null&&this._oscillator.setPeriodicWave(this._wave)}else{let[i,s]=this._getRealImaginary(n,this._phase),a=this.context.createPeriodicWave(i,s);this._wave=a,this._oscillator!==null&&this._oscillator.setPeriodicWave(this._wave),t._periodicWaveCache.push({imag:s,partialCount:this._partialCount,partials:this._partials,phase:this._phase,real:i,type:this._type,wave:this._wave}),t._periodicWaveCache.length>100&&t._periodicWaveCache.shift()}}}get baseType(){return this._type.replace(this.partialCount.toString(),"")}set baseType(n){this.partialCount&&this._type!=="custom"&&n!=="custom"?this.type=n+this.partialCount:this.type=n}get partialCount(){return this._partialCount}set partialCount(n){gt(n,0);let r=this._type,o=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(this._type);if(o&&(r=o[1]),this._type!=="custom")n===0?this.type=r:this.type=r+n.toString();else{let i=new Float32Array(n);this._partials.forEach((s,a)=>i[a]=s),this._partials=Array.from(i),this.type=this._type}}_getRealImaginary(n,r){let i=2048,s=new Float32Array(i),a=new Float32Array(i),c=1;if(n==="custom"){if(c=this._partials.length+1,this._partialCount=this._partials.length,i=c,this._partials.length===0)return[s,a]}else{let u=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(n);u?(c=parseInt(u[2],10)+1,this._partialCount=parseInt(u[2],10),n=u[1],c=Math.max(c,2),i=c):this._partialCount=0,this._partials=[]}for(let u=1;u<i;++u){let l=2/(u*Math.PI),d;switch(n){case"sine":d=u<=c?1:0,this._partials[u-1]=d;break;case"square":d=u&1?2*l:0,this._partials[u-1]=d;break;case"sawtooth":d=l*(u&1?1:-1),this._partials[u-1]=d;break;case"triangle":u&1?d=2*(l*l)*(u-1>>1&1?-1:1):d=0,this._partials[u-1]=d;break;case"custom":d=this._partials[u-1];break;default:throw new TypeError("Oscillator: invalid type: "+n)}d!==0?(s[u]=-d*Math.sin(r*u),a[u]=d*Math.cos(r*u)):(s[u]=0,a[u]=0)}return[s,a]}_inverseFFT(n,r,o){let i=0,s=n.length;for(let a=0;a<s;a++)i+=n[a]*Math.cos(a*o)+r[a]*Math.sin(a*o);return i}getInitialValue(){let[n,r]=this._getRealImaginary(this._type,0),o=0,i=Math.PI*2,s=32;for(let a=0;a<s;a++)o=Math.max(this._inverseFFT(n,r,a/s*i),o);return Up(-this._inverseFFT(n,r,this._phase)/o,-1,1)}get partials(){return this._partials.slice(0,this.partialCount)}set partials(n){this._partials=n,this._partialCount=this._partials.length,n.length&&(this.type="custom")}get phase(){return this._phase*(180/Math.PI)}set phase(n){this._phase=n*Math.PI/180,this.type=this._type}asArray(n=1024){return ye(this,void 0,void 0,function*(){return Qt(this,n)})}dispose(){return super.dispose(),this._oscillator!==null&&this._oscillator.dispose(),this._wave=void 0,this.frequency.dispose(),this.detune.dispose(),this}}return t._periodicWaveCache=[],t})();var ln=class t extends F{constructor(){super(Object.assign(y(t.getDefaults(),arguments,["context"])))}connect(e,n=0,r=0){return hs(this,e,n,r),this}};var An=class t extends ln{constructor(){super(Object.assign(y(t.getDefaults(),arguments,["mapping","length"]))),this.name="WaveShaper",this._shaper=this.context.createWaveShaper(),this.input=this._shaper,this.output=this._shaper;let e=y(t.getDefaults(),arguments,["mapping","length"]);rt(e.mapping)||e.mapping instanceof Float32Array?this.curve=Float32Array.from(e.mapping):rC(e.mapping)&&this.setMap(e.mapping,e.length)}static getDefaults(){return Object.assign(se.getDefaults(),{length:1024})}setMap(e,n=1024){let r=new Float32Array(n);for(let o=0,i=n;o<i;o++){let s=o/(i-1)*2-1;r[o]=e(s,o)}return this.curve=r,this}get curve(){return this._shaper.curve}set curve(e){this._shaper.curve=e}get oversample(){return this._shaper.oversample}set oversample(e){let n=["none","2x","4x"].some(r=>r.includes(e));G(n,"oversampling must be either 'none', '2x', or '4x'"),this._shaper.oversample=e}dispose(){return super.dispose(),this._shaper.disconnect(),this}};var gs=class extends ln{constructor(){super(...arguments),this.name="AudioToGain",this._norm=new An({context:this.context,mapping:e=>(e+1)/2}),this.input=this._norm,this.output=this._norm}dispose(){return super.dispose(),this._norm.dispose(),this}};var lt=class t extends se{constructor(){super(Object.assign(y(t.getDefaults(),arguments,["value"]))),this.name="Multiply",this.override=!1;let e=y(t.getDefaults(),arguments,["value"]);this._mult=this.input=this.output=new Q({context:this.context,minValue:e.minValue,maxValue:e.maxValue}),this.factor=this._param=this._mult.gain,this.factor.setValueAtTime(e.value,0)}static getDefaults(){return Object.assign(se.getDefaults(),{value:0})}dispose(){return super.dispose(),this._mult.dispose(),this}};var Ha=class t extends Fe{constructor(){super(y(t.getDefaults(),arguments,["frequency","type","modulationType"])),this.name="AMOscillator",this._modulationScale=new gs({context:this.context}),this._modulationNode=new Q({context:this.context});let e=y(t.getDefaults(),arguments,["frequency","type","modulationType"]);this._carrier=new ut({context:this.context,detune:e.detune,frequency:e.frequency,onstop:()=>this.onstop(this),phase:e.phase,type:e.type}),this.frequency=this._carrier.frequency,this.detune=this._carrier.detune,this._modulator=new ut({context:this.context,phase:e.phase,type:e.modulationType}),this.harmonicity=new lt({context:this.context,units:"positive",value:e.harmonicity}),this.frequency.chain(this.harmonicity,this._modulator.frequency),this._modulator.chain(this._modulationScale,this._modulationNode.gain),this._carrier.chain(this._modulationNode,this.output),B(this,["frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(ut.getDefaults(),{harmonicity:1,modulationType:"square"})}_start(e){this._modulator.start(e),this._carrier.start(e)}_stop(e){this._modulator.stop(e),this._carrier.stop(e)}_restart(e){this._modulator.restart(e),this._carrier.restart(e)}get type(){return this._carrier.type}set type(e){this._carrier.type=e}get baseType(){return this._carrier.baseType}set baseType(e){this._carrier.baseType=e}get partialCount(){return this._carrier.partialCount}set partialCount(e){this._carrier.partialCount=e}get modulationType(){return this._modulator.type}set modulationType(e){this._modulator.type=e}get phase(){return this._carrier.phase}set phase(e){this._carrier.phase=e,this._modulator.phase=e}get partials(){return this._carrier.partials}set partials(e){this._carrier.partials=e}asArray(e=1024){return ye(this,void 0,void 0,function*(){return Qt(this,e)})}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this._modulationScale.dispose(),this}};var vs=class t extends Fe{constructor(){super(y(t.getDefaults(),arguments,["frequency","type","modulationType"])),this.name="FMOscillator",this._modulationNode=new Q({context:this.context,gain:0});let e=y(t.getDefaults(),arguments,["frequency","type","modulationType"]);this._carrier=new ut({context:this.context,detune:e.detune,frequency:0,onstop:()=>this.onstop(this),phase:e.phase,type:e.type}),this.detune=this._carrier.detune,this.frequency=new se({context:this.context,units:"frequency",value:e.frequency}),this._modulator=new ut({context:this.context,phase:e.phase,type:e.modulationType}),this.harmonicity=new lt({context:this.context,units:"positive",value:e.harmonicity}),this.modulationIndex=new lt({context:this.context,units:"positive",value:e.modulationIndex}),this.frequency.connect(this._carrier.frequency),this.frequency.chain(this.harmonicity,this._modulator.frequency),this.frequency.chain(this.modulationIndex,this._modulationNode),this._modulator.connect(this._modulationNode.gain),this._modulationNode.connect(this._carrier.frequency),this._carrier.connect(this.output),this.detune.connect(this._modulator.detune),B(this,["modulationIndex","frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(ut.getDefaults(),{harmonicity:1,modulationIndex:2,modulationType:"square"})}_start(e){this._modulator.start(e),this._carrier.start(e)}_stop(e){this._modulator.stop(e),this._carrier.stop(e)}_restart(e){return this._modulator.restart(e),this._carrier.restart(e),this}get type(){return this._carrier.type}set type(e){this._carrier.type=e}get baseType(){return this._carrier.baseType}set baseType(e){this._carrier.baseType=e}get partialCount(){return this._carrier.partialCount}set partialCount(e){this._carrier.partialCount=e}get modulationType(){return this._modulator.type}set modulationType(e){this._modulator.type=e}get phase(){return this._carrier.phase}set phase(e){this._carrier.phase=e,this._modulator.phase=e}get partials(){return this._carrier.partials}set partials(e){this._carrier.partials=e}asArray(e=1024){return ye(this,void 0,void 0,function*(){return Qt(this,e)})}dispose(){return super.dispose(),this.frequency.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this.modulationIndex.dispose(),this}};var Bo=class t extends Fe{constructor(){super(y(t.getDefaults(),arguments,["frequency","width"])),this.name="PulseOscillator",this._widthGate=new Q({context:this.context,gain:0}),this._thresh=new An({context:this.context,mapping:n=>n<=0?-1:1});let e=y(t.getDefaults(),arguments,["frequency","width"]);this.width=new se({context:this.context,units:"audioRange",value:e.width}),this._triangle=new ut({context:this.context,detune:e.detune,frequency:e.frequency,onstop:()=>this.onstop(this),phase:e.phase,type:"triangle"}),this.frequency=this._triangle.frequency,this.detune=this._triangle.detune,this._triangle.chain(this._thresh,this.output),this.width.chain(this._widthGate,this._thresh),B(this,["width","frequency","detune"])}static getDefaults(){return Object.assign(Fe.getDefaults(),{detune:0,frequency:440,phase:0,type:"pulse",width:.2})}_start(e){e=this.toSeconds(e),this._triangle.start(e),this._widthGate.gain.setValueAtTime(1,e)}_stop(e){e=this.toSeconds(e),this._triangle.stop(e),this._widthGate.gain.cancelScheduledValues(e),this._widthGate.gain.setValueAtTime(0,e)}_restart(e){this._triangle.restart(e),this._widthGate.gain.cancelScheduledValues(e),this._widthGate.gain.setValueAtTime(1,e)}get phase(){return this._triangle.phase}set phase(e){this._triangle.phase=e}get type(){return"pulse"}get baseType(){return"pulse"}get partials(){return[]}get partialCount(){return 0}set carrierType(e){this._triangle.type=e}asArray(e=1024){return ye(this,void 0,void 0,function*(){return Qt(this,e)})}dispose(){return super.dispose(),this._triangle.dispose(),this.width.dispose(),this._widthGate.dispose(),this._thresh.dispose(),this}};var Wa=class t extends Fe{constructor(){super(y(t.getDefaults(),arguments,["frequency","type","spread"])),this.name="FatOscillator",this._oscillators=[];let e=y(t.getDefaults(),arguments,["frequency","type","spread"]);this.frequency=new se({context:this.context,units:"frequency",value:e.frequency}),this.detune=new se({context:this.context,units:"cents",value:e.detune}),this._spread=e.spread,this._type=e.type,this._phase=e.phase,this._partials=e.partials,this._partialCount=e.partialCount,this.count=e.count,B(this,["frequency","detune"])}static getDefaults(){return Object.assign(ut.getDefaults(),{count:3,spread:20,type:"sawtooth"})}_start(e){e=this.toSeconds(e),this._forEach(n=>n.start(e))}_stop(e){e=this.toSeconds(e),this._forEach(n=>n.stop(e))}_restart(e){this._forEach(n=>n.restart(e))}_forEach(e){for(let n=0;n<this._oscillators.length;n++)e(this._oscillators[n],n)}get type(){return this._type}set type(e){this._type=e,this._forEach(n=>n.type=e)}get spread(){return this._spread}set spread(e){if(this._spread=e,this._oscillators.length>1){let n=-e/2,r=e/(this._oscillators.length-1);this._forEach((o,i)=>o.detune.value=n+r*i)}}get count(){return this._oscillators.length}set count(e){if(gt(e,1),this._oscillators.length!==e){this._forEach(n=>n.dispose()),this._oscillators=[];for(let n=0;n<e;n++){let r=new ut({context:this.context,volume:-6-e*1.1,type:this._type,phase:this._phase+n/e*360,partialCount:this._partialCount,onstop:n===0?()=>this.onstop(this):oe});this.type==="custom"&&(r.partials=this._partials),this.frequency.connect(r.frequency),this.detune.connect(r.detune),r.detune.overridden=!1,r.connect(this.output),this._oscillators[n]=r}this.spread=this._spread,this.state==="started"&&this._forEach(n=>n.start())}}get phase(){return this._phase}set phase(e){this._phase=e,this._forEach((n,r)=>n.phase=this._phase+r/this.count*360)}get baseType(){return this._oscillators[0].baseType}set baseType(e){this._forEach(n=>n.baseType=e),this._type=this._oscillators[0].type}get partials(){return this._oscillators[0].partials}set partials(e){this._partials=e,this._partialCount=this._partials.length,e.length&&(this._type="custom",this._forEach(n=>n.partials=e))}get partialCount(){return this._oscillators[0].partialCount}set partialCount(e){this._partialCount=e,this._forEach(n=>n.partialCount=e),this._type=this._oscillators[0].type}asArray(e=1024){return ye(this,void 0,void 0,function*(){return Qt(this,e)})}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this._forEach(e=>e.dispose()),this}};var Ga=class t extends Fe{constructor(){super(y(t.getDefaults(),arguments,["frequency","modulationFrequency"])),this.name="PWMOscillator",this.sourceType="pwm",this._scale=new lt({context:this.context,value:2});let e=y(t.getDefaults(),arguments,["frequency","modulationFrequency"]);this._pulse=new Bo({context:this.context,frequency:e.modulationFrequency}),this._pulse.carrierType="sine",this.modulationFrequency=this._pulse.frequency,this._modulator=new ut({context:this.context,detune:e.detune,frequency:e.frequency,onstop:()=>this.onstop(this),phase:e.phase}),this.frequency=this._modulator.frequency,this.detune=this._modulator.detune,this._modulator.chain(this._scale,this._pulse.width),this._pulse.connect(this.output),B(this,["modulationFrequency","frequency","detune"])}static getDefaults(){return Object.assign(Fe.getDefaults(),{detune:0,frequency:440,modulationFrequency:.4,phase:0,type:"pwm"})}_start(e){e=this.toSeconds(e),this._modulator.start(e),this._pulse.start(e)}_stop(e){e=this.toSeconds(e),this._modulator.stop(e),this._pulse.stop(e)}_restart(e){this._modulator.restart(e),this._pulse.restart(e)}get type(){return"pwm"}get baseType(){return"pwm"}get partials(){return[]}get partialCount(){return 0}get phase(){return this._modulator.phase}set phase(e){this._modulator.phase=e}asArray(e=1024){return ye(this,void 0,void 0,function*(){return Qt(this,e)})}dispose(){return super.dispose(),this._pulse.dispose(),this._scale.dispose(),this._modulator.dispose(),this}};var yC={am:Ha,fat:Wa,fm:vs,oscillator:ut,pulse:Bo,pwm:Ga},Uo=class t extends Fe{constructor(){super(y(t.getDefaults(),arguments,["frequency","type"])),this.name="OmniOscillator";let e=y(t.getDefaults(),arguments,["frequency","type"]);this.frequency=new se({context:this.context,units:"frequency",value:e.frequency}),this.detune=new se({context:this.context,units:"cents",value:e.detune}),B(this,["frequency","detune"]),this.set(e)}static getDefaults(){return Object.assign(ut.getDefaults(),vs.getDefaults(),Ha.getDefaults(),Wa.getDefaults(),Bo.getDefaults(),Ga.getDefaults())}_start(e){this._oscillator.start(e)}_stop(e){this._oscillator.stop(e)}_restart(e){return this._oscillator.restart(e),this}get type(){let e="";return["am","fm","fat"].some(n=>this._sourceType===n)&&(e=this._sourceType),e+this._oscillator.type}set type(e){e.substr(0,2)==="fm"?(this._createNewOscillator("fm"),this._oscillator=this._oscillator,this._oscillator.type=e.substr(2)):e.substr(0,2)==="am"?(this._createNewOscillator("am"),this._oscillator=this._oscillator,this._oscillator.type=e.substr(2)):e.substr(0,3)==="fat"?(this._createNewOscillator("fat"),this._oscillator=this._oscillator,this._oscillator.type=e.substr(3)):e==="pwm"?(this._createNewOscillator("pwm"),this._oscillator=this._oscillator):e==="pulse"?this._createNewOscillator("pulse"):(this._createNewOscillator("oscillator"),this._oscillator=this._oscillator,this._oscillator.type=e)}get partials(){return this._oscillator.partials}set partials(e){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&(this._oscillator.partials=e)}get partialCount(){return this._oscillator.partialCount}set partialCount(e){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&(this._oscillator.partialCount=e)}set(e){return Reflect.has(e,"type")&&e.type&&(this.type=e.type),super.set(e),this}_createNewOscillator(e){if(e!==this._sourceType){this._sourceType=e;let n=yC[e],r=this.now();if(this._oscillator){let o=this._oscillator;o.stop(r),this.context.setTimeout(()=>o.dispose(),this.blockTime)}this._oscillator=new n({context:this.context}),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.connect(this.output),this._oscillator.onstop=()=>this.onstop(this),this.state==="started"&&this._oscillator.start(r)}}get phase(){return this._oscillator.phase}set phase(e){this._oscillator.phase=e}get sourceType(){return this._sourceType}set sourceType(e){let n="sine";this._oscillator.type!=="pwm"&&this._oscillator.type!=="pulse"&&(n=this._oscillator.type),e==="fm"?this.type="fm"+n:e==="am"?this.type="am"+n:e==="fat"?this.type="fat"+n:e==="oscillator"?this.type=n:e==="pulse"?this.type="pulse":e==="pwm"&&(this.type="pwm")}_getOscType(e,n){return e instanceof yC[n]}get baseType(){return this._oscillator.baseType}set baseType(e){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&e!=="pulse"&&e!=="pwm"&&(this._oscillator.baseType=e)}get width(){if(this._getOscType(this._oscillator,"pulse"))return this._oscillator.width}get count(){if(this._getOscType(this._oscillator,"fat"))return this._oscillator.count}set count(e){this._getOscType(this._oscillator,"fat")&&Dt(e)&&(this._oscillator.count=e)}get spread(){if(this._getOscType(this._oscillator,"fat"))return this._oscillator.spread}set spread(e){this._getOscType(this._oscillator,"fat")&&Dt(e)&&(this._oscillator.spread=e)}get modulationType(){if(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))return this._oscillator.modulationType}set modulationType(e){(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))&&vt(e)&&(this._oscillator.modulationType=e)}get modulationIndex(){if(this._getOscType(this._oscillator,"fm"))return this._oscillator.modulationIndex}get harmonicity(){if(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))return this._oscillator.harmonicity}get modulationFrequency(){if(this._getOscType(this._oscillator,"pwm"))return this._oscillator.modulationFrequency}asArray(e=1024){return ye(this,void 0,void 0,function*(){return Qt(this,e)})}dispose(){return super.dispose(),this.detune.dispose(),this.frequency.dispose(),this._oscillator.dispose(),this}};function xl(t,e=1/0){let n=new WeakMap;return function(r,o){Reflect.defineProperty(r,o,{configurable:!0,enumerable:!0,get:function(){return n.get(this)},set:function(i){gt(i,t,e),n.set(this,i)}})}}function Xt(t,e=1/0){let n=new WeakMap;return function(r,o){Reflect.defineProperty(r,o,{configurable:!0,enumerable:!0,get:function(){return n.get(this)},set:function(i){gt(this.toSeconds(i),t,e),n.set(this,i)}})}}var qo=class t extends Fe{constructor(){super(y(t.getDefaults(),arguments,["url","onload"])),this.name="Player",this._activeSources=new Set;let e=y(t.getDefaults(),arguments,["url","onload"]);this._buffer=new Nt({onload:this._onload.bind(this,e.onload),onerror:e.onerror,reverse:e.reverse,url:e.url}),this.autostart=e.autostart,this._loop=e.loop,this._loopStart=e.loopStart,this._loopEnd=e.loopEnd,this._playbackRate=e.playbackRate,this.fadeIn=e.fadeIn,this.fadeOut=e.fadeOut}static getDefaults(){return Object.assign(Fe.getDefaults(),{autostart:!1,fadeIn:0,fadeOut:0,loop:!1,loopEnd:0,loopStart:0,onload:oe,onerror:oe,playbackRate:1,reverse:!1})}load(e){return ye(this,void 0,void 0,function*(){return yield this._buffer.load(e),this._onload(),this})}_onload(e=oe){e(),this.autostart&&this.start()}_onSourceEnd(e){this.onstop(this),this._activeSources.delete(e),this._activeSources.size===0&&!this._synced&&this._state.getValueAtTime(this.now())==="started"&&(this._state.cancel(this.now()),this._state.setStateAtTime("stopped",this.now()))}start(e,n,r){return super.start(e,n,r),this}_start(e,n,r){this._loop?n=zt(n,this._loopStart):n=zt(n,0);let o=this.toSeconds(n),i=r;r=zt(r,Math.max(this._buffer.duration-o,0));let s=this.toSeconds(r);s=s/this._playbackRate,e=this.toSeconds(e);let a=new Rr({url:this._buffer,context:this.context,fadeIn:this.fadeIn,fadeOut:this.fadeOut,loop:this._loop,loopEnd:this._loopEnd,loopStart:this._loopStart,onended:this._onSourceEnd.bind(this),playbackRate:this._playbackRate}).connect(this.output);!this._loop&&!this._synced&&(this._state.cancel(e+s),this._state.setStateAtTime("stopped",e+s,{implicitEnd:!0})),this._activeSources.add(a),this._loop&&ct(i)?a.start(e,o):a.start(e,o,s-this.toSeconds(this.fadeOut))}_stop(e){let n=this.toSeconds(e);this._activeSources.forEach(r=>r.stop(n))}restart(e,n,r){return super.restart(e,n,r),this}_restart(e,n,r){this._stop(e),this._start(e,n,r)}seek(e,n){let r=this.toSeconds(n);if(this._state.getValueAtTime(r)==="started"){let o=this.toSeconds(e);this._stop(r),this._start(r,o)}return this}setLoopPoints(e,n){return this.loopStart=e,this.loopEnd=n,this}get loopStart(){return this._loopStart}set loopStart(e){this._loopStart=e,this.buffer.loaded&&gt(this.toSeconds(e),0,this.buffer.duration),this._activeSources.forEach(n=>{n.loopStart=e})}get loopEnd(){return this._loopEnd}set loopEnd(e){this._loopEnd=e,this.buffer.loaded&&gt(this.toSeconds(e),0,this.buffer.duration),this._activeSources.forEach(n=>{n.loopEnd=e})}get buffer(){return this._buffer}set buffer(e){this._buffer.set(e)}get loop(){return this._loop}set loop(e){if(this._loop!==e&&(this._loop=e,this._activeSources.forEach(n=>{n.loop=e}),e)){let n=this._state.getNextState("stopped",this.now());n&&this._state.cancel(n.time)}}get playbackRate(){return this._playbackRate}set playbackRate(e){this._playbackRate=e;let n=this.now(),r=this._state.getNextState("stopped",n);r&&r.implicitEnd&&(this._state.cancel(r.time),this._activeSources.forEach(o=>o.cancelStop())),this._activeSources.forEach(o=>{o.playbackRate.setValueAtTime(e,n)})}get reverse(){return this._buffer.reverse}set reverse(e){this._buffer.reverse=e}get loaded(){return this._buffer.loaded}dispose(){return super.dispose(),this._activeSources.forEach(e=>e.dispose()),this._activeSources.clear(),this._buffer.dispose(),this}};St([Xt(0)],qo.prototype,"fadeIn",void 0);St([Xt(0)],qo.prototype,"fadeOut",void 0);var Lt=class t extends F{constructor(){super(y(t.getDefaults(),arguments,["attack","decay","sustain","release"])),this.name="Envelope",this._sig=new se({context:this.context,value:0}),this.output=this._sig,this.input=void 0;let e=y(t.getDefaults(),arguments,["attack","decay","sustain","release"]);this.attack=e.attack,this.decay=e.decay,this.sustain=e.sustain,this.release=e.release,this.attackCurve=e.attackCurve,this.releaseCurve=e.releaseCurve,this.decayCurve=e.decayCurve}static getDefaults(){return Object.assign(F.getDefaults(),{attack:.01,attackCurve:"linear",decay:.1,decayCurve:"exponential",release:1,releaseCurve:"exponential",sustain:.5})}get value(){return this.getValueAtTime(this.now())}_getCurve(e,n){if(vt(e))return e;{let r;for(r in wl)if(wl[r][n]===e)return r;return e}}_setCurve(e,n,r){if(vt(r)&&Reflect.has(wl,r)){let o=wl[r];Gn(o)?e!=="_decayCurve"&&(this[e]=o[n]):this[e]=o}else if(rt(r)&&e!=="_decayCurve")this[e]=r;else throw new Error("Envelope: invalid curve: "+r)}get attackCurve(){return this._getCurve(this._attackCurve,"In")}set attackCurve(e){this._setCurve("_attackCurve","In",e)}get releaseCurve(){return this._getCurve(this._releaseCurve,"Out")}set releaseCurve(e){this._setCurve("_releaseCurve","Out",e)}get decayCurve(){return this._decayCurve}set decayCurve(e){G(["linear","exponential"].some(n=>n===e),`Invalid envelope curve: ${e}`),this._decayCurve=e}triggerAttack(e,n=1){this.log("triggerAttack",e,n),e=this.toSeconds(e);let o=this.toSeconds(this.attack),i=this.toSeconds(this.decay),s=this.getValueAtTime(e);if(s>0){let a=1/o;o=(1-s)/a}if(o<this.sampleTime)this._sig.cancelScheduledValues(e),this._sig.setValueAtTime(n,e);else if(this._attackCurve==="linear")this._sig.linearRampTo(n,o,e);else if(this._attackCurve==="exponential")this._sig.targetRampTo(n,o,e);else{this._sig.cancelAndHoldAtTime(e);let a=this._attackCurve;for(let c=1;c<a.length;c++)if(a[c-1]<=s&&s<=a[c]){a=this._attackCurve.slice(c),a[0]=s;break}this._sig.setValueCurveAtTime(a,e,o,n)}if(i&&this.sustain<1){let a=n*this.sustain,c=e+o;this.log("decay",c),this._decayCurve==="linear"?this._sig.linearRampToValueAtTime(a,i+c):this._sig.exponentialApproachValueAtTime(a,c,i)}return this}triggerRelease(e){this.log("triggerRelease",e),e=this.toSeconds(e);let n=this.getValueAtTime(e);if(n>0){let r=this.toSeconds(this.release);r<this.sampleTime?this._sig.setValueAtTime(0,e):this._releaseCurve==="linear"?this._sig.linearRampTo(0,r,e):this._releaseCurve==="exponential"?this._sig.targetRampTo(0,r,e):(G(rt(this._releaseCurve),"releaseCurve must be either 'linear', 'exponential' or an array"),this._sig.cancelAndHoldAtTime(e),this._sig.setValueCurveAtTime(this._releaseCurve,e,r,n))}return this}getValueAtTime(e){return this._sig.getValueAtTime(e)}triggerAttackRelease(e,n,r=1){return n=this.toSeconds(n),this.triggerAttack(n,r),this.triggerRelease(n+this.toSeconds(e)),this}cancel(e){return this._sig.cancelScheduledValues(this.toSeconds(e)),this}connect(e,n=0,r=0){return hs(this,e,n,r),this}asArray(e=1024){return ye(this,void 0,void 0,function*(){let n=e/this.context.sampleRate,r=new wr(1,n,this.context.sampleRate),o=this.toSeconds(this.attack)+this.toSeconds(this.decay),i=o+this.toSeconds(this.release),s=i*.1,a=i+s,c=new this.constructor(Object.assign(this.get(),{attack:n*this.toSeconds(this.attack)/a,decay:n*this.toSeconds(this.decay)/a,release:n*this.toSeconds(this.release)/a,context:r}));return c._sig.toDestination(),c.triggerAttackRelease(n*(o+s)/a,0),(yield r.render()).getChannelData(0)})}dispose(){return super.dispose(),this._sig.dispose(),this}};St([Xt(0)],Lt.prototype,"attack",void 0);St([Xt(0)],Lt.prototype,"decay",void 0);St([xl(0,1)],Lt.prototype,"sustain",void 0);St([Xt(0)],Lt.prototype,"release",void 0);var wl=(()=>{let e,n,r=[];for(e=0;e<128;e++)r[e]=Math.sin(e/(128-1)*(Math.PI/2));let o=[],i=6.4;for(e=0;e<128-1;e++){n=e/(128-1);let h=Math.sin(n*(Math.PI*2)*i-Math.PI/2)+1;o[e]=h/10+n*.83}o[128-1]=1;let s=[],a=5;for(e=0;e<128;e++)s[e]=Math.ceil(e/(128-1)*a)/a;let c=[];for(e=0;e<128;e++)n=e/(128-1),c[e]=.5*(1-Math.cos(Math.PI*n));let u=[];for(e=0;e<128;e++){n=e/(128-1);let h=Math.pow(n,3)*4+.2,f=Math.cos(h*Math.PI*2*n);u[e]=Math.abs(f*(1-n))}function l(h){let f=new Array(h.length);for(let p=0;p<h.length;p++)f[p]=1-h[p];return f}function d(h){return h.slice(0).reverse()}return{bounce:{In:l(u),Out:u},cosine:{In:r,Out:d(r)},exponential:"exponential",linear:"linear",ripple:{In:o,Out:l(o)},sine:{In:c,Out:l(c)},step:{In:s,Out:l(s)}}})();var Kn=class t extends F{constructor(){super(y(t.getDefaults(),arguments)),this._scheduledEvents=[],this._synced=!1,this._original_triggerAttack=this.triggerAttack,this._original_triggerRelease=this.triggerRelease;let e=y(t.getDefaults(),arguments);this._volume=this.output=new In({context:this.context,volume:e.volume}),this.volume=this._volume.volume,B(this,"volume")}static getDefaults(){return Object.assign(F.getDefaults(),{volume:0})}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",0)),this}_syncState(){let e=!1;return this._synced||(this._synced=!0,e=!0),e}_syncMethod(e,n){let r=this["_original_"+e]=this[e];this[e]=(...o)=>{let i=o[n],s=this.context.transport.schedule(a=>{o[n]=a,r.apply(this,o)},i);this._scheduledEvents.push(s)}}unsync(){return this._scheduledEvents.forEach(e=>this.context.transport.clear(e)),this._scheduledEvents=[],this._synced&&(this._synced=!1,this.triggerAttack=this._original_triggerAttack,this.triggerRelease=this._original_triggerRelease),this}triggerAttackRelease(e,n,r,o){let i=this.toSeconds(r),s=this.toSeconds(n);return this.triggerAttack(e,i,o),this.triggerRelease(i+s),this}dispose(){return super.dispose(),this._volume.dispose(),this.unsync(),this._scheduledEvents=[],this}};var Mn=class t extends Kn{constructor(){super(y(t.getDefaults(),arguments));let e=y(t.getDefaults(),arguments);this.portamento=e.portamento,this.onsilence=e.onsilence}static getDefaults(){return Object.assign(Kn.getDefaults(),{detune:0,onsilence:oe,portamento:0})}triggerAttack(e,n,r=1){this.log("triggerAttack",e,n,r);let o=this.toSeconds(n);return this._triggerEnvelopeAttack(o,r),this.setNote(e,o),this}triggerRelease(e){this.log("triggerRelease",e);let n=this.toSeconds(e);return this._triggerEnvelopeRelease(n),this}setNote(e,n){let r=this.toSeconds(n),o=e instanceof Yt?e.toFrequency():e;if(this.portamento>0&&this.getLevelAtTime(r)>.05){let i=this.toSeconds(this.portamento);this.frequency.exponentialRampTo(o,i,r)}else this.frequency.setValueAtTime(o,r);return this}};St([Xt(0)],Mn.prototype,"portamento",void 0);var ys=class t extends Lt{constructor(){super(y(t.getDefaults(),arguments,["attack","decay","sustain","release"])),this.name="AmplitudeEnvelope",this._gainNode=new Q({context:this.context,gain:0}),this.output=this._gainNode,this.input=this._gainNode,this._sig.connect(this._gainNode.gain),this.output=this._gainNode,this.input=this._gainNode}dispose(){return super.dispose(),this._gainNode.dispose(),this}};var $o=class t extends Mn{constructor(){super(y(t.getDefaults(),arguments)),this.name="Synth";let e=y(t.getDefaults(),arguments);this.oscillator=new Uo(Object.assign({context:this.context,detune:e.detune,onstop:()=>this.onsilence(this)},e.oscillator)),this.frequency=this.oscillator.frequency,this.detune=this.oscillator.detune,this.envelope=new ys(Object.assign({context:this.context},e.envelope)),this.oscillator.chain(this.envelope,this.output),B(this,["oscillator","frequency","detune","envelope"])}static getDefaults(){return Object.assign(Mn.getDefaults(),{envelope:Object.assign(xr(Lt.getDefaults(),Object.keys(F.getDefaults())),{attack:.005,decay:.1,release:1,sustain:.3}),oscillator:Object.assign(xr(Uo.getDefaults(),[...Object.keys(Fe.getDefaults()),"frequency","detune"]),{type:"triangle"})})}_triggerEnvelopeAttack(e,n){if(this.envelope.triggerAttack(e,n),this.oscillator.start(e),this.envelope.sustain===0){let r=this.toSeconds(this.envelope.attack),o=this.toSeconds(this.envelope.decay);this.oscillator.stop(e+r+o)}}_triggerEnvelopeRelease(e){this.envelope.triggerRelease(e),this.oscillator.stop(e+this.toSeconds(this.envelope.release))}getLevelAtTime(e){return e=this.toSeconds(e),this.envelope.getValueAtTime(e)}dispose(){return super.dispose(),this.oscillator.dispose(),this.envelope.dispose(),this}};var Cl=class t extends $o{constructor(){super(y(t.getDefaults(),arguments)),this.name="MembraneSynth",this.portamento=0;let e=y(t.getDefaults(),arguments);this.pitchDecay=e.pitchDecay,this.octaves=e.octaves,B(this,["oscillator","envelope"])}static getDefaults(){return Zn(Mn.getDefaults(),$o.getDefaults(),{envelope:{attack:.001,attackCurve:"exponential",decay:.4,release:1.4,sustain:.01},octaves:10,oscillator:{type:"sine"},pitchDecay:.05})}setNote(e,n){let r=this.toSeconds(n),o=this.toFrequency(e instanceof Yt?e.toFrequency():e),i=o*this.octaves;return this.oscillator.frequency.setValueAtTime(i,r),this.oscillator.frequency.exponentialRampToValueAtTime(o,r+this.toSeconds(this.pitchDecay)),this}dispose(){return super.dispose(),this}};St([xl(0)],Cl.prototype,"octaves",void 0);St([Xt(0)],Cl.prototype,"pitchDecay",void 0);var xC=new Set;function xs(t){xC.add(t)}function Dl(t,e){let n=`registerProcessor("${t}", ${e})`;xC.add(n)}var SR=`
	/**
	 * The base AudioWorkletProcessor for use in Tone.js. Works with the [[ToneAudioWorklet]]. 
	 */
	class ToneAudioWorkletProcessor extends AudioWorkletProcessor {

		constructor(options) {
			
			super(options);
			/**
			 * If the processor was disposed or not. Keep alive until it's disposed.
			 */
			this.disposed = false;
		   	/** 
			 * The number of samples in the processing block
			 */
			this.blockSize = 128;
			/**
			 * the sample rate
			 */
			this.sampleRate = sampleRate;

			this.port.onmessage = (event) => {
				// when it receives a dispose 
				if (event.data === "dispose") {
					this.disposed = true;
				}
			};
		}
	}
`;xs(SR);var TR=`
	/**
	 * Abstract class for a single input/output processor. 
	 * has a 'generate' function which processes one sample at a time
	 */
	class SingleIOProcessor extends ToneAudioWorkletProcessor {

		constructor(options) {
			super(Object.assign(options, {
				numberOfInputs: 1,
				numberOfOutputs: 1
			}));
			/**
			 * Holds the name of the parameter and a single value of that
			 * parameter at the current sample
			 * @type { [name: string]: number }
			 */
			this.params = {}
		}

		/**
		 * Generate an output sample from the input sample and parameters
		 * @abstract
		 * @param input number
		 * @param channel number
		 * @param parameters { [name: string]: number }
		 * @returns number
		 */
		generate(){}

		/**
		 * Update the private params object with the 
		 * values of the parameters at the given index
		 * @param parameters { [name: string]: Float32Array },
		 * @param index number
		 */
		updateParams(parameters, index) {
			for (const paramName in parameters) {
				const param = parameters[paramName];
				if (param.length > 1) {
					this.params[paramName] = parameters[paramName][index];
				} else {
					this.params[paramName] = parameters[paramName][0];
				}
			}
		}

		/**
		 * Process a single frame of the audio
		 * @param inputs Float32Array[][]
		 * @param outputs Float32Array[][]
		 */
		process(inputs, outputs, parameters) {
			const input = inputs[0];
			const output = outputs[0];
			// get the parameter values
			const channelCount = Math.max(input && input.length || 0, output.length);
			for (let sample = 0; sample < this.blockSize; sample++) {
				this.updateParams(parameters, sample);
				for (let channel = 0; channel < channelCount; channel++) {
					const inputSample = input && input.length ? input[channel][sample] : 0;
					output[channel][sample] = this.generate(inputSample, channel, this.params);
				}
			}
			return !this.disposed;
		}
	};
`;xs(TR);var ER=`
	/**
	 * A multichannel buffer for use within an AudioWorkletProcessor as a delay line
	 */
	class DelayLine {
		
		constructor(size, channels) {
			this.buffer = [];
			this.writeHead = []
			this.size = size;

			// create the empty channels
			for (let i = 0; i < channels; i++) {
				this.buffer[i] = new Float32Array(this.size);
				this.writeHead[i] = 0;
			}
		}

		/**
		 * Push a value onto the end
		 * @param channel number
		 * @param value number
		 */
		push(channel, value) {
			this.writeHead[channel] += 1;
			if (this.writeHead[channel] > this.size) {
				this.writeHead[channel] = 0;
			}
			this.buffer[channel][this.writeHead[channel]] = value;
		}

		/**
		 * Get the recorded value of the channel given the delay
		 * @param channel number
		 * @param delay number delay samples
		 */
		get(channel, delay) {
			let readHead = this.writeHead[channel] - Math.floor(delay);
			if (readHead < 0) {
				readHead += this.size;
			}
			return this.buffer[channel][readHead];
		}
	}
`;xs(ER);var wC="feedback-comb-filter",IR=`
	class FeedbackCombFilterWorklet extends SingleIOProcessor {

		constructor(options) {
			super(options);
			this.delayLine = new DelayLine(this.sampleRate, options.channelCount || 2);
		}

		static get parameterDescriptors() {
			return [{
				name: "delayTime",
				defaultValue: 0.1,
				minValue: 0,
				maxValue: 1,
				automationRate: "k-rate"
			}, {
				name: "feedback",
				defaultValue: 0.5,
				minValue: 0,
				maxValue: 0.9999,
				automationRate: "k-rate"
			}];
		}

		generate(input, channel, parameters) {
			const delayedSample = this.delayLine.get(channel, parameters.delayTime * this.sampleRate);
			this.delayLine.push(channel, input + delayedSample * parameters.feedback);
			return delayedSample;
		}
	}
`;Dl(wC,IR);var Sl=class t extends Kn{constructor(){super(y(t.getDefaults(),arguments,["urls","onload","baseUrl"],"urls")),this.name="Sampler",this._activeSources=new Map;let e=y(t.getDefaults(),arguments,["urls","onload","baseUrl"],"urls"),n={};Object.keys(e.urls).forEach(r=>{let o=parseInt(r,10);if(G(ja(r)||Dt(o)&&isFinite(o),`url key is neither a note or midi pitch: ${r}`),ja(r)){let i=new Yt(this.context,r).toMidi();n[i]=e.urls[r]}else Dt(o)&&isFinite(o)&&(n[o]=e.urls[o])}),this._buffers=new ps({urls:n,onload:e.onload,baseUrl:e.baseUrl,onerror:e.onerror}),this.attack=e.attack,this.release=e.release,this.curve=e.curve,this._buffers.loaded&&Promise.resolve().then(e.onload)}static getDefaults(){return Object.assign(Kn.getDefaults(),{attack:0,baseUrl:"",curve:"exponential",onload:oe,onerror:oe,release:.1,urls:{}})}_findClosest(e){let r=0;for(;r<96;){if(this._buffers.has(e+r))return-r;if(this._buffers.has(e-r))return r;r++}throw new Error(`No available buffers for note: ${e}`)}triggerAttack(e,n,r=1){return this.log("triggerAttack",e,n,r),Array.isArray(e)||(e=[e]),e.forEach(o=>{let i=$p(new Yt(this.context,o).toFrequency()),s=Math.round(i),a=i-s,c=this._findClosest(s),u=s-c,l=this._buffers.get(u),d=Lo(c+a),h=new Rr({url:l,context:this.context,curve:this.curve,fadeIn:this.attack,fadeOut:this.release,playbackRate:d}).connect(this.output);h.start(n,0,l.duration/d,r),rt(this._activeSources.get(s))||this._activeSources.set(s,[]),this._activeSources.get(s).push(h),h.onended=()=>{if(this._activeSources&&this._activeSources.has(s)){let f=this._activeSources.get(s),p=f.indexOf(h);p!==-1&&f.splice(p,1)}}}),this}triggerRelease(e,n){return this.log("triggerRelease",e,n),Array.isArray(e)||(e=[e]),e.forEach(r=>{let o=new Yt(this.context,r).toMidi();if(this._activeSources.has(o)&&this._activeSources.get(o).length){let i=this._activeSources.get(o);n=this.toSeconds(n),i.forEach(s=>{s.stop(n)}),this._activeSources.set(o,[])}}),this}releaseAll(e){let n=this.toSeconds(e);return this._activeSources.forEach(r=>{for(;r.length;)r.shift().stop(n)}),this}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",1)),this}triggerAttackRelease(e,n,r,o=1){let i=this.toSeconds(r);return this.triggerAttack(e,i,o),rt(n)?(G(rt(e),"notes must be an array when duration is array"),e.forEach((s,a)=>{let c=n[Math.min(a,n.length-1)];this.triggerRelease(s,i+this.toSeconds(c))})):this.triggerRelease(e,i+this.toSeconds(n)),this}add(e,n,r){if(G(ja(e)||isFinite(e),`note must be a pitch or midi: ${e}`),ja(e)){let o=new Yt(this.context,e).toMidi();this._buffers.add(o,n,r)}else this._buffers.add(e,n,r);return this}get loaded(){return this._buffers.loaded}dispose(){return super.dispose(),this._buffers.dispose(),this._activeSources.forEach(e=>{e.forEach(n=>n.dispose())}),this._activeSources.clear(),this}};St([Xt(0)],Sl.prototype,"attack",void 0);St([Xt(0)],Sl.prototype,"release",void 0);var ws=class t extends He{constructor(){super(y(t.getDefaults(),arguments,["callback","value"])),this.name="ToneEvent",this._state=new Yn("stopped"),this._startOffset=0;let e=y(t.getDefaults(),arguments,["callback","value"]);this._loop=e.loop,this.callback=e.callback,this.value=e.value,this._loopStart=this.toTicks(e.loopStart),this._loopEnd=this.toTicks(e.loopEnd),this._playbackRate=e.playbackRate,this._probability=e.probability,this._humanize=e.humanize,this.mute=e.mute,this._playbackRate=e.playbackRate,this._state.increasing=!0,this._rescheduleEvents()}static getDefaults(){return Object.assign(He.getDefaults(),{callback:oe,humanize:!1,loop:!1,loopEnd:"1m",loopStart:0,mute:!1,playbackRate:1,probability:1,value:null})}_rescheduleEvents(e=-1){this._state.forEachFrom(e,n=>{let r;if(n.state==="started"){n.id!==-1&&this.context.transport.clear(n.id);let o=n.time+Math.round(this.startOffset/this._playbackRate);if(this._loop===!0||Dt(this._loop)&&this._loop>1){r=1/0,Dt(this._loop)&&(r=this._loop*this._getLoopDuration());let i=this._state.getAfter(o);i!==null&&(r=Math.min(r,i.time-o)),r!==1/0&&(this._state.setStateAtTime("stopped",o+r+1,{id:-1}),r=new Ke(this.context,r));let s=new Ke(this.context,this._getLoopDuration());n.id=this.context.transport.scheduleRepeat(this._tick.bind(this),s,new Ke(this.context,o),r)}else n.id=this.context.transport.schedule(this._tick.bind(this),new Ke(this.context,o))}})}get state(){return this._state.getValueAtTime(this.context.transport.ticks)}get startOffset(){return this._startOffset}set startOffset(e){this._startOffset=e}get probability(){return this._probability}set probability(e){this._probability=e}get humanize(){return this._humanize}set humanize(e){this._humanize=e}start(e){let n=this.toTicks(e);return this._state.getValueAtTime(n)==="stopped"&&(this._state.add({id:-1,state:"started",time:n}),this._rescheduleEvents(n)),this}stop(e){this.cancel(e);let n=this.toTicks(e);if(this._state.getValueAtTime(n)==="started"){this._state.setStateAtTime("stopped",n,{id:-1});let r=this._state.getBefore(n),o=n;r!==null&&(o=r.time),this._rescheduleEvents(o)}return this}cancel(e){e=zt(e,-1/0);let n=this.toTicks(e);return this._state.forEachFrom(n,r=>{this.context.transport.clear(r.id)}),this._state.cancel(n),this}_tick(e){let n=this.context.transport.getTicksAtTime(e);if(!this.mute&&this._state.getValueAtTime(n)==="started"){if(this.probability<1&&Math.random()>this.probability)return;if(this.humanize){let r=.02;ol(this.humanize)||(r=this.toSeconds(this.humanize)),e+=(Math.random()*2-1)*r}this.callback(e,this.value)}}_getLoopDuration(){return Math.round((this._loopEnd-this._loopStart)/this._playbackRate)}get loop(){return this._loop}set loop(e){this._loop=e,this._rescheduleEvents()}get playbackRate(){return this._playbackRate}set playbackRate(e){this._playbackRate=e,this._rescheduleEvents()}get loopEnd(){return new Ke(this.context,this._loopEnd).toSeconds()}set loopEnd(e){this._loopEnd=this.toTicks(e),this._loop&&this._rescheduleEvents()}get loopStart(){return new Ke(this.context,this._loopStart).toSeconds()}set loopStart(e){this._loopStart=this.toTicks(e),this._loop&&this._rescheduleEvents()}get progress(){if(this._loop){let e=this.context.transport.ticks,n=this._state.get(e);if(n!==null&&n.state==="started"){let r=this._getLoopDuration();return(e-n.time)%r/r}else return 0}else return 0}dispose(){return super.dispose(),this.cancel(),this._state.dispose(),this}};var za=class t extends He{constructor(){super(y(t.getDefaults(),arguments,["callback","interval"])),this.name="Loop";let e=y(t.getDefaults(),arguments,["callback","interval"]);this._event=new ws({context:this.context,callback:this._tick.bind(this),loop:!0,loopEnd:e.interval,playbackRate:e.playbackRate,probability:e.probability}),this.callback=e.callback,this.iterations=e.iterations}static getDefaults(){return Object.assign(He.getDefaults(),{interval:"4n",callback:oe,playbackRate:1,iterations:1/0,probability:1,mute:!1,humanize:!1})}start(e){return this._event.start(e),this}stop(e){return this._event.stop(e),this}cancel(e){return this._event.cancel(e),this}_tick(e){this.callback(e)}get state(){return this._event.state}get progress(){return this._event.progress}get interval(){return this._event.loopEnd}set interval(e){this._event.loopEnd=e}get playbackRate(){return this._event.playbackRate}set playbackRate(e){this._event.playbackRate=e}get humanize(){return this._event.humanize}set humanize(e){this._event.humanize=e}get probability(){return this._event.probability}set probability(e){this._event.probability=e}get mute(){return this._event.mute}set mute(e){this._event.mute=e}get iterations(){return this._event.loop===!0?1/0:this._event.loop}set iterations(e){e===1/0?this._event.loop=!0:this._event.loop=e}dispose(){return super.dispose(),this._event.dispose(),this}};var Za=class t extends F{constructor(){super(Object.assign(y(t.getDefaults(),arguments,["pan"]))),this.name="Panner",this._panner=this.context.createStereoPanner(),this.input=this._panner,this.output=this._panner;let e=y(t.getDefaults(),arguments,["pan"]);this.pan=new he({context:this.context,param:this._panner.pan,value:e.pan,minValue:-1,maxValue:1}),this._panner.channelCount=e.channelCount,this._panner.channelCountMode="explicit",B(this,"pan")}static getDefaults(){return Object.assign(F.getDefaults(),{pan:0,channelCount:1})}dispose(){return super.dispose(),this._panner.disconnect(),this.pan.dispose(),this}};var CC="bit-crusher",FR=`
	class BitCrusherWorklet extends SingleIOProcessor {

		static get parameterDescriptors() {
			return [{
				name: "bits",
				defaultValue: 12,
				minValue: 1,
				maxValue: 16,
				automationRate: 'k-rate'
			}];
		}

		generate(input, _channel, parameters) {
			const step = Math.pow(0.5, parameters.bits - 1);
			const val = step * Math.floor(input / step + 0.5);
			return val;
		}
	}
`;Dl(CC,FR);var mxe=[1557/44100,1617/44100,1491/44100,1422/44100,1277/44100,1356/44100,1188/44100,1116/44100];var Cxe=[1687/25e3,1601/25e3,2053/25e3,2251/25e3];var bs=class t extends F{constructor(){super(y(t.getDefaults(),arguments,["solo"])),this.name="Solo";let e=y(t.getDefaults(),arguments,["solo"]);this.input=this.output=new Q({context:this.context}),t._allSolos.has(this.context)||t._allSolos.set(this.context,new Set),t._allSolos.get(this.context).add(this),this.solo=e.solo}static getDefaults(){return Object.assign(F.getDefaults(),{solo:!1})}get solo(){return this._isSoloed()}set solo(e){e?this._addSolo():this._removeSolo(),t._allSolos.get(this.context).forEach(n=>n._updateSolo())}get muted(){return this.input.gain.value===0}_addSolo(){t._soloed.has(this.context)||t._soloed.set(this.context,new Set),t._soloed.get(this.context).add(this)}_removeSolo(){t._soloed.has(this.context)&&t._soloed.get(this.context).delete(this)}_isSoloed(){return t._soloed.has(this.context)&&t._soloed.get(this.context).has(this)}_noSolos(){return!t._soloed.has(this.context)||t._soloed.has(this.context)&&t._soloed.get(this.context).size===0}_updateSolo(){this._isSoloed()?this.input.gain.value=1:this._noSolos()?this.input.gain.value=1:this.input.gain.value=0}dispose(){return super.dispose(),t._allSolos.get(this.context).delete(this),this._removeSolo(),this}};bs._allSolos=new Map;bs._soloed=new Map;var Al=class t extends F{constructor(){super(y(t.getDefaults(),arguments,["pan","volume"])),this.name="PanVol";let e=y(t.getDefaults(),arguments,["pan","volume"]);this._panner=this.input=new Za({context:this.context,pan:e.pan,channelCount:e.channelCount}),this.pan=this._panner.pan,this._volume=this.output=new In({context:this.context,volume:e.volume}),this.volume=this._volume.volume,this._panner.connect(this._volume),this.mute=e.mute,B(this,["pan","volume"])}static getDefaults(){return Object.assign(F.getDefaults(),{mute:!1,pan:0,volume:0,channelCount:1})}get mute(){return this._volume.mute}set mute(e){this._volume.mute=e}dispose(){return super.dispose(),this._panner.dispose(),this.pan.dispose(),this._volume.dispose(),this.volume.dispose(),this}};var Xp=class t extends F{constructor(){super(y(t.getDefaults(),arguments,["volume","pan"])),this.name="Channel";let e=y(t.getDefaults(),arguments,["volume","pan"]);this._solo=this.input=new bs({solo:e.solo,context:this.context}),this._panVol=this.output=new Al({context:this.context,pan:e.pan,volume:e.volume,mute:e.mute,channelCount:e.channelCount}),this.pan=this._panVol.pan,this.volume=this._panVol.volume,this._solo.connect(this._panVol),B(this,["pan","volume"])}static getDefaults(){return Object.assign(F.getDefaults(),{pan:0,volume:0,mute:!1,solo:!1,channelCount:1})}get solo(){return this._solo.solo}set solo(e){this._solo.solo=e}get muted(){return this._solo.muted||this.mute}get mute(){return this._panVol.mute}set mute(e){this._panVol.mute=e}_getBus(e){return t.buses.has(e)||t.buses.set(e,new Q({context:this.context})),t.buses.get(e)}send(e,n=0){let r=this._getBus(e),o=new Q({context:this.context,units:"decibels",gain:n});return this.connect(o),o.connect(r),o}receive(e){return this._getBus(e).connect(this),this}dispose(){return super.dispose(),this._panVol.dispose(),this.pan.dispose(),this.volume.dispose(),this._solo.dispose(),this}};Xp.buses=new Map;var Kp=class extends F{constructor(){super(...arguments),this.name="Listener",this.positionX=new he({context:this.context,param:this.context.rawContext.listener.positionX}),this.positionY=new he({context:this.context,param:this.context.rawContext.listener.positionY}),this.positionZ=new he({context:this.context,param:this.context.rawContext.listener.positionZ}),this.forwardX=new he({context:this.context,param:this.context.rawContext.listener.forwardX}),this.forwardY=new he({context:this.context,param:this.context.rawContext.listener.forwardY}),this.forwardZ=new he({context:this.context,param:this.context.rawContext.listener.forwardZ}),this.upX=new he({context:this.context,param:this.context.rawContext.listener.upX}),this.upY=new he({context:this.context,param:this.context.rawContext.listener.upY}),this.upZ=new he({context:this.context,param:this.context.rawContext.listener.upZ})}static getDefaults(){return Object.assign(F.getDefaults(),{positionX:0,positionY:0,positionZ:0,forwardX:0,forwardY:0,forwardZ:-1,upX:0,upY:1,upZ:0})}dispose(){return super.dispose(),this.positionX.dispose(),this.positionY.dispose(),this.positionZ.dispose(),this.forwardX.dispose(),this.forwardY.dispose(),this.forwardZ.dispose(),this.upX.dispose(),this.upY.dispose(),this.upZ.dispose(),this}};ao(t=>{t.listener=new Kp({context:t})});co(t=>{t.listener.dispose()});var Kt=Xe().transport;var dDe=Xe().destination,hDe=Xe().destination;var fDe=Xe().listener;var SC=Xe().draw;var pDe=Xe();function Ml(){return Nt.loaded()}var dn=class t{constructor(e=un(0)){this._toneTime=e}static fromValue(e){return new this(un(e))}static fromTransport(e){return new this(un(e.position))}add(e){let n=this.toSeconds()+e.toSeconds();return new t(un(n,"s"))}isBefore(e){return this.toSeconds()<e.toSeconds()}toBarsBeatsSixteenths(){return this._toneTime.toBarsBeatsSixteenths()}toAbletonLiveBarsBeatsSixteenths(){let e=this._toneTime.toBarsBeatsSixteenths().split(":"),n=+e[0]+1,r=+e[1]+1,o=Math.floor(+e[2])+1;return`${n}.${r}.${o}`}toAbletonLiveBeatTime(){let e=this._toneTime.toBarsBeatsSixteenths().split(":"),n=+e[0],r=+e[1],o=Math.floor(+e[2]);return n*4+r+o/4}toSeconds(){return this._toneTime.toSeconds()}};var Nl=class{constructor(e,n,r){this.pattern=e,this.structure=n,this.startTime=r,this.endTime=r.add(e.duration)}get initial(){return this.pattern.initial??this.pattern.name.charAt(0)}};var Ol=class{constructor(e){this.startTimes=[],this.patternsInStructure=[];let n=new dn;for(let r of e)this.patternsInStructure.push(new Nl(r,this,n)),n=n.add(r.duration);this.duration=n}getPatternInStructureAt(e){let n=this.patternsInStructure[0];if(!e.isBefore(n.startTime)){for(let r of this.patternsInStructure)if(e.isBefore(r.endTime))return r}}};var Cs=class{constructor(e,n,r){this.name=e,this.duration=n,this.initial=r}};var j=class{constructor(e,n){this.secTime=e,this.beatTime=n}};function qR(t,e){if(t&1){let n=wt();$t(0),Ne(1,"input",1),Re("change",function(o){xe(n);let i=re();return we(i.uploadFile(o))}),Oe(),Ye(2,"br"),Ht()}}function $R(t,e){if(t&1){let n=wt();Ne(0,"button",3),Re("click",function(){xe(n);let o=re(2);return we(o.playSong())}),Ot(1,"\u23F5"),Oe()}}function HR(t,e){if(t&1){let n=wt();Ne(0,"button",3),Re("click",function(){xe(n);let o=re(2);return we(o.pauseSong())}),Ot(1,"\u23F8"),Oe()}}function WR(t,e){if(t&1){let n=wt();$t(0),Ot(1),Ne(2,"button",6),Re("click",function(){xe(n);let o=re(2);return we(o.play())}),Ot(3,"Play"),Oe(),Ne(4,"button",6),Re("click",function(){xe(n);let o=re(2);return we(o.stop())}),Ot(5,"Stop"),Oe(),Ye(6,"br"),Ht()}if(t&2){let n=re(2);Ce(1),ur(" ",n.patternToPlay," : "),Ce(1),de("disabled",!n.patternToPlay),Ce(2),de("disabled",!n.patternToPlay)}}function GR(t,e){if(t&1){let n=wt();$t(0),Ot(1),Ne(2,"app-rythm-bar",7),Re("addEvent",function(o){xe(n);let i=re(2);return we(i.addEvent(o))})("removeEvent",function(o){xe(n);let i=re(2);return we(i.removeEvent(o))}),Oe(),Ye(3,"br"),Ne(4,"app-rythm-bar",7),Re("addEvent",function(o){xe(n);let i=re(2);return we(i.addEvent(o))})("removeEvent",function(o){xe(n);let i=re(2);return we(i.removeEvent(o))}),Oe(),Ye(5,"br"),Ht()}if(t&2){let n=re(2);Ce(1),ur(" ",n.currentPatternInStructure.pattern.name," : "),Ce(1),de("number",1)("events",n.events)("timecode",n.timecode),Ce(2),de("number",2)("events",n.events)("timecode",n.timecode)}}function zR(t,e){if(t&1){let n=wt();$t(0),Ot(1),Ne(2,"app-rythm-bar",8),Re("addEvent",function(o){xe(n);let i=re(2);return we(i.addEvent(o))})("removeEvent",function(o){xe(n);let i=re(2);return we(i.removeEvent(o))}),Oe(),Ye(3,"br"),Ne(4,"app-rythm-bar",8),Re("addEvent",function(o){xe(n);let i=re(2);return we(i.addEvent(o))})("removeEvent",function(o){xe(n);let i=re(2);return we(i.removeEvent(o))}),Oe(),Ye(5,"br"),Ht()}if(t&2){let n=re(2);Ce(1),ur(" ",n.currentPatternInStructure.pattern.name," : "),Ce(1),de("number",3)("events",n.events),Ce(2),de("number",4)("events",n.events)}}function ZR(t,e){if(t&1){let n=wt();$t(0),Ot(1),Ne(2,"app-rythm-bar",8),Re("addEvent",function(o){xe(n);let i=re(2);return we(i.addEvent(o))})("removeEvent",function(o){xe(n);let i=re(2);return we(i.removeEvent(o))}),Oe(),Ye(3,"br"),Ne(4,"app-rythm-bar",8),Re("addEvent",function(o){xe(n);let i=re(2);return we(i.addEvent(o))})("removeEvent",function(o){xe(n);let i=re(2);return we(i.removeEvent(o))}),Oe(),Ye(5,"br"),Ne(6,"app-rythm-bar",8),Re("addEvent",function(o){xe(n);let i=re(2);return we(i.addEvent(o))})("removeEvent",function(o){xe(n);let i=re(2);return we(i.removeEvent(o))}),Oe(),Ye(7,"br"),Ne(8,"app-rythm-bar",8),Re("addEvent",function(o){xe(n);let i=re(2);return we(i.addEvent(o))})("removeEvent",function(o){xe(n);let i=re(2);return we(i.removeEvent(o))}),Oe(),Ht()}if(t&2){let n=re(2);Ce(1),ur(" ",n.currentPatternInStructure.pattern.name," : "),Ce(1),de("number",5)("events",n.events),Ce(2),de("number",6)("events",n.events),Ce(2),de("number",7)("events",n.events),Ce(2),de("number",8)("events",n.events)}}function YR(t,e){if(t&1){let n=wt();$t(0),Ot(1),It(2,$R,2,0,"button",2)(3,HR,2,0,"button",2),Ne(4,"button",3),Re("click",function(){xe(n);let o=re();return we(o.stopSong())}),Ot(5,"\u23F9"),Oe(),Ye(6,"br"),Ne(7,"input",4),Re("change",function(o){xe(n);let i=re();return we(i.setProgress(o))}),Oe(),Ye(8,"br"),Ne(9,"app-structure",5),Re("clickPatternInStructure",function(o){xe(n);let i=re();return we(i.onClickPatternInStructure(o))}),Oe(),Ye(10,"br"),It(11,WR,7,3,"ng-container",0)(12,GR,6,7,"ng-container",0)(13,zR,6,5,"ng-container",0)(14,ZR,9,9,"ng-container",0),Ht()}if(t&2){let n=re();Ce(1),ur(" ",n.timecode," "),Ce(1),de("ngIf",!n.playing),Ce(1),de("ngIf",n.playing),Ce(4),de("value",n.progress),Ce(2),de("structure",n.structure)("currentPatternInStructure",n.currentPatternInStructure),Ce(2),de("ngIf",n.patternToPlay),Ce(1),de("ngIf",n.currentPatternInStructure&&n.currentPatternInStructure.pattern&&n.currentPatternInStructure.pattern.name=="Partie bombarde"),Ce(1),de("ngIf",n.currentPatternInStructure&&n.currentPatternInStructure.pattern&&n.currentPatternInStructure.pattern.name=="Couplet"),Ce(1),de("ngIf",n.currentPatternInStructure&&n.currentPatternInStructure.pattern&&n.currentPatternInStructure.pattern.name=="Refrain")}}var EC=new dn(un(3*60+28,"s")),Nn=[new j(0,-1.1762159715284715),new j(.6474583333333334,0),new j(2.5494791666666665,4),new j(4.533229166666667,8),new j(6.414729166666667,12),new j(8.447458333333334,16),new j(8.623416666666666,16.323610764235763),new j(10.798354166666666,20.323610764235763),new j(12.963208333333332,24.323610764235763),new j(15.102354166666666,28.323610764235763),new j(19.361729166666667,36.32361076423577),new j(21.5016875,40.32361076423577),new j(23.657645833333333,44.32361076423577),new j(25.796,48.32361076423577),new j(30.123145833333332,56.32361076423577),new j(32.3084375,60.32361076423577),new j(36.767270833333335,68.32361076423577),new j(38.93233333333333,72.32361076423577),new j(41.07664583333333,76.32361076423577),new j(45.41322916666667,84.32361076423577),new j(47.56552083333333,88.32361076423577),new j(49.75370833333333,92.32361076423577),new j(54.171625,100.32361076423577),new j(56.36841666666666,104.32361076423577),new j(58.552125,108.32361076423577),new j(60.758874999999996,112.32361076423577),new j(62.94252083333333,116.32361076423577),new j(65.11383333333333,120.32361076423577),new j(69.3805,128.32361076423575),new j(71.57797916666667,132.32361076423575),new j(73.79679166666666,136.32361076423575),new j(76.00502083333333,140.32361076423575),new j(78.20058333333333,144.32361076423575),new j(80.44814583333333,148.32361076423575),new j(82.71722916666667,152.32361076423575),new j(84.971625,156.32361076423575),new j(89.40552083333333,164.32361076423575),new j(91.63077083333333,168.32361076423575),new j(96.12441666666666,176.32361076423575),new j(98.34041666666667,180.32361076423575),new j(100.53739583333333,184.32361076423575),new j(102.71122916666667,188.32361076423575),new j(104.869875,192.32361076423575),new j(107.0630625,196.32361076423575),new j(111.51870833333334,204.32361076423575),new j(115.91847916666666,212.32361076423575),new j(118.13981249999999,216.32361076423575),new j(120.3725625,220.32361076423575),new j(122.5775625,224.32361076423575),new j(124.79789583333333,228.32361076423575),new j(129.27608333333333,236.32361076423575),new j(135.8514375,248.32361076423575),new j(138.0909375,252.32361076423575),new j(140.3044375,256.32361076423575),new j(144.69927083333332,264.32361076423575),new j(146.91591666666667,268.32361076423575),new j(149.09029166666667,272.32361076423575),new j(151.29185416666667,276.32361076423575),new j(155.75666666666666,284.32361076423575),new j(164.63647916666667,300.32361076423575),new j(169.0448125,308.32361076423575),new j(171.278875,312.32361076423575),new j(173.54152083333332,316.32361076423575),new j(175.77772916666666,320.32361076423575),new j(177.99827083333332,324.32361076423575),new j(182.51258333333334,332.32361076423575),new j(184.74072916666665,336.32361076423575),new j(186.95395833333333,340.32361076423575),new j(189.1530833333333,344.32361076423575),new j(191.3145625,348.32361076423575),new j(193.45008333333334,352.32361076423575),new j(195.61702083333333,356.32361076423575),new j(197.8255,360.32361076423575),new j(197.84312565104167,360.35486076423575)],IC=(()=>{let e=class e{constructor(r){this.changeDetectorRef=r,this.events=ji.fromEach(cp),this.progress=0,console.log("Events charg\xE9s depuis le JSON",cp),Kt.schedule(function(o){console.log("Premi\xE8re mesure")},"1m")}addEvent(r){this.events.push(r),this.logEvents(),this.changeDetectorRef.detectChanges()}removeEvent(r){this.events.splice(this.events.indexOf(r),1),this.logEvents(),this.changeDetectorRef.detectChanges()}logEvents(){console.log(this.events)}uploadFile(r){return z(this,null,function*(){let i=r.currentTarget.files;if(!i?.length)return;let s=i[0];console.log("audioFile",s);let a=URL.createObjectURL(s),c=new qo({url:a}).toDestination();yield Ml();let u=new Cs("Couplet",new dn(un("2m"))),l=new Cs("Partie bombarde",new dn(un("2m")),"B"),d=new Cs("Refrain",new dn(un("4m"))),h=[u,u],f=[l,l],p=[d],m=[...h,...h],g=[...f,...f],v=[...p,...p],D=new Ol([...f,...f,...f,...m,...g,...m,...v,...g,...m,...g,...m,...v,...g]);Kt.bpm.value=120,Kt.loop=!0,Kt.loopStart=0,Kt.loopEnd=EC.toSeconds(),c.sync().start(0);let I=new za(M=>{SC.schedule(()=>{this.refresh(M)},M)},"16n").start(0);this.structure=D})}refresh(r){let o=s=>{let a=s.position.toString().split(":"),c=+a[0]+1,u=+a[1]+1,l=Math.floor(+a[2])+1;return`${c}:${u}:${l}`};this.progress=Math.min(Math.max(0,Kt.progress),1)*100;let i=this.getWrappedPosition(Kt.seconds);if(this.timecode=i?.toAbletonLiveBarsBeatsSixteenths(),this.structure&&i){let s=dn.fromValue(0);this.currentPatternInStructure=this.structure.getPatternInStructureAt(i.add(s))}this.changeDetectorRef.detectChanges()}getWrappedPosition(r){if(r<Nn[0].secTime||r>Nn[Nn.length-1].secTime)return;let o=Nn.findIndex(f=>r<f.secTime),i=Nn[o-1],s=Nn[o],a=(r-i.secTime)/(s.secTime-i.secTime),c=i.beatTime+a*(s.beatTime-i.beatTime),u=Math.floor(c/4),l=Math.floor(c)-u*4,d=c%1*4,h=`${u}:${l}:${d}`;return new dn(un(h))}getWrappedTime(r){let o=r.toAbletonLiveBeatTime();if(o<Nn[0].beatTime||o>Nn[Nn.length-1].beatTime)return;let i=Nn.findIndex(l=>o<l.beatTime),s=Nn[i-1],a=Nn[i],c=(o-s.beatTime)/(a.beatTime-s.beatTime),u=s.secTime+c*(a.secTime-s.secTime);return new dn(un(u))}playSong(){return z(this,null,function*(){console.log("playSong"),yield Ml(),Ua(),Kt.start()})}pauseSong(){return z(this,null,function*(){console.log("pauseSong"),yield Ml(),Kt.pause()})}stopSong(){console.log("stopSong"),Kt.stop()}onClickPatternInStructure(r){let o=this.getWrappedTime(r.startTime);if(o){let i=o.toSeconds()/EC.toSeconds();this.setProgressPercent(i*100)}}loopPattern(r){return z(this,null,function*(){let o=i=>{let s=["C","B","R"].indexOf(i);if(s===-1)return;let c=document.getElementsByTagName("input")?.[s].files?.[0];if(c)return console.log("file",c),URL.createObjectURL(c)}})}play(){return z(this,null,function*(){if(this.player){console.log("play");let r="https://drive.google.com/file/d/1DktZf_rGRaoRxoJEbo3NVWd9yYFX39aj/view?usp=sharing",o="https://drive.usercontent.google.com/u/0/uc?id=1DktZf_rGRaoRxoJEbo3NVWd9yYFX39aj&export=download",i="../assets/audio/Petit Papillon/Partie bombarde [2024-01-31 233921].wav";yield Ua(),this.player.start()}})}stop(){return z(this,null,function*(){this.player&&(yield Ua(),this.player.stop()),this.refresh()})}setProgress(r){let i=+r.target.value;this.setProgressPercent(i)}setProgressPercent(r){let o=new dn(un(r/100*+Kt.loopEnd.valueOf(),"s"));Kt.position=o.toBarsBeatsSixteenths(),this.refresh()}get playing(){return Kt.state==="started"}};e.\u0275fac=function(o){return new(o||e)(Et(Er))},e.\u0275cmp=st({type:e,selectors:[["app-rythm-sandbox"]],standalone:!0,features:[mt],decls:2,vars:2,consts:[[4,"ngIf"],["type","file","accept",".wav,.mp3",3,"change"],[3,"click",4,"ngIf"],[3,"click"],["type","range","min","0","max","100","step","1",3,"value","change"],[3,"structure","currentPatternInStructure","clickPatternInStructure"],[3,"disabled","click"],[3,"number","events","timecode","addEvent","removeEvent"],[3,"number","events","addEvent","removeEvent"]],template:function(o,i){o&1&&It(0,qR,3,0,"ng-container",0)(1,YR,15,10,"ng-container",0),o&2&&(de("ngIf",!i.structure),Ce(1),de("ngIf",i.structure))},dependencies:[Q_,K_,At,Ei,H_],styles:["[_nghost-%COMP%]{width:100%}input[type=range][_ngcontent-%COMP%]{width:100%}"]});let t=e;return t})();var AC=(()=>{let e=class e{};e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=Ut({type:e,bootstrap:[G_]}),e.\u0275inj=Bt({imports:[At,Xy,W_,U_.forRoot([{path:"",component:IC}])]});let t=e;return t})();Qy().bootstrapModule(AC).catch(t=>console.error(t));
