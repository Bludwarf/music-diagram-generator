var NE=Object.create;var wd=Object.defineProperty,OE=Object.defineProperties,FE=Object.getOwnPropertyDescriptor,RE=Object.getOwnPropertyDescriptors,kE=Object.getOwnPropertyNames,Tc=Object.getOwnPropertySymbols,PE=Object.getPrototypeOf,bd=Object.prototype.hasOwnProperty,ig=Object.prototype.propertyIsEnumerable;var og=(t,e,n)=>e in t?wd(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,C=(t,e)=>{for(var n in e||={})bd.call(e,n)&&og(t,n,e[n]);if(Tc)for(var n of Tc(e))ig.call(e,n)&&og(t,n,e[n]);return t},G=(t,e)=>OE(t,RE(e));var VE=(t=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(t,{get:(e,n)=>(typeof require<"u"?require:e)[n]}):t)(function(t){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+t+'" is not supported')});var eo=(t,e)=>{var n={};for(var r in t)bd.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&Tc)for(var r of Tc(t))e.indexOf(r)<0&&ig.call(t,r)&&(n[r]=t[r]);return n};var Je=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var LE=(t,e,n,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of kE(e))!bd.call(t,o)&&o!==n&&wd(t,o,{get:()=>e[o],enumerable:!(r=FE(e,o))||r.enumerable});return t};var Cd=(t,e,n)=>(n=t!=null?NE(PE(t)):{},LE(e||!t||!t.__esModule?wd(n,"default",{value:t,enumerable:!0}):n,t));var ee=(t,e,n)=>new Promise((r,o)=>{var i=c=>{try{a(n.next(c))}catch(u){o(u)}},s=c=>{try{a(n.throw(c))}catch(u){o(u)}},a=c=>c.done?r(c.value):Promise.resolve(c.value).then(i,s);a((n=n.apply(t,e)).next())});var t0=Je((Z6,Za)=>{"use strict";function gF(t){if(Array.isArray(t))return t}Za.exports=gF,Za.exports.__esModule=!0,Za.exports.default=Za.exports});var n0=Je((Q6,Qa)=>{"use strict";function yF(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,o,i,s,a=[],c=!0,u=!1;try{if(i=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(a.push(r.value),a.length!==e);c=!0);}catch(l){u=!0,o=l}finally{try{if(!c&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw o}}return a}}Qa.exports=yF,Qa.exports.__esModule=!0,Qa.exports.default=Qa.exports});var r0=Je((K6,Ka)=>{"use strict";function vF(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}Ka.exports=vF,Ka.exports.__esModule=!0,Ka.exports.default=Ka.exports});var i0=Je((X6,Xa)=>{"use strict";var o0=r0();function _F(t,e){if(t){if(typeof t=="string")return o0(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o0(t,e)}}Xa.exports=_F,Xa.exports.__esModule=!0,Xa.exports.default=Xa.exports});var s0=Je((J6,Ja)=>{"use strict";function xF(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}Ja.exports=xF,Ja.exports.__esModule=!0,Ja.exports.default=Ja.exports});var a0=Je((e8,ec)=>{"use strict";var wF=t0(),bF=n0(),CF=i0(),DF=s0();function EF(t,e){return wF(t)||bF(t,e)||CF(t,e)||DF()}ec.exports=EF,ec.exports.__esModule=!0,ec.exports.default=ec.exports});var c0=Je((t8,tc)=>{"use strict";function TF(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}tc.exports=TF,tc.exports.__esModule=!0,tc.exports.default=tc.exports});var Qp=Je((n8,zr)=>{"use strict";function Zp(t){"@babel/helpers - typeof";return zr.exports=Zp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zr.exports.__esModule=!0,zr.exports.default=zr.exports,Zp(t)}zr.exports=Zp,zr.exports.__esModule=!0,zr.exports.default=zr.exports});var l0=Je((r8,nc)=>{"use strict";var u0=Qp().default;function SF(t,e){if(u0(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(u0(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}nc.exports=SF,nc.exports.__esModule=!0,nc.exports.default=nc.exports});var d0=Je((o8,rc)=>{"use strict";var AF=Qp().default,IF=l0();function MF(t){var e=IF(t,"string");return AF(e)=="symbol"?e:String(e)}rc.exports=MF,rc.exports.__esModule=!0,rc.exports.default=rc.exports});var f0=Je((i8,oc)=>{"use strict";var NF=d0();function h0(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,NF(r.key),r)}}function OF(t,e,n){return e&&h0(t.prototype,e),n&&h0(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}oc.exports=OF,oc.exports.__esModule=!0,oc.exports.default=oc.exports});var Kp=Je((yl,p0)=>{"use strict";(function(t,e){typeof yl=="object"&&typeof p0<"u"?e(yl,a0(),c0(),f0()):typeof define=="function"&&define.amd?define(["exports","@babel/runtime/helpers/slicedToArray","@babel/runtime/helpers/classCallCheck","@babel/runtime/helpers/createClass"],e):(t=typeof globalThis<"u"?globalThis:t||self,e(t.automationEvents={},t._slicedToArray,t._classCallCheck,t._createClass))})(yl,function(t,e,n,r){"use strict";var o=function(N,M,F){return{endTime:M,insertTime:F,type:"exponentialRampToValue",value:N}},i=function(N,M,F){return{endTime:M,insertTime:F,type:"linearRampToValue",value:N}},s=function(N,M){return{startTime:M,type:"setValue",value:N}},a=function(N,M,F){return{duration:F,startTime:M,type:"setValueCurve",values:N}},c=function(N,M,F){var H=F.startTime,B=F.target,W=F.timeConstant;return B+(M-B)*Math.exp((H-N)/W)},u=function(N){return N.type==="exponentialRampToValue"},l=function(N){return N.type==="linearRampToValue"},d=function(N){return u(N)||l(N)},h=function(N){return N.type==="setValue"},p=function(N){return N.type==="setValueCurve"},y=function O(N,M,F,H){var B=N[M];return B===void 0?H:d(B)||h(B)?B.value:p(B)?B.values[B.values.length-1]:c(F,O(N,M-1,B.startTime,H),B)},v=function(N,M,F,H,B){return F===void 0?[H.insertTime,B]:d(F)?[F.endTime,F.value]:h(F)?[F.startTime,F.value]:p(F)?[F.startTime+F.duration,F.values[F.values.length-1]]:[F.startTime,y(N,M-1,F.startTime,B)]},_=function(N){return N.type==="cancelAndHold"},x=function(N){return N.type==="cancelScheduledValues"},I=function(N){return _(N)||x(N)?N.cancelTime:u(N)||l(N)?N.endTime:N.startTime},A=function(N,M,F,H){var B=H.endTime,W=H.value;return F===W?W:0<F&&0<W||F<0&&W<0?F*Math.pow(W/F,(N-M)/(B-M)):0},L=function(N,M,F,H){var B=H.endTime,W=H.value;return F+(N-M)/(B-M)*(W-F)},T=function(N,M){var F=Math.floor(M),H=Math.ceil(M);return F===H?N[F]:(1-(M-F))*N[F]+(1-(H-M))*N[H]},E=function(N,M){var F=M.duration,H=M.startTime,B=M.values,W=(N-H)/F*(B.length-1);return T(B,W)},w=function(N){return N.type==="setTarget"},m=function(O){function N(M){n(this,N),this._automationEvents=[],this._currenTime=0,this._defaultValue=M}return r(N,[{key:O,value:function(){return this._automationEvents[Symbol.iterator]()}},{key:"add",value:function(F){var H=I(F);if(_(F)||x(F)){var B=this._automationEvents.findIndex(function(Q){return x(F)&&p(Q)?Q.startTime+Q.duration>=H:I(Q)>=H}),W=this._automationEvents[B];if(B!==-1&&(this._automationEvents=this._automationEvents.slice(0,B)),_(F)){var U=this._automationEvents[this._automationEvents.length-1];if(W!==void 0&&d(W)){if(U!==void 0&&w(U))throw new Error("The internal list is malformed.");var Se=U===void 0?W.insertTime:p(U)?U.startTime+U.duration:I(U),ke=U===void 0?this._defaultValue:p(U)?U.values[U.values.length-1]:U.value,ft=u(W)?A(H,Se,ke,W):L(H,Se,ke,W),St=u(W)?o(ft,H,this._currenTime):i(ft,H,this._currenTime);this._automationEvents.push(St)}if(U!==void 0&&w(U)&&this._automationEvents.push(s(this.getValue(H),H)),U!==void 0&&p(U)&&U.startTime+U.duration>H){var g=H-U.startTime,f=(U.values.length-1)/U.duration,k=Math.max(2,1+Math.ceil(g*f)),D=g/(k-1)*f,q=U.values.slice(0,k);if(D<1)for(var Me=1;Me<k;Me+=1){var Be=D*Me%1;q[Me]=U.values[Me-1]*(1-Be)+U.values[Me]*Be}this._automationEvents[this._automationEvents.length-1]=a(q,U.startTime,g)}}}else{var Ge=this._automationEvents.findIndex(function(Q){return I(Q)>H}),rt=Ge===-1?this._automationEvents[this._automationEvents.length-1]:this._automationEvents[Ge-1];if(rt!==void 0&&p(rt)&&I(rt)+rt.duration>H)return!1;var z=u(F)?o(F.value,F.endTime,this._currenTime):l(F)?i(F.value,H,this._currenTime):F;if(Ge===-1)this._automationEvents.push(z);else{if(p(F)&&H+F.duration>I(this._automationEvents[Ge]))return!1;this._automationEvents.splice(Ge,0,z)}}return!0}},{key:"flush",value:function(F){var H=this._automationEvents.findIndex(function(U){return I(U)>F});if(H>1){var B=this._automationEvents.slice(H-1),W=B[0];w(W)&&B.unshift(s(y(this._automationEvents,H-2,W.startTime,this._defaultValue),W.startTime)),this._automationEvents=B}}},{key:"getValue",value:function(F){if(this._automationEvents.length===0)return this._defaultValue;var H=this._automationEvents.findIndex(function(q){return I(q)>F}),B=this._automationEvents[H],W=(H===-1?this._automationEvents.length:H)-1,U=this._automationEvents[W];if(U!==void 0&&w(U)&&(B===void 0||!d(B)||B.insertTime>F))return c(F,y(this._automationEvents,W-1,U.startTime,this._defaultValue),U);if(U!==void 0&&h(U)&&(B===void 0||!d(B)))return U.value;if(U!==void 0&&p(U)&&(B===void 0||!d(B)||U.startTime+U.duration>F))return F<U.startTime+U.duration?E(F,U):U.values[U.values.length-1];if(U!==void 0&&d(U)&&(B===void 0||!d(B)))return U.value;if(B!==void 0&&u(B)){var Se=v(this._automationEvents,W,U,B,this._defaultValue),ke=e(Se,2),ft=ke[0],St=ke[1];return A(F,ft,St,B)}if(B!==void 0&&l(B)){var g=v(this._automationEvents,W,U,B,this._defaultValue),f=e(g,2),k=f[0],D=f[1];return L(F,k,D,B)}return this._defaultValue}}]),N}(Symbol.iterator),R=function(N){return{cancelTime:N,type:"cancelAndHold"}},K=function(N){return{cancelTime:N,type:"cancelScheduledValues"}},V=function(N,M){return{endTime:M,type:"exponentialRampToValue",value:N}},j=function(N,M){return{endTime:M,type:"linearRampToValue",value:N}},X=function(N,M,F){return{startTime:M,target:N,timeConstant:F,type:"setTarget"}};t.AutomationEventList=m,t.createCancelAndHoldAutomationEvent=R,t.createCancelScheduledValuesAutomationEvent=K,t.createExponentialRampToValueAutomationEvent=V,t.createLinearRampToValueAutomationEvent=j,t.createSetTargetAutomationEvent=X,t.createSetValueAutomationEvent=s,t.createSetValueCurveAutomationEvent=a})});var kD=Je(fd=>{"use strict";fd.byteLength=oP;fd.toByteArray=sP;fd.fromByteArray=uP;var Vr=[],Yn=[],rP=typeof Uint8Array<"u"?Uint8Array:Array,Hm="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(li=0,FD=Hm.length;li<FD;++li)Vr[li]=Hm[li],Yn[Hm.charCodeAt(li)]=li;var li,FD;Yn["-".charCodeAt(0)]=62;Yn["_".charCodeAt(0)]=63;function RD(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");n===-1&&(n=e);var r=n===e?0:4-n%4;return[n,r]}function oP(t){var e=RD(t),n=e[0],r=e[1];return(n+r)*3/4-r}function iP(t,e,n){return(e+n)*3/4-n}function sP(t){var e,n=RD(t),r=n[0],o=n[1],i=new rP(iP(t,r,o)),s=0,a=o>0?r-4:r,c;for(c=0;c<a;c+=4)e=Yn[t.charCodeAt(c)]<<18|Yn[t.charCodeAt(c+1)]<<12|Yn[t.charCodeAt(c+2)]<<6|Yn[t.charCodeAt(c+3)],i[s++]=e>>16&255,i[s++]=e>>8&255,i[s++]=e&255;return o===2&&(e=Yn[t.charCodeAt(c)]<<2|Yn[t.charCodeAt(c+1)]>>4,i[s++]=e&255),o===1&&(e=Yn[t.charCodeAt(c)]<<10|Yn[t.charCodeAt(c+1)]<<4|Yn[t.charCodeAt(c+2)]>>2,i[s++]=e>>8&255,i[s++]=e&255),i}function aP(t){return Vr[t>>18&63]+Vr[t>>12&63]+Vr[t>>6&63]+Vr[t&63]}function cP(t,e,n){for(var r,o=[],i=e;i<n;i+=3)r=(t[i]<<16&16711680)+(t[i+1]<<8&65280)+(t[i+2]&255),o.push(aP(r));return o.join("")}function uP(t){for(var e,n=t.length,r=n%3,o=[],i=16383,s=0,a=n-r;s<a;s+=i)o.push(cP(t,s,s+i>a?a:s+i));return r===1?(e=t[n-1],o.push(Vr[e>>2]+Vr[e<<4&63]+"==")):r===2&&(e=(t[n-2]<<8)+t[n-1],o.push(Vr[e>>10]+Vr[e>>4&63]+Vr[e<<2&63]+"=")),o.join("")}});var PD=Je(Wm=>{"use strict";Wm.read=function(t,e,n,r,o){var i,s,a=o*8-r-1,c=(1<<a)-1,u=c>>1,l=-7,d=n?o-1:0,h=n?-1:1,p=t[e+d];for(d+=h,i=p&(1<<-l)-1,p>>=-l,l+=a;l>0;i=i*256+t[e+d],d+=h,l-=8);for(s=i&(1<<-l)-1,i>>=-l,l+=r;l>0;s=s*256+t[e+d],d+=h,l-=8);if(i===0)i=1-u;else{if(i===c)return s?NaN:(p?-1:1)*(1/0);s=s+Math.pow(2,r),i=i-u}return(p?-1:1)*s*Math.pow(2,i-r)};Wm.write=function(t,e,n,r,o,i){var s,a,c,u=i*8-o-1,l=(1<<u)-1,d=l>>1,h=o===23?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:i-1,y=r?1:-1,v=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=l):(s=Math.floor(Math.log(e)/Math.LN2),e*(c=Math.pow(2,-s))<1&&(s--,c*=2),s+d>=1?e+=h/c:e+=h*Math.pow(2,1-d),e*c>=2&&(s++,c/=2),s+d>=l?(a=0,s=l):s+d>=1?(a=(e*c-1)*Math.pow(2,o),s=s+d):(a=e*Math.pow(2,d-1)*Math.pow(2,o),s=0));o>=8;t[n+p]=a&255,p+=y,a/=256,o-=8);for(s=s<<o|a,u+=o;u>0;t[n+p]=s&255,p+=y,s/=256,u-=8);t[n+p-y]|=v*128}});var ZD=Je(Ys=>{"use strict";var Gm=kD(),zs=PD(),VD=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;Ys.Buffer=P;Ys.SlowBuffer=mP;Ys.INSPECT_MAX_BYTES=50;var pd=2147483647;Ys.kMaxLength=pd;P.TYPED_ARRAY_SUPPORT=lP();!P.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function lP(){try{var t=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(t,e),t.foo()===42}catch{return!1}}Object.defineProperty(P.prototype,"parent",{enumerable:!0,get:function(){if(P.isBuffer(this))return this.buffer}});Object.defineProperty(P.prototype,"offset",{enumerable:!0,get:function(){if(P.isBuffer(this))return this.byteOffset}});function Xr(t){if(t>pd)throw new RangeError('The value "'+t+'" is invalid for option "size"');var e=new Uint8Array(t);return Object.setPrototypeOf(e,P.prototype),e}function P(t,e,n){if(typeof t=="number"){if(typeof e=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return Qm(t)}return BD(t,e,n)}P.poolSize=8192;function BD(t,e,n){if(typeof t=="string")return hP(t,e);if(ArrayBuffer.isView(t))return fP(t);if(t==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if(Lr(t,ArrayBuffer)||t&&Lr(t.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Lr(t,SharedArrayBuffer)||t&&Lr(t.buffer,SharedArrayBuffer)))return Ym(t,e,n);if(typeof t=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var r=t.valueOf&&t.valueOf();if(r!=null&&r!==t)return P.from(r,e,n);var o=pP(t);if(o)return o;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof t[Symbol.toPrimitive]=="function")return P.from(t[Symbol.toPrimitive]("string"),e,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}P.from=function(t,e,n){return BD(t,e,n)};Object.setPrototypeOf(P.prototype,Uint8Array.prototype);Object.setPrototypeOf(P,Uint8Array);function UD(t){if(typeof t!="number")throw new TypeError('"size" argument must be of type number');if(t<0)throw new RangeError('The value "'+t+'" is invalid for option "size"')}function dP(t,e,n){return UD(t),t<=0?Xr(t):e!==void 0?typeof n=="string"?Xr(t).fill(e,n):Xr(t).fill(e):Xr(t)}P.alloc=function(t,e,n){return dP(t,e,n)};function Qm(t){return UD(t),Xr(t<0?0:Km(t)|0)}P.allocUnsafe=function(t){return Qm(t)};P.allocUnsafeSlow=function(t){return Qm(t)};function hP(t,e){if((typeof e!="string"||e==="")&&(e="utf8"),!P.isEncoding(e))throw new TypeError("Unknown encoding: "+e);var n=qD(t,e)|0,r=Xr(n),o=r.write(t,e);return o!==n&&(r=r.slice(0,o)),r}function zm(t){for(var e=t.length<0?0:Km(t.length)|0,n=Xr(e),r=0;r<e;r+=1)n[r]=t[r]&255;return n}function fP(t){if(Lr(t,Uint8Array)){var e=new Uint8Array(t);return Ym(e.buffer,e.byteOffset,e.byteLength)}return zm(t)}function Ym(t,e,n){if(e<0||t.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<e+(n||0))throw new RangeError('"length" is outside of buffer bounds');var r;return e===void 0&&n===void 0?r=new Uint8Array(t):n===void 0?r=new Uint8Array(t,e):r=new Uint8Array(t,e,n),Object.setPrototypeOf(r,P.prototype),r}function pP(t){if(P.isBuffer(t)){var e=Km(t.length)|0,n=Xr(e);return n.length===0||t.copy(n,0,0,e),n}if(t.length!==void 0)return typeof t.length!="number"||Xm(t.length)?Xr(0):zm(t);if(t.type==="Buffer"&&Array.isArray(t.data))return zm(t.data)}function Km(t){if(t>=pd)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+pd.toString(16)+" bytes");return t|0}function mP(t){return+t!=t&&(t=0),P.alloc(+t)}P.isBuffer=function(e){return e!=null&&e._isBuffer===!0&&e!==P.prototype};P.compare=function(e,n){if(Lr(e,Uint8Array)&&(e=P.from(e,e.offset,e.byteLength)),Lr(n,Uint8Array)&&(n=P.from(n,n.offset,n.byteLength)),!P.isBuffer(e)||!P.isBuffer(n))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===n)return 0;for(var r=e.length,o=n.length,i=0,s=Math.min(r,o);i<s;++i)if(e[i]!==n[i]){r=e[i],o=n[i];break}return r<o?-1:o<r?1:0};P.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}};P.concat=function(e,n){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(e.length===0)return P.alloc(0);var r;if(n===void 0)for(n=0,r=0;r<e.length;++r)n+=e[r].length;var o=P.allocUnsafe(n),i=0;for(r=0;r<e.length;++r){var s=e[r];if(Lr(s,Uint8Array))i+s.length>o.length?P.from(s).copy(o,i):Uint8Array.prototype.set.call(o,s,i);else if(P.isBuffer(s))s.copy(o,i);else throw new TypeError('"list" argument must be an Array of Buffers');i+=s.length}return o};function qD(t,e){if(P.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||Lr(t,ArrayBuffer))return t.byteLength;if(typeof t!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);var n=t.length,r=arguments.length>2&&arguments[2]===!0;if(!r&&n===0)return 0;for(var o=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return Zm(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return n*2;case"hex":return n>>>1;case"base64":return YD(t).length;default:if(o)return r?-1:Zm(t).length;e=(""+e).toLowerCase(),o=!0}}P.byteLength=qD;function gP(t,e,n){var r=!1;if((e===void 0||e<0)&&(e=0),e>this.length||((n===void 0||n>this.length)&&(n=this.length),n<=0)||(n>>>=0,e>>>=0,n<=e))return"";for(t||(t="utf8");;)switch(t){case"hex":return TP(this,e,n);case"utf8":case"utf-8":return HD(this,e,n);case"ascii":return DP(this,e,n);case"latin1":case"binary":return EP(this,e,n);case"base64":return bP(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return SP(this,e,n);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}P.prototype._isBuffer=!0;function di(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}P.prototype.swap16=function(){var e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var n=0;n<e;n+=2)di(this,n,n+1);return this};P.prototype.swap32=function(){var e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var n=0;n<e;n+=4)di(this,n,n+3),di(this,n+1,n+2);return this};P.prototype.swap64=function(){var e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var n=0;n<e;n+=8)di(this,n,n+7),di(this,n+1,n+6),di(this,n+2,n+5),di(this,n+3,n+4);return this};P.prototype.toString=function(){var e=this.length;return e===0?"":arguments.length===0?HD(this,0,e):gP.apply(this,arguments)};P.prototype.toLocaleString=P.prototype.toString;P.prototype.equals=function(e){if(!P.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e?!0:P.compare(this,e)===0};P.prototype.inspect=function(){var e="",n=Ys.INSPECT_MAX_BYTES;return e=this.toString("hex",0,n).replace(/(.{2})/g,"$1 ").trim(),this.length>n&&(e+=" ... "),"<Buffer "+e+">"};VD&&(P.prototype[VD]=P.prototype.inspect);P.prototype.compare=function(e,n,r,o,i){if(Lr(e,Uint8Array)&&(e=P.from(e,e.offset,e.byteLength)),!P.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(n===void 0&&(n=0),r===void 0&&(r=e?e.length:0),o===void 0&&(o=0),i===void 0&&(i=this.length),n<0||r>e.length||o<0||i>this.length)throw new RangeError("out of range index");if(o>=i&&n>=r)return 0;if(o>=i)return-1;if(n>=r)return 1;if(n>>>=0,r>>>=0,o>>>=0,i>>>=0,this===e)return 0;for(var s=i-o,a=r-n,c=Math.min(s,a),u=this.slice(o,i),l=e.slice(n,r),d=0;d<c;++d)if(u[d]!==l[d]){s=u[d],a=l[d];break}return s<a?-1:a<s?1:0};function $D(t,e,n,r,o){if(t.length===0)return-1;if(typeof n=="string"?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,Xm(n)&&(n=o?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(o)return-1;n=t.length-1}else if(n<0)if(o)n=0;else return-1;if(typeof e=="string"&&(e=P.from(e,r)),P.isBuffer(e))return e.length===0?-1:LD(t,e,n,r,o);if(typeof e=="number")return e=e&255,typeof Uint8Array.prototype.indexOf=="function"?o?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):LD(t,[e],n,r,o);throw new TypeError("val must be string, number or Buffer")}function LD(t,e,n,r,o){var i=1,s=t.length,a=e.length;if(r!==void 0&&(r=String(r).toLowerCase(),r==="ucs2"||r==="ucs-2"||r==="utf16le"||r==="utf-16le")){if(t.length<2||e.length<2)return-1;i=2,s/=2,a/=2,n/=2}function c(p,y){return i===1?p[y]:p.readUInt16BE(y*i)}var u;if(o){var l=-1;for(u=n;u<s;u++)if(c(t,u)===c(e,l===-1?0:u-l)){if(l===-1&&(l=u),u-l+1===a)return l*i}else l!==-1&&(u-=u-l),l=-1}else for(n+a>s&&(n=s-a),u=n;u>=0;u--){for(var d=!0,h=0;h<a;h++)if(c(t,u+h)!==c(e,h)){d=!1;break}if(d)return u}return-1}P.prototype.includes=function(e,n,r){return this.indexOf(e,n,r)!==-1};P.prototype.indexOf=function(e,n,r){return $D(this,e,n,r,!0)};P.prototype.lastIndexOf=function(e,n,r){return $D(this,e,n,r,!1)};function yP(t,e,n,r){n=Number(n)||0;var o=t.length-n;r?(r=Number(r),r>o&&(r=o)):r=o;var i=e.length;r>i/2&&(r=i/2);for(var s=0;s<r;++s){var a=parseInt(e.substr(s*2,2),16);if(Xm(a))return s;t[n+s]=a}return s}function vP(t,e,n,r){return md(Zm(e,t.length-n),t,n,r)}function _P(t,e,n,r){return md(MP(e),t,n,r)}function xP(t,e,n,r){return md(YD(e),t,n,r)}function wP(t,e,n,r){return md(NP(e,t.length-n),t,n,r)}P.prototype.write=function(e,n,r,o){if(n===void 0)o="utf8",r=this.length,n=0;else if(r===void 0&&typeof n=="string")o=n,r=this.length,n=0;else if(isFinite(n))n=n>>>0,isFinite(r)?(r=r>>>0,o===void 0&&(o="utf8")):(o=r,r=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var i=this.length-n;if((r===void 0||r>i)&&(r=i),e.length>0&&(r<0||n<0)||n>this.length)throw new RangeError("Attempt to write outside buffer bounds");o||(o="utf8");for(var s=!1;;)switch(o){case"hex":return yP(this,e,n,r);case"utf8":case"utf-8":return vP(this,e,n,r);case"ascii":case"latin1":case"binary":return _P(this,e,n,r);case"base64":return xP(this,e,n,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return wP(this,e,n,r);default:if(s)throw new TypeError("Unknown encoding: "+o);o=(""+o).toLowerCase(),s=!0}};P.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function bP(t,e,n){return e===0&&n===t.length?Gm.fromByteArray(t):Gm.fromByteArray(t.slice(e,n))}function HD(t,e,n){n=Math.min(t.length,n);for(var r=[],o=e;o<n;){var i=t[o],s=null,a=i>239?4:i>223?3:i>191?2:1;if(o+a<=n){var c,u,l,d;switch(a){case 1:i<128&&(s=i);break;case 2:c=t[o+1],(c&192)===128&&(d=(i&31)<<6|c&63,d>127&&(s=d));break;case 3:c=t[o+1],u=t[o+2],(c&192)===128&&(u&192)===128&&(d=(i&15)<<12|(c&63)<<6|u&63,d>2047&&(d<55296||d>57343)&&(s=d));break;case 4:c=t[o+1],u=t[o+2],l=t[o+3],(c&192)===128&&(u&192)===128&&(l&192)===128&&(d=(i&15)<<18|(c&63)<<12|(u&63)<<6|l&63,d>65535&&d<1114112&&(s=d))}}s===null?(s=65533,a=1):s>65535&&(s-=65536,r.push(s>>>10&1023|55296),s=56320|s&1023),r.push(s),o+=a}return CP(r)}var jD=4096;function CP(t){var e=t.length;if(e<=jD)return String.fromCharCode.apply(String,t);for(var n="",r=0;r<e;)n+=String.fromCharCode.apply(String,t.slice(r,r+=jD));return n}function DP(t,e,n){var r="";n=Math.min(t.length,n);for(var o=e;o<n;++o)r+=String.fromCharCode(t[o]&127);return r}function EP(t,e,n){var r="";n=Math.min(t.length,n);for(var o=e;o<n;++o)r+=String.fromCharCode(t[o]);return r}function TP(t,e,n){var r=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>r)&&(n=r);for(var o="",i=e;i<n;++i)o+=OP[t[i]];return o}function SP(t,e,n){for(var r=t.slice(e,n),o="",i=0;i<r.length-1;i+=2)o+=String.fromCharCode(r[i]+r[i+1]*256);return o}P.prototype.slice=function(e,n){var r=this.length;e=~~e,n=n===void 0?r:~~n,e<0?(e+=r,e<0&&(e=0)):e>r&&(e=r),n<0?(n+=r,n<0&&(n=0)):n>r&&(n=r),n<e&&(n=e);var o=this.subarray(e,n);return Object.setPrototypeOf(o,P.prototype),o};function kt(t,e,n){if(t%1!==0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}P.prototype.readUintLE=P.prototype.readUIntLE=function(e,n,r){e=e>>>0,n=n>>>0,r||kt(e,n,this.length);for(var o=this[e],i=1,s=0;++s<n&&(i*=256);)o+=this[e+s]*i;return o};P.prototype.readUintBE=P.prototype.readUIntBE=function(e,n,r){e=e>>>0,n=n>>>0,r||kt(e,n,this.length);for(var o=this[e+--n],i=1;n>0&&(i*=256);)o+=this[e+--n]*i;return o};P.prototype.readUint8=P.prototype.readUInt8=function(e,n){return e=e>>>0,n||kt(e,1,this.length),this[e]};P.prototype.readUint16LE=P.prototype.readUInt16LE=function(e,n){return e=e>>>0,n||kt(e,2,this.length),this[e]|this[e+1]<<8};P.prototype.readUint16BE=P.prototype.readUInt16BE=function(e,n){return e=e>>>0,n||kt(e,2,this.length),this[e]<<8|this[e+1]};P.prototype.readUint32LE=P.prototype.readUInt32LE=function(e,n){return e=e>>>0,n||kt(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+this[e+3]*16777216};P.prototype.readUint32BE=P.prototype.readUInt32BE=function(e,n){return e=e>>>0,n||kt(e,4,this.length),this[e]*16777216+(this[e+1]<<16|this[e+2]<<8|this[e+3])};P.prototype.readIntLE=function(e,n,r){e=e>>>0,n=n>>>0,r||kt(e,n,this.length);for(var o=this[e],i=1,s=0;++s<n&&(i*=256);)o+=this[e+s]*i;return i*=128,o>=i&&(o-=Math.pow(2,8*n)),o};P.prototype.readIntBE=function(e,n,r){e=e>>>0,n=n>>>0,r||kt(e,n,this.length);for(var o=n,i=1,s=this[e+--o];o>0&&(i*=256);)s+=this[e+--o]*i;return i*=128,s>=i&&(s-=Math.pow(2,8*n)),s};P.prototype.readInt8=function(e,n){return e=e>>>0,n||kt(e,1,this.length),this[e]&128?(255-this[e]+1)*-1:this[e]};P.prototype.readInt16LE=function(e,n){e=e>>>0,n||kt(e,2,this.length);var r=this[e]|this[e+1]<<8;return r&32768?r|4294901760:r};P.prototype.readInt16BE=function(e,n){e=e>>>0,n||kt(e,2,this.length);var r=this[e+1]|this[e]<<8;return r&32768?r|4294901760:r};P.prototype.readInt32LE=function(e,n){return e=e>>>0,n||kt(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24};P.prototype.readInt32BE=function(e,n){return e=e>>>0,n||kt(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]};P.prototype.readFloatLE=function(e,n){return e=e>>>0,n||kt(e,4,this.length),zs.read(this,e,!0,23,4)};P.prototype.readFloatBE=function(e,n){return e=e>>>0,n||kt(e,4,this.length),zs.read(this,e,!1,23,4)};P.prototype.readDoubleLE=function(e,n){return e=e>>>0,n||kt(e,8,this.length),zs.read(this,e,!0,52,8)};P.prototype.readDoubleBE=function(e,n){return e=e>>>0,n||kt(e,8,this.length),zs.read(this,e,!1,52,8)};function _n(t,e,n,r,o,i){if(!P.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>o||e<i)throw new RangeError('"value" argument is out of bounds');if(n+r>t.length)throw new RangeError("Index out of range")}P.prototype.writeUintLE=P.prototype.writeUIntLE=function(e,n,r,o){if(e=+e,n=n>>>0,r=r>>>0,!o){var i=Math.pow(2,8*r)-1;_n(this,e,n,r,i,0)}var s=1,a=0;for(this[n]=e&255;++a<r&&(s*=256);)this[n+a]=e/s&255;return n+r};P.prototype.writeUintBE=P.prototype.writeUIntBE=function(e,n,r,o){if(e=+e,n=n>>>0,r=r>>>0,!o){var i=Math.pow(2,8*r)-1;_n(this,e,n,r,i,0)}var s=r-1,a=1;for(this[n+s]=e&255;--s>=0&&(a*=256);)this[n+s]=e/a&255;return n+r};P.prototype.writeUint8=P.prototype.writeUInt8=function(e,n,r){return e=+e,n=n>>>0,r||_n(this,e,n,1,255,0),this[n]=e&255,n+1};P.prototype.writeUint16LE=P.prototype.writeUInt16LE=function(e,n,r){return e=+e,n=n>>>0,r||_n(this,e,n,2,65535,0),this[n]=e&255,this[n+1]=e>>>8,n+2};P.prototype.writeUint16BE=P.prototype.writeUInt16BE=function(e,n,r){return e=+e,n=n>>>0,r||_n(this,e,n,2,65535,0),this[n]=e>>>8,this[n+1]=e&255,n+2};P.prototype.writeUint32LE=P.prototype.writeUInt32LE=function(e,n,r){return e=+e,n=n>>>0,r||_n(this,e,n,4,4294967295,0),this[n+3]=e>>>24,this[n+2]=e>>>16,this[n+1]=e>>>8,this[n]=e&255,n+4};P.prototype.writeUint32BE=P.prototype.writeUInt32BE=function(e,n,r){return e=+e,n=n>>>0,r||_n(this,e,n,4,4294967295,0),this[n]=e>>>24,this[n+1]=e>>>16,this[n+2]=e>>>8,this[n+3]=e&255,n+4};P.prototype.writeIntLE=function(e,n,r,o){if(e=+e,n=n>>>0,!o){var i=Math.pow(2,8*r-1);_n(this,e,n,r,i-1,-i)}var s=0,a=1,c=0;for(this[n]=e&255;++s<r&&(a*=256);)e<0&&c===0&&this[n+s-1]!==0&&(c=1),this[n+s]=(e/a>>0)-c&255;return n+r};P.prototype.writeIntBE=function(e,n,r,o){if(e=+e,n=n>>>0,!o){var i=Math.pow(2,8*r-1);_n(this,e,n,r,i-1,-i)}var s=r-1,a=1,c=0;for(this[n+s]=e&255;--s>=0&&(a*=256);)e<0&&c===0&&this[n+s+1]!==0&&(c=1),this[n+s]=(e/a>>0)-c&255;return n+r};P.prototype.writeInt8=function(e,n,r){return e=+e,n=n>>>0,r||_n(this,e,n,1,127,-128),e<0&&(e=255+e+1),this[n]=e&255,n+1};P.prototype.writeInt16LE=function(e,n,r){return e=+e,n=n>>>0,r||_n(this,e,n,2,32767,-32768),this[n]=e&255,this[n+1]=e>>>8,n+2};P.prototype.writeInt16BE=function(e,n,r){return e=+e,n=n>>>0,r||_n(this,e,n,2,32767,-32768),this[n]=e>>>8,this[n+1]=e&255,n+2};P.prototype.writeInt32LE=function(e,n,r){return e=+e,n=n>>>0,r||_n(this,e,n,4,2147483647,-2147483648),this[n]=e&255,this[n+1]=e>>>8,this[n+2]=e>>>16,this[n+3]=e>>>24,n+4};P.prototype.writeInt32BE=function(e,n,r){return e=+e,n=n>>>0,r||_n(this,e,n,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[n]=e>>>24,this[n+1]=e>>>16,this[n+2]=e>>>8,this[n+3]=e&255,n+4};function WD(t,e,n,r,o,i){if(n+r>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function GD(t,e,n,r,o){return e=+e,n=n>>>0,o||WD(t,e,n,4,34028234663852886e22,-34028234663852886e22),zs.write(t,e,n,r,23,4),n+4}P.prototype.writeFloatLE=function(e,n,r){return GD(this,e,n,!0,r)};P.prototype.writeFloatBE=function(e,n,r){return GD(this,e,n,!1,r)};function zD(t,e,n,r,o){return e=+e,n=n>>>0,o||WD(t,e,n,8,17976931348623157e292,-17976931348623157e292),zs.write(t,e,n,r,52,8),n+8}P.prototype.writeDoubleLE=function(e,n,r){return zD(this,e,n,!0,r)};P.prototype.writeDoubleBE=function(e,n,r){return zD(this,e,n,!1,r)};P.prototype.copy=function(e,n,r,o){if(!P.isBuffer(e))throw new TypeError("argument should be a Buffer");if(r||(r=0),!o&&o!==0&&(o=this.length),n>=e.length&&(n=e.length),n||(n=0),o>0&&o<r&&(o=r),o===r||e.length===0||this.length===0)return 0;if(n<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("Index out of range");if(o<0)throw new RangeError("sourceEnd out of bounds");o>this.length&&(o=this.length),e.length-n<o-r&&(o=e.length-n+r);var i=o-r;return this===e&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(n,r,o):Uint8Array.prototype.set.call(e,this.subarray(r,o),n),i};P.prototype.fill=function(e,n,r,o){if(typeof e=="string"){if(typeof n=="string"?(o=n,n=0,r=this.length):typeof r=="string"&&(o=r,r=this.length),o!==void 0&&typeof o!="string")throw new TypeError("encoding must be a string");if(typeof o=="string"&&!P.isEncoding(o))throw new TypeError("Unknown encoding: "+o);if(e.length===1){var i=e.charCodeAt(0);(o==="utf8"&&i<128||o==="latin1")&&(e=i)}}else typeof e=="number"?e=e&255:typeof e=="boolean"&&(e=Number(e));if(n<0||this.length<n||this.length<r)throw new RangeError("Out of range index");if(r<=n)return this;n=n>>>0,r=r===void 0?this.length:r>>>0,e||(e=0);var s;if(typeof e=="number")for(s=n;s<r;++s)this[s]=e;else{var a=P.isBuffer(e)?e:P.from(e,o),c=a.length;if(c===0)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(s=0;s<r-n;++s)this[s+n]=a[s%c]}return this};var AP=/[^+/0-9A-Za-z-_]/g;function IP(t){if(t=t.split("=")[0],t=t.trim().replace(AP,""),t.length<2)return"";for(;t.length%4!==0;)t=t+"=";return t}function Zm(t,e){e=e||1/0;for(var n,r=t.length,o=null,i=[],s=0;s<r;++s){if(n=t.charCodeAt(s),n>55295&&n<57344){if(!o){if(n>56319){(e-=3)>-1&&i.push(239,191,189);continue}else if(s+1===r){(e-=3)>-1&&i.push(239,191,189);continue}o=n;continue}if(n<56320){(e-=3)>-1&&i.push(239,191,189),o=n;continue}n=(o-55296<<10|n-56320)+65536}else o&&(e-=3)>-1&&i.push(239,191,189);if(o=null,n<128){if((e-=1)<0)break;i.push(n)}else if(n<2048){if((e-=2)<0)break;i.push(n>>6|192,n&63|128)}else if(n<65536){if((e-=3)<0)break;i.push(n>>12|224,n>>6&63|128,n&63|128)}else if(n<1114112){if((e-=4)<0)break;i.push(n>>18|240,n>>12&63|128,n>>6&63|128,n&63|128)}else throw new Error("Invalid code point")}return i}function MP(t){for(var e=[],n=0;n<t.length;++n)e.push(t.charCodeAt(n)&255);return e}function NP(t,e){for(var n,r,o,i=[],s=0;s<t.length&&!((e-=2)<0);++s)n=t.charCodeAt(s),r=n>>8,o=n%256,i.push(o),i.push(r);return i}function YD(t){return Gm.toByteArray(IP(t))}function md(t,e,n,r){for(var o=0;o<r&&!(o+n>=e.length||o>=t.length);++o)e[o+n]=t[o];return o}function Lr(t,e){return t instanceof e||t!=null&&t.constructor!=null&&t.constructor.name!=null&&t.constructor.name===e.name}function Xm(t){return t!==t}var OP=function(){for(var t="0123456789abcdef",e=new Array(256),n=0;n<16;++n)for(var r=n*16,o=0;o<16;++o)e[r+o]=t[n]+t[o];return e}()});var XD=Je(KD=>{"use strict";var QD=ZD().Buffer,FP=QD.isEncoding||function(t){switch(t&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function RP(t){if(t&&!FP(t))throw new Error("Unknown encoding: "+t)}var Jm=KD.StringDecoder=function(t){switch(this.encoding=(t||"utf8").toLowerCase().replace(/[-_]/,""),RP(t),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=PP;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=VP;break;default:this.write=kP;return}this.charBuffer=new QD(6),this.charReceived=0,this.charLength=0};Jm.prototype.write=function(t){for(var e="";this.charLength;){var n=t.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:t.length;if(t.copy(this.charBuffer,this.charReceived,0,n),this.charReceived+=n,this.charReceived<this.charLength)return"";t=t.slice(n,t.length),e=this.charBuffer.slice(0,this.charLength).toString(this.encoding);var o=e.charCodeAt(e.length-1);if(o>=55296&&o<=56319){this.charLength+=this.surrogateSize,e="";continue}if(this.charReceived=this.charLength=0,t.length===0)return e;break}this.detectIncompleteChar(t);var r=t.length;this.charLength&&(t.copy(this.charBuffer,0,t.length-this.charReceived,r),r-=this.charReceived),e+=t.toString(this.encoding,0,r);var r=e.length-1,o=e.charCodeAt(r);if(o>=55296&&o<=56319){var i=this.surrogateSize;return this.charLength+=i,this.charReceived+=i,this.charBuffer.copy(this.charBuffer,i,0,i),t.copy(this.charBuffer,0,0,i),e.substring(0,r)}return e};Jm.prototype.detectIncompleteChar=function(t){for(var e=t.length>=3?3:t.length;e>0;e--){var n=t[t.length-e];if(e==1&&n>>5==6){this.charLength=2;break}if(e<=2&&n>>4==14){this.charLength=3;break}if(e<=3&&n>>3==30){this.charLength=4;break}}this.charReceived=e};Jm.prototype.end=function(t){var e="";if(t&&t.length&&(e=this.write(t)),this.charReceived){var n=this.charReceived,r=this.charBuffer,o=this.encoding;e+=r.slice(0,n).toString(o)}return e};function kP(t){return t.toString(this.encoding)}function PP(t){this.charReceived=t.length%2,this.charLength=this.charReceived?2:0}function VP(t){this.charReceived=t.length%3,this.charLength=this.charReceived?3:0}});var JD=Je(gd=>{"use strict";(function(t){t.parser=function(g,f){return new n(g,f)},t.SAXParser=n,t.SAXStream=u,t.createStream=c,t.MAX_BUFFER_LENGTH=64*1024;var e=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];t.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"];function n(g,f){if(!(this instanceof n))return new n(g,f);var k=this;o(k),k.q=k.c="",k.bufferCheckPosition=t.MAX_BUFFER_LENGTH,k.opt=f||{},k.opt.lowercase=k.opt.lowercase||k.opt.lowercasetags,k.looseCase=k.opt.lowercase?"toLowerCase":"toUpperCase",k.tags=[],k.closed=k.closedRoot=k.sawRoot=!1,k.tag=k.error=null,k.strict=!!g,k.noscript=!!(g||k.opt.noscript),k.state=m.BEGIN,k.strictEntities=k.opt.strictEntities,k.ENTITIES=k.strictEntities?Object.create(t.XML_ENTITIES):Object.create(t.ENTITIES),k.attribList=[],k.opt.xmlns&&(k.ns=Object.create(y)),k.trackPosition=k.opt.position!==!1,k.trackPosition&&(k.position=k.line=k.column=0),K(k,"onready")}Object.create||(Object.create=function(g){function f(){}f.prototype=g;var k=new f;return k}),Object.keys||(Object.keys=function(g){var f=[];for(var k in g)g.hasOwnProperty(k)&&f.push(k);return f});function r(g){for(var f=Math.max(t.MAX_BUFFER_LENGTH,10),k=0,D=0,q=e.length;D<q;D++){var Me=g[e[D]].length;if(Me>f)switch(e[D]){case"textNode":j(g);break;case"cdata":V(g,"oncdata",g.cdata),g.cdata="";break;case"script":V(g,"onscript",g.script),g.script="";break;default:O(g,"Max buffer length exceeded: "+e[D])}k=Math.max(k,Me)}var Be=t.MAX_BUFFER_LENGTH-k;g.bufferCheckPosition=Be+g.position}function o(g){for(var f=0,k=e.length;f<k;f++)g[e[f]]=""}function i(g){j(g),g.cdata!==""&&(V(g,"oncdata",g.cdata),g.cdata=""),g.script!==""&&(V(g,"onscript",g.script),g.script="")}n.prototype={end:function(){N(this)},write:St,resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){i(this)}};var s;try{s=VE("stream").Stream}catch{s=function(){}}s||(s=function(){});var a=t.EVENTS.filter(function(g){return g!=="error"&&g!=="end"});function c(g,f){return new u(g,f)}function u(g,f){if(!(this instanceof u))return new u(g,f);s.apply(this),this._parser=new n(g,f),this.writable=!0,this.readable=!0;var k=this;this._parser.onend=function(){k.emit("end")},this._parser.onerror=function(D){k.emit("error",D),k._parser.error=null},this._decoder=null,a.forEach(function(D){Object.defineProperty(k,"on"+D,{get:function(){return k._parser["on"+D]},set:function(q){if(!q)return k.removeAllListeners(D),k._parser["on"+D]=q,q;k.on(D,q)},enumerable:!0,configurable:!1})})}u.prototype=Object.create(s.prototype,{constructor:{value:u}}),u.prototype.write=function(g){if(typeof Buffer=="function"&&typeof Buffer.isBuffer=="function"&&Buffer.isBuffer(g)){if(!this._decoder){var f=XD().StringDecoder;this._decoder=new f("utf8")}g=this._decoder.write(g)}return this._parser.write(g.toString()),this.emit("data",g),!0},u.prototype.end=function(g){return g&&g.length&&this.write(g),this._parser.end(),!0},u.prototype.on=function(g,f){var k=this;return!k._parser["on"+g]&&a.indexOf(g)!==-1&&(k._parser["on"+g]=function(){var D=arguments.length===1?[arguments[0]]:Array.apply(null,arguments);D.splice(0,0,g),k.emit.apply(k,D)}),s.prototype.on.call(k,g,f)};var l="[CDATA[",d="DOCTYPE",h="http://www.w3.org/XML/1998/namespace",p="http://www.w3.org/2000/xmlns/",y={xml:h,xmlns:p},v=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,_=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/,x=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,I=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/;function A(g){return g===" "||g===`
`||g==="\r"||g==="	"}function L(g){return g==='"'||g==="'"}function T(g){return g===">"||A(g)}function E(g,f){return g.test(f)}function w(g,f){return!E(g,f)}var m=0;t.STATE={BEGIN:m++,BEGIN_WHITESPACE:m++,TEXT:m++,TEXT_ENTITY:m++,OPEN_WAKA:m++,SGML_DECL:m++,SGML_DECL_QUOTED:m++,DOCTYPE:m++,DOCTYPE_QUOTED:m++,DOCTYPE_DTD:m++,DOCTYPE_DTD_QUOTED:m++,COMMENT_STARTING:m++,COMMENT:m++,COMMENT_ENDING:m++,COMMENT_ENDED:m++,CDATA:m++,CDATA_ENDING:m++,CDATA_ENDING_2:m++,PROC_INST:m++,PROC_INST_BODY:m++,PROC_INST_ENDING:m++,OPEN_TAG:m++,OPEN_TAG_SLASH:m++,ATTRIB:m++,ATTRIB_NAME:m++,ATTRIB_NAME_SAW_WHITE:m++,ATTRIB_VALUE:m++,ATTRIB_VALUE_QUOTED:m++,ATTRIB_VALUE_CLOSED:m++,ATTRIB_VALUE_UNQUOTED:m++,ATTRIB_VALUE_ENTITY_Q:m++,ATTRIB_VALUE_ENTITY_U:m++,CLOSE_TAG:m++,CLOSE_TAG_SAW_WHITE:m++,SCRIPT:m++,SCRIPT_ENDING:m++},t.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},t.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(t.ENTITIES).forEach(function(g){var f=t.ENTITIES[g],k=typeof f=="number"?String.fromCharCode(f):f;t.ENTITIES[g]=k});for(var R in t.STATE)t.STATE[t.STATE[R]]=R;m=t.STATE;function K(g,f,k){g[f]&&g[f](k)}function V(g,f,k){g.textNode&&j(g),K(g,f,k)}function j(g){g.textNode=X(g.opt,g.textNode),g.textNode&&K(g,"ontext",g.textNode),g.textNode=""}function X(g,f){return g.trim&&(f=f.trim()),g.normalize&&(f=f.replace(/\s+/g," ")),f}function O(g,f){return j(g),g.trackPosition&&(f+=`
Line: `+g.line+`
Column: `+g.column+`
Char: `+g.c),f=new Error(f),g.error=f,K(g,"onerror",f),g}function N(g){return g.sawRoot&&!g.closedRoot&&M(g,"Unclosed root tag"),g.state!==m.BEGIN&&g.state!==m.BEGIN_WHITESPACE&&g.state!==m.TEXT&&O(g,"Unexpected end"),j(g),g.c="",g.closed=!0,K(g,"onend"),n.call(g,g.strict,g.opt),g}function M(g,f){if(typeof g!="object"||!(g instanceof n))throw new Error("bad call to strictFail");g.strict&&O(g,f)}function F(g){g.strict||(g.tagName=g.tagName[g.looseCase]());var f=g.tags[g.tags.length-1]||g,k=g.tag={name:g.tagName,attributes:{}};g.opt.xmlns&&(k.ns=f.ns),g.attribList.length=0,V(g,"onopentagstart",k)}function H(g,f){var k=g.indexOf(":"),D=k<0?["",g]:g.split(":"),q=D[0],Me=D[1];return f&&g==="xmlns"&&(q="xmlns",Me=""),{prefix:q,local:Me}}function B(g){if(g.strict||(g.attribName=g.attribName[g.looseCase]()),g.attribList.indexOf(g.attribName)!==-1||g.tag.attributes.hasOwnProperty(g.attribName)){g.attribName=g.attribValue="";return}if(g.opt.xmlns){var f=H(g.attribName,!0),k=f.prefix,D=f.local;if(k==="xmlns")if(D==="xml"&&g.attribValue!==h)M(g,"xml: prefix must be bound to "+h+`
Actual: `+g.attribValue);else if(D==="xmlns"&&g.attribValue!==p)M(g,"xmlns: prefix must be bound to "+p+`
Actual: `+g.attribValue);else{var q=g.tag,Me=g.tags[g.tags.length-1]||g;q.ns===Me.ns&&(q.ns=Object.create(Me.ns)),q.ns[D]=g.attribValue}g.attribList.push([g.attribName,g.attribValue])}else g.tag.attributes[g.attribName]=g.attribValue,V(g,"onattribute",{name:g.attribName,value:g.attribValue});g.attribName=g.attribValue=""}function W(g,f){if(g.opt.xmlns){var k=g.tag,D=H(g.tagName);k.prefix=D.prefix,k.local=D.local,k.uri=k.ns[D.prefix]||"",k.prefix&&!k.uri&&(M(g,"Unbound namespace prefix: "+JSON.stringify(g.tagName)),k.uri=D.prefix);var q=g.tags[g.tags.length-1]||g;k.ns&&q.ns!==k.ns&&Object.keys(k.ns).forEach(function(Xt){V(g,"onopennamespace",{prefix:Xt,uri:k.ns[Xt]})});for(var Me=0,Be=g.attribList.length;Me<Be;Me++){var Ge=g.attribList[Me],rt=Ge[0],z=Ge[1],Q=H(rt,!0),Ue=Q.prefix,Xe=Q.local,Ae=Ue===""?"":k.ns[Ue]||"",ze={name:rt,value:z,prefix:Ue,local:Xe,uri:Ae};Ue&&Ue!=="xmlns"&&!Ae&&(M(g,"Unbound namespace prefix: "+JSON.stringify(Ue)),ze.uri=Ue),g.tag.attributes[rt]=ze,V(g,"onattribute",ze)}g.attribList.length=0}g.tag.isSelfClosing=!!f,g.sawRoot=!0,g.tags.push(g.tag),V(g,"onopentag",g.tag),f||(!g.noscript&&g.tagName.toLowerCase()==="script"?g.state=m.SCRIPT:g.state=m.TEXT,g.tag=null,g.tagName=""),g.attribName=g.attribValue="",g.attribList.length=0}function U(g){if(!g.tagName){M(g,"Weird empty close tag."),g.textNode+="</>",g.state=m.TEXT;return}if(g.script){if(g.tagName!=="script"){g.script+="</"+g.tagName+">",g.tagName="",g.state=m.SCRIPT;return}V(g,"onscript",g.script),g.script=""}var f=g.tags.length,k=g.tagName;g.strict||(k=k[g.looseCase]());for(var D=k;f--;){var q=g.tags[f];if(q.name!==D)M(g,"Unexpected close tag");else break}if(f<0){M(g,"Unmatched closing tag: "+g.tagName),g.textNode+="</"+g.tagName+">",g.state=m.TEXT;return}g.tagName=k;for(var Me=g.tags.length;Me-- >f;){var Be=g.tag=g.tags.pop();g.tagName=g.tag.name,V(g,"onclosetag",g.tagName);var Ge={};for(var rt in Be.ns)Ge[rt]=Be.ns[rt];var z=g.tags[g.tags.length-1]||g;g.opt.xmlns&&Be.ns!==z.ns&&Object.keys(Be.ns).forEach(function(Q){var Ue=Be.ns[Q];V(g,"onclosenamespace",{prefix:Q,uri:Ue})})}f===0&&(g.closedRoot=!0),g.tagName=g.attribValue=g.attribName="",g.attribList.length=0,g.state=m.TEXT}function Se(g){var f=g.entity,k=f.toLowerCase(),D,q="";return g.ENTITIES[f]?g.ENTITIES[f]:g.ENTITIES[k]?g.ENTITIES[k]:(f=k,f.charAt(0)==="#"&&(f.charAt(1)==="x"?(f=f.slice(2),D=parseInt(f,16),q=D.toString(16)):(f=f.slice(1),D=parseInt(f,10),q=D.toString(10))),f=f.replace(/^0+/,""),isNaN(D)||q.toLowerCase()!==f?(M(g,"Invalid character entity"),"&"+g.entity+";"):String.fromCodePoint(D))}function ke(g,f){f==="<"?(g.state=m.OPEN_WAKA,g.startTagPosition=g.position):A(f)||(M(g,"Non-whitespace before first tag."),g.textNode=f,g.state=m.TEXT)}function ft(g,f){var k="";return f<g.length&&(k=g.charAt(f)),k}function St(g){var f=this;if(this.error)throw this.error;if(f.closed)return O(f,"Cannot write after close. Assign an onready handler.");if(g===null)return N(f);typeof g=="object"&&(g=g.toString());for(var k=0,D="";D=ft(g,k++),f.c=D,!!D;)switch(f.trackPosition&&(f.position++,D===`
`?(f.line++,f.column=0):f.column++),f.state){case m.BEGIN:if(f.state=m.BEGIN_WHITESPACE,D==="\uFEFF")continue;ke(f,D);continue;case m.BEGIN_WHITESPACE:ke(f,D);continue;case m.TEXT:if(f.sawRoot&&!f.closedRoot){for(var q=k-1;D&&D!=="<"&&D!=="&";)D=ft(g,k++),D&&f.trackPosition&&(f.position++,D===`
`?(f.line++,f.column=0):f.column++);f.textNode+=g.substring(q,k-1)}D==="<"&&!(f.sawRoot&&f.closedRoot&&!f.strict)?(f.state=m.OPEN_WAKA,f.startTagPosition=f.position):(!A(D)&&(!f.sawRoot||f.closedRoot)&&M(f,"Text data outside of root node."),D==="&"?f.state=m.TEXT_ENTITY:f.textNode+=D);continue;case m.SCRIPT:D==="<"?f.state=m.SCRIPT_ENDING:f.script+=D;continue;case m.SCRIPT_ENDING:D==="/"?f.state=m.CLOSE_TAG:(f.script+="<"+D,f.state=m.SCRIPT);continue;case m.OPEN_WAKA:if(D==="!")f.state=m.SGML_DECL,f.sgmlDecl="";else if(!A(D))if(E(v,D))f.state=m.OPEN_TAG,f.tagName=D;else if(D==="/")f.state=m.CLOSE_TAG,f.tagName="";else if(D==="?")f.state=m.PROC_INST,f.procInstName=f.procInstBody="";else{if(M(f,"Unencoded <"),f.startTagPosition+1<f.position){var Me=f.position-f.startTagPosition;D=new Array(Me).join(" ")+D}f.textNode+="<"+D,f.state=m.TEXT}continue;case m.SGML_DECL:(f.sgmlDecl+D).toUpperCase()===l?(V(f,"onopencdata"),f.state=m.CDATA,f.sgmlDecl="",f.cdata=""):f.sgmlDecl+D==="--"?(f.state=m.COMMENT,f.comment="",f.sgmlDecl=""):(f.sgmlDecl+D).toUpperCase()===d?(f.state=m.DOCTYPE,(f.doctype||f.sawRoot)&&M(f,"Inappropriately located doctype declaration"),f.doctype="",f.sgmlDecl=""):D===">"?(V(f,"onsgmldeclaration",f.sgmlDecl),f.sgmlDecl="",f.state=m.TEXT):(L(D)&&(f.state=m.SGML_DECL_QUOTED),f.sgmlDecl+=D);continue;case m.SGML_DECL_QUOTED:D===f.q&&(f.state=m.SGML_DECL,f.q=""),f.sgmlDecl+=D;continue;case m.DOCTYPE:D===">"?(f.state=m.TEXT,V(f,"ondoctype",f.doctype),f.doctype=!0):(f.doctype+=D,D==="["?f.state=m.DOCTYPE_DTD:L(D)&&(f.state=m.DOCTYPE_QUOTED,f.q=D));continue;case m.DOCTYPE_QUOTED:f.doctype+=D,D===f.q&&(f.q="",f.state=m.DOCTYPE);continue;case m.DOCTYPE_DTD:f.doctype+=D,D==="]"?f.state=m.DOCTYPE:L(D)&&(f.state=m.DOCTYPE_DTD_QUOTED,f.q=D);continue;case m.DOCTYPE_DTD_QUOTED:f.doctype+=D,D===f.q&&(f.state=m.DOCTYPE_DTD,f.q="");continue;case m.COMMENT:D==="-"?f.state=m.COMMENT_ENDING:f.comment+=D;continue;case m.COMMENT_ENDING:D==="-"?(f.state=m.COMMENT_ENDED,f.comment=X(f.opt,f.comment),f.comment&&V(f,"oncomment",f.comment),f.comment=""):(f.comment+="-"+D,f.state=m.COMMENT);continue;case m.COMMENT_ENDED:D!==">"?(M(f,"Malformed comment"),f.comment+="--"+D,f.state=m.COMMENT):f.state=m.TEXT;continue;case m.CDATA:D==="]"?f.state=m.CDATA_ENDING:f.cdata+=D;continue;case m.CDATA_ENDING:D==="]"?f.state=m.CDATA_ENDING_2:(f.cdata+="]"+D,f.state=m.CDATA);continue;case m.CDATA_ENDING_2:D===">"?(f.cdata&&V(f,"oncdata",f.cdata),V(f,"onclosecdata"),f.cdata="",f.state=m.TEXT):D==="]"?f.cdata+="]":(f.cdata+="]]"+D,f.state=m.CDATA);continue;case m.PROC_INST:D==="?"?f.state=m.PROC_INST_ENDING:A(D)?f.state=m.PROC_INST_BODY:f.procInstName+=D;continue;case m.PROC_INST_BODY:if(!f.procInstBody&&A(D))continue;D==="?"?f.state=m.PROC_INST_ENDING:f.procInstBody+=D;continue;case m.PROC_INST_ENDING:D===">"?(V(f,"onprocessinginstruction",{name:f.procInstName,body:f.procInstBody}),f.procInstName=f.procInstBody="",f.state=m.TEXT):(f.procInstBody+="?"+D,f.state=m.PROC_INST_BODY);continue;case m.OPEN_TAG:E(_,D)?f.tagName+=D:(F(f),D===">"?W(f):D==="/"?f.state=m.OPEN_TAG_SLASH:(A(D)||M(f,"Invalid character in tag name"),f.state=m.ATTRIB));continue;case m.OPEN_TAG_SLASH:D===">"?(W(f,!0),U(f)):(M(f,"Forward-slash in opening tag not followed by >"),f.state=m.ATTRIB);continue;case m.ATTRIB:if(A(D))continue;D===">"?W(f):D==="/"?f.state=m.OPEN_TAG_SLASH:E(v,D)?(f.attribName=D,f.attribValue="",f.state=m.ATTRIB_NAME):M(f,"Invalid attribute name");continue;case m.ATTRIB_NAME:D==="="?f.state=m.ATTRIB_VALUE:D===">"?(M(f,"Attribute without value"),f.attribValue=f.attribName,B(f),W(f)):A(D)?f.state=m.ATTRIB_NAME_SAW_WHITE:E(_,D)?f.attribName+=D:M(f,"Invalid attribute name");continue;case m.ATTRIB_NAME_SAW_WHITE:if(D==="=")f.state=m.ATTRIB_VALUE;else{if(A(D))continue;M(f,"Attribute without value"),f.tag.attributes[f.attribName]="",f.attribValue="",V(f,"onattribute",{name:f.attribName,value:""}),f.attribName="",D===">"?W(f):E(v,D)?(f.attribName=D,f.state=m.ATTRIB_NAME):(M(f,"Invalid attribute name"),f.state=m.ATTRIB)}continue;case m.ATTRIB_VALUE:if(A(D))continue;L(D)?(f.q=D,f.state=m.ATTRIB_VALUE_QUOTED):(M(f,"Unquoted attribute value"),f.state=m.ATTRIB_VALUE_UNQUOTED,f.attribValue=D);continue;case m.ATTRIB_VALUE_QUOTED:if(D!==f.q){D==="&"?f.state=m.ATTRIB_VALUE_ENTITY_Q:f.attribValue+=D;continue}B(f),f.q="",f.state=m.ATTRIB_VALUE_CLOSED;continue;case m.ATTRIB_VALUE_CLOSED:A(D)?f.state=m.ATTRIB:D===">"?W(f):D==="/"?f.state=m.OPEN_TAG_SLASH:E(v,D)?(M(f,"No whitespace between attributes"),f.attribName=D,f.attribValue="",f.state=m.ATTRIB_NAME):M(f,"Invalid attribute name");continue;case m.ATTRIB_VALUE_UNQUOTED:if(!T(D)){D==="&"?f.state=m.ATTRIB_VALUE_ENTITY_U:f.attribValue+=D;continue}B(f),D===">"?W(f):f.state=m.ATTRIB;continue;case m.CLOSE_TAG:if(f.tagName)D===">"?U(f):E(_,D)?f.tagName+=D:f.script?(f.script+="</"+f.tagName,f.tagName="",f.state=m.SCRIPT):(A(D)||M(f,"Invalid tagname in closing tag"),f.state=m.CLOSE_TAG_SAW_WHITE);else{if(A(D))continue;w(v,D)?f.script?(f.script+="</"+D,f.state=m.SCRIPT):M(f,"Invalid tagname in closing tag."):f.tagName=D}continue;case m.CLOSE_TAG_SAW_WHITE:if(A(D))continue;D===">"?U(f):M(f,"Invalid characters in closing tag");continue;case m.TEXT_ENTITY:case m.ATTRIB_VALUE_ENTITY_Q:case m.ATTRIB_VALUE_ENTITY_U:var Be,Ge;switch(f.state){case m.TEXT_ENTITY:Be=m.TEXT,Ge="textNode";break;case m.ATTRIB_VALUE_ENTITY_Q:Be=m.ATTRIB_VALUE_QUOTED,Ge="attribValue";break;case m.ATTRIB_VALUE_ENTITY_U:Be=m.ATTRIB_VALUE_UNQUOTED,Ge="attribValue";break}if(D===";")if(f.opt.unparsedEntities){var rt=Se(f);f.entity="",f.state=Be,f.write(rt)}else f[Ge]+=Se(f),f.entity="",f.state=Be;else E(f.entity.length?I:x,D)?f.entity+=D:(M(f,"Invalid character in entity name"),f[Ge]+="&"+f.entity+D,f.entity="",f.state=Be);continue;default:throw new Error(f,"Unknown state: "+f.state)}return f.position>=f.bufferCheckPosition&&r(f),f}String.fromCodePoint||function(){var g=String.fromCharCode,f=Math.floor,k=function(){var D=16384,q=[],Me,Be,Ge=-1,rt=arguments.length;if(!rt)return"";for(var z="";++Ge<rt;){var Q=Number(arguments[Ge]);if(!isFinite(Q)||Q<0||Q>1114111||f(Q)!==Q)throw RangeError("Invalid code point: "+Q);Q<=65535?q.push(Q):(Q-=65536,Me=(Q>>10)+55296,Be=Q%1024+56320,q.push(Me,Be)),(Ge+1===rt||q.length>D)&&(z+=g.apply(null,q),q.length=0)}return z};Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:k,configurable:!0,writable:!0}):String.fromCodePoint=k}()})(typeof gd>"u"?gd.sax={}:gd)});var yd=Je((gAe,eE)=>{"use strict";eE.exports={isArray:function(t){return Array.isArray?Array.isArray(t):Object.prototype.toString.call(t)==="[object Array]"}}});var vd=Je((yAe,tE)=>{"use strict";var LP=yd().isArray;tE.exports={copyOptions:function(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n},ensureFlagExists:function(t,e){(!(t in e)||typeof e[t]!="boolean")&&(e[t]=!1)},ensureSpacesExists:function(t){(!("spaces"in t)||typeof t.spaces!="number"&&typeof t.spaces!="string")&&(t.spaces=0)},ensureAlwaysArrayExists:function(t){(!("alwaysArray"in t)||typeof t.alwaysArray!="boolean"&&!LP(t.alwaysArray))&&(t.alwaysArray=!1)},ensureKeyExists:function(t,e){(!(t+"Key"in e)||typeof e[t+"Key"]!="string")&&(e[t+"Key"]=e.compact?"_"+t:t)},checkFnExists:function(t,e){return t+"Fn"in e}}});var tg=Je((vAe,uE)=>{"use strict";var jP=JD(),BP={on:function(){},parse:function(){}},me=vd(),Zs=yd().isArray,S,eg=!0,fe;function UP(t){return S=me.copyOptions(t),me.ensureFlagExists("ignoreDeclaration",S),me.ensureFlagExists("ignoreInstruction",S),me.ensureFlagExists("ignoreAttributes",S),me.ensureFlagExists("ignoreText",S),me.ensureFlagExists("ignoreComment",S),me.ensureFlagExists("ignoreCdata",S),me.ensureFlagExists("ignoreDoctype",S),me.ensureFlagExists("compact",S),me.ensureFlagExists("alwaysChildren",S),me.ensureFlagExists("addParent",S),me.ensureFlagExists("trim",S),me.ensureFlagExists("nativeType",S),me.ensureFlagExists("nativeTypeAttributes",S),me.ensureFlagExists("sanitize",S),me.ensureFlagExists("instructionHasAttributes",S),me.ensureFlagExists("captureSpacesBetweenElements",S),me.ensureAlwaysArrayExists(S),me.ensureKeyExists("declaration",S),me.ensureKeyExists("instruction",S),me.ensureKeyExists("attributes",S),me.ensureKeyExists("text",S),me.ensureKeyExists("comment",S),me.ensureKeyExists("cdata",S),me.ensureKeyExists("doctype",S),me.ensureKeyExists("type",S),me.ensureKeyExists("name",S),me.ensureKeyExists("elements",S),me.ensureKeyExists("parent",S),me.checkFnExists("doctype",S),me.checkFnExists("instruction",S),me.checkFnExists("cdata",S),me.checkFnExists("comment",S),me.checkFnExists("text",S),me.checkFnExists("instructionName",S),me.checkFnExists("elementName",S),me.checkFnExists("attributeName",S),me.checkFnExists("attributeValue",S),me.checkFnExists("attributes",S),S}function aE(t){var e=Number(t);if(!isNaN(e))return e;var n=t.toLowerCase();return n==="true"?!0:n==="false"?!1:t}function Ec(t,e){var n;if(S.compact){if(!fe[S[t+"Key"]]&&(Zs(S.alwaysArray)?S.alwaysArray.indexOf(S[t+"Key"])!==-1:S.alwaysArray)&&(fe[S[t+"Key"]]=[]),fe[S[t+"Key"]]&&!Zs(fe[S[t+"Key"]])&&(fe[S[t+"Key"]]=[fe[S[t+"Key"]]]),t+"Fn"in S&&typeof e=="string"&&(e=S[t+"Fn"](e,fe)),t==="instruction"&&("instructionFn"in S||"instructionNameFn"in S)){for(n in e)if(e.hasOwnProperty(n))if("instructionFn"in S)e[n]=S.instructionFn(e[n],n,fe);else{var r=e[n];delete e[n],e[S.instructionNameFn(n,r,fe)]=r}}Zs(fe[S[t+"Key"]])?fe[S[t+"Key"]].push(e):fe[S[t+"Key"]]=e}else{fe[S.elementsKey]||(fe[S.elementsKey]=[]);var o={};if(o[S.typeKey]=t,t==="instruction"){for(n in e)if(e.hasOwnProperty(n))break;o[S.nameKey]="instructionNameFn"in S?S.instructionNameFn(n,e,fe):n,S.instructionHasAttributes?(o[S.attributesKey]=e[n][S.attributesKey],"instructionFn"in S&&(o[S.attributesKey]=S.instructionFn(o[S.attributesKey],n,fe))):("instructionFn"in S&&(e[n]=S.instructionFn(e[n],n,fe)),o[S.instructionKey]=e[n])}else t+"Fn"in S&&(e=S[t+"Fn"](e,fe)),o[S[t+"Key"]]=e;S.addParent&&(o[S.parentKey]=fe),fe[S.elementsKey].push(o)}}function cE(t){if("attributesFn"in S&&t&&(t=S.attributesFn(t,fe)),(S.trim||"attributeValueFn"in S||"attributeNameFn"in S||S.nativeTypeAttributes)&&t){var e;for(e in t)if(t.hasOwnProperty(e)&&(S.trim&&(t[e]=t[e].trim()),S.nativeTypeAttributes&&(t[e]=aE(t[e])),"attributeValueFn"in S&&(t[e]=S.attributeValueFn(t[e],e,fe)),"attributeNameFn"in S)){var n=t[e];delete t[e],t[S.attributeNameFn(e,t[e],fe)]=n}}return t}function qP(t){var e={};if(t.body&&(t.name.toLowerCase()==="xml"||S.instructionHasAttributes)){for(var n=/([\w:-]+)\s*=\s*(?:"([^"]*)"|'([^']*)'|(\w+))\s*/g,r;(r=n.exec(t.body))!==null;)e[r[1]]=r[2]||r[3]||r[4];e=cE(e)}if(t.name.toLowerCase()==="xml"){if(S.ignoreDeclaration)return;fe[S.declarationKey]={},Object.keys(e).length&&(fe[S.declarationKey][S.attributesKey]=e),S.addParent&&(fe[S.declarationKey][S.parentKey]=fe)}else{if(S.ignoreInstruction)return;S.trim&&(t.body=t.body.trim());var o={};S.instructionHasAttributes&&Object.keys(e).length?(o[t.name]={},o[t.name][S.attributesKey]=e):o[t.name]=t.body,Ec("instruction",o)}}function nE(t,e){var n;if(typeof t=="object"&&(e=t.attributes,t=t.name),e=cE(e),"elementNameFn"in S&&(t=S.elementNameFn(t,fe)),S.compact){if(n={},!S.ignoreAttributes&&e&&Object.keys(e).length){n[S.attributesKey]={};var r;for(r in e)e.hasOwnProperty(r)&&(n[S.attributesKey][r]=e[r])}!(t in fe)&&(Zs(S.alwaysArray)?S.alwaysArray.indexOf(t)!==-1:S.alwaysArray)&&(fe[t]=[]),fe[t]&&!Zs(fe[t])&&(fe[t]=[fe[t]]),Zs(fe[t])?fe[t].push(n):fe[t]=n}else fe[S.elementsKey]||(fe[S.elementsKey]=[]),n={},n[S.typeKey]="element",n[S.nameKey]=t,!S.ignoreAttributes&&e&&Object.keys(e).length&&(n[S.attributesKey]=e),S.alwaysChildren&&(n[S.elementsKey]=[]),fe[S.elementsKey].push(n);n[S.parentKey]=fe,fe=n}function rE(t){S.ignoreText||!t.trim()&&!S.captureSpacesBetweenElements||(S.trim&&(t=t.trim()),S.nativeType&&(t=aE(t)),S.sanitize&&(t=t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")),Ec("text",t))}function oE(t){S.ignoreComment||(S.trim&&(t=t.trim()),Ec("comment",t))}function iE(t){var e=fe[S.parentKey];S.addParent||delete fe[S.parentKey],fe=e}function $P(t){S.ignoreCdata||(S.trim&&(t=t.trim()),Ec("cdata",t))}function HP(t){S.ignoreDoctype||(t=t.replace(/^ /,""),S.trim&&(t=t.trim()),Ec("doctype",t))}function sE(t){t.note=t}uE.exports=function(t,e){var n=eg?jP.parser(!0,{}):n=new BP.Parser("UTF-8"),r={};if(fe=r,S=UP(e),eg?(n.opt={strictEntities:!0},n.onopentag=nE,n.ontext=rE,n.oncomment=oE,n.onclosetag=iE,n.onerror=sE,n.oncdata=$P,n.ondoctype=HP,n.onprocessinginstruction=qP):(n.on("startElement",nE),n.on("text",rE),n.on("comment",oE),n.on("endElement",iE),n.on("error",sE)),eg)n.write(t).close();else if(!n.parse(t))throw new Error("XML parsing error: "+n.getError());if(r[S.elementsKey]){var o=r[S.elementsKey];delete r[S.elementsKey],r[S.elementsKey]=o,delete r.text}return r}});var hE=Je((_Ae,dE)=>{"use strict";var lE=vd(),WP=tg();function GP(t){var e=lE.copyOptions(t);return lE.ensureSpacesExists(e),e}dE.exports=function(t,e){var n,r,o,i;return n=GP(e),r=WP(t,n),i="compact"in n&&n.compact?"_parent":"parent","addParent"in n&&n.addParent?o=JSON.stringify(r,function(s,a){return s===i?"_":a},n.spaces):o=JSON.stringify(r,null,n.spaces),o.replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}});var rg=Je((xAe,wE)=>{"use strict";var be=vd(),zP=yd().isArray,Qt,Kt;function YP(t){var e=be.copyOptions(t);return be.ensureFlagExists("ignoreDeclaration",e),be.ensureFlagExists("ignoreInstruction",e),be.ensureFlagExists("ignoreAttributes",e),be.ensureFlagExists("ignoreText",e),be.ensureFlagExists("ignoreComment",e),be.ensureFlagExists("ignoreCdata",e),be.ensureFlagExists("ignoreDoctype",e),be.ensureFlagExists("compact",e),be.ensureFlagExists("indentText",e),be.ensureFlagExists("indentCdata",e),be.ensureFlagExists("indentAttributes",e),be.ensureFlagExists("indentInstruction",e),be.ensureFlagExists("fullTagEmptyElement",e),be.ensureFlagExists("noQuotesForNativeAttributes",e),be.ensureSpacesExists(e),typeof e.spaces=="number"&&(e.spaces=Array(e.spaces+1).join(" ")),be.ensureKeyExists("declaration",e),be.ensureKeyExists("instruction",e),be.ensureKeyExists("attributes",e),be.ensureKeyExists("text",e),be.ensureKeyExists("comment",e),be.ensureKeyExists("cdata",e),be.ensureKeyExists("doctype",e),be.ensureKeyExists("type",e),be.ensureKeyExists("name",e),be.ensureKeyExists("elements",e),be.checkFnExists("doctype",e),be.checkFnExists("instruction",e),be.checkFnExists("cdata",e),be.checkFnExists("comment",e),be.checkFnExists("text",e),be.checkFnExists("instructionName",e),be.checkFnExists("elementName",e),be.checkFnExists("attributeName",e),be.checkFnExists("attributeValue",e),be.checkFnExists("attributes",e),be.checkFnExists("fullTagEmptyElement",e),e}function jr(t,e,n){return(!n&&t.spaces?`
`:"")+Array(e+1).join(t.spaces)}function _d(t,e,n){if(e.ignoreAttributes)return"";"attributesFn"in e&&(t=e.attributesFn(t,Kt,Qt));var r,o,i,s,a=[];for(r in t)t.hasOwnProperty(r)&&t[r]!==null&&t[r]!==void 0&&(s=e.noQuotesForNativeAttributes&&typeof t[r]!="string"?"":'"',o=""+t[r],o=o.replace(/"/g,"&quot;"),i="attributeNameFn"in e?e.attributeNameFn(r,o,Kt,Qt):r,a.push(e.spaces&&e.indentAttributes?jr(e,n+1,!1):" "),a.push(i+"="+s+("attributeValueFn"in e?e.attributeValueFn(o,r,Kt,Qt):o)+s));return t&&Object.keys(t).length&&e.spaces&&e.indentAttributes&&a.push(jr(e,n,!1)),a.join("")}function fE(t,e,n){return Qt=t,Kt="xml",e.ignoreDeclaration?"":"<?xml"+_d(t[e.attributesKey],e,n)+"?>"}function pE(t,e,n){if(e.ignoreInstruction)return"";var r;for(r in t)if(t.hasOwnProperty(r))break;var o="instructionNameFn"in e?e.instructionNameFn(r,t[r],Kt,Qt):r;if(typeof t[r]=="object")return Qt=t,Kt=o,"<?"+o+_d(t[r][e.attributesKey],e,n)+"?>";var i=t[r]?t[r]:"";return"instructionFn"in e&&(i=e.instructionFn(i,r,Kt,Qt)),"<?"+o+(i?" "+i:"")+"?>"}function mE(t,e){return e.ignoreComment?"":"<!--"+("commentFn"in e?e.commentFn(t,Kt,Qt):t)+"-->"}function gE(t,e){return e.ignoreCdata?"":"<![CDATA["+("cdataFn"in e?e.cdataFn(t,Kt,Qt):t.replace("]]>","]]]]><![CDATA[>"))+"]]>"}function yE(t,e){return e.ignoreDoctype?"":"<!DOCTYPE "+("doctypeFn"in e?e.doctypeFn(t,Kt,Qt):t)+">"}function ng(t,e){return e.ignoreText?"":(t=""+t,t=t.replace(/&amp;/g,"&"),t=t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),"textFn"in e?e.textFn(t,Kt,Qt):t)}function ZP(t,e){var n;if(t.elements&&t.elements.length)for(n=0;n<t.elements.length;++n)switch(t.elements[n][e.typeKey]){case"text":if(e.indentText)return!0;break;case"cdata":if(e.indentCdata)return!0;break;case"instruction":if(e.indentInstruction)return!0;break;case"doctype":case"comment":case"element":return!0;default:return!0}return!1}function QP(t,e,n){Qt=t,Kt=t.name;var r=[],o="elementNameFn"in e?e.elementNameFn(t.name,t):t.name;r.push("<"+o),t[e.attributesKey]&&r.push(_d(t[e.attributesKey],e,n));var i=t[e.elementsKey]&&t[e.elementsKey].length||t[e.attributesKey]&&t[e.attributesKey]["xml:space"]==="preserve";return i||("fullTagEmptyElementFn"in e?i=e.fullTagEmptyElementFn(t.name,t):i=e.fullTagEmptyElement),i?(r.push(">"),t[e.elementsKey]&&t[e.elementsKey].length&&(r.push(vE(t[e.elementsKey],e,n+1)),Qt=t,Kt=t.name),r.push(e.spaces&&ZP(t,e)?`
`+Array(n+1).join(e.spaces):""),r.push("</"+o+">")):r.push("/>"),r.join("")}function vE(t,e,n,r){return t.reduce(function(o,i){var s=jr(e,n,r&&!o);switch(i.type){case"element":return o+s+QP(i,e,n);case"comment":return o+s+mE(i[e.commentKey],e);case"doctype":return o+s+yE(i[e.doctypeKey],e);case"cdata":return o+(e.indentCdata?s:"")+gE(i[e.cdataKey],e);case"text":return o+(e.indentText?s:"")+ng(i[e.textKey],e);case"instruction":var a={};return a[i[e.nameKey]]=i[e.attributesKey]?i:i[e.instructionKey],o+(e.indentInstruction?s:"")+pE(a,e,n)}},"")}function _E(t,e,n){var r;for(r in t)if(t.hasOwnProperty(r))switch(r){case e.parentKey:case e.attributesKey:break;case e.textKey:if(e.indentText||n)return!0;break;case e.cdataKey:if(e.indentCdata||n)return!0;break;case e.instructionKey:if(e.indentInstruction||n)return!0;break;case e.doctypeKey:case e.commentKey:return!0;default:return!0}return!1}function KP(t,e,n,r,o){Qt=t,Kt=e;var i="elementNameFn"in n?n.elementNameFn(e,t):e;if(typeof t>"u"||t===null||t==="")return"fullTagEmptyElementFn"in n&&n.fullTagEmptyElementFn(e,t)||n.fullTagEmptyElement?"<"+i+"></"+i+">":"<"+i+"/>";var s=[];if(e){if(s.push("<"+i),typeof t!="object")return s.push(">"+ng(t,n)+"</"+i+">"),s.join("");t[n.attributesKey]&&s.push(_d(t[n.attributesKey],n,r));var a=_E(t,n,!0)||t[n.attributesKey]&&t[n.attributesKey]["xml:space"]==="preserve";if(a||("fullTagEmptyElementFn"in n?a=n.fullTagEmptyElementFn(e,t):a=n.fullTagEmptyElement),a)s.push(">");else return s.push("/>"),s.join("")}return s.push(xE(t,n,r+1,!1)),Qt=t,Kt=e,e&&s.push((o?jr(n,r,!1):"")+"</"+i+">"),s.join("")}function xE(t,e,n,r){var o,i,s,a=[];for(i in t)if(t.hasOwnProperty(i))for(s=zP(t[i])?t[i]:[t[i]],o=0;o<s.length;++o){switch(i){case e.declarationKey:a.push(fE(s[o],e,n));break;case e.instructionKey:a.push((e.indentInstruction?jr(e,n,r):"")+pE(s[o],e,n));break;case e.attributesKey:case e.parentKey:break;case e.textKey:a.push((e.indentText?jr(e,n,r):"")+ng(s[o],e));break;case e.cdataKey:a.push((e.indentCdata?jr(e,n,r):"")+gE(s[o],e));break;case e.doctypeKey:a.push(jr(e,n,r)+yE(s[o],e));break;case e.commentKey:a.push(jr(e,n,r)+mE(s[o],e));break;default:a.push(jr(e,n,r)+KP(s[o],i,e,n,_E(s[o],e)))}r=r&&!a.length}return a.join("")}wE.exports=function(t,e){e=YP(e);var n=[];return Qt=t,Kt="_root_",e.compact?n.push(xE(t,e,0,!0)):(t[e.declarationKey]&&n.push(fE(t[e.declarationKey],e,0)),t[e.elementsKey]&&t[e.elementsKey].length&&n.push(vE(t[e.elementsKey],e,0,!n.length))),n.join("")}});var CE=Je((wAe,bE)=>{"use strict";var XP=rg();bE.exports=function(t,e){t instanceof Buffer&&(t=t.toString());var n=null;if(typeof t=="string")try{n=JSON.parse(t)}catch{throw new Error("The JSON structure is invalid")}else n=t;return XP(n,e)}});var EE=Je((bAe,DE)=>{"use strict";var JP=tg(),e2=hE(),t2=rg(),n2=CE();DE.exports={xml2js:JP,xml2json:e2,js2xml:t2,json2xml:n2}});var sg=null;var Dd=1;function xn(t){let e=sg;return sg=t,e}var ag={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function jE(t){if(!(Sd(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===Dd)){if(!t.producerMustRecompute(t)&&!Ed(t)){t.dirty=!1,t.lastCleanEpoch=Dd;return}t.producerRecomputeValue(t),t.dirty=!1,t.lastCleanEpoch=Dd}}function cg(t){return t&&(t.nextProducerIndex=0),xn(t)}function ug(t,e){if(xn(e),!(!t||t.producerNode===void 0||t.producerIndexOfThis===void 0||t.producerLastReadVersion===void 0)){if(Sd(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)Td(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function Ed(t){Sc(t);for(let e=0;e<t.producerNode.length;e++){let n=t.producerNode[e],r=t.producerLastReadVersion[e];if(r!==n.version||(jE(n),r!==n.version))return!0}return!1}function lg(t){if(Sc(t),Sd(t))for(let e=0;e<t.producerNode.length;e++)Td(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function Td(t,e){if(BE(t),Sc(t),t.liveConsumerNode.length===1)for(let r=0;r<t.producerNode.length;r++)Td(t.producerNode[r],t.producerIndexOfThis[r]);let n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){let r=t.liveConsumerIndexOfThis[e],o=t.liveConsumerNode[e];Sc(o),o.producerIndexOfThis[r]=e}}function Sd(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function Sc(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}function BE(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}function UE(){throw new Error}var qE=UE;function dg(t){qE=t}function oe(t){return typeof t=="function"}function hi(t){let n=t(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var Ac=hi(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,o)=>`${o+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function Io(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var pt=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let i of n)i.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(oe(r))try{r()}catch(i){e=i instanceof Ac?i.errors:[i]}let{_finalizers:o}=this;if(o){this._finalizers=null;for(let i of o)try{hg(i)}catch(s){e=e??[],s instanceof Ac?e=[...e,...s.errors]:e.push(s)}}if(e)throw new Ac(e)}}add(e){var n;if(e&&e!==this)if(this.closed)hg(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&Io(n,e)}remove(e){let{_finalizers:n}=this;n&&Io(n,e),e instanceof t&&e._removeParent(this)}};pt.EMPTY=(()=>{let t=new pt;return t.closed=!0,t})();var Ad=pt.EMPTY;function Ic(t){return t instanceof pt||t&&"closed"in t&&oe(t.remove)&&oe(t.add)&&oe(t.unsubscribe)}function hg(t){oe(t)?t():t.unsubscribe()}var Zn={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var fi={setTimeout(t,e,...n){let{delegate:r}=fi;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=fi;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function Mc(t){fi.setTimeout(()=>{let{onUnhandledError:e}=Zn;if(e)e(t);else throw t})}function Ks(){}var fg=(()=>Id("C",void 0,void 0))();function pg(t){return Id("E",void 0,t)}function mg(t){return Id("N",t,void 0)}function Id(t,e,n){return{kind:t,value:e,error:n}}var Mo=null;function pi(t){if(Zn.useDeprecatedSynchronousErrorHandling){let e=!Mo;if(e&&(Mo={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:r}=Mo;if(Mo=null,n)throw r}}else t()}function gg(t){Zn.useDeprecatedSynchronousErrorHandling&&Mo&&(Mo.errorThrown=!0,Mo.error=t)}var No=class extends pt{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Ic(e)&&e.add(this)):this.destination=WE}static create(e,n,r){return new mi(e,n,r)}next(e){this.isStopped?Nd(mg(e),this):this._next(e)}error(e){this.isStopped?Nd(pg(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Nd(fg,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},$E=Function.prototype.bind;function Md(t,e){return $E.call(t,e)}var Od=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){Nc(r)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){Nc(r)}else Nc(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){Nc(n)}}},mi=class extends No{constructor(e,n,r){super();let o;if(oe(e)||!e)o={next:e??void 0,error:n??void 0,complete:r??void 0};else{let i;this&&Zn.useDeprecatedNextContext?(i=Object.create(e),i.unsubscribe=()=>this.unsubscribe(),o={next:e.next&&Md(e.next,i),error:e.error&&Md(e.error,i),complete:e.complete&&Md(e.complete,i)}):o=e}this.destination=new Od(o)}};function Nc(t){Zn.useDeprecatedSynchronousErrorHandling?gg(t):Mc(t)}function HE(t){throw t}function Nd(t,e){let{onStoppedNotification:n}=Zn;n&&fi.setTimeout(()=>n(t,e))}var WE={closed:!0,next:Ks,error:HE,complete:Ks};var gi=(()=>typeof Symbol=="function"&&Symbol.observable||"@@observable")();function wn(t){return t}function Fd(...t){return Rd(t)}function Rd(t){return t.length===0?wn:t.length===1?t[0]:function(n){return t.reduce((r,o)=>o(r),n)}}var Pe=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,o){let i=zE(n)?n:new mi(n,r,o);return pi(()=>{let{operator:s,source:a}=this;i.add(s?s.call(i,a):a?this._subscribe(i):this._trySubscribe(i))}),i}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=yg(r),new r((o,i)=>{let s=new mi({next:a=>{try{n(a)}catch(c){i(c),s.unsubscribe()}},error:i,complete:o});this.subscribe(s)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[gi](){return this}pipe(...n){return Rd(n)(this)}toPromise(n){return n=yg(n),new n((r,o)=>{let i;this.subscribe(s=>i=s,s=>o(s),()=>r(i))})}}return t.create=e=>new t(e),t})();function yg(t){var e;return(e=t??Zn.Promise)!==null&&e!==void 0?e:Promise}function GE(t){return t&&oe(t.next)&&oe(t.error)&&oe(t.complete)}function zE(t){return t&&t instanceof No||GE(t)&&Ic(t)}function kd(t){return oe(t?.lift)}function Ce(t){return e=>{if(kd(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function De(t,e,n,r,o){return new Pd(t,e,n,r,o)}var Pd=class extends No{constructor(e,n,r,o,i,s){super(e),this.onFinalize=i,this.shouldUnsubscribe=s,this._next=n?function(a){try{n(a)}catch(c){e.error(c)}}:super._next,this._error=o?function(a){try{o(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function yi(){return Ce((t,e)=>{let n=null;t._refCount++;let r=De(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount){n=null;return}let o=t._connection,i=n;n=null,o&&(!i||o===i)&&o.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}var vi=class extends Pe{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,kd(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new pt;let n=this.getSubject();e.add(this.source.subscribe(De(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=pt.EMPTY)}return e}refCount(){return yi()(this)}};var vg=hi(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var bn=(()=>{class t extends Pe{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new Oc(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new vg}next(n){pi(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){pi(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){pi(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:o,observers:i}=this;return r||o?Ad:(this.currentObservers=null,i.push(n),new pt(()=>{this.currentObservers=null,Io(i,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:o,isStopped:i}=this;r?n.error(o):i&&n.complete()}asObservable(){let n=new Pe;return n.source=this,n}}return t.create=(e,n)=>new Oc(e,n),t})(),Oc=class extends bn{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,e)}error(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&r!==void 0?r:Ad}};var Pt=class extends bn{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var Vd={now(){return(Vd.delegate||Date).now()},delegate:void 0};var Fc=class extends pt{constructor(e,n){super()}schedule(e,n=0){return this}};var Xs={setInterval(t,e,...n){let{delegate:r}=Xs;return r?.setInterval?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){let{delegate:e}=Xs;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};var Rc=class extends Fc{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var r;if(this.closed)return this;this.state=e;let o=this.id,i=this.scheduler;return o!=null&&(this.id=this.recycleAsyncId(i,o,n)),this.pending=!0,this.delay=n,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(i,this.id,n),this}requestAsyncId(e,n,r=0){return Xs.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return n;n!=null&&Xs.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,n);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let r=!1,o;try{this.work(e)}catch(i){r=!0,o=i||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),o}unsubscribe(){if(!this.closed){let{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,Io(r,this),e!=null&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}};var _i=class t{constructor(e,n=t.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}};_i.now=Vd.now;var kc=class extends _i{constructor(e,n=_i.now){super(e,n),this.actions=[],this._active=!1}flush(e){let{actions:n}=this;if(this._active){n.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}};var _g=new kc(Rc);var Mn=new Pe(t=>t.complete());function xg(t){return t&&oe(t.schedule)}function wg(t){return t[t.length-1]}function bg(t){return oe(wg(t))?t.pop():void 0}function to(t){return xg(wg(t))?t.pop():void 0}function Ht(t,e,n,r){var o=arguments.length,i=o<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(i=(o<3?s(i):o>3?s(e,n,i):s(e,n))||i);return o>3&&i&&Object.defineProperty(e,n,i),i}function Ee(t,e,n,r){function o(i){return i instanceof n?i:new n(function(s){s(i)})}return new(n||(n=Promise))(function(i,s){function a(l){try{u(r.next(l))}catch(d){s(d)}}function c(l){try{u(r.throw(l))}catch(d){s(d)}}function u(l){l.done?i(l.value):o(l.value).then(a,c)}u((r=r.apply(t,e||[])).next())})}function Cg(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Oo(t){return this instanceof Oo?(this.v=t,this):new Oo(t)}function Dg(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),o,i=[];return o={},s("next"),s("throw"),s("return"),o[Symbol.asyncIterator]=function(){return this},o;function s(h){r[h]&&(o[h]=function(p){return new Promise(function(y,v){i.push([h,p,y,v])>1||a(h,p)})})}function a(h,p){try{c(r[h](p))}catch(y){d(i[0][3],y)}}function c(h){h.value instanceof Oo?Promise.resolve(h.value.v).then(u,l):d(i[0][2],h)}function u(h){a("next",h)}function l(h){a("throw",h)}function d(h,p){h(p),i.shift(),i.length&&a(i[0][0],i[0][1])}}function Eg(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof Cg=="function"?Cg(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(i){n[i]=t[i]&&function(s){return new Promise(function(a,c){s=t[i](s),o(a,c,s.done,s.value)})}}function o(i,s,a,c){Promise.resolve(c).then(function(u){i({value:u,done:a})},s)}}var xi=t=>t&&typeof t.length=="number"&&typeof t!="function";function Pc(t){return oe(t?.then)}function Vc(t){return oe(t[gi])}function Lc(t){return Symbol.asyncIterator&&oe(t?.[Symbol.asyncIterator])}function jc(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function YE(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Bc=YE();function Uc(t){return oe(t?.[Bc])}function qc(t){return Dg(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:r,done:o}=yield Oo(n.read());if(o)return yield Oo(void 0);yield yield Oo(r)}}finally{n.releaseLock()}})}function $c(t){return oe(t?.getReader)}function _t(t){if(t instanceof Pe)return t;if(t!=null){if(Vc(t))return ZE(t);if(xi(t))return QE(t);if(Pc(t))return KE(t);if(Lc(t))return Tg(t);if(Uc(t))return XE(t);if($c(t))return JE(t)}throw jc(t)}function ZE(t){return new Pe(e=>{let n=t[gi]();if(oe(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function QE(t){return new Pe(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function KE(t){return new Pe(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,Mc)})}function XE(t){return new Pe(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function Tg(t){return new Pe(e=>{eT(t,e).catch(n=>e.error(n))})}function JE(t){return Tg(qc(t))}function eT(t,e){var n,r,o,i;return Ee(this,void 0,void 0,function*(){try{for(n=Eg(t);r=yield n.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){o={error:s}}finally{try{r&&!r.done&&(i=n.return)&&(yield i.call(n))}finally{if(o)throw o.error}}e.complete()})}function an(t,e,n,r=0,o=!1){let i=e.schedule(function(){n(),o?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(i),!o)return i}function Hc(t,e=0){return Ce((n,r)=>{n.subscribe(De(r,o=>an(r,t,()=>r.next(o),e),()=>an(r,t,()=>r.complete(),e),o=>an(r,t,()=>r.error(o),e)))})}function Wc(t,e=0){return Ce((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function Sg(t,e){return _t(t).pipe(Wc(e),Hc(e))}function Ag(t,e){return _t(t).pipe(Wc(e),Hc(e))}function Ig(t,e){return new Pe(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function Mg(t,e){return new Pe(n=>{let r;return an(n,e,()=>{r=t[Bc](),an(n,e,()=>{let o,i;try{({value:o,done:i}=r.next())}catch(s){n.error(s);return}i?n.complete():n.next(o)},0,!0)}),()=>oe(r?.return)&&r.return()})}function Gc(t,e){if(!t)throw new Error("Iterable cannot be null");return new Pe(n=>{an(n,e,()=>{let r=t[Symbol.asyncIterator]();an(n,e,()=>{r.next().then(o=>{o.done?n.complete():n.next(o.value)})},0,!0)})})}function Ng(t,e){return Gc(qc(t),e)}function Og(t,e){if(t!=null){if(Vc(t))return Sg(t,e);if(xi(t))return Ig(t,e);if(Pc(t))return Ag(t,e);if(Lc(t))return Gc(t,e);if(Uc(t))return Mg(t,e);if($c(t))return Ng(t,e)}throw jc(t)}function mt(t,e){return e?Og(t,e):_t(t)}function de(...t){let e=to(t);return mt(t,e)}function wi(t,e){let n=oe(t)?t:()=>t,r=o=>o.error(n());return new Pe(e?o=>e.schedule(r,0,o):r)}function Ld(t){return!!t&&(t instanceof Pe||oe(t.lift)&&oe(t.subscribe))}var Br=hi(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function Ie(t,e){return Ce((n,r)=>{let o=0;n.subscribe(De(r,i=>{r.next(t.call(e,i,o++))}))})}var{isArray:tT}=Array;function nT(t,e){return tT(e)?t(...e):t(e)}function zc(t){return Ie(e=>nT(t,e))}var{isArray:rT}=Array,{getPrototypeOf:oT,prototype:iT,keys:sT}=Object;function Fg(t){if(t.length===1){let e=t[0];if(rT(e))return{args:e,keys:null};if(aT(e)){let n=sT(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}function aT(t){return t&&typeof t=="object"&&oT(t)===iT}function Rg(t,e){return t.reduce((n,r,o)=>(n[r]=e[o],n),{})}function Js(...t){let e=to(t),n=bg(t),{args:r,keys:o}=Fg(t);if(r.length===0)return mt([],e);let i=new Pe(cT(r,e,o?s=>Rg(o,s):wn));return n?i.pipe(zc(n)):i}function cT(t,e,n=wn){return r=>{kg(e,()=>{let{length:o}=t,i=new Array(o),s=o,a=o;for(let c=0;c<o;c++)kg(e,()=>{let u=mt(t[c],e),l=!1;u.subscribe(De(r,d=>{i[c]=d,l||(l=!0,a--),a||r.next(n(i.slice()))},()=>{--s||r.complete()}))},r)},r)}}function kg(t,e,n){t?an(n,t,e):e()}function Pg(t,e,n,r,o,i,s,a){let c=[],u=0,l=0,d=!1,h=()=>{d&&!c.length&&!u&&e.complete()},p=v=>u<r?y(v):c.push(v),y=v=>{i&&e.next(v),u++;let _=!1;_t(n(v,l++)).subscribe(De(e,x=>{o?.(x),i?p(x):e.next(x)},()=>{_=!0},void 0,()=>{if(_)try{for(u--;c.length&&u<r;){let x=c.shift();s?an(e,s,()=>y(x)):y(x)}h()}catch(x){e.error(x)}}))};return t.subscribe(De(e,p,()=>{d=!0,h()})),()=>{a?.()}}function st(t,e,n=1/0){return oe(e)?st((r,o)=>Ie((i,s)=>e(r,i,o,s))(_t(t(r,o))),n):(typeof e=="number"&&(n=e),Ce((r,o)=>Pg(r,o,t,n)))}function bi(t=1/0){return st(wn,t)}function Vg(){return bi(1)}function Ci(...t){return Vg()(mt(t,to(t)))}function Yc(t){return new Pe(e=>{_t(t()).subscribe(e)})}var uT=["addListener","removeListener"],lT=["addEventListener","removeEventListener"],dT=["on","off"];function ea(t,e,n,r){if(oe(n)&&(r=n,n=void 0),r)return ea(t,e,n).pipe(zc(r));let[o,i]=pT(t)?lT.map(s=>a=>t[s](e,a,n)):hT(t)?uT.map(Lg(t,e)):fT(t)?dT.map(Lg(t,e)):[];if(!o&&xi(t))return st(s=>ea(s,e,n))(_t(t));if(!o)throw new TypeError("Invalid event target");return new Pe(s=>{let a=(...c)=>s.next(1<c.length?c:c[0]);return o(a),()=>i(a)})}function Lg(t,e){return n=>r=>t[n](e,r)}function hT(t){return oe(t.addListener)&&oe(t.removeListener)}function fT(t){return oe(t.on)&&oe(t.off)}function pT(t){return oe(t.addEventListener)&&oe(t.removeEventListener)}function Nn(t,e){return Ce((n,r)=>{let o=0;n.subscribe(De(r,i=>t.call(e,i,o++)&&r.next(i)))})}function no(t){return Ce((e,n)=>{let r=null,o=!1,i;r=e.subscribe(De(n,void 0,void 0,s=>{i=_t(t(s,no(t)(e))),r?(r.unsubscribe(),r=null,i.subscribe(n)):o=!0})),o&&(r.unsubscribe(),r=null,i.subscribe(n))})}function jg(t,e,n,r,o){return(i,s)=>{let a=n,c=e,u=0;i.subscribe(De(s,l=>{let d=u++;c=a?t(c,l,d):(a=!0,l),r&&s.next(c)},o&&(()=>{a&&s.next(c),s.complete()})))}}function Fo(t,e){return oe(e)?st(t,e,1):st(t,1)}function jd(t,e=_g){return Ce((n,r)=>{let o=null,i=null,s=null,a=()=>{if(o){o.unsubscribe(),o=null;let u=i;i=null,r.next(u)}};function c(){let u=s+t,l=e.now();if(l<u){o=this.schedule(void 0,u-l),r.add(o);return}a()}n.subscribe(De(r,u=>{i=u,s=e.now(),o||(o=e.schedule(c,t),r.add(o))},()=>{a(),r.complete()},void 0,()=>{i=o=null}))})}function ro(t){return Ce((e,n)=>{let r=!1;e.subscribe(De(n,o=>{r=!0,n.next(o)},()=>{r||n.next(t),n.complete()}))})}function Ur(t){return t<=0?()=>Mn:Ce((e,n)=>{let r=0;e.subscribe(De(n,o=>{++r<=t&&(n.next(o),t<=r&&n.complete())}))})}function Bd(t){return Ie(()=>t)}function Zc(t=mT){return Ce((e,n)=>{let r=!1;e.subscribe(De(n,o=>{r=!0,n.next(o)},()=>r?n.complete():n.error(t())))})}function mT(){return new Br}function ta(t){return Ce((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function gr(t,e){let n=arguments.length>=2;return r=>r.pipe(t?Nn((o,i)=>t(o,i,r)):wn,Ur(1),n?ro(e):Zc(()=>new Br))}function Di(t){return t<=0?()=>Mn:Ce((e,n)=>{let r=[];e.subscribe(De(n,o=>{r.push(o),t<r.length&&r.shift()},()=>{for(let o of r)n.next(o);n.complete()},void 0,()=>{r=null}))})}function Ud(t,e){let n=arguments.length>=2;return r=>r.pipe(t?Nn((o,i)=>t(o,i,r)):wn,Di(1),n?ro(e):Zc(()=>new Br))}function qd(t,e){return Ce(jg(t,e,arguments.length>=2,!0))}function $d(...t){let e=to(t);return Ce((n,r)=>{(e?Ci(t,n,e):Ci(t,n)).subscribe(r)})}function On(t,e){return Ce((n,r)=>{let o=null,i=0,s=!1,a=()=>s&&!o&&r.complete();n.subscribe(De(r,c=>{o?.unsubscribe();let u=0,l=i++;_t(t(c,l)).subscribe(o=De(r,d=>r.next(e?e(c,d,l,u++):d),()=>{o=null,a()}))},()=>{s=!0,a()}))})}function Hd(t){return Ce((e,n)=>{_t(t).subscribe(De(n,()=>n.complete(),Ks)),!n.closed&&e.subscribe(n)})}function at(t,e,n){let r=oe(t)||e||n?{next:t,error:e,complete:n}:t;return r?Ce((o,i)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;o.subscribe(De(i,c=>{var u;(u=r.next)===null||u===void 0||u.call(r,c),i.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),i.complete()},c=>{var u;a=!1,(u=r.error)===null||u===void 0||u.call(r,c),i.error(c)},()=>{var c,u;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(u=r.finalize)===null||u===void 0||u.call(r)}))}):wn}function He(t){for(let e in t)if(t[e]===He)return e;throw Error("Could not find renamed property on target object.")}function Wt(t){if(typeof t=="string")return t;if(Array.isArray(t))return"["+t.map(Wt).join(", ")+"]";if(t==null)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;let e=t.toString();if(e==null)return""+e;let n=e.indexOf(`
`);return n===-1?e:e.substring(0,n)}function Bg(t,e){return t==null||t===""?e===null?"":e:e==null||e===""?t:t+" "+e}var gT=He({__forward_ref__:He});function Zh(t){return t.__forward_ref__=Zh,t.toString=function(){return Wt(this())},t}function Rn(t){return Dy(t)?t():t}function Dy(t){return typeof t=="function"&&t.hasOwnProperty(gT)&&t.__forward_ref__===Zh}function Ey(t){return t&&!!t.\u0275providers}var yT="https://g.co/ng/security#xss",re=class extends Error{constructor(e,n){super(Qh(e,n)),this.code=e}};function Qh(t,e){return`${`NG0${Math.abs(t)}`}${e?": "+e:""}`}var vT=He({\u0275cmp:He}),_T=He({\u0275dir:He}),xT=He({\u0275pipe:He}),wT=He({\u0275mod:He}),iu=He({\u0275fac:He}),na=He({__NG_ELEMENT_ID__:He}),Ug=He({__NG_ENV_ID__:He});function Kh(t){return typeof t=="string"?t:t==null?"":String(t)}function bT(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():Kh(t)}function CT(t,e){let n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new re(-200,`Circular dependency in DI detected for ${t}${n}`)}function Xh(t,e){let n=e?` in ${e}`:"";throw new re(-201,!1)}function DT(t,e){t==null&&ET(e,t,null,"!=")}function ET(t,e,n,r){throw new Error(`ASSERTION ERROR: ${t}`+(r==null?"":` [Expected=> ${n} ${r} ${e} <=Actual]`))}function se(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function cn(t){return{providers:t.providers||[],imports:t.imports||[]}}function Cu(t){return qg(t,Sy)||qg(t,Ay)}function Ty(t){return Cu(t)!==null}function qg(t,e){return t.hasOwnProperty(e)?t[e]:null}function TT(t){let e=t&&(t[Sy]||t[Ay]);return e||null}function $g(t){return t&&(t.hasOwnProperty(Hg)||t.hasOwnProperty(ST))?t[Hg]:null}var Sy=He({\u0275prov:He}),Hg=He({\u0275inj:He}),Ay=He({ngInjectableDef:He}),ST=He({ngInjectorDef:He}),ge=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(ge||{}),rh;function Iy(){return rh}function Fn(t){let e=rh;return rh=t,e}function My(t,e,n){let r=Cu(t);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&ge.Optional)return null;if(e!==void 0)return e;Xh(Wt(t),"Injector")}var Cn=globalThis;var he=class{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=se({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};var AT={},oa=AT,oh="__NG_DI_FLAG__",su="ngTempTokenPath",IT="ngTokenPath",MT=/\n/gm,NT="\u0275",Wg="__source",Ii;function OT(){return Ii}function oo(t){let e=Ii;return Ii=t,e}function FT(t,e=ge.Default){if(Ii===void 0)throw new re(-203,!1);return Ii===null?My(t,void 0,e):Ii.get(t,e&ge.Optional?null:void 0,e)}function ie(t,e=ge.Default){return(Iy()||FT)(Rn(t),e)}function J(t,e=ge.Default){return ie(t,Du(e))}function Du(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function ih(t){let e=[];for(let n=0;n<t.length;n++){let r=Rn(t[n]);if(Array.isArray(r)){if(r.length===0)throw new re(900,!1);let o,i=ge.Default;for(let s=0;s<r.length;s++){let a=r[s],c=RT(a);typeof c=="number"?c===-1?o=a.token:i|=c:o=a}e.push(ie(o,i))}else e.push(ie(r))}return e}function Ny(t,e){return t[oh]=e,t.prototype[oh]=e,t}function RT(t){return t[oh]}function kT(t,e,n,r){let o=t[su];throw e[Wg]&&o.unshift(e[Wg]),t.message=PT(`
`+t.message,o,n,r),t[IT]=o,t[su]=null,t}function PT(t,e,n,r=null){t=t&&t.charAt(0)===`
`&&t.charAt(1)==NT?t.slice(2):t;let o=Wt(e);if(Array.isArray(e))o=e.map(Wt).join(" -> ");else if(typeof e=="object"){let i=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];i.push(s+":"+(typeof a=="string"?JSON.stringify(a):Wt(a)))}o=`{${i.join(", ")}}`}return`${n}${r?"("+r+")":""}[${o}]: ${t.replace(MT,`
  `)}`}function ma(t){return{toString:t}.toString()}var Oy=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(Oy||{}),xr=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(xr||{}),ia={},Kn=[];function Fy(t,e,n){let r=t.length;for(;;){let o=t.indexOf(e,n);if(o===-1)return o;if(o===0||t.charCodeAt(o-1)<=32){let i=e.length;if(o+i===r||t.charCodeAt(o+i)<=32)return o}n=o+1}}function sh(t,e,n){let r=0;for(;r<n.length;){let o=n[r];if(typeof o=="number"){if(o!==0)break;r++;let i=n[r++],s=n[r++],a=n[r++];t.setAttribute(e,s,a,i)}else{let i=o,s=n[++r];LT(i)?t.setProperty(e,i,s):t.setAttribute(e,i,s),r++}}return r}function VT(t){return t===3||t===4||t===6}function LT(t){return t.charCodeAt(0)===64}function Jh(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){let o=e[r];typeof o=="number"?n=o:n===0||(n===-1||n===2?Gg(t,n,o,null,e[++r]):Gg(t,n,o,null,null))}}return t}function Gg(t,e,n,r,o){let i=0,s=t.length;if(e===-1)s=-1;else for(;i<t.length;){let a=t[i++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=i-1;break}}}for(;i<t.length;){let a=t[i];if(typeof a=="number")break;if(a===n){if(r===null){o!==null&&(t[i+1]=o);return}else if(r===t[i+1]){t[i+2]=o;return}}i++,r!==null&&i++,o!==null&&i++}s!==-1&&(t.splice(s,0,e),i=s+1),t.splice(i++,0,n),r!==null&&t.splice(i++,0,r),o!==null&&t.splice(i++,0,o)}var Ry="ng-template";function jT(t,e,n){let r=0,o=!0;for(;r<t.length;){let i=t[r++];if(typeof i=="string"&&o){let s=t[r++];if(n&&i==="class"&&Fy(s.toLowerCase(),e,0)!==-1)return!0}else if(i===1){for(;r<t.length&&typeof(i=t[r++])=="string";)if(i.toLowerCase()===e)return!0;return!1}else typeof i=="number"&&(o=!1)}return!1}function ky(t){return t.type===4&&t.value!==Ry}function BT(t,e,n){let r=t.type===4&&!n?Ry:t.value;return e===r}function UT(t,e,n){let r=4,o=t.attrs||[],i=HT(o),s=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!s&&!Qn(r)&&!Qn(c))return!1;if(s&&Qn(c))continue;s=!1,r=c|r&1;continue}if(!s)if(r&4){if(r=2|r&1,c!==""&&!BT(t,c,n)||c===""&&e.length===1){if(Qn(r))return!1;s=!0}}else{let u=r&8?c:e[++a];if(r&8&&t.attrs!==null){if(!jT(t.attrs,u,n)){if(Qn(r))return!1;s=!0}continue}let l=r&8?"class":c,d=qT(l,o,ky(t),n);if(d===-1){if(Qn(r))return!1;s=!0;continue}if(u!==""){let h;d>i?h="":h=o[d+1].toLowerCase();let p=r&8?h:null;if(p&&Fy(p,u,0)!==-1||r&2&&u!==h){if(Qn(r))return!1;s=!0}}}}return Qn(r)||s}function Qn(t){return(t&1)===0}function qT(t,e,n,r){if(e===null)return-1;let o=0;if(r||!n){let i=!1;for(;o<e.length;){let s=e[o];if(s===t)return o;if(s===3||s===6)i=!0;else if(s===1||s===2){let a=e[++o];for(;typeof a=="string";)a=e[++o];continue}else{if(s===4)break;if(s===0){o+=4;continue}}o+=i?1:2}return-1}else return WT(e,t)}function Py(t,e,n=!1){for(let r=0;r<e.length;r++)if(UT(t,e[r],n))return!0;return!1}function $T(t){let e=t.attrs;if(e!=null){let n=e.indexOf(5);if(!(n&1))return e[n+1]}return null}function HT(t){for(let e=0;e<t.length;e++){let n=t[e];if(VT(n))return e}return t.length}function WT(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let r=t[n];if(typeof r=="number")return-1;if(r===e)return n;n++}return-1}function GT(t,e){e:for(let n=0;n<e.length;n++){let r=e[n];if(t.length===r.length){for(let o=0;o<t.length;o++)if(t[o]!==r[o])continue e;return!0}}return!1}function zg(t,e){return t?":not("+e.trim()+")":e}function zT(t){let e=t[0],n=1,r=2,o="",i=!1;for(;n<t.length;){let s=t[n];if(typeof s=="string")if(r&2){let a=t[++n];o+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?o+="."+s:r&4&&(o+=" "+s);else o!==""&&!Qn(s)&&(e+=zg(i,o),o=""),r=s,i=i||!Qn(r);n++}return o!==""&&(e+=zg(i,o)),e}function YT(t){return t.map(zT).join(",")}function ZT(t){let e=[],n=[],r=1,o=2;for(;r<t.length;){let i=t[r];if(typeof i=="string")o===2?i!==""&&e.push(i,t[++r]):o===8&&n.push(i);else{if(!Qn(o))break;o=i}r++}return{attrs:e,classes:n}}function et(t){return ma(()=>{let e=Uy(t),n=G(C({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===Oy.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||xr.Emulated,styles:t.styles||Kn,_:null,schemas:t.schemas||null,tView:null,id:""});qy(n);let r=t.dependencies;return n.directiveDefs=Zg(r,!1),n.pipeDefs=Zg(r,!0),n.id=XT(n),n})}function QT(t){return so(t)||Vy(t)}function KT(t){return t!==null}function un(t){return ma(()=>({type:t.type,bootstrap:t.bootstrap||Kn,declarations:t.declarations||Kn,imports:t.imports||Kn,exports:t.exports||Kn,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function Yg(t,e){if(t==null)return ia;let n={};for(let r in t)if(t.hasOwnProperty(r)){let o=t[r],i=o;Array.isArray(o)&&(i=o[1],o=o[0]),n[o]=r,e&&(e[o]=i)}return n}function Bi(t){return ma(()=>{let e=Uy(t);return qy(e),e})}function so(t){return t[vT]||null}function Vy(t){return t[_T]||null}function Ly(t){return t[xT]||null}function jy(t){let e=so(t)||Vy(t)||Ly(t);return e!==null?e.standalone:!1}function By(t,e){let n=t[wT]||null;if(!n&&e===!0)throw new Error(`Type ${Wt(t)} does not have '\u0275mod' property.`);return n}function Uy(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:t.inputs||ia,exportAs:t.exportAs||null,standalone:t.standalone===!0,signals:t.signals===!0,selectors:t.selectors||Kn,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Yg(t.inputs,e),outputs:Yg(t.outputs),debugInfo:null}}function qy(t){t.features?.forEach(e=>e(t))}function Zg(t,e){if(!t)return null;let n=e?Ly:QT;return()=>(typeof t=="function"?t():t).map(r=>n(r)).filter(KT)}function XT(t){let e=0,n=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(let o of n)e=Math.imul(31,e)+o.charCodeAt(0)<<0;return e+=2147483647+1,"c"+e}var $r=0,_e=1,ue=2,xt=3,Xn=4,Tn=5,sa=6,aa=7,Jn=8,Ni=9,ao=10,wt=11,ca=12,Qg=13,Ui=14,er=15,ga=16,Ei=17,_r=18,Eu=19,$y=20,io=21,Wd=22,Po=23,wr=25,Hy=1;var Vo=7,au=8,Oi=9,Dn=10,Fi=function(t){return t[t.None=0]="None",t[t.HasTransplantedViews=2]="HasTransplantedViews",t[t.HasChildViewsToRefresh=4]="HasChildViewsToRefresh",t}(Fi||{});function Ro(t){return Array.isArray(t)&&typeof t[Hy]=="object"}function tr(t){return Array.isArray(t)&&t[Hy]===!0}function ef(t){return(t.flags&4)!==0}function Tu(t){return t.componentOffset>-1}function Su(t){return(t.flags&1)===1}function ya(t){return!!t.template}function JT(t){return(t[ue]&512)!==0}function Ri(t,e){let n=t.hasOwnProperty(iu);return n?t[iu]:null}var ah=class{constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function qo(){return Wy}function Wy(t){return t.type.prototype.ngOnChanges&&(t.setInput=tS),eS}qo.ngInherit=!0;function eS(){let t=zy(this),e=t?.current;if(e){let n=t.previous;if(n===ia)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function tS(t,e,n,r){let o=this.declaredInputs[n],i=zy(t)||nS(t,{previous:ia,current:null}),s=i.current||(i.current={}),a=i.previous,c=a[o];s[o]=new ah(c&&c.currentValue,e,a===ia),t[r]=e}var Gy="__ngSimpleChanges__";function zy(t){return t[Gy]||null}function nS(t,e){return t[Gy]=e}var Kg=null;var yr=function(t,e,n){Kg?.(t,e,n)},rS="svg",oS="math",iS=!1;function sS(){return iS}function br(t){for(;Array.isArray(t);)t=t[$r];return t}function Yy(t,e){return br(e[t])}function kn(t,e){return br(e[t.index])}function Zy(t,e){return t.data[e]}function $o(t,e){let n=e[t];return Ro(n)?n:n[$r]}function aS(t){return(t[ue]&4)===4}function tf(t){return(t[ue]&128)===128}function cS(t){return tr(t[xt])}function ki(t,e){return e==null?null:t[e]}function Qy(t){t[Ei]=0}function uS(t){t[ue]&1024||(t[ue]|=1024,tf(t)&&ua(t))}function lS(t,e){for(;t>0;)e=e[Ui],t--;return e}function Ky(t){return t[ue]&9216||t[Po]?.dirty}function ch(t){Ky(t)?ua(t):t[ue]&64&&(sS()?(t[ue]|=1024,ua(t)):t[ao].changeDetectionScheduler?.notify())}function ua(t){t[ao].changeDetectionScheduler?.notify();let e=t[xt];for(;e!==null&&!(tr(e)&&e[ue]&Fi.HasChildViewsToRefresh||Ro(e)&&e[ue]&8192);){if(tr(e))e[ue]|=Fi.HasChildViewsToRefresh;else if(e[ue]|=8192,!tf(e))break;e=e[xt]}}function Xy(t,e){if((t[ue]&256)===256)throw new re(911,!1);t[io]===null&&(t[io]=[]),t[io].push(e)}function dS(t,e){if(t[io]===null)return;let n=t[io].indexOf(e);n!==-1&&t[io].splice(n,1)}var xe={lFrame:iv(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function hS(){return xe.lFrame.elementDepthCount}function fS(){xe.lFrame.elementDepthCount++}function pS(){xe.lFrame.elementDepthCount--}function Jy(){return xe.bindingsEnabled}function ev(){return xe.skipHydrationRootTNode!==null}function mS(t){return xe.skipHydrationRootTNode===t}function gS(){xe.skipHydrationRootTNode=null}function We(){return xe.lFrame.lView}function Jt(){return xe.lFrame.tView}function At(t){return xe.lFrame.contextLView=t,t[Jn]}function It(t){return xe.lFrame.contextLView=null,t}function nr(){let t=tv();for(;t!==null&&t.type===64;)t=t.parent;return t}function tv(){return xe.lFrame.currentTNode}function yS(){let t=xe.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function Ho(t,e){let n=xe.lFrame;n.currentTNode=t,n.isParent=e}function nf(){return xe.lFrame.isParent}function rf(){xe.lFrame.isParent=!1}function vS(t){return xe.lFrame.bindingIndex=t}function Au(){return xe.lFrame.bindingIndex++}function _S(t){let e=xe.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function xS(){return xe.lFrame.inI18n}function wS(t,e){let n=xe.lFrame;n.bindingIndex=n.bindingRootIndex=t,uh(e)}function bS(){return xe.lFrame.currentDirectiveIndex}function uh(t){xe.lFrame.currentDirectiveIndex=t}function CS(t){let e=xe.lFrame.currentDirectiveIndex;return e===-1?null:t[e]}function nv(){return xe.lFrame.currentQueryIndex}function of(t){xe.lFrame.currentQueryIndex=t}function DS(t){let e=t[_e];return e.type===2?e.declTNode:e.type===1?t[Tn]:null}function rv(t,e,n){if(n&ge.SkipSelf){let o=e,i=t;for(;o=o.parent,o===null&&!(n&ge.Host);)if(o=DS(i),o===null||(i=i[Ui],o.type&10))break;if(o===null)return!1;e=o,t=i}let r=xe.lFrame=ov();return r.currentTNode=e,r.lView=t,!0}function sf(t){let e=ov(),n=t[_e];xe.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function ov(){let t=xe.lFrame,e=t===null?null:t.child;return e===null?iv(t):e}function iv(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function sv(){let t=xe.lFrame;return xe.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var av=sv;function af(){let t=sv();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function ES(t){return(xe.lFrame.contextLView=lS(t,xe.lFrame.contextLView))[Jn]}function qi(){return xe.lFrame.selectedIndex}function Lo(t){xe.lFrame.selectedIndex=t}function cf(){let t=xe.lFrame;return Zy(t.tView,t.selectedIndex)}function TS(){return xe.lFrame.currentNamespace}var cv=!0;function Iu(){return cv}function Mu(t){cv=t}function SS(t,e,n){let{ngOnChanges:r,ngOnInit:o,ngDoCheck:i}=e.type.prototype;if(r){let s=Wy(e);(n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s)}o&&(n.preOrderHooks??=[]).push(0-t,o),i&&((n.preOrderHooks??=[]).push(t,i),(n.preOrderCheckHooks??=[]).push(t,i))}function Nu(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){let i=t.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:u,ngOnDestroy:l}=i;s&&(t.contentHooks??=[]).push(-n,s),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),c&&(t.viewHooks??=[]).push(-n,c),u&&((t.viewHooks??=[]).push(n,u),(t.viewCheckHooks??=[]).push(n,u)),l!=null&&(t.destroyHooks??=[]).push(n,l)}}function Jc(t,e,n){uv(t,e,3,n)}function eu(t,e,n,r){(t[ue]&3)===n&&uv(t,e,n,r)}function Gd(t,e){let n=t[ue];(n&3)===e&&(n&=16383,n+=1,t[ue]=n)}function uv(t,e,n,r){let o=r!==void 0?t[Ei]&65535:0,i=r??-1,s=e.length-1,a=0;for(let c=o;c<s;c++)if(typeof e[c+1]=="number"){if(a=e[c],r!=null&&a>=r)break}else e[c]<0&&(t[Ei]+=65536),(a<i||i==-1)&&(AS(t,n,e,c),t[Ei]=(t[Ei]&4294901760)+c+2),c++}function Xg(t,e){yr(4,t,e);let n=xn(null);try{e.call(t)}finally{xn(n),yr(5,t,e)}}function AS(t,e,n,r){let o=n[r]<0,i=n[r+1],s=o?-n[r]:n[r],a=t[s];o?t[ue]>>14<t[Ei]>>16&&(t[ue]&3)===e&&(t[ue]+=16384,Xg(a,i)):Xg(a,i)}var Mi=-1,la=class{constructor(e,n,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}};function IS(t){return t instanceof la}function MS(t){return(t.flags&8)!==0}function NS(t){return(t.flags&16)!==0}function lv(t){return t!==Mi}function cu(t){let e=t&32767;return t&32767}function OS(t){return t>>16}function uu(t,e){let n=OS(t),r=e;for(;n>0;)r=r[Ui],n--;return r}var lh=!0;function Jg(t){let e=lh;return lh=t,e}var FS=256,dv=FS-1,hv=5,RS=0,vr={};function kS(t,e,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(na)&&(r=n[na]),r==null&&(r=n[na]=RS++);let o=r&dv,i=1<<o;e.data[t+(o>>hv)]|=i}function fv(t,e){let n=pv(t,e);if(n!==-1)return n;let r=e[_e];r.firstCreatePass&&(t.injectorIndex=e.length,zd(r.data,t),zd(e,null),zd(r.blueprint,null));let o=uf(t,e),i=t.injectorIndex;if(lv(o)){let s=cu(o),a=uu(o,e),c=a[_e].data;for(let u=0;u<8;u++)e[i+u]=a[s+u]|c[s+u]}return e[i+8]=o,i}function zd(t,e){t.push(0,0,0,0,0,0,0,0,e)}function pv(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function uf(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,r=null,o=e;for(;o!==null;){if(r=_v(o),r===null)return Mi;if(n++,o=o[Ui],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return Mi}function PS(t,e,n){kS(t,e,n)}function mv(t,e,n){if(n&ge.Optional||t!==void 0)return t;Xh(e,"NodeInjector")}function gv(t,e,n,r){if(n&ge.Optional&&r===void 0&&(r=null),!(n&(ge.Self|ge.Host))){let o=t[Ni],i=Fn(void 0);try{return o?o.get(e,r,n&ge.Optional):My(e,r,n&ge.Optional)}finally{Fn(i)}}return mv(r,e,n)}function yv(t,e,n,r=ge.Default,o){if(t!==null){if(e[ue]&2048&&!(r&ge.Self)){let s=BS(t,e,n,r,vr);if(s!==vr)return s}let i=vv(t,e,n,r,vr);if(i!==vr)return i}return gv(e,n,r,o)}function vv(t,e,n,r,o){let i=LS(n);if(typeof i=="function"){if(!rv(e,t,r))return r&ge.Host?mv(o,n,r):gv(e,n,r,o);try{let s;if(s=i(r),s==null&&!(r&ge.Optional))Xh(n);else return s}finally{av()}}else if(typeof i=="number"){let s=null,a=pv(t,e),c=Mi,u=r&ge.Host?e[er][Tn]:null;for((a===-1||r&ge.SkipSelf)&&(c=a===-1?uf(t,e):e[a+8],c===Mi||!ty(r,!1)?a=-1:(s=e[_e],a=cu(c),e=uu(c,e)));a!==-1;){let l=e[_e];if(ey(i,a,l.data)){let d=VS(a,e,n,s,r,u);if(d!==vr)return d}c=e[a+8],c!==Mi&&ty(r,e[_e].data[a+8]===u)&&ey(i,a,e)?(s=l,a=cu(c),e=uu(c,e)):a=-1}}return o}function VS(t,e,n,r,o,i){let s=e[_e],a=s.data[t+8],c=r==null?Tu(a)&&lh:r!=s&&(a.type&3)!==0,u=o&ge.Host&&i===a,l=tu(a,s,n,c,u);return l!==null?Pi(e,s,l,a):vr}function tu(t,e,n,r,o){let i=t.providerIndexes,s=e.data,a=i&1048575,c=t.directiveStart,u=t.directiveEnd,l=i>>20,d=r?a:a+l,h=o?a+l:u;for(let p=d;p<h;p++){let y=s[p];if(p<c&&n===y||p>=c&&y.type===n)return p}if(o){let p=s[c];if(p&&ya(p)&&p.type===n)return c}return null}function Pi(t,e,n,r){let o=t[n],i=e.data;if(IS(o)){let s=o;s.resolving&&CT(bT(i[n]));let a=Jg(s.canSeeViewProviders);s.resolving=!0;let c,u=s.injectImpl?Fn(s.injectImpl):null,l=rv(t,r,ge.Default);try{o=t[n]=s.factory(void 0,i,t,r),e.firstCreatePass&&n>=r.directiveStart&&SS(n,i[n],e)}finally{u!==null&&Fn(u),Jg(a),s.resolving=!1,av()}}return o}function LS(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(na)?t[na]:void 0;return typeof e=="number"?e>=0?e&dv:jS:e}function ey(t,e,n){let r=1<<t;return!!(n[e+(t>>hv)]&r)}function ty(t,e){return!(t&ge.Self)&&!(t&ge.Host&&e)}var ko=class{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return yv(this._tNode,this._lView,e,Du(r),n)}};function jS(){return new ko(nr(),We())}function Ou(t){return ma(()=>{let e=t.prototype.constructor,n=e[iu]||dh(e),r=Object.prototype,o=Object.getPrototypeOf(t.prototype).constructor;for(;o&&o!==r;){let i=o[iu]||dh(o);if(i&&i!==n)return i;o=Object.getPrototypeOf(o)}return i=>new i})}function dh(t){return Dy(t)?()=>{let e=dh(Rn(t));return e&&e()}:Ri(t)}function BS(t,e,n,r,o){let i=t,s=e;for(;i!==null&&s!==null&&s[ue]&2048&&!(s[ue]&512);){let a=vv(i,s,n,r|ge.Self,vr);if(a!==vr)return a;let c=i.parent;if(!c){let u=s[$y];if(u){let l=u.get(n,vr,r);if(l!==vr)return l}c=_v(s),s=s[Ui]}i=c}return o}function _v(t){let e=t[_e],n=e.type;return n===2?e.declTNode:n===1?t[Tn]:null}var Qc="__parameters__";function US(t){return function(...n){if(t){let r=t(...n);for(let o in r)this[o]=r[o]}}}function xv(t,e,n){return ma(()=>{let r=US(e);function o(...i){if(this instanceof o)return r.apply(this,i),this;let s=new o(...i);return a.annotation=s,a;function a(c,u,l){let d=c.hasOwnProperty(Qc)?c[Qc]:Object.defineProperty(c,Qc,{value:[]})[Qc];for(;d.length<=l;)d.push(null);return(d[l]=d[l]||[]).push(s),c}}return n&&(o.prototype=Object.create(n.prototype)),o.prototype.ngMetadataName=t,o.annotationCls=o,o})}function qS(t){let e=Cn.ng;if(e&&e.\u0275compilerFacade)return e.\u0275compilerFacade;throw new Error("JIT compiler unavailable")}function $S(t){return typeof t=="function"}function HS(t,e,n){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++){let o=t[r],i=e[r];if(n&&(o=n(o),i=n(i)),i!==o)return!1}return!0}function WS(t){return t.flat(Number.POSITIVE_INFINITY)}function lf(t,e){t.forEach(n=>Array.isArray(n)?lf(n,e):e(n))}function wv(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function lu(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function bv(t,e){let n=[];for(let r=0;r<t;r++)n.push(e);return n}function GS(t,e,n,r){let o=t.length;if(o==e)t.push(n,r);else if(o===1)t.push(r,t[0]),t[0]=n;else{for(o--,t.push(t[o-1],t[o]);o>e;){let i=o-2;t[o]=t[i],o--}t[e]=n,t[e+1]=r}}function zS(t,e,n){let r=va(t,e);return r>=0?t[r|1]=n:(r=~r,GS(t,r,e,n)),r}function Yd(t,e){let n=va(t,e);if(n>=0)return t[n|1]}function va(t,e){return YS(t,e,1)}function YS(t,e,n){let r=0,o=t.length>>n;for(;o!==r;){let i=r+(o-r>>1),s=t[i<<n];if(e===s)return i<<n;s>e?o=i:r=i+1}return~(o<<n)}var Fu=Ny(xv("Optional"),8);var df=Ny(xv("SkipSelf"),4);function ZS(t){let e=[],n=new Map;function r(o){let i=n.get(o);if(!i){let s=t(o);n.set(o,i=s.then(JS))}return i}return du.forEach((o,i)=>{let s=[];o.templateUrl&&s.push(r(o.templateUrl).then(u=>{o.template=u}));let a=typeof o.styles=="string"?[o.styles]:o.styles||[];if(o.styles=a,o.styleUrl&&o.styleUrls?.length)throw new Error("@Component cannot define both `styleUrl` and `styleUrls`. Use `styleUrl` if the component has one stylesheet, or `styleUrls` if it has multiple");if(o.styleUrls?.length){let u=o.styles.length,l=o.styleUrls;o.styleUrls.forEach((d,h)=>{a.push(""),s.push(r(d).then(p=>{a[u+h]=p,l.splice(l.indexOf(d),1),l.length==0&&(o.styleUrls=void 0)}))})}else o.styleUrl&&s.push(r(o.styleUrl).then(u=>{a.push(u),o.styleUrl=void 0}));let c=Promise.all(s).then(()=>eA(i));e.push(c)}),KS(),Promise.all(e).then(()=>{})}var du=new Map,QS=new Set;function KS(){let t=du;return du=new Map,t}function XS(){return du.size===0}function JS(t){return typeof t=="string"?t:t.text()}function eA(t){QS.delete(t)}var Vi=new he("ENVIRONMENT_INITIALIZER"),Cv=new he("INJECTOR",-1),Dv=new he("INJECTOR_DEF_TYPES"),hu=class{get(e,n=oa){if(n===oa){let r=new Error(`NullInjectorError: No provider for ${Wt(e)}!`);throw r.name="NullInjectorError",r}return n}};function tA(...t){return{\u0275providers:Ev(!0,t),\u0275fromNgModule:!0}}function Ev(t,...e){let n=[],r=new Set,o,i=s=>{n.push(s)};return lf(e,s=>{let a=s;hh(a,i,[],r)&&(o||=[],o.push(a))}),o!==void 0&&Tv(o,i),n}function Tv(t,e){for(let n=0;n<t.length;n++){let{ngModule:r,providers:o}=t[n];hf(o,i=>{e(i,r)})}}function hh(t,e,n,r){if(t=Rn(t),!t)return!1;let o=null,i=$g(t),s=!i&&so(t);if(!i&&!s){let c=t.ngModule;if(i=$g(c),i)o=c;else return!1}else{if(s&&!s.standalone)return!1;o=t}let a=r.has(o);if(s){if(a)return!1;if(r.add(o),s.dependencies){let c=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let u of c)hh(u,e,n,r)}}else if(i){if(i.imports!=null&&!a){r.add(o);let u;try{lf(i.imports,l=>{hh(l,e,n,r)&&(u||=[],u.push(l))})}finally{}u!==void 0&&Tv(u,e)}if(!a){let u=Ri(o)||(()=>new o);e({provide:o,useFactory:u,deps:Kn},o),e({provide:Dv,useValue:o,multi:!0},o),e({provide:Vi,useValue:()=>ie(o),multi:!0},o)}let c=i.providers;if(c!=null&&!a){let u=t;hf(c,l=>{e(l,u)})}}else return!1;return o!==t&&t.providers!==void 0}function hf(t,e){for(let n of t)Ey(n)&&(n=n.\u0275providers),Array.isArray(n)?hf(n,e):e(n)}var nA=He({provide:String,useValue:He});function Sv(t){return t!==null&&typeof t=="object"&&nA in t}function rA(t){return!!(t&&t.useExisting)}function oA(t){return!!(t&&t.useFactory)}function fh(t){return typeof t=="function"}var Ru=new he("Set Injector scope."),nu={},iA={},Zd;function ff(){return Zd===void 0&&(Zd=new hu),Zd}var En=class{},da=class extends En{get destroyed(){return this._destroyed}constructor(e,n,r,o){super(),this.parent=n,this.source=r,this.scopes=o,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,mh(e,s=>this.processProvider(s)),this.records.set(Cv,Ti(void 0,this)),o.has("environment")&&this.records.set(En,Ti(void 0,this));let i=this.records.get(Ru);i!=null&&typeof i.value=="string"&&this.scopes.add(i.value),this.injectorDefTypes=new Set(this.get(Dv,Kn,ge.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(let n of this._ngOnDestroyHooks)n.ngOnDestroy();let e=this._onDestroyHooks;this._onDestroyHooks=[];for(let n of e)n()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let n=oo(this),r=Fn(void 0),o;try{return e()}finally{oo(n),Fn(r)}}get(e,n=oa,r=ge.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(Ug))return e[Ug](this);r=Du(r);let o,i=oo(this),s=Fn(void 0);try{if(!(r&ge.SkipSelf)){let c=this.records.get(e);if(c===void 0){let u=dA(e)&&Cu(e);u&&this.injectableDefInScope(u)?c=Ti(ph(e),nu):c=null,this.records.set(e,c)}if(c!=null)return this.hydrate(e,c)}let a=r&ge.Self?ff():this.parent;return n=r&ge.Optional&&n===oa?null:n,a.get(e,n)}catch(a){if(a.name==="NullInjectorError"){if((a[su]=a[su]||[]).unshift(Wt(e)),i)throw a;return kT(a,e,"R3InjectorError",this.source)}else throw a}finally{Fn(s),oo(i)}}resolveInjectorInitializers(){let e=oo(this),n=Fn(void 0),r;try{let o=this.get(Vi,Kn,ge.Self);for(let i of o)i()}finally{oo(e),Fn(n)}}toString(){let e=[],n=this.records;for(let r of n.keys())e.push(Wt(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new re(205,!1)}processProvider(e){e=Rn(e);let n=fh(e)?e:Rn(e&&e.provide),r=aA(e);if(!fh(e)&&e.multi===!0){let o=this.records.get(n);o||(o=Ti(void 0,nu,!0),o.factory=()=>ih(o.multi),this.records.set(n,o)),n=e,o.multi.push(e)}else{let o=this.records.get(n)}this.records.set(n,r)}hydrate(e,n){return n.value===nu&&(n.value=iA,n.value=n.factory()),typeof n.value=="object"&&n.value&&lA(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}injectableDefInScope(e){if(!e.providedIn)return!1;let n=Rn(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function ph(t){let e=Cu(t),n=e!==null?e.factory:Ri(t);if(n!==null)return n;if(t instanceof he)throw new re(204,!1);if(t instanceof Function)return sA(t);throw new re(204,!1)}function sA(t){let e=t.length;if(e>0){let r=bv(e,"?");throw new re(204,!1)}let n=TT(t);return n!==null?()=>n.factory(t):()=>new t}function aA(t){if(Sv(t))return Ti(void 0,t.useValue);{let e=cA(t);return Ti(e,nu)}}function cA(t,e,n){let r;if(fh(t)){let o=Rn(t);return Ri(o)||ph(o)}else if(Sv(t))r=()=>Rn(t.useValue);else if(oA(t))r=()=>t.useFactory(...ih(t.deps||[]));else if(rA(t))r=()=>ie(Rn(t.useExisting));else{let o=Rn(t&&(t.useClass||t.provide));if(uA(t))r=()=>new o(...ih(t.deps));else return Ri(o)||ph(o)}return r}function Ti(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function uA(t){return!!t.deps}function lA(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function dA(t){return typeof t=="function"||typeof t=="object"&&t instanceof he}function mh(t,e){for(let n of t)Array.isArray(n)?mh(n,e):n&&Ey(n)?mh(n.\u0275providers,e):e(n)}function lo(t,e){t instanceof da&&t.assertNotDestroyed();let n,r=oo(t),o=Fn(void 0);try{return e()}finally{oo(r),Fn(o)}}function hA(t){if(!Iy()&&!OT())throw new re(-203,!1)}function ny(t,e=null,n=null,r){let o=Av(t,e,n,r);return o.resolveInjectorInitializers(),o}function Av(t,e=null,n=null,r,o=new Set){let i=[n||Kn,tA(t)];return r=r||(typeof t=="object"?void 0:Wt(t)),new da(i,e||ff(),r||null,o)}var Pn=(()=>{let e=class e{static create(r,o){if(Array.isArray(r))return ny({name:""},o,r,"");{let i=r.name??"";return ny({name:i},r.parent,r.providers,i)}}};e.THROW_IF_NOT_FOUND=oa,e.NULL=new hu,e.\u0275prov=se({token:e,providedIn:"any",factory:()=>ie(Cv)}),e.__NG_ELEMENT_ID__=-1;let t=e;return t})();var gh;function Iv(t){gh=t}function fA(){if(gh!==void 0)return gh;if(typeof document<"u")return document;throw new re(210,!1)}var ku=new he("AppId",{providedIn:"root",factory:()=>pA}),pA="ng",pf=new he("Platform Initializer"),Wo=new he("Platform ID",{providedIn:"platform",factory:()=>"unknown"});var mf=new he("CSP nonce",{providedIn:"root",factory:()=>fA().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});function Mv(t){return t instanceof Function?t():t}function mA(t){return(t??J(Pn)).get(Wo)==="browser"}function Nv(t){return(t.flags&128)===128}var qr=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(qr||{}),gA=/^>|^->|<!--|-->|--!>|<!-$/g,yA=/(<|>)/g,vA="\u200B$1\u200B";function _A(t){return t.replace(gA,e=>e.replace(yA,vA))}var Ov=new Map,xA=0;function wA(){return xA++}function bA(t){Ov.set(t[Eu],t)}function CA(t){Ov.delete(t[Eu])}var ry="__ngContext__";function co(t,e){Ro(e)?(t[ry]=e[Eu],bA(e)):t[ry]=e}var DA;function gf(t,e){return DA(t,e)}function yf(t){let e=t[xt];return tr(e)?e[xt]:e}function Fv(t){return kv(t[ca])}function Rv(t){return kv(t[Xn])}function kv(t){for(;t!==null&&!tr(t);)t=t[Xn];return t}function Si(t,e,n,r,o){if(r!=null){let i,s=!1;tr(r)?i=r:Ro(r)&&(s=!0,r=r[$r]);let a=br(r);t===0&&n!==null?o==null?Bv(e,n,a):fu(e,n,a,o||null,!0):t===1&&n!==null?fu(e,n,a,o||null,!0):t===2?UA(e,a,s):t===3&&e.destroyNode(a),i!=null&&$A(e,t,i,n,o)}}function EA(t,e){return t.createText(e)}function TA(t,e,n){t.setValue(e,n)}function SA(t,e){return t.createComment(_A(e))}function Pv(t,e,n){return t.createElement(e,n)}function AA(t,e){let n=e[wt];_a(t,e,n,2,null,null),e[$r]=null,e[Tn]=null}function IA(t,e,n,r,o,i){r[$r]=o,r[Tn]=e,_a(t,r,n,1,o,i)}function MA(t,e){_a(t,e,e[wt],2,null,null)}function NA(t){let e=t[ca];if(!e)return Qd(t[_e],t);for(;e;){let n=null;if(Ro(e))n=e[ca];else{let r=e[Dn];r&&(n=r)}if(!n){for(;e&&!e[Xn]&&e!==t;)Ro(e)&&Qd(e[_e],e),e=e[xt];e===null&&(e=t),Ro(e)&&Qd(e[_e],e),n=e&&e[Xn]}e=n}}function OA(t,e,n,r){let o=Dn+r,i=n.length;r>0&&(n[o-1][Xn]=e),r<i-Dn?(e[Xn]=n[o],wv(n,Dn+r,e)):(n.push(e),e[Xn]=null),e[xt]=n;let s=e[ga];s!==null&&n!==s&&FA(s,e);let a=e[_r];a!==null&&a.insertView(t),ch(e),e[ue]|=128}function FA(t,e){let n=t[Oi],o=e[xt][xt][er];e[er]!==o&&(t[ue]|=Fi.HasTransplantedViews),n===null?t[Oi]=[e]:n.push(e)}function Vv(t,e){let n=t[Oi],r=n.indexOf(e),o=e[xt];n.splice(r,1)}function yh(t,e){if(t.length<=Dn)return;let n=Dn+e,r=t[n];if(r){let o=r[ga];o!==null&&o!==t&&Vv(o,r),e>0&&(t[n-1][Xn]=r[Xn]);let i=lu(t,Dn+e);AA(r[_e],r);let s=i[_r];s!==null&&s.detachView(i[_e]),r[xt]=null,r[Xn]=null,r[ue]&=-129}return r}function Lv(t,e){if(!(e[ue]&256)){let n=e[wt];n.destroyNode&&_a(t,e,n,3,null,null),NA(e)}}function Qd(t,e){if(!(e[ue]&256)){e[ue]&=-129,e[ue]|=256,e[Po]&&lg(e[Po]),kA(t,e),RA(t,e),e[_e].type===1&&e[wt].destroy();let n=e[ga];if(n!==null&&tr(e[xt])){n!==e[xt]&&Vv(n,e);let r=e[_r];r!==null&&r.detachView(t)}CA(e)}}function RA(t,e){let n=t.cleanup,r=e[aa];if(n!==null)for(let i=0;i<n.length-1;i+=2)if(typeof n[i]=="string"){let s=n[i+3];s>=0?r[s]():r[-s].unsubscribe(),i+=2}else{let s=r[n[i+1]];n[i].call(s)}r!==null&&(e[aa]=null);let o=e[io];if(o!==null){e[io]=null;for(let i=0;i<o.length;i++){let s=o[i];s()}}}function kA(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let o=e[n[r]];if(!(o instanceof la)){let i=n[r+1];if(Array.isArray(i))for(let s=0;s<i.length;s+=2){let a=o[i[s]],c=i[s+1];yr(4,a,c);try{c.call(a)}finally{yr(5,a,c)}}else{yr(4,o,i);try{i.call(o)}finally{yr(5,o,i)}}}}}function jv(t,e,n){return PA(t,e.parent,n)}function PA(t,e,n){let r=e;for(;r!==null&&r.type&40;)e=r,r=e.parent;if(r===null)return n[$r];{let{componentOffset:o}=r;if(o>-1){let{encapsulation:i}=t.data[r.directiveStart+o];if(i===xr.None||i===xr.Emulated)return null}return kn(r,n)}}function fu(t,e,n,r,o){t.insertBefore(e,n,r,o)}function Bv(t,e,n){t.appendChild(e,n)}function oy(t,e,n,r,o){r!==null?fu(t,e,n,r,o):Bv(t,e,n)}function VA(t,e,n,r){t.removeChild(e,n,r)}function vf(t,e){return t.parentNode(e)}function LA(t,e){return t.nextSibling(e)}function Uv(t,e,n){return BA(t,e,n)}function jA(t,e,n){return t.type&40?kn(t,n):null}var BA=jA,iy;function Pu(t,e,n,r){let o=jv(t,r,e),i=e[wt],s=r.parent||e[Tn],a=Uv(s,r,e);if(o!=null)if(Array.isArray(n))for(let c=0;c<n.length;c++)oy(i,o,n[c],a,!1);else oy(i,o,n,a,!1);iy!==void 0&&iy(i,r,e,n,o)}function ru(t,e){if(e!==null){let n=e.type;if(n&3)return kn(e,t);if(n&4)return vh(-1,t[e.index]);if(n&8){let r=e.child;if(r!==null)return ru(t,r);{let o=t[e.index];return tr(o)?vh(-1,o):br(o)}}else{if(n&32)return gf(e,t)()||br(t[e.index]);{let r=qv(t,e);if(r!==null){if(Array.isArray(r))return r[0];let o=yf(t[er]);return ru(o,r)}else return ru(t,e.next)}}}return null}function qv(t,e){if(e!==null){let r=t[er][Tn],o=e.projection;return r.projection[o]}return null}function vh(t,e){let n=Dn+t+1;if(n<e.length){let r=e[n],o=r[_e].firstChild;if(o!==null)return ru(r,o)}return e[Vo]}function UA(t,e,n){let r=vf(t,e);r&&VA(t,r,e,n)}function _f(t,e,n,r,o,i,s){for(;n!=null;){let a=r[n.index],c=n.type;if(s&&e===0&&(a&&co(br(a),r),n.flags|=2),(n.flags&32)!==32)if(c&8)_f(t,e,n.child,r,o,i,!1),Si(e,t,o,a,i);else if(c&32){let u=gf(n,r),l;for(;l=u();)Si(e,t,o,l,i);Si(e,t,o,a,i)}else c&16?$v(t,e,r,n,o,i):Si(e,t,o,a,i);n=s?n.projectionNext:n.next}}function _a(t,e,n,r,o,i){_f(n,r,t.firstChild,e,o,i,!1)}function qA(t,e,n){let r=e[wt],o=jv(t,n,e),i=n.parent||e[Tn],s=Uv(i,n,e);$v(r,0,e,n,o,s)}function $v(t,e,n,r,o,i){let s=n[er],c=s[Tn].projection[r.projection];if(Array.isArray(c))for(let u=0;u<c.length;u++){let l=c[u];Si(e,t,o,l,i)}else{let u=c,l=s[xt];Nv(r)&&(u.flags|=128),_f(t,e,u,l,o,i,!0)}}function $A(t,e,n,r,o){let i=n[Vo],s=br(n);i!==s&&Si(e,t,r,i,o);for(let a=Dn;a<n.length;a++){let c=n[a];_a(c[_e],c,t,e,r,i)}}function HA(t,e,n,r,o){if(e)o?t.addClass(n,r):t.removeClass(n,r);else{let i=r.indexOf("-")===-1?void 0:qr.DashCase;o==null?t.removeStyle(n,r,i):(typeof o=="string"&&o.endsWith("!important")&&(o=o.slice(0,-10),i|=qr.Important),t.setStyle(n,r,o,i))}}function WA(t,e,n){t.setAttribute(e,"style",n)}function Hv(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function Wv(t,e,n){let{mergedAttrs:r,classes:o,styles:i}=n;r!==null&&sh(t,e,r),o!==null&&Hv(t,e,o),i!==null&&WA(t,e,i)}var _h=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${yT})`}};function xf(t){return t instanceof _h?t.changingThisBreaksApplicationSecurity:t}var xh=class{};var GA="h",zA="b";var YA=(t,e,n)=>null;function wf(t,e,n=!1){return YA(t,e,n)}var wh=class{},pu=class{};function ZA(t){let e=Error(`No component factory found for ${Wt(t)}.`);return e[QA]=t,e}var QA="ngComponent";var bh=class{resolveComponentFactory(e){throw ZA(e)}},Vu=(()=>{let e=class e{};e.NULL=new bh;let t=e;return t})();function KA(){return $i(nr(),We())}function $i(t,e){return new Vn(kn(t,e))}var Vn=(()=>{let e=class e{constructor(r){this.nativeElement=r}};e.__NG_ELEMENT_ID__=KA;let t=e;return t})();function XA(t){return t instanceof Vn?t.nativeElement:t}var ha=class{};var JA=(()=>{let e=class e{};e.\u0275prov=se({token:e,providedIn:"root",factory:()=>null});let t=e;return t})(),Kd={};function Gv(t){return tI(t)?Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t:!1}function eI(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{let n=t[Symbol.iterator](),r;for(;!(r=n.next()).done;)e(r.value)}}function tI(t){return t!==null&&(typeof t=="function"||typeof t=="object")}var Ch=class{constructor(){}supports(e){return Gv(e)}create(e){return new Dh(e)}},nI=(t,e)=>e,Dh=class{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||nI}forEachItem(e){let n;for(n=this._itHead;n!==null;n=n._next)e(n)}forEachOperation(e){let n=this._itHead,r=this._removalsHead,o=0,i=null;for(;n||r;){let s=!r||n&&n.currentIndex<sy(r,o,i)?n:r,a=sy(s,o,i),c=s.currentIndex;if(s===r)o--,r=r._nextRemoved;else if(n=n._next,s.previousIndex==null)o++;else{i||(i=[]);let u=a-o,l=c-o;if(u!=l){for(let h=0;h<u;h++){let p=h<i.length?i[h]:i[h]=0,y=p+h;l<=y&&y<u&&(i[h]=p+1)}let d=s.previousIndex;i[d]=l-u}}a!==c&&e(s,a,c)}}forEachPreviousItem(e){let n;for(n=this._previousItHead;n!==null;n=n._nextPrevious)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;n!==null;n=n._nextAdded)e(n)}forEachMovedItem(e){let n;for(n=this._movesHead;n!==null;n=n._nextMoved)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;n!==null;n=n._nextRemoved)e(n)}forEachIdentityChange(e){let n;for(n=this._identityChangesHead;n!==null;n=n._nextIdentityChange)e(n)}diff(e){if(e==null&&(e=[]),!Gv(e))throw new re(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let n=this._itHead,r=!1,o,i,s;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)i=e[a],s=this._trackByFn(a,i),n===null||!Object.is(n.trackById,s)?(n=this._mismatch(n,i,s,a),r=!0):(r&&(n=this._verifyReinsertion(n,i,s,a)),Object.is(n.item,i)||this._addIdentityChange(n,i)),n=n._next}else o=0,eI(e,a=>{s=this._trackByFn(o,a),n===null||!Object.is(n.trackById,s)?(n=this._mismatch(n,a,s,o),r=!0):(r&&(n=this._verifyReinsertion(n,a,s,o)),Object.is(n.item,a)||this._addIdentityChange(n,a)),n=n._next,o++}),this.length=o;return this._truncate(n),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,n,r,o){let i;return e===null?i=this._itTail:(i=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._reinsertAfter(e,i,o)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,o),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._moveAfter(e,i,o)):e=this._addAfter(new Eh(n,r),i,o)),e}_verifyReinsertion(e,n,r,o){let i=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return i!==null?e=this._reinsertAfter(i,e._prev,o):e.currentIndex!=o&&(e.currentIndex=o,this._addToMoves(e,o)),e}_truncate(e){for(;e!==null;){let n=e._next;this._addToRemovals(this._unlink(e)),e=n}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,n,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let o=e._prevRemoved,i=e._nextRemoved;return o===null?this._removalsHead=i:o._nextRemoved=i,i===null?this._removalsTail=o:i._prevRemoved=o,this._insertAfter(e,n,r),this._addToMoves(e,r),e}_moveAfter(e,n,r){return this._unlink(e),this._insertAfter(e,n,r),this._addToMoves(e,r),e}_addAfter(e,n,r){return this._insertAfter(e,n,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,n,r){let o=n===null?this._itHead:n._next;return e._next=o,e._prev=n,o===null?this._itTail=e:o._prev=e,n===null?this._itHead=e:n._next=e,this._linkedRecords===null&&(this._linkedRecords=new mu),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let n=e._prev,r=e._next;return n===null?this._itHead=r:n._next=r,r===null?this._itTail=n:r._prev=n,e}_addToMoves(e,n){return e.previousIndex===n||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new mu),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,n){return e.item=n,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},Eh=class{constructor(e,n){this.item=e,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},Th=class{constructor(){this._head=null,this._tail=null}add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,n){let r;for(r=this._head;r!==null;r=r._nextDup)if((n===null||n<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let n=e._prevDup,r=e._nextDup;return n===null?this._head=r:n._nextDup=r,r===null?this._tail=n:r._prevDup=n,this._head===null}},mu=class{constructor(){this.map=new Map}put(e){let n=e.trackById,r=this.map.get(n);r||(r=new Th,this.map.set(n,r)),r.add(e)}get(e,n){let r=e,o=this.map.get(r);return o?o.get(e,n):null}remove(e){let n=e.trackById;return this.map.get(n).remove(e)&&this.map.delete(n),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function sy(t,e,n){let r=t.previousIndex;if(r===null)return r;let o=0;return n&&r<n.length&&(o=n[r]),r+e+o}function ay(){return new bf([new Ch])}var bf=(()=>{let e=class e{constructor(r){this.factories=r}static create(r,o){if(o!=null){let i=o.factories.slice();r=r.concat(i)}return new e(r)}static extend(r){return{provide:e,useFactory:o=>e.create(r,o||ay()),deps:[[e,new df,new Fu]]}}find(r){let o=this.factories.find(i=>i.supports(r));if(o!=null)return o;throw new re(901,!1)}};e.\u0275prov=se({token:e,providedIn:"root",factory:ay});let t=e;return t})();function gu(t,e,n,r,o=!1){for(;n!==null;){let i=e[n.index];i!==null&&r.push(br(i)),tr(i)&&rI(i,r);let s=n.type;if(s&8)gu(t,e,n.child,r);else if(s&32){let a=gf(n,e),c;for(;c=a();)r.push(c)}else if(s&16){let a=qv(e,n);if(Array.isArray(a))r.push(...a);else{let c=yf(e[er]);gu(c[_e],c,a,r,!0)}}n=o?n.projectionNext:n.next}return r}function rI(t,e){for(let n=Dn;n<t.length;n++){let r=t[n],o=r[_e].firstChild;o!==null&&gu(r[_e],r,o,e)}t[Vo]!==t[$r]&&e.push(t[Vo])}var zv=[];function oI(t){return t[Po]??iI(t)}function iI(t){let e=zv.pop()??Object.create(aI);return e.lView=t,e}function sI(t){t.lView[Po]!==t&&(t.lView=null,zv.push(t))}var aI=G(C({},ag),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{ua(t.lView)},consumerOnSignalRead(){this.lView[Po]=this}}),cI="ngOriginalError";function Xd(t){return t[cI]}var Cr=class{constructor(){this._console=console}handleError(e){let n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&Xd(e);for(;n&&Xd(n);)n=Xd(n);return n||null}},Yv=new he("",{providedIn:"root",factory:()=>J(Cr).handleError.bind(void 0)});var Zv=!1,uI=new he("",{providedIn:"root",factory:()=>Zv});var Hi={};function Ne(t){Qv(Jt(),We(),qi()+t,!1)}function Qv(t,e,n,r){if(!r)if((e[ue]&3)===3){let i=t.preOrderCheckHooks;i!==null&&Jc(e,i,n)}else{let i=t.preOrderHooks;i!==null&&eu(e,i,0,n)}Lo(n)}function Gt(t,e=ge.Default){let n=We();if(n===null)return ie(t,e);let r=nr();return yv(r,n,Rn(t),e)}function Kv(){let t="invalid";throw new Error(t)}function lI(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let o=n[r];if(o<0)Lo(~o);else{let i=o,s=n[++r],a=n[++r];wS(s,i);let c=e[i];a(2,c)}}}finally{Lo(-1)}}function Lu(t,e,n,r,o,i,s,a,c,u,l){let d=e.blueprint.slice();return d[$r]=o,d[ue]=r|4|128|8|64,(u!==null||t&&t[ue]&2048)&&(d[ue]|=2048),Qy(d),d[xt]=d[Ui]=t,d[Jn]=n,d[ao]=s||t&&t[ao],d[wt]=a||t&&t[wt],d[Ni]=c||t&&t[Ni]||null,d[Tn]=i,d[Eu]=wA(),d[sa]=l,d[$y]=u,d[er]=e.type==2?t[er]:d,d}function Wi(t,e,n,r,o){let i=t.data[e];if(i===null)i=dI(t,e,n,r,o),xS()&&(i.flags|=32);else if(i.type&64){i.type=n,i.value=r,i.attrs=o;let s=yS();i.injectorIndex=s===null?-1:s.injectorIndex}return Ho(i,!0),i}function dI(t,e,n,r,o){let i=tv(),s=nf(),a=s?i:i&&i.parent,c=t.data[e]=yI(t,a,n,e,r,o);return t.firstChild===null&&(t.firstChild=c),i!==null&&(s?i.child==null&&c.parent!==null&&(i.child=c):i.next===null&&(i.next=c,c.prev=i)),c}function Xv(t,e,n,r){if(n===0)return-1;let o=e.length;for(let i=0;i<n;i++)e.push(r),t.blueprint.push(r),t.data.push(null);return o}function Jv(t,e,n,r,o){let i=qi(),s=r&2;try{Lo(-1),s&&e.length>wr&&Qv(t,e,wr,!1),yr(s?2:0,o),n(r,o)}finally{Lo(i),yr(s?3:1,o)}}function Cf(t,e,n){if(ef(e)){let r=xn(null);try{let o=e.directiveStart,i=e.directiveEnd;for(let s=o;s<i;s++){let a=t.data[s];a.contentQueries&&a.contentQueries(1,n[s],s)}}finally{xn(r)}}}function Df(t,e,n){Jy()&&(CI(t,e,n,kn(n,e)),(n.flags&64)===64&&r_(t,e,n))}function Ef(t,e,n=kn){let r=e.localNames;if(r!==null){let o=e.index+1;for(let i=0;i<r.length;i+=2){let s=r[i+1],a=s===-1?n(e,t):t[s];t[o++]=a}}}function e_(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=Tf(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function Tf(t,e,n,r,o,i,s,a,c,u,l){let d=wr+r,h=d+o,p=hI(d,h),y=typeof u=="function"?u():u;return p[_e]={type:t,blueprint:p,template:n,queries:null,viewQuery:a,declTNode:e,data:p.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof i=="function"?i():i,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:c,consts:y,incompleteFirstPass:!1,ssrId:l}}function hI(t,e){let n=[];for(let r=0;r<e;r++)n.push(r<t?null:Hi);return n}function fI(t,e,n,r){let i=r.get(uI,Zv)||n===xr.ShadowDom,s=t.selectRootElement(e,i);return pI(s),s}function pI(t){mI(t)}var mI=t=>null;function gI(t,e,n,r){let o=a_(e);o.push(n),t.firstCreatePass&&c_(t).push(r,o.length-1)}function yI(t,e,n,r,o,i){let s=e?e.injectorIndex:-1,a=0;return ev()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:o,attrs:i,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function cy(t,e,n,r){for(let o in t)if(t.hasOwnProperty(o)){n=n===null?{}:n;let i=t[o];r===null?uy(n,e,o,i):r.hasOwnProperty(o)&&uy(n,e,r[o],i)}return n}function uy(t,e,n,r){t.hasOwnProperty(n)?t[n].push(e,r):t[n]=[e,r]}function vI(t,e,n){let r=e.directiveStart,o=e.directiveEnd,i=t.data,s=e.attrs,a=[],c=null,u=null;for(let l=r;l<o;l++){let d=i[l],h=n?n.get(d):null,p=h?h.inputs:null,y=h?h.outputs:null;c=cy(d.inputs,l,c,p),u=cy(d.outputs,l,u,y);let v=c!==null&&s!==null&&!ky(e)?RI(c,l,s):null;a.push(v)}c!==null&&(c.hasOwnProperty("class")&&(e.flags|=8),c.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=c,e.outputs=u}function _I(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function t_(t,e,n,r,o,i,s,a){let c=kn(e,n),u=e.inputs,l;!a&&u!=null&&(l=u[r])?(Af(t,n,l,r,o),Tu(e)&&xI(n,e.index)):e.type&3?(r=_I(r),o=s!=null?s(o,e.value||"",r):o,i.setProperty(c,r,o)):e.type&12}function xI(t,e){let n=$o(e,t);n[ue]&16||(n[ue]|=64)}function Sf(t,e,n,r){if(Jy()){let o=r===null?null:{"":-1},i=EI(t,n),s,a;i===null?s=a=null:[s,a]=i,s!==null&&n_(t,e,n,s,o,a),o&&TI(n,r,o)}n.mergedAttrs=Jh(n.mergedAttrs,n.attrs)}function n_(t,e,n,r,o,i){for(let u=0;u<r.length;u++)PS(fv(n,e),t,r[u].type);AI(n,t.data.length,r.length);for(let u=0;u<r.length;u++){let l=r[u];l.providersResolver&&l.providersResolver(l)}let s=!1,a=!1,c=Xv(t,e,r.length,null);for(let u=0;u<r.length;u++){let l=r[u];n.mergedAttrs=Jh(n.mergedAttrs,l.hostAttrs),II(t,n,e,c,l),SI(c,l,o),l.contentQueries!==null&&(n.flags|=4),(l.hostBindings!==null||l.hostAttrs!==null||l.hostVars!==0)&&(n.flags|=64);let d=l.type.prototype;!s&&(d.ngOnChanges||d.ngOnInit||d.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),s=!0),!a&&(d.ngOnChanges||d.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),a=!0),c++}vI(t,n,i)}function wI(t,e,n,r,o){let i=o.hostBindings;if(i){let s=t.hostBindingOpCodes;s===null&&(s=t.hostBindingOpCodes=[]);let a=~e.index;bI(s)!=a&&s.push(a),s.push(n,r,i)}}function bI(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function CI(t,e,n,r){let o=n.directiveStart,i=n.directiveEnd;Tu(n)&&MI(e,n,t.data[o+n.componentOffset]),t.firstCreatePass||fv(n,e),co(r,e);let s=n.initialInputs;for(let a=o;a<i;a++){let c=t.data[a],u=Pi(e,t,a,n);if(co(u,e),s!==null&&FI(e,a-o,u,c,n,s),ya(c)){let l=$o(n.index,e);l[Jn]=Pi(e,t,a,n)}}}function r_(t,e,n){let r=n.directiveStart,o=n.directiveEnd,i=n.index,s=bS();try{Lo(i);for(let a=r;a<o;a++){let c=t.data[a],u=e[a];uh(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&DI(c,u)}}finally{Lo(-1),uh(s)}}function DI(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function EI(t,e){let n=t.directiveRegistry,r=null,o=null;if(n)for(let i=0;i<n.length;i++){let s=n[i];if(Py(e,s.selectors,!1))if(r||(r=[]),ya(s))if(s.findHostDirectiveDefs!==null){let a=[];o=o||new Map,s.findHostDirectiveDefs(s,a,o),r.unshift(...a,s);let c=a.length;Sh(t,e,c)}else r.unshift(s),Sh(t,e,0);else o=o||new Map,s.findHostDirectiveDefs?.(s,r,o),r.push(s)}return r===null?null:[r,o]}function Sh(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function TI(t,e,n){if(e){let r=t.localNames=[];for(let o=0;o<e.length;o+=2){let i=n[e[o+1]];if(i==null)throw new re(-301,!1);r.push(e[o],i)}}}function SI(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;ya(e)&&(n[""]=t)}}function AI(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function II(t,e,n,r,o){t.data[r]=o;let i=o.factory||(o.factory=Ri(o.type,!0)),s=new la(i,ya(o),Gt);t.blueprint[r]=s,n[r]=s,wI(t,e,r,Xv(t,n,o.hostVars,Hi),o)}function MI(t,e,n){let r=kn(e,t),o=e_(n),i=t[ao].rendererFactory,s=16;n.signals?s=4096:n.onPush&&(s=64);let a=ju(t,Lu(t,o,null,s,r,e,null,i.createRenderer(r,n),null,null,null));t[e.index]=a}function NI(t,e,n,r,o,i){let s=kn(t,e);OI(e[wt],s,i,t.value,n,r,o)}function OI(t,e,n,r,o,i,s){if(i==null)t.removeAttribute(e,o,n);else{let a=s==null?Kh(i):s(i,r||"",o);t.setAttribute(e,o,a,n)}}function FI(t,e,n,r,o,i){let s=i[e];if(s!==null)for(let a=0;a<s.length;){let c=s[a++],u=s[a++],l=s[a++];o_(r,n,c,u,l)}}function o_(t,e,n,r,o){let i=xn(null);try{let s=t.inputTransforms;s!==null&&s.hasOwnProperty(r)&&(o=s[r].call(e,o)),t.setInput!==null?t.setInput(e,o,n,r):e[r]=o}finally{xn(i)}}function RI(t,e,n){let r=null,o=0;for(;o<n.length;){let i=n[o];if(i===0){o+=4;continue}else if(i===5){o+=2;continue}if(typeof i=="number")break;if(t.hasOwnProperty(i)){r===null&&(r=[]);let s=t[i];for(let a=0;a<s.length;a+=2)if(s[a]===e){r.push(i,s[a+1],n[o+1]);break}}o+=2}return r}function i_(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function s_(t,e){let n=t.contentQueries;if(n!==null){let r=xn(null);try{for(let o=0;o<n.length;o+=2){let i=n[o],s=n[o+1];if(s!==-1){let a=t.data[s];of(i),a.contentQueries(2,e[s],s)}}}finally{xn(r)}}}function ju(t,e){return t[ca]?t[Qg][Xn]=e:t[ca]=e,t[Qg]=e,e}function Ah(t,e,n){of(0);let r=xn(null);try{e(t,n)}finally{xn(r)}}function a_(t){return t[aa]||(t[aa]=[])}function c_(t){return t.cleanup||(t.cleanup=[])}function u_(t,e){let n=t[Ni],r=n?n.get(Cr,null):null;r&&r.handleError(e)}function Af(t,e,n,r,o){for(let i=0;i<n.length;){let s=n[i++],a=n[i++],c=e[s],u=t.data[s];o_(u,c,r,a,o)}}function kI(t,e,n){let r=Yy(e,t);TA(t[wt],r,n)}var PI=100;function VI(t,e=!0){let n=t[ao],r=n.rendererFactory,o=n.afterRenderEventManager,i=!1;i||(r.begin?.(),o?.begin());try{LI(t)}catch(s){throw e&&u_(t,s),s}finally{i||(r.end?.(),n.inlineEffectRunner?.flush(),o?.end())}}function LI(t){Ih(t,0);let e=0;for(;Ky(t);){if(e===PI)throw new re(103,!1);e++,Ih(t,1)}}function jI(t,e,n,r){let o=e[ue];if((o&256)===256)return;let i=!1;!i&&e[ao].inlineEffectRunner?.flush(),sf(e);let s=null,a=null;!i&&BI(t)&&(a=oI(e),s=cg(a));try{Qy(e),vS(t.bindingStartIndex),n!==null&&Jv(t,e,n,2,r);let c=(o&3)===3;if(!i)if(c){let d=t.preOrderCheckHooks;d!==null&&Jc(e,d,null)}else{let d=t.preOrderHooks;d!==null&&eu(e,d,0,null),Gd(e,0)}if(UI(e),l_(e,0),t.contentQueries!==null&&s_(t,e),!i)if(c){let d=t.contentCheckHooks;d!==null&&Jc(e,d)}else{let d=t.contentHooks;d!==null&&eu(e,d,1),Gd(e,1)}lI(t,e);let u=t.components;u!==null&&h_(e,u,0);let l=t.viewQuery;if(l!==null&&Ah(2,l,r),!i)if(c){let d=t.viewCheckHooks;d!==null&&Jc(e,d)}else{let d=t.viewHooks;d!==null&&eu(e,d,2),Gd(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[Wd]){for(let d of e[Wd])d();e[Wd]=null}i||(e[ue]&=-73)}catch(c){throw ua(e),c}finally{a!==null&&(ug(a,s),sI(a)),af()}}function BI(t){return t.type!==2}function l_(t,e){for(let n=Fv(t);n!==null;n=Rv(n)){n[ue]&=~Fi.HasChildViewsToRefresh;for(let r=Dn;r<n.length;r++){let o=n[r];d_(o,e)}}}function UI(t){for(let e=Fv(t);e!==null;e=Rv(e)){if(!(e[ue]&Fi.HasTransplantedViews))continue;let n=e[Oi];for(let r=0;r<n.length;r++){let o=n[r],i=o[xt];uS(o)}}}function qI(t,e,n){let r=$o(e,t);d_(r,n)}function d_(t,e){tf(t)&&Ih(t,e)}function Ih(t,e){let r=t[_e],o=t[ue],i=t[Po],s=!!(e===0&&o&16);if(s||=!!(o&64&&e===0),s||=!!(o&1024),s||=!!(i?.dirty&&Ed(i)),i&&(i.dirty=!1),t[ue]&=-9217,s)jI(r,t,r.template,t[Jn]);else if(o&8192){l_(t,1);let a=r.components;a!==null&&h_(t,a,1)}}function h_(t,e,n){for(let r=0;r<e.length;r++)qI(t,e[r],n)}function If(t){for(t[ao].changeDetectionScheduler?.notify();t;){t[ue]|=64;let e=yf(t);if(JT(t)&&!e)return t;t=e}return null}var jo=class{get rootNodes(){let e=this._lView,n=e[_e];return gu(n,e,n.firstChild,[])}constructor(e,n,r=!0){this._lView=e,this._cdRefInjectingView=n,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Jn]}set context(e){this._lView[Jn]=e}get destroyed(){return(this._lView[ue]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[xt];if(tr(e)){let n=e[au],r=n?n.indexOf(this):-1;r>-1&&(yh(e,r),lu(n,r))}this._attachedToViewContainer=!1}Lv(this._lView[_e],this._lView)}onDestroy(e){Xy(this._lView,e)}markForCheck(){If(this._cdRefInjectingView||this._lView)}detach(){this._lView[ue]&=-129}reattach(){ch(this._lView),this._lView[ue]|=128}detectChanges(){this._lView[ue]|=1024,VI(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new re(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,MA(this._lView[_e],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new re(902,!1);this._appRef=e,ch(this._lView)}},Hr=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=$I;let t=e;return t})();function $I(t){return HI(nr(),We(),(t&16)===16)}function HI(t,e,n){if(Tu(t)&&!n){let r=$o(t.index,e);return new jo(r,r)}else if(t.type&47){let r=e[er];return new jo(r,e)}return null}var f_=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=WI,e.__NG_ENV_ID__=r=>r;let t=e;return t})(),Mh=class extends f_{constructor(e){super(),this._lView=e}onDestroy(e){return Xy(this._lView,e),()=>dS(this._lView,e)}};function WI(){return new Mh(We())}var ly=new Set;function Mf(t){ly.has(t)||(ly.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}var Nh=class extends bn{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,n,r){let o=e,i=n||(()=>null),s=r;if(e&&typeof e=="object"){let c=e;o=c.next?.bind(c),i=c.error?.bind(c),s=c.complete?.bind(c)}this.__isAsync&&(i=Jd(i),o&&(o=Jd(o)),s&&(s=Jd(s)));let a=super.subscribe({next:o,error:i,complete:s});return e instanceof pt&&e.add(a),a}};function Jd(t){return e=>{setTimeout(t,void 0,e)}}var Ve=Nh;function dy(...t){}function GI(){let t=typeof Cn.requestAnimationFrame=="function",e=Cn[t?"requestAnimationFrame":"setTimeout"],n=Cn[t?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&n){let r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r);let o=n[Zone.__symbol__("OriginalDelegate")];o&&(n=o)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:n}}var Ye=class t{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Ve(!1),this.onMicrotaskEmpty=new Ve(!1),this.onStable=new Ve(!1),this.onError=new Ve(!1),typeof Zone>"u")throw new re(908,!1);Zone.assertZonePatched();let o=this;o._nesting=0,o._outer=o._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(o._inner=o._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(o._inner=o._inner.fork(Zone.longStackTraceZoneSpec)),o.shouldCoalesceEventChangeDetection=!r&&n,o.shouldCoalesceRunChangeDetection=r,o.lastRequestAnimationFrameId=-1,o.nativeRequestAnimationFrame=GI().nativeRequestAnimationFrame,ZI(o)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get("isAngularZone")===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new re(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new re(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,o){let i=this._inner,s=i.scheduleEventTask("NgZoneEvent: "+o,e,zI,dy,dy);try{return i.runTask(s,n,r)}finally{i.cancelTask(s)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}},zI={};function Nf(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function YI(t){t.isCheckStableRunning||t.lastRequestAnimationFrameId!==-1||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(Cn,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,Oh(t),t.isCheckStableRunning=!0,Nf(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),Oh(t))}function ZI(t){let e=()=>{YI(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,o,i,s,a)=>{if(QI(a))return n.invokeTask(o,i,s,a);try{return hy(t),n.invokeTask(o,i,s,a)}finally{(t.shouldCoalesceEventChangeDetection&&i.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),fy(t)}},onInvoke:(n,r,o,i,s,a,c)=>{try{return hy(t),n.invoke(o,i,s,a,c)}finally{t.shouldCoalesceRunChangeDetection&&e(),fy(t)}},onHasTask:(n,r,o,i)=>{n.hasTask(o,i),r===o&&(i.change=="microTask"?(t._hasPendingMicrotasks=i.microTask,Oh(t),Nf(t)):i.change=="macroTask"&&(t.hasPendingMacrotasks=i.macroTask))},onHandleError:(n,r,o,i)=>(n.handleError(o,i),t.runOutsideAngular(()=>t.onError.emit(i)),!1)})}function Oh(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.lastRequestAnimationFrameId!==-1?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function hy(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function fy(t){t._nesting--,Nf(t)}var Fh=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Ve,this.onMicrotaskEmpty=new Ve,this.onStable=new Ve,this.onError=new Ve}run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,o){return e.apply(n,r)}};function QI(t){return!Array.isArray(t)||t.length!==1?!1:t[0].data?.__ignore_ng_zone__===!0}function KI(t="zone.js",e){return t==="noop"?new Fh:t==="zone.js"?new Ye(e):t}var Ai=function(t){return t[t.EarlyRead=0]="EarlyRead",t[t.Write=1]="Write",t[t.MixedReadWrite=2]="MixedReadWrite",t[t.Read=3]="Read",t}(Ai||{}),XI={destroy(){}};function Of(t,e){!e&&hA(Of);let n=e?.injector??J(Pn);if(!mA(n))return XI;Mf("NgAfterNextRender");let r=n.get(p_),o=r.handler??=new kh,i=e?.phase??Ai.MixedReadWrite,s=()=>{o.unregister(c),a()},a=n.get(f_).onDestroy(s),c=new Rh(n,i,()=>{s(),t()});return o.register(c),{destroy:s}}var Rh=class{constructor(e,n,r){this.phase=n,this.callbackFn=r,this.zone=e.get(Ye),this.errorHandler=e.get(Cr,null,{optional:!0})}invoke(){try{this.zone.runOutsideAngular(this.callbackFn)}catch(e){this.errorHandler?.handleError(e)}}},kh=class{constructor(){this.executingCallbacks=!1,this.buckets={[Ai.EarlyRead]:new Set,[Ai.Write]:new Set,[Ai.MixedReadWrite]:new Set,[Ai.Read]:new Set},this.deferredCallbacks=new Set}validateBegin(){if(this.executingCallbacks)throw new re(102,!1)}register(e){(this.executingCallbacks?this.deferredCallbacks:this.buckets[e.phase]).add(e)}unregister(e){this.buckets[e.phase].delete(e),this.deferredCallbacks.delete(e)}execute(){this.executingCallbacks=!0;for(let e of Object.values(this.buckets))for(let n of e)n.invoke();this.executingCallbacks=!1;for(let e of this.deferredCallbacks)this.buckets[e.phase].add(e);this.deferredCallbacks.clear()}destroy(){for(let e of Object.values(this.buckets))e.clear();this.deferredCallbacks.clear()}},p_=(()=>{let e=class e{constructor(){this.renderDepth=0,this.handler=null,this.internalCallbacks=[]}begin(){this.handler?.validateBegin(),this.renderDepth++}end(){if(this.renderDepth--,this.renderDepth===0){for(let r of this.internalCallbacks)r();this.internalCallbacks.length=0,this.handler?.execute()}}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}};e.\u0275prov=se({token:e,providedIn:"root",factory:()=>new e});let t=e;return t})();function JI(t,e){let n=$o(e,t),r=n[_e];eM(r,n);let o=n[$r];o!==null&&n[sa]===null&&(n[sa]=wf(o,n[Ni])),Ff(r,n,n[Jn])}function eM(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function Ff(t,e,n){sf(e);try{let r=t.viewQuery;r!==null&&Ah(1,r,n);let o=t.template;o!==null&&Jv(t,e,o,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&s_(t,e),t.staticViewQueries&&Ah(2,t.viewQuery,n);let i=t.components;i!==null&&tM(e,i)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[ue]&=-5,af()}}function tM(t,e){for(let n=0;n<e.length;n++)JI(t,e[n])}function yu(t,e,n){let r=n?t.styles:null,o=n?t.classes:null,i=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")i=a;else if(i==1)o=Bg(o,a);else if(i==2){let c=a,u=e[++s];r=Bg(r,c+": "+u+";")}}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=o:t.classesWithoutHost=o}var vu=class extends Vu{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=so(e);return new Li(n,this.ngModule)}};function py(t){let e=[];for(let n in t)if(t.hasOwnProperty(n)){let r=t[n];e.push({propName:r,templateName:n})}return e}function nM(t){let e=t.toLowerCase();return e==="svg"?rS:e==="math"?oS:null}var Ph=class{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){r=Du(r);let o=this.injector.get(e,Kd,r);return o!==Kd||n===Kd?o:this.parentInjector.get(e,n,r)}},Li=class extends pu{get inputs(){let e=this.componentDef,n=e.inputTransforms,r=py(e.inputs);if(n!==null)for(let o of r)n.hasOwnProperty(o.propName)&&(o.transform=n[o.propName]);return r}get outputs(){return py(this.componentDef.outputs)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=YT(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,r,o){o=o||this.ngModule;let i=o instanceof En?o:o?.injector;i&&this.componentDef.getStandaloneInjector!==null&&(i=this.componentDef.getStandaloneInjector(i)||i);let s=i?new Ph(e,i):e,a=s.get(ha,null);if(a===null)throw new re(407,!1);let c=s.get(JA,null),u=s.get(p_,null),l=s.get(xh,null),d={rendererFactory:a,sanitizer:c,inlineEffectRunner:null,afterRenderEventManager:u,changeDetectionScheduler:l},h=a.createRenderer(null,this.componentDef),p=this.componentDef.selectors[0][0]||"div",y=r?fI(h,r,this.componentDef.encapsulation,s):Pv(h,p,nM(p)),v=512;this.componentDef.signals?v|=4096:this.componentDef.onPush||(v|=16);let _=null;y!==null&&(_=wf(y,s,!0));let x=Tf(0,null,null,1,0,null,null,null,null,null,null),I=Lu(null,x,null,v,null,null,d,h,s,null,_);sf(I);let A,L;try{let T=this.componentDef,E,w=null;T.findHostDirectiveDefs?(E=[],w=new Map,T.findHostDirectiveDefs(T,E,w),E.push(T)):E=[T];let m=rM(I,y),R=oM(m,y,T,E,I,d,h);L=Zy(x,wr),y&&aM(h,T,y,r),n!==void 0&&cM(L,this.ngContentSelectors,n),A=sM(R,T,E,w,I,[uM]),Ff(x,I,null)}finally{af()}return new Vh(this.componentType,A,$i(L,I),I,L)}},Vh=class extends wh{constructor(e,n,r,o,i){super(),this.location=r,this._rootLView=o,this._tNode=i,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new jo(o,void 0,!1),this.componentType=e}setInput(e,n){let r=this._tNode.inputs,o;if(r!==null&&(o=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let i=this._rootLView;Af(i[_e],i,o,e,n),this.previousInputValues.set(e,n);let s=$o(this._tNode.index,i);If(s)}}get injector(){return new ko(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function rM(t,e){let n=t[_e],r=wr;return t[r]=e,Wi(n,r,2,"#host",null)}function oM(t,e,n,r,o,i,s){let a=o[_e];iM(r,t,e,s);let c=null;e!==null&&(c=wf(e,o[Ni]));let u=i.rendererFactory.createRenderer(e,n),l=16;n.signals?l=4096:n.onPush&&(l=64);let d=Lu(o,e_(n),null,l,o[t.index],t,i,u,null,null,c);return a.firstCreatePass&&Sh(a,t,r.length-1),ju(o,d),o[t.index]=d}function iM(t,e,n,r){for(let o of t)e.mergedAttrs=Jh(e.mergedAttrs,o.hostAttrs);e.mergedAttrs!==null&&(yu(e,e.mergedAttrs,!0),n!==null&&Wv(r,n,e))}function sM(t,e,n,r,o,i){let s=nr(),a=o[_e],c=kn(s,o);n_(a,o,s,n,null,r);for(let l=0;l<n.length;l++){let d=s.directiveStart+l,h=Pi(o,a,d,s);co(h,o)}r_(a,o,s),c&&co(c,o);let u=Pi(o,a,s.directiveStart+s.componentOffset,s);if(t[Jn]=o[Jn]=u,i!==null)for(let l of i)l(u,e);return Cf(a,s,t),u}function aM(t,e,n,r){if(r)sh(t,n,["ng-version","17.0.8"]);else{let{attrs:o,classes:i}=ZT(e.selectors[0]);o&&sh(t,n,o),i&&i.length>0&&Hv(t,n,i.join(" "))}}function cM(t,e,n){let r=t.projection=[];for(let o=0;o<e.length;o++){let i=n[o];r.push(i!=null?Array.from(i):null)}}function uM(){let t=nr();Nu(We()[_e],t)}function xa(t,e,n){let r=t[e];return Object.is(r,n)?!1:(t[e]=n,!0)}function Gi(t,e,n,r){let o=We(),i=Au();if(xa(o,i,e)){let s=Jt(),a=cf();NI(a,o,t,e,n,r)}return Gi}function lM(t,e,n,r){return xa(t,Au(),n)?e+Kh(n)+r:Hi}function Kc(t,e){return t<<17|e<<2}function Bo(t){return t>>17&32767}function dM(t){return(t&2)==2}function hM(t,e){return t&131071|e<<17}function Lh(t){return t|2}function ji(t){return(t&131068)>>2}function eh(t,e){return t&-131069|e<<2}function fM(t){return(t&1)===1}function jh(t){return t|1}function pM(t,e,n,r,o,i){let s=i?e.classBindings:e.styleBindings,a=Bo(s),c=ji(s);t[r]=n;let u=!1,l;if(Array.isArray(n)){let d=n;l=d[1],(l===null||va(d,l)>0)&&(u=!0)}else l=n;if(o)if(c!==0){let h=Bo(t[a+1]);t[r+1]=Kc(h,a),h!==0&&(t[h+1]=eh(t[h+1],r)),t[a+1]=hM(t[a+1],r)}else t[r+1]=Kc(a,0),a!==0&&(t[a+1]=eh(t[a+1],r)),a=r;else t[r+1]=Kc(c,0),a===0?a=r:t[c+1]=eh(t[c+1],r),c=r;u&&(t[r+1]=Lh(t[r+1])),my(t,l,r,!0,i),my(t,l,r,!1,i),mM(e,l,t,r,i),s=Kc(a,c),i?e.classBindings=s:e.styleBindings=s}function mM(t,e,n,r,o){let i=o?t.residualClasses:t.residualStyles;i!=null&&typeof e=="string"&&va(i,e)>=0&&(n[r+1]=jh(n[r+1]))}function my(t,e,n,r,o){let i=t[n+1],s=e===null,a=r?Bo(i):ji(i),c=!1;for(;a!==0&&(c===!1||s);){let u=t[a],l=t[a+1];gM(u,e)&&(c=!0,t[a+1]=r?jh(l):Lh(l)),a=r?Bo(l):ji(l)}c&&(t[n+1]=r?Lh(i):jh(i))}function gM(t,e){return t===null||e==null||(Array.isArray(t)?t[1]:t)===e?!0:Array.isArray(t)&&typeof e=="string"?va(t,e)>=0:!1}function Te(t,e,n){let r=We(),o=Au();if(xa(r,o,e)){let i=Jt(),s=cf();t_(i,s,r,t,e,r[wt],n,!1)}return Te}function gy(t,e,n,r,o){let i=e.inputs,s=o?"class":"style";Af(t,n,i[s],s,r)}function Bu(t,e,n){return m_(t,e,n,!1),Bu}function Dr(t,e){return m_(t,e,null,!0),Dr}function m_(t,e,n,r){let o=We(),i=Jt(),s=_S(2);if(i.firstUpdatePass&&vM(i,t,s,r),e!==Hi&&xa(o,s,e)){let a=i.data[qi()];CM(i,a,o,o[wt],t,o[s+1]=DM(e,n),r,s)}}function yM(t,e){return e>=t.expandoStartIndex}function vM(t,e,n,r){let o=t.data;if(o[n+1]===null){let i=o[qi()],s=yM(t,n);EM(i,r)&&e===null&&!s&&(e=!1),e=_M(o,i,e,r),pM(o,i,e,n,s,r)}}function _M(t,e,n,r){let o=CS(t),i=r?e.residualClasses:e.residualStyles;if(o===null)(r?e.classBindings:e.styleBindings)===0&&(n=th(null,t,e,n,r),n=fa(n,e.attrs,r),i=null);else{let s=e.directiveStylingLast;if(s===-1||t[s]!==o)if(n=th(o,t,e,n,r),i===null){let c=xM(t,e,r);c!==void 0&&Array.isArray(c)&&(c=th(null,t,e,c[1],r),c=fa(c,e.attrs,r),wM(t,e,r,c))}else i=bM(t,e,r)}return i!==void 0&&(r?e.residualClasses=i:e.residualStyles=i),n}function xM(t,e,n){let r=n?e.classBindings:e.styleBindings;if(ji(r)!==0)return t[Bo(r)]}function wM(t,e,n,r){let o=n?e.classBindings:e.styleBindings;t[Bo(o)]=r}function bM(t,e,n){let r,o=e.directiveEnd;for(let i=1+e.directiveStylingLast;i<o;i++){let s=t[i].hostAttrs;r=fa(r,s,n)}return fa(r,e.attrs,n)}function th(t,e,n,r,o){let i=null,s=n.directiveEnd,a=n.directiveStylingLast;for(a===-1?a=n.directiveStart:a++;a<s&&(i=e[a],r=fa(r,i.hostAttrs,o),i!==t);)a++;return t!==null&&(n.directiveStylingLast=a),r}function fa(t,e,n){let r=n?1:2,o=-1;if(e!==null)for(let i=0;i<e.length;i++){let s=e[i];typeof s=="number"?o=s:o===r&&(Array.isArray(t)||(t=t===void 0?[]:["",t]),zS(t,s,n?!0:e[++i]))}return t===void 0?null:t}function CM(t,e,n,r,o,i,s,a){if(!(e.type&3))return;let c=t.data,u=c[a+1],l=fM(u)?yy(c,e,n,o,ji(u),s):void 0;if(!_u(l)){_u(i)||dM(u)&&(i=yy(c,null,n,o,a,s));let d=Yy(qi(),n);HA(r,s,d,o,i)}}function yy(t,e,n,r,o,i){let s=e===null,a;for(;o>0;){let c=t[o],u=Array.isArray(c),l=u?c[1]:c,d=l===null,h=n[o+1];h===Hi&&(h=d?Kn:void 0);let p=d?Yd(h,r):l===r?h:void 0;if(u&&!_u(p)&&(p=Yd(c,r)),_u(p)&&(a=p,s))return a;let y=t[o+1];o=s?Bo(y):ji(y)}if(e!==null){let c=i?e.residualClasses:e.residualStyles;c!=null&&(a=Yd(c,r))}return a}function _u(t){return t!==void 0}function DM(t,e){return t==null||t===""||(typeof e=="string"?t=t+e:typeof t=="object"&&(t=Wt(xf(t)))),t}function EM(t,e){return(t.flags&(e?8:16))!==0}var vU=new RegExp(`^(\\d+)*(${zA}|${GA})*(.*)`);var TM=(t,e)=>null;function vy(t,e){return TM(t,e)}function SM(t,e,n,r){let o=e.tView,s=t[ue]&4096?4096:16,a=Lu(t,o,n,s,null,e,null,null,null,r?.injector??null,r?.dehydratedView??null),c=t[e.index];a[ga]=c;let u=t[_r];return u!==null&&(a[_r]=u.createEmbeddedView(o)),Ff(o,a,n),a}function _y(t,e){return!e||e.firstChild===null||Nv(t)}function AM(t,e,n,r=!0){let o=e[_e];if(OA(o,e,t,n),r){let s=vh(n,t),a=e[wt],c=vf(a,t[Vo]);c!==null&&IA(o,t[Tn],a,e,c,s)}let i=e[sa];i!==null&&i.firstChild!==null&&(i.firstChild=null)}var ho=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=IM;let t=e;return t})();function IM(){let t=nr();return y_(t,We())}var MM=ho,g_=class extends MM{constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return $i(this._hostTNode,this._hostLView)}get injector(){return new ko(this._hostTNode,this._hostLView)}get parentInjector(){let e=uf(this._hostTNode,this._hostLView);if(lv(e)){let n=uu(e,this._hostLView),r=cu(e),o=n[_e].data[r+8];return new ko(o,n)}else return new ko(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=xy(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-Dn}createEmbeddedView(e,n,r){let o,i;typeof r=="number"?o=r:r!=null&&(o=r.index,i=r.injector);let s=vy(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(n||{},i,s);return this.insertImpl(a,o,_y(this._hostTNode,s)),a}createComponent(e,n,r,o,i){let s=e&&!$S(e),a;if(s)a=n;else{let y=n||{};a=y.index,r=y.injector,o=y.projectableNodes,i=y.environmentInjector||y.ngModuleRef}let c=s?e:new Li(so(e)),u=r||this.parentInjector;if(!i&&c.ngModule==null){let v=(s?u:this.parentInjector).get(En,null);v&&(i=v)}let l=so(c.componentType??{}),d=vy(this._lContainer,l?.id??null),h=d?.firstChild??null,p=c.create(u,o,h,i);return this.insertImpl(p.hostView,a,_y(this._hostTNode,d)),p}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){let o=e._lView;if(cS(o)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=o[xt],u=new g_(c,c[Tn],c[xt]);u.detach(u.indexOf(e))}}let i=this._adjustIndex(n),s=this._lContainer;return AM(s,o,i,r),e.attachToViewContainerRef(),wv(nh(s),i,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=xy(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),r=yh(this._lContainer,n);r&&(lu(nh(this._lContainer),n),Lv(r[_e],r))}detach(e){let n=this._adjustIndex(e,-1),r=yh(this._lContainer,n);return r&&lu(nh(this._lContainer),n)!=null?new jo(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function xy(t){return t[au]}function nh(t){return t[au]||(t[au]=[])}function y_(t,e){let n,r=e[t.index];return tr(r)?n=r:(n=i_(r,e,null,t),e[t.index]=n,ju(e,n)),OM(n,e,t,r),new g_(n,t,e)}function NM(t,e){let n=t[wt],r=n.createComment(""),o=kn(e,t),i=vf(n,o);return fu(n,i,r,LA(n,o),!1),r}var OM=kM,FM=(t,e,n)=>!1;function RM(t,e,n){return FM(t,e,n)}function kM(t,e,n,r){if(t[Vo])return;let o;n.type&8?o=br(r):o=NM(e,n),t[Vo]=o}function PM(t,e,n,r,o,i,s,a,c){let u=e.consts,l=Wi(e,t,4,s||null,ki(u,a));Sf(e,n,l,ki(u,c)),Nu(e,l);let d=l.tView=Tf(2,l,r,o,i,e.directiveRegistry,e.pipeRegistry,null,e.schemas,u,null);return e.queries!==null&&(e.queries.template(e,l),d.queries=e.queries.embeddedTView(l)),l}function ot(t,e,n,r,o,i,s,a){let c=We(),u=Jt(),l=t+wr,d=u.firstCreatePass?PM(l,u,c,e,n,r,o,i,s):u.data[l];Ho(d,!1);let h=VM(u,c,d,t);Iu()&&Pu(u,c,h,d),co(h,c);let p=i_(h,c,h,d);return c[l]=p,ju(c,p),RM(p,d,c),Su(d)&&Df(u,c,d),s!=null&&Ef(c,d,a),ot}var VM=LM;function LM(t,e,n,r){return Mu(!0),e[wt].createComment("")}function jM(t,e,n,r,o,i){let s=e.consts,a=ki(s,o),c=Wi(e,t,2,r,a);return Sf(e,n,c,ki(s,i)),c.attrs!==null&&yu(c,c.attrs,!1),c.mergedAttrs!==null&&yu(c,c.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,c),c}function Ze(t,e,n,r){let o=We(),i=Jt(),s=wr+t,a=o[wt],c=i.firstCreatePass?jM(s,i,o,e,n,r):i.data[s],u=BM(i,o,c,a,e,t);o[s]=u;let l=Su(c);return Ho(c,!0),Wv(a,u,c),(c.flags&32)!==32&&Iu()&&Pu(i,o,u,c),hS()===0&&co(u,o),fS(),l&&(Df(i,o,c),Cf(i,c,o)),r!==null&&Ef(o,c),Ze}function Qe(){let t=nr();nf()?rf():(t=t.parent,Ho(t,!1));let e=t;mS(e)&&gS(),pS();let n=Jt();return n.firstCreatePass&&(Nu(n,t),ef(t)&&n.queries.elementEnd(t)),e.classesWithoutHost!=null&&MS(e)&&gy(n,e,We(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&NS(e)&&gy(n,e,We(),e.stylesWithoutHost,!1),Qe}function bt(t,e,n,r){return Ze(t,e,n,r),Qe(),bt}var BM=(t,e,n,r,o,i)=>(Mu(!0),Pv(r,o,TS()));function UM(t,e,n,r,o){let i=e.consts,s=ki(i,r),a=Wi(e,t,8,"ng-container",s);s!==null&&yu(a,s,!0);let c=ki(i,o);return Sf(e,n,a,c),e.queries!==null&&e.queries.elementStart(e,a),a}function Vt(t,e,n){let r=We(),o=Jt(),i=t+wr,s=o.firstCreatePass?UM(i,o,r,e,n):o.data[i];Ho(s,!0);let a=qM(o,r,s,t);return r[i]=a,Iu()&&Pu(o,r,a,s),co(a,r),Su(s)&&(Df(o,r,s),Cf(o,s,r)),n!=null&&Ef(r,s),Vt}function Lt(){let t=nr(),e=Jt();return nf()?rf():(t=t.parent,Ho(t,!1)),e.firstCreatePass&&(Nu(e,t),ef(t)&&e.queries.elementEnd(t)),Lt}var qM=(t,e,n,r)=>(Mu(!0),SA(e[wt],""));function ln(){return We()}function Rf(t,e,n){let r=We(),o=Au();if(xa(r,o,e)){let i=Jt(),s=cf();t_(i,s,r,t,e,r[wt],n,!0)}return Rf}var xu="en-US";var $M=xu;function HM(t){DT(t,"Expected localeId to be defined"),typeof t=="string"&&($M=t.toLowerCase().replace(/_/g,"-"))}function zi(t){return!!t&&typeof t.then=="function"}function v_(t){return!!t&&typeof t.subscribe=="function"}function it(t,e,n,r){let o=We(),i=Jt(),s=nr();return GM(i,o,o[wt],s,t,e,r),it}function WM(t,e,n,r){let o=t.cleanup;if(o!=null)for(let i=0;i<o.length-1;i+=2){let s=o[i];if(s===n&&o[i+1]===r){let a=e[aa],c=o[i+2];return a.length>c?a[c]:null}typeof s=="string"&&(i+=2)}return null}function GM(t,e,n,r,o,i,s){let a=Su(r),u=t.firstCreatePass&&c_(t),l=e[Jn],d=a_(e),h=!0;if(r.type&3||s){let v=kn(r,e),_=s?s(v):v,x=d.length,I=s?L=>s(br(L[r.index])):r.index,A=null;if(!s&&a&&(A=WM(t,e,o,r.index)),A!==null){let L=A.__ngLastListenerFn__||A;L.__ngNextListenerFn__=i,A.__ngLastListenerFn__=i,h=!1}else{i=by(r,e,l,i,!1);let L=n.listen(_,o,i);d.push(i,L),u&&u.push(o,I,x,x+1)}}else i=by(r,e,l,i,!1);let p=r.outputs,y;if(h&&p!==null&&(y=p[o])){let v=y.length;if(v)for(let _=0;_<v;_+=2){let x=y[_],I=y[_+1],T=e[x][I].subscribe(i),E=d.length;d.push(i,T),u&&u.push(o,r.index,E,-(E+1))}}}function wy(t,e,n,r){try{return yr(6,e,n),n(r)!==!1}catch(o){return u_(t,o),!1}finally{yr(7,e,n)}}function by(t,e,n,r,o){return function i(s){if(s===Function)return r;let a=t.componentOffset>-1?$o(t.index,e):e;If(a);let c=wy(e,n,r,s),u=i.__ngNextListenerFn__;for(;u;)c=wy(e,n,u,s)&&c,u=u.__ngNextListenerFn__;return o&&c===!1&&s.preventDefault(),c}}function ye(t=1){return ES(t)}function zM(t,e){let n=null,r=$T(t);for(let o=0;o<e.length;o++){let i=e[o];if(i==="*"){n=o;continue}if(r===null?Py(t,i,!0):GT(r,i))return o}return n}function __(t){let e=We()[er][Tn];if(!e.projection){let n=t?t.length:1,r=e.projection=bv(n,null),o=r.slice(),i=e.child;for(;i!==null;){let s=t?zM(i,t):0;s!==null&&(o[s]?o[s].projectionNext=i:r[s]=i,o[s]=i),i=i.next}}}function x_(t,e=0,n){let r=We(),o=Jt(),i=Wi(o,wr+t,16,null,n||null);i.projection===null&&(i.projection=e),rf(),(!r[sa]||ev())&&(i.flags&32)!==32&&qA(o,r,i)}function jt(t,e=""){let n=We(),r=Jt(),o=t+wr,i=r.firstCreatePass?Wi(r,o,1,e,null):r.data[o],s=YM(r,n,i,e,t);n[o]=s,Iu()&&Pu(r,n,s,i),Ho(i,!1)}var YM=(t,e,n,r,o)=>(Mu(!0),EA(e[wt],r));function kf(t){return Sn("",t,""),kf}function Sn(t,e,n){let r=We(),o=lM(r,t,e,n);return o!==Hi&&kI(r,qi(),o),Sn}var uo=class{},pa=class{};var wu=class extends uo{constructor(e,n,r){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new vu(this);let o=By(e);this._bootstrapComponents=Mv(o.bootstrap),this._r3Injector=Av(e,n,[{provide:uo,useValue:this},{provide:Vu,useValue:this.componentFactoryResolver},...r],Wt(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},bu=class extends pa{constructor(e){super(),this.moduleType=e}create(e){return new wu(this.moduleType,e,[])}};function ZM(t,e,n){return new wu(t,e,n)}var Bh=class extends uo{constructor(e){super(),this.componentFactoryResolver=new vu(this),this.instance=null;let n=new da([...e.providers,{provide:uo,useValue:this},{provide:Vu,useValue:this.componentFactoryResolver}],e.parent||ff(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Uu(t,e,n=null){return new Bh({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}var QM=(()=>{let e=class e{constructor(r){this._injector=r,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(r){if(!r.standalone)return null;if(!this.cachedInjectors.has(r)){let o=Ev(!1,r.type),i=o.length>0?Uu([o],this._injector,`Standalone[${r.type.name}]`):null;this.cachedInjectors.set(r,i)}return this.cachedInjectors.get(r)}ngOnDestroy(){try{for(let r of this.cachedInjectors.values())r!==null&&r.destroy()}finally{this.cachedInjectors.clear()}}};e.\u0275prov=se({token:e,providedIn:"environment",factory:()=>new e(ie(En))});let t=e;return t})();function ct(t){Mf("NgStandalone"),t.getStandaloneInjector=e=>e.get(QM).getOrCreateStandaloneInjector(t)}function KM(){return this._results[Symbol.iterator]()}var Uh=class t{get changes(){return this._changes??=new Ve}constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;let n=t.prototype;n[Symbol.iterator]||(n[Symbol.iterator]=KM)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,n){return this._results.reduce(e,n)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,n){this.dirty=!1;let r=WS(e);(this._changesDetected=!HS(this._results,r,n))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}},Uo=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=eN;let t=e;return t})(),XM=Uo,JM=class extends XM{constructor(e,n,r){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,n){return this.createEmbeddedViewImpl(e,n)}createEmbeddedViewImpl(e,n,r){let o=SM(this._declarationLView,this._declarationTContainer,e,{injector:n,dehydratedView:r});return new jo(o)}};function eN(){return Pf(nr(),We())}function Pf(t,e){return t.type&4?new JM(e,t,$i(t,e)):null}var qh=class t{constructor(e){this.queryList=e,this.matches=null}clone(){return new t(this.queryList)}setDirty(){this.queryList.setDirty()}},$h=class t{constructor(e=[]){this.queries=e}createEmbeddedView(e){let n=e.queries;if(n!==null){let r=e.contentQueries!==null?e.contentQueries[0]:n.length,o=[];for(let i=0;i<r;i++){let s=n.getByIndex(i),a=this.queries[s.indexInDeclarationView];o.push(a.clone())}return new t(o)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let n=0;n<this.queries.length;n++)b_(e,n).matches!==null&&this.queries[n].setDirty()}},Hh=class{constructor(e,n,r=null){this.predicate=e,this.flags=n,this.read=r}},Wh=class t{constructor(e=[]){this.queries=e}elementStart(e,n){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,n)}elementEnd(e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementEnd(e)}embeddedTView(e){let n=null;for(let r=0;r<this.length;r++){let o=n!==null?n.length:0,i=this.getByIndex(r).embeddedTView(e,o);i&&(i.indexInDeclarationView=r,n!==null?n.push(i):n=[i])}return n!==null?new t(n):null}template(e,n){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,n)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},Gh=class t{constructor(e,n=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=n}elementStart(e,n){this.isApplyingToNode(n)&&this.matchTNode(e,n)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,n){this.elementStart(e,n)}embeddedTView(e,n){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,n),new t(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let n=this._declarationNodeIndex,r=e.parent;for(;r!==null&&r.type&8&&r.index!==n;)r=r.parent;return n===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(e,n){let r=this.metadata.predicate;if(Array.isArray(r))for(let o=0;o<r.length;o++){let i=r[o];this.matchTNodeWithReadOption(e,n,tN(n,i)),this.matchTNodeWithReadOption(e,n,tu(n,e,i,!1,!1))}else r===Uo?n.type&4&&this.matchTNodeWithReadOption(e,n,-1):this.matchTNodeWithReadOption(e,n,tu(n,e,r,!1,!1))}matchTNodeWithReadOption(e,n,r){if(r!==null){let o=this.metadata.read;if(o!==null)if(o===Vn||o===ho||o===Uo&&n.type&4)this.addMatch(n.index,-2);else{let i=tu(n,e,o,!1,!1);i!==null&&this.addMatch(n.index,i)}else this.addMatch(n.index,r)}}addMatch(e,n){this.matches===null?this.matches=[e,n]:this.matches.push(e,n)}};function tN(t,e){let n=t.localNames;if(n!==null){for(let r=0;r<n.length;r+=2)if(n[r]===e)return n[r+1]}return null}function nN(t,e){return t.type&11?$i(t,e):t.type&4?Pf(t,e):null}function rN(t,e,n,r){return n===-1?nN(e,t):n===-2?oN(t,e,r):Pi(t,t[_e],n,e)}function oN(t,e,n){if(n===Vn)return $i(e,t);if(n===Uo)return Pf(e,t);if(n===ho)return y_(e,t)}function w_(t,e,n,r){let o=e[_r].queries[r];if(o.matches===null){let i=t.data,s=n.matches,a=[];for(let c=0;c<s.length;c+=2){let u=s[c];if(u<0)a.push(null);else{let l=i[u];a.push(rN(e,l,s[c+1],n.metadata.read))}}o.matches=a}return o.matches}function zh(t,e,n,r){let o=t.queries.getByIndex(n),i=o.matches;if(i!==null){let s=w_(t,e,o,n);for(let a=0;a<i.length;a+=2){let c=i[a];if(c>0)r.push(s[a/2]);else{let u=i[a+1],l=e[-c];for(let d=Dn;d<l.length;d++){let h=l[d];h[ga]===h[xt]&&zh(h[_e],h,u,r)}if(l[Oi]!==null){let d=l[Oi];for(let h=0;h<d.length;h++){let p=d[h];zh(p[_e],p,u,r)}}}}}return r}function wa(t){let e=We(),n=Jt(),r=nv();of(r+1);let o=b_(n,r);if(t.dirty&&aS(e)===((o.metadata.flags&2)===2)){if(o.matches===null)t.reset([]);else{let i=o.crossesNgTemplate?zh(n,e,r,[]):w_(n,e,o,r);t.reset(i,XA),t.notifyOnChanges()}return!0}return!1}function qu(t,e,n){let r=Jt();r.firstCreatePass&&(aN(r,new Hh(t,e,n),-1),(e&2)===2&&(r.staticViewQueries=!0)),sN(r,We(),e)}function ba(){return iN(We(),nv())}function iN(t,e){return t[_r].queries[e].queryList}function sN(t,e,n){let r=new Uh((n&4)===4);gI(t,e,r,r.destroy),e[_r]===null&&(e[_r]=new $h),e[_r].queries.push(new qh(r))}function aN(t,e,n){t.queries===null&&(t.queries=new Wh),t.queries.track(new Gh(e,n))}function b_(t,e){return t.queries.getByIndex(e)}var Xc=null;function cN(t){Xc!==null&&(t.defaultEncapsulation!==Xc.defaultEncapsulation||t.preserveWhitespaces!==Xc.preserveWhitespaces)||(Xc=t)}var $u=(()=>{let e=class e{log(r){console.log(r)}warn(r){console.warn(r)}};e.\u0275fac=function(o){return new(o||e)},e.\u0275prov=se({token:e,factory:e.\u0275fac,providedIn:"platform"});let t=e;return t})(),Yh=class{constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},Hu=(()=>{let e=class e{compileModuleSync(r){return new bu(r)}compileModuleAsync(r){return Promise.resolve(this.compileModuleSync(r))}compileModuleAndAllComponentsSync(r){let o=this.compileModuleSync(r),i=By(r),s=Mv(i.declarations).reduce((a,c)=>{let u=so(c);return u&&a.push(new Li(u)),a},[]);return new Yh(o,s)}compileModuleAndAllComponentsAsync(r){return Promise.resolve(this.compileModuleAndAllComponentsSync(r))}clearCache(){}clearCacheFor(r){}getModuleId(r){}};e.\u0275fac=function(o){return new(o||e)},e.\u0275prov=se({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),uN=new he("compilerOptions");var Wu=(()=>{let e=class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new Pt(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let r=this.taskId++;return this.pendingTasks.add(r),r}remove(r){this.pendingTasks.delete(r),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}};e.\u0275fac=function(o){return new(o||e)},e.\u0275prov=se({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var Vf=new he(""),Ca=new he(""),Gu=(()=>{let e=class e{constructor(r,o,i){this._ngZone=r,this.registry=o,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,Lf||(lN(i),i.addToWindow(o)),this._watchAngularEvents(),r.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Ye.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&this._pendingCount===0&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;this._callbacks.length!==0;){let r=this._callbacks.pop();clearTimeout(r.timeoutId),r.doneCb(this._didWork)}this._didWork=!1});else{let r=this.getPendingTasks();this._callbacks=this._callbacks.filter(o=>o.updateCb&&o.updateCb(r)?(clearTimeout(o.timeoutId),!1):!0),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(r=>({source:r.source,creationLocation:r.creationLocation,data:r.data})):[]}addCallback(r,o,i){let s=-1;o&&o>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(a=>a.timeoutId!==s),r(this._didWork,this.getPendingTasks())},o)),this._callbacks.push({doneCb:r,timeoutId:s,updateCb:i})}whenStable(r,o,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(r,o,i),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(r){this.registry.registerApplication(r,this)}unregisterApplication(r){this.registry.unregisterApplication(r)}findProviders(r,o,i){return[]}};e.\u0275fac=function(o){return new(o||e)(ie(Ye),ie(zu),ie(Ca))},e.\u0275prov=se({token:e,factory:e.\u0275fac});let t=e;return t})(),zu=(()=>{let e=class e{constructor(){this._applications=new Map}registerApplication(r,o){this._applications.set(r,o)}unregisterApplication(r){this._applications.delete(r)}unregisterAllApplications(){this._applications.clear()}getTestability(r){return this._applications.get(r)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(r,o=!0){return Lf?.findTestabilityInTree(this,r,o)??null}};e.\u0275fac=function(o){return new(o||e)},e.\u0275prov=se({token:e,factory:e.\u0275fac,providedIn:"platform"});let t=e;return t})();function lN(t){Lf=t}var Lf,Yu=new he("Application Initializer"),C_=(()=>{let e=class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,o)=>{this.resolve=r,this.reject=o}),this.appInits=J(Yu,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let r=[];for(let i of this.appInits){let s=i();if(zi(s))r.push(s);else if(v_(s)){let a=new Promise((c,u)=>{s.subscribe({complete:c,error:u})});r.push(a)}}let o=()=>{this.done=!0,this.resolve()};Promise.all(r).then(()=>{o()}).catch(i=>{this.reject(i)}),r.length===0&&o(),this.initialized=!0}};e.\u0275fac=function(o){return new(o||e)},e.\u0275prov=se({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),jf=new he("appBootstrapListener");function dN(t,e,n){let r=new bu(n);return Promise.resolve(r)}function hN(){dg(()=>{throw new re(600,!1)})}function fN(t){return t.isBoundToModule}function pN(t,e,n){try{let r=n();return zi(r)?r.catch(o=>{throw e.runOutsideAngular(()=>t.handleError(o)),o}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}function D_(t,e){return Array.isArray(e)?e.reduce(D_,t):C(C({},t),e)}var Yi=(()=>{let e=class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=J(Yv),this.componentTypes=[],this.components=[],this.isStable=J(Wu).hasPendingTasks.pipe(Ie(r=>!r)),this._injector=J(En)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(r,o){let i=r instanceof pu;if(!this._injector.get(C_).done){let y="Cannot bootstrap as there are still asynchronous initializers running."+(!i&&jy(r)?"":" Bootstrap components in the `ngDoBootstrap` method of the root module.");throw new re(405,!1)}let a;i?a=r:a=this._injector.get(Vu).resolveComponentFactory(r),this.componentTypes.push(a.componentType);let c=fN(a)?void 0:this._injector.get(uo),u=o||a.selector,l=a.create(Pn.NULL,[],u,c),d=l.location.nativeElement,h=l.injector.get(Vf,null);return h?.registerApplication(d),l.onDestroy(()=>{this.detachView(l.hostView),ou(this.components,l),h?.unregisterApplication(d)}),this._loadComponent(l),l}tick(){if(this._runningTick)throw new re(101,!1);try{this._runningTick=!0;for(let r of this._views)r.detectChanges()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1}}attachView(r){let o=r;this._views.push(o),o.attachToAppRef(this)}detachView(r){let o=r;ou(this._views,o),o.detachFromAppRef()}_loadComponent(r){this.attachView(r.hostView),this.tick(),this.components.push(r);let o=this._injector.get(jf,[]);[...this._bootstrapListeners,...o].forEach(i=>i(r))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(r=>r()),this._views.slice().forEach(r=>r.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(r){return this._destroyListeners.push(r),()=>ou(this._destroyListeners,r)}destroy(){if(this._destroyed)throw new re(406,!1);let r=this._injector;r.destroy&&!r.destroyed&&r.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}};e.\u0275fac=function(o){return new(o||e)},e.\u0275prov=se({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function ou(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function Cy(t){for(let e=t.length-1;e>=0;e--)if(t[e]!==void 0)return t[e]}var mN=(()=>{let e=class e{constructor(){this.zone=J(Ye),this.applicationRef=J(Yi)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}};e.\u0275fac=function(o){return new(o||e)},e.\u0275prov=se({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function gN(t){return[{provide:Ye,useFactory:t},{provide:Vi,multi:!0,useFactory:()=>{let e=J(mN,{optional:!0});return()=>e.initialize()}},{provide:Vi,multi:!0,useFactory:()=>{let e=J(_N);return()=>{e.initialize()}}},{provide:Yv,useFactory:yN}]}function yN(){let t=J(Ye),e=J(Cr);return n=>t.runOutsideAngular(()=>e.handleError(n))}function vN(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var _N=(()=>{let e=class e{constructor(){this.subscription=new pt,this.initialized=!1,this.zone=J(Ye),this.pendingTasks=J(Wu)}initialize(){if(this.initialized)return;this.initialized=!0;let r=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(r=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Ye.assertNotInAngularZone(),queueMicrotask(()=>{r!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(r),r=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Ye.assertInAngularZone(),r??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}};e.\u0275fac=function(o){return new(o||e)},e.\u0275prov=se({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function xN(){return typeof $localize<"u"&&$localize.locale||xu}var Bf=new he("LocaleId",{providedIn:"root",factory:()=>J(Bf,ge.Optional|ge.SkipSelf)||xN()});var E_=new he("PlatformDestroyListeners"),T_=(()=>{let e=class e{constructor(r){this._injector=r,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(r,o){let i=KI(o?.ngZone,vN({eventCoalescing:o?.ngZoneEventCoalescing,runCoalescing:o?.ngZoneRunCoalescing}));return i.run(()=>{let s=ZM(r.moduleType,this.injector,gN(()=>i)),a=s.injector.get(Cr,null);return i.runOutsideAngular(()=>{let c=i.onError.subscribe({next:u=>{a.handleError(u)}});s.onDestroy(()=>{ou(this._modules,s),c.unsubscribe()})}),pN(a,i,()=>{let c=s.injector.get(C_);return c.runInitializers(),c.donePromise.then(()=>{let u=s.injector.get(Bf,xu);return HM(u||xu),this._moduleDoBootstrap(s),s})})})}bootstrapModule(r,o=[]){let i=D_({},o);return dN(this.injector,i,r).then(s=>this.bootstrapModuleFactory(s,i))}_moduleDoBootstrap(r){let o=r.injector.get(Yi);if(r._bootstrapComponents.length>0)r._bootstrapComponents.forEach(i=>o.bootstrap(i));else if(r.instance.ngDoBootstrap)r.instance.ngDoBootstrap(o);else throw new re(-403,!1);this._modules.push(r)}onDestroy(r){this._destroyListeners.push(r)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new re(404,!1);this._modules.slice().forEach(o=>o.destroy()),this._destroyListeners.forEach(o=>o());let r=this._injector.get(E_,null);r&&(r.forEach(o=>o()),r.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}};e.\u0275fac=function(o){return new(o||e)(ie(Pn))},e.\u0275prov=se({token:e,factory:e.\u0275fac,providedIn:"platform"});let t=e;return t})(),ra=null,S_=new he("AllowMultipleToken");function wN(t){if(ra&&!ra.get(S_,!1))throw new re(400,!1);hN(),ra=t;let e=t.get(T_);return DN(t),e}function Uf(t,e,n=[]){let r=`Platform: ${e}`,o=new he(r);return(i=[])=>{let s=A_();if(!s||s.injector.get(S_,!1)){let a=[...n,...i,{provide:o,useValue:!0}];t?t(a):wN(bN(a,r))}return CN(o)}}function bN(t=[],e){return Pn.create({name:e,providers:[{provide:Ru,useValue:"platform"},{provide:E_,useValue:new Set([()=>ra=null])},...t]})}function CN(t){let e=A_();if(!e)throw new re(401,!1);return e}function A_(){return ra?.get(T_)??null}function DN(t){t.get(pf,null)?.forEach(n=>n())}var I_=Uf(null,"core",[]),M_=(()=>{let e=class e{constructor(r){}};e.\u0275fac=function(o){return new(o||e)(ie(Yi))},e.\u0275mod=un({type:e}),e.\u0275inj=cn({});let t=e;return t})();function N_(t){let e=so(t);if(!e)return null;let n=new Li(e);return{get selector(){return n.selector},get type(){return n.componentType},get inputs(){return n.inputs},get outputs(){return n.outputs},get ngContentSelectors(){return n.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var qf=null;function Go(){return qf}function V_(t){qf||(qf=t)}var Zu=class{},en=new he("DocumentToken"),Yf=(()=>{let e=class e{historyGo(r){throw new Error("Not implemented")}};e.\u0275fac=function(o){return new(o||e)},e.\u0275prov=se({token:e,factory:()=>(()=>J(SN))(),providedIn:"platform"});let t=e;return t})(),L_=new he("Location Initialized"),SN=(()=>{let e=class e extends Yf{constructor(){super(),this._doc=J(en),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Go().getBaseHref(this._doc)}onPopState(r){let o=Go().getGlobalEventTarget(this._doc,"window");return o.addEventListener("popstate",r,!1),()=>o.removeEventListener("popstate",r)}onHashChange(r){let o=Go().getGlobalEventTarget(this._doc,"window");return o.addEventListener("hashchange",r,!1),()=>o.removeEventListener("hashchange",r)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(r){this._location.pathname=r}pushState(r,o,i){this._history.pushState(r,o,i)}replaceState(r,o,i){this._history.replaceState(r,o,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(r=0){this._history.go(r)}getState(){return this._history.state}};e.\u0275fac=function(o){return new(o||e)},e.\u0275prov=se({token:e,factory:()=>(()=>new e)(),providedIn:"platform"});let t=e;return t})();function Zf(t,e){if(t.length==0)return e;if(e.length==0)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,n==2?t+e.substring(1):n==1?t+e:t+"/"+e}function O_(t){let e=t.match(/#|\?|$/),n=e&&e.index||t.length,r=n-(t[n-1]==="/"?1:0);return t.slice(0,r)+t.slice(n)}function Wr(t){return t&&t[0]!=="?"?"?"+t:t}var zo=(()=>{let e=class e{historyGo(r){throw new Error("Not implemented")}};e.\u0275fac=function(o){return new(o||e)},e.\u0275prov=se({token:e,factory:()=>(()=>J(Qf))(),providedIn:"root"});let t=e;return t})(),j_=new he("appBaseHref"),Qf=(()=>{let e=class e extends zo{constructor(r,o){super(),this._platformLocation=r,this._removeListenerFns=[],this._baseHref=o??this._platformLocation.getBaseHrefFromDOM()??J(en).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}prepareExternalUrl(r){return Zf(this._baseHref,r)}path(r=!1){let o=this._platformLocation.pathname+Wr(this._platformLocation.search),i=this._platformLocation.hash;return i&&r?`${o}${i}`:o}pushState(r,o,i,s){let a=this.prepareExternalUrl(i+Wr(s));this._platformLocation.pushState(r,o,a)}replaceState(r,o,i,s){let a=this.prepareExternalUrl(i+Wr(s));this._platformLocation.replaceState(r,o,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){this._platformLocation.historyGo?.(r)}};e.\u0275fac=function(o){return new(o||e)(ie(Yf),ie(j_,8))},e.\u0275prov=se({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),B_=(()=>{let e=class e extends zo{constructor(r,o){super(),this._platformLocation=r,this._baseHref="",this._removeListenerFns=[],o!=null&&(this._baseHref=o)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}path(r=!1){let o=this._platformLocation.hash;return o==null&&(o="#"),o.length>0?o.substring(1):o}prepareExternalUrl(r){let o=Zf(this._baseHref,r);return o.length>0?"#"+o:o}pushState(r,o,i,s){let a=this.prepareExternalUrl(i+Wr(s));a.length==0&&(a=this._platformLocation.pathname),this._platformLocation.pushState(r,o,a)}replaceState(r,o,i,s){let a=this.prepareExternalUrl(i+Wr(s));a.length==0&&(a=this._platformLocation.pathname),this._platformLocation.replaceState(r,o,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){this._platformLocation.historyGo?.(r)}};e.\u0275fac=function(o){return new(o||e)(ie(Yf),ie(j_,8))},e.\u0275prov=se({token:e,factory:e.\u0275fac});let t=e;return t})(),Zi=(()=>{let e=class e{constructor(r){this._subject=new Ve,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=r;let o=this._locationStrategy.getBaseHref();this._basePath=MN(O_(F_(o))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(r=!1){return this.normalize(this._locationStrategy.path(r))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(r,o=""){return this.path()==this.normalize(r+Wr(o))}normalize(r){return e.stripTrailingSlash(IN(this._basePath,F_(r)))}prepareExternalUrl(r){return r&&r[0]!=="/"&&(r="/"+r),this._locationStrategy.prepareExternalUrl(r)}go(r,o="",i=null){this._locationStrategy.pushState(i,"",r,o),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+Wr(o)),i)}replaceState(r,o="",i=null){this._locationStrategy.replaceState(i,"",r,o),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+Wr(o)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(r=0){this._locationStrategy.historyGo?.(r)}onUrlChange(r){return this._urlChangeListeners.push(r),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(o=>{this._notifyUrlChangeListeners(o.url,o.state)})),()=>{let o=this._urlChangeListeners.indexOf(r);this._urlChangeListeners.splice(o,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(r="",o){this._urlChangeListeners.forEach(i=>i(r,o))}subscribe(r,o,i){return this._subject.subscribe({next:r,error:o,complete:i})}};e.normalizeQueryParams=Wr,e.joinWithSlash=Zf,e.stripTrailingSlash=O_,e.\u0275fac=function(o){return new(o||e)(ie(zo))},e.\u0275prov=se({token:e,factory:()=>AN(),providedIn:"root"});let t=e;return t})();function AN(){return new Zi(ie(zo))}function IN(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function F_(t){return t.replace(/\/index.html$/,"")}function MN(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}function U_(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let r=n.indexOf("="),[o,i]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(o.trim()===e)return decodeURIComponent(i)}return null}var $f=class{constructor(e,n,r,o){this.$implicit=e,this.ngForOf=n,this.index=r,this.count=o}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},Ln=(()=>{let e=class e{set ngForOf(r){this._ngForOf=r,this._ngForOfDirty=!0}set ngForTrackBy(r){this._trackByFn=r}get ngForTrackBy(){return this._trackByFn}constructor(r,o,i){this._viewContainer=r,this._template=o,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(r){r&&(this._template=r)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let r=this._ngForOf;if(!this._differ&&r)if(!1)try{}catch{}else this._differ=this._differs.find(r).create(this.ngForTrackBy)}if(this._differ){let r=this._differ.diff(this._ngForOf);r&&this._applyChanges(r)}}_applyChanges(r){let o=this._viewContainer;r.forEachOperation((i,s,a)=>{if(i.previousIndex==null)o.createEmbeddedView(this._template,new $f(i.item,this._ngForOf,-1,-1),a===null?void 0:a);else if(a==null)o.remove(s===null?void 0:s);else if(s!==null){let c=o.get(s);o.move(c,a),R_(c,i)}});for(let i=0,s=o.length;i<s;i++){let c=o.get(i).context;c.index=i,c.count=s,c.ngForOf=this._ngForOf}r.forEachIdentityChange(i=>{let s=o.get(i.currentIndex);R_(s,i)})}static ngTemplateContextGuard(r,o){return!0}};e.\u0275fac=function(o){return new(o||e)(Gt(ho),Gt(Uo),Gt(bf))},e.\u0275dir=Bi({type:e,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0});let t=e;return t})();function R_(t,e){t.context.$implicit=e.item}var Qi=(()=>{let e=class e{constructor(r,o){this._viewContainer=r,this._context=new Hf,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=o}set ngIf(r){this._context.$implicit=this._context.ngIf=r,this._updateView()}set ngIfThen(r){k_("ngIfThen",r),this._thenTemplateRef=r,this._thenViewRef=null,this._updateView()}set ngIfElse(r){k_("ngIfElse",r),this._elseTemplateRef=r,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(r,o){return!0}};e.\u0275fac=function(o){return new(o||e)(Gt(ho),Gt(Uo))},e.\u0275dir=Bi({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0});let t=e;return t})(),Hf=class{constructor(){this.$implicit=null,this.ngIf=null}};function k_(t,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${t} must be a TemplateRef, but received '${Wt(e)}'.`)}var Nt=(()=>{let e=class e{};e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=un({type:e}),e.\u0275inj=cn({});let t=e;return t})(),q_="browser",NN="server";function Kf(t){return t===NN}var $_=(()=>{let e=class e{};e.\u0275prov=se({token:e,providedIn:"root",factory:()=>new Wf(ie(en),window)});let t=e;return t})(),Wf=class{constructor(e,n){this.document=e,this.window=n,this.offset=()=>[0,0]}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;let n=ON(this.document,e);n&&(this.scrollToElement(n),n.focus())}setHistoryScrollRestoration(e){this.supportsScrolling()&&(this.window.history.scrollRestoration=e)}scrollToElement(e){let n=e.getBoundingClientRect(),r=n.left+this.window.pageXOffset,o=n.top+this.window.pageYOffset,i=this.offset();this.window.scrollTo(r-i[0],o-i[1])}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}};function ON(t,e){let n=t.getElementById(e)||t.getElementsByName(e)[0];if(n)return n;if(typeof t.createTreeWalker=="function"&&t.body&&typeof t.body.attachShadow=="function"){let r=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT),o=r.currentNode;for(;o;){let i=o.shadowRoot;if(i){let s=i.getElementById(e)||i.querySelector(`[name="${e}"]`);if(s)return s}o=r.nextNode()}}return null}var Qu=class{};var ep=class extends Zu{constructor(){super(...arguments),this.supportsDOMEvents=!0}},tp=class t extends ep{static makeCurrent(){V_(new t)}onAndCancel(e,n,r){return e.addEventListener(n,r),()=>{e.removeEventListener(n,r)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=RN();return n==null?null:kN(n)}resetBaseElement(){Da=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return U_(document.cookie,e)}},Da=null;function RN(){return Da=Da||document.querySelector("base"),Da?Da.getAttribute("href"):null}function kN(t){return new URL(t,document.baseURI).pathname}var np=class{addToWindow(e){Cn.getAngularTestability=(r,o=!0)=>{let i=e.findTestabilityInTree(r,o);if(i==null)throw new re(5103,!1);return i},Cn.getAllAngularTestabilities=()=>e.getAllTestabilities(),Cn.getAllAngularRootElements=()=>e.getAllRootElements();let n=r=>{let o=Cn.getAllAngularTestabilities(),i=o.length,s=!1,a=function(c){s=s||c,i--,i==0&&r(s)};o.forEach(c=>{c.whenStable(a)})};Cn.frameworkStabilizers||(Cn.frameworkStabilizers=[]),Cn.frameworkStabilizers.push(n)}findTestabilityInTree(e,n,r){if(n==null)return null;let o=e.getTestability(n);return o??(r?Go().isShadowRoot(n)?this.findTestabilityInTree(e,n.host,!0):this.findTestabilityInTree(e,n.parentElement,!0):null)}},PN=(()=>{let e=class e{build(){return new XMLHttpRequest}};e.\u0275fac=function(o){return new(o||e)},e.\u0275prov=se({token:e,factory:e.\u0275fac});let t=e;return t})(),rp=new he("EventManagerPlugins"),z_=(()=>{let e=class e{constructor(r,o){this._zone=o,this._eventNameToPlugin=new Map,r.forEach(i=>{i.manager=this}),this._plugins=r.slice().reverse()}addEventListener(r,o,i){return this._findPluginFor(o).addEventListener(r,o,i)}getZone(){return this._zone}_findPluginFor(r){let o=this._eventNameToPlugin.get(r);if(o)return o;if(o=this._plugins.find(s=>s.supports(r)),!o)throw new re(5101,!1);return this._eventNameToPlugin.set(r,o),o}};e.\u0275fac=function(o){return new(o||e)(ie(rp),ie(Ye))},e.\u0275prov=se({token:e,factory:e.\u0275fac});let t=e;return t})(),Ku=class{constructor(e){this._doc=e}},Xf="ng-app-id",Y_=(()=>{let e=class e{constructor(r,o,i,s={}){this.doc=r,this.appId=o,this.nonce=i,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Kf(s),this.resetHostNodes()}addStyles(r){for(let o of r)this.changeUsageCount(o,1)===1&&this.onStyleAdded(o)}removeStyles(r){for(let o of r)this.changeUsageCount(o,-1)<=0&&this.onStyleRemoved(o)}ngOnDestroy(){let r=this.styleNodesInDOM;r&&(r.forEach(o=>o.remove()),r.clear());for(let o of this.getAllStyles())this.onStyleRemoved(o);this.resetHostNodes()}addHost(r){this.hostNodes.add(r);for(let o of this.getAllStyles())this.addStyleToHost(r,o)}removeHost(r){this.hostNodes.delete(r)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(r){for(let o of this.hostNodes)this.addStyleToHost(o,r)}onStyleRemoved(r){let o=this.styleRef;o.get(r)?.elements?.forEach(i=>i.remove()),o.delete(r)}collectServerRenderedStyles(){let r=this.doc.head?.querySelectorAll(`style[${Xf}="${this.appId}"]`);if(r?.length){let o=new Map;return r.forEach(i=>{i.textContent!=null&&o.set(i.textContent,i)}),o}return null}changeUsageCount(r,o){let i=this.styleRef;if(i.has(r)){let s=i.get(r);return s.usage+=o,s.usage}return i.set(r,{usage:o,elements:[]}),o}getStyleElement(r,o){let i=this.styleNodesInDOM,s=i?.get(o);if(s?.parentNode===r)return i.delete(o),s.removeAttribute(Xf),s;{let a=this.doc.createElement("style");return this.nonce&&a.setAttribute("nonce",this.nonce),a.textContent=o,this.platformIsServer&&a.setAttribute(Xf,this.appId),r.appendChild(a),a}}addStyleToHost(r,o){let i=this.getStyleElement(r,o),s=this.styleRef,a=s.get(o)?.elements;a?a.push(i):s.set(o,{elements:[i],usage:1})}resetHostNodes(){let r=this.hostNodes;r.clear(),r.add(this.doc.head)}};e.\u0275fac=function(o){return new(o||e)(ie(en),ie(ku),ie(mf,8),ie(Wo))},e.\u0275prov=se({token:e,factory:e.\u0275fac});let t=e;return t})(),Jf={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},ip=/%COMP%/g,Z_="%COMP%",VN=`_nghost-${Z_}`,LN=`_ngcontent-${Z_}`,jN=!0,BN=new he("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>jN});function UN(t){return LN.replace(ip,t)}function qN(t){return VN.replace(ip,t)}function Q_(t,e){return e.map(n=>n.replace(ip,t))}var H_=(()=>{let e=class e{constructor(r,o,i,s,a,c,u,l=null){this.eventManager=r,this.sharedStylesHost=o,this.appId=i,this.removeStylesOnCompDestroy=s,this.doc=a,this.platformId=c,this.ngZone=u,this.nonce=l,this.rendererByCompId=new Map,this.platformIsServer=Kf(c),this.defaultRenderer=new Ea(r,a,u,this.platformIsServer)}createRenderer(r,o){if(!r||!o)return this.defaultRenderer;this.platformIsServer&&o.encapsulation===xr.ShadowDom&&(o=G(C({},o),{encapsulation:xr.Emulated}));let i=this.getOrCreateRenderer(r,o);return i instanceof Xu?i.applyToHost(r):i instanceof Ta&&i.applyStyles(),i}getOrCreateRenderer(r,o){let i=this.rendererByCompId,s=i.get(o.id);if(!s){let a=this.doc,c=this.ngZone,u=this.eventManager,l=this.sharedStylesHost,d=this.removeStylesOnCompDestroy,h=this.platformIsServer;switch(o.encapsulation){case xr.Emulated:s=new Xu(u,l,o,this.appId,d,a,c,h);break;case xr.ShadowDom:return new op(u,l,r,o,a,c,this.nonce,h);default:s=new Ta(u,l,o,d,a,c,h);break}i.set(o.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}};e.\u0275fac=function(o){return new(o||e)(ie(z_),ie(Y_),ie(ku),ie(BN),ie(en),ie(Wo),ie(Ye),ie(mf))},e.\u0275prov=se({token:e,factory:e.\u0275fac});let t=e;return t})(),Ea=class{constructor(e,n,r,o){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=o,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(Jf[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(W_(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(W_(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){e&&e.removeChild(n)}selectRootElement(e,n){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new re(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,o){if(o){n=o+":"+n;let i=Jf[o];i?e.setAttributeNS(i,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){let o=Jf[r];o?e.removeAttributeNS(o,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,o){o&(qr.DashCase|qr.Important)?e.style.setProperty(n,r,o&qr.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&qr.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e!=null&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r){if(typeof e=="string"&&(e=Go().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(r))}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))===!1&&n.preventDefault()}}};function W_(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var op=class extends Ea{constructor(e,n,r,o,i,s,a,c){super(e,i,s,c),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let u=Q_(o.id,o.styles);for(let l of u){let d=document.createElement("style");a&&d.setAttribute("nonce",a),d.textContent=l,this.shadowRoot.appendChild(d)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(this.nodeOrShadowRoot(e),n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Ta=class extends Ea{constructor(e,n,r,o,i,s,a,c){super(e,i,s,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=o,this.styles=c?Q_(c,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},Xu=class extends Ta{constructor(e,n,r,o,i,s,a,c){let u=o+"-"+r.id;super(e,n,r,i,s,a,c,u),this.contentAttr=UN(u),this.hostAttr=qN(u)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}},$N=(()=>{let e=class e extends Ku{constructor(r){super(r)}supports(r){return!0}addEventListener(r,o,i){return r.addEventListener(o,i,!1),()=>this.removeEventListener(r,o,i)}removeEventListener(r,o,i){return r.removeEventListener(o,i)}};e.\u0275fac=function(o){return new(o||e)(ie(en))},e.\u0275prov=se({token:e,factory:e.\u0275fac});let t=e;return t})(),G_=["alt","control","meta","shift"],HN={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},WN={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},GN=(()=>{let e=class e extends Ku{constructor(r){super(r)}supports(r){return e.parseEventName(r)!=null}addEventListener(r,o,i){let s=e.parseEventName(o),a=e.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Go().onAndCancel(r,s.domEventName,a))}static parseEventName(r){let o=r.toLowerCase().split("."),i=o.shift();if(o.length===0||!(i==="keydown"||i==="keyup"))return null;let s=e._normalizeKey(o.pop()),a="",c=o.indexOf("code");if(c>-1&&(o.splice(c,1),a="code."),G_.forEach(l=>{let d=o.indexOf(l);d>-1&&(o.splice(d,1),a+=l+".")}),a+=s,o.length!=0||s.length===0)return null;let u={};return u.domEventName=i,u.fullKey=a,u}static matchEventFullKeyCode(r,o){let i=HN[r.key]||r.key,s="";return o.indexOf("code.")>-1&&(i=r.code,s="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),G_.forEach(a=>{if(a!==i){let c=WN[a];c(r)&&(s+=a+".")}}),s+=i,s===o)}static eventCallback(r,o,i){return s=>{e.matchEventFullKeyCode(s,r)&&i.runGuarded(()=>o(s))}}static _normalizeKey(r){return r==="esc"?"escape":r}};e.\u0275fac=function(o){return new(o||e)(ie(en))},e.\u0275prov=se({token:e,factory:e.\u0275fac});let t=e;return t})();function zN(){tp.makeCurrent()}function YN(){return new Cr}function ZN(){return Iv(document),document}var QN=[{provide:Wo,useValue:q_},{provide:pf,useValue:zN,multi:!0},{provide:en,useFactory:ZN,deps:[]}],K_=Uf(I_,"browser",QN),KN=new he(""),XN=[{provide:Ca,useClass:np,deps:[]},{provide:Vf,useClass:Gu,deps:[Ye,zu,Ca]},{provide:Gu,useClass:Gu,deps:[Ye,zu,Ca]}],JN=[{provide:Ru,useValue:"root"},{provide:Cr,useFactory:YN,deps:[]},{provide:rp,useClass:$N,multi:!0,deps:[en,Ye,Wo]},{provide:rp,useClass:GN,multi:!0,deps:[en]},H_,Y_,z_,{provide:ha,useExisting:H_},{provide:Qu,useClass:PN,deps:[]},[]],X_=(()=>{let e=class e{constructor(r){}static withServerTransition(r){return{ngModule:e,providers:[{provide:ku,useValue:r.appId}]}}};e.\u0275fac=function(o){return new(o||e)(ie(KN,12))},e.\u0275mod=un({type:e}),e.\u0275inj=cn({providers:[...JN,...XN],imports:[Nt,M_]});let t=e;return t})();function e1(){return new sp(ie(en))}var sp=(()=>{let e=class e{constructor(r){this._doc=r}getTitle(){return this._doc.title}setTitle(r){this._doc.title=r||""}};e.\u0275fac=function(o){return new(o||e)(ie(en))},e.\u0275prov=se({token:e,factory:function(o){let i=null;return o?i=new o:i=e1(),i},providedIn:"root"});let t=e;return t})();var pe="primary",Ua=Symbol("RouteTitle"),dp=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function ns(t){return new dp(t)}function t1(t,e,n){let r=n.path.split("/");if(r.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||r.length<t.length))return null;let o={};for(let i=0;i<r.length;i++){let s=r[i],a=t[i];if(s.startsWith(":"))o[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:o}}function n1(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!Er(t[n],e[n]))return!1;return!0}function Er(t,e){let n=t?hp(t):void 0,r=e?hp(e):void 0;if(!n||!r||n.length!=r.length)return!1;let o;for(let i=0;i<n.length;i++)if(o=n[i],!cx(t[o],e[o]))return!1;return!0}function hp(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function cx(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),r=[...e].sort();return n.every((o,i)=>r[i]===o)}else return t===e}function ux(t){return t.length>0?t[t.length-1]:null}function go(t){return Ld(t)?t:zi(t)?mt(Promise.resolve(t)):de(t)}var r1={exact:dx,subset:hx},lx={exact:o1,subset:i1,ignored:()=>!0};function ex(t,e,n){return r1[n.paths](t.root,e.root,n.matrixParams)&&lx[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function o1(t,e){return Er(t,e)}function dx(t,e,n){if(!Zo(t.segments,e.segments)||!tl(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!t.children[r]||!dx(t.children[r],e.children[r],n))return!1;return!0}function i1(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>cx(t[n],e[n]))}function hx(t,e,n){return fx(t,e,e.segments,n)}function fx(t,e,n,r){if(t.segments.length>n.length){let o=t.segments.slice(0,n.length);return!(!Zo(o,n)||e.hasChildren()||!tl(o,n,r))}else if(t.segments.length===n.length){if(!Zo(t.segments,n)||!tl(t.segments,n,r))return!1;for(let o in e.children)if(!t.children[o]||!hx(t.children[o],e.children[o],r))return!1;return!0}else{let o=n.slice(0,t.segments.length),i=n.slice(t.segments.length);return!Zo(t.segments,o)||!tl(t.segments,o,r)||!t.children[pe]?!1:fx(t.children[pe],e,i,r)}}function tl(t,e,n){return e.every((r,o)=>lx[n](t[o].parameters,r.parameters))}var fo=class{constructor(e=new Le([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=ns(this.queryParams)),this._queryParamMap}toString(){return c1.serialize(this)}},Le=class{constructor(e,n){this.segments=e,this.children=n,this.parent=null,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return nl(this)}},Yo=class{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap||(this._parameterMap=ns(this.parameters)),this._parameterMap}toString(){return mx(this)}};function s1(t,e){return Zo(t,e)&&t.every((n,r)=>Er(n.parameters,e[r].parameters))}function Zo(t,e){return t.length!==e.length?!1:t.every((n,r)=>n.path===e[r].path)}function a1(t,e){let n=[];return Object.entries(t.children).forEach(([r,o])=>{r===pe&&(n=n.concat(e(o,r)))}),Object.entries(t.children).forEach(([r,o])=>{r!==pe&&(n=n.concat(e(o,r)))}),n}var qa=(()=>{let e=class e{};e.\u0275fac=function(o){return new(o||e)},e.\u0275prov=se({token:e,factory:()=>(()=>new Fa)(),providedIn:"root"});let t=e;return t})(),Fa=class{parse(e){let n=new pp(e);return new fo(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${Sa(e.root,!0)}`,r=d1(e.queryParams),o=typeof e.fragment=="string"?`#${u1(e.fragment)}`:"";return`${n}${r}${o}`}},c1=new Fa;function nl(t){return t.segments.map(e=>mx(e)).join("/")}function Sa(t,e){if(!t.hasChildren())return nl(t);if(e){let n=t.children[pe]?Sa(t.children[pe],!1):"",r=[];return Object.entries(t.children).forEach(([o,i])=>{o!==pe&&r.push(`${o}:${Sa(i,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=a1(t,(r,o)=>o===pe?[Sa(t.children[pe],!1)]:[`${o}:${Sa(r,!1)}`]);return Object.keys(t.children).length===1&&t.children[pe]!=null?`${nl(t)}/${n[0]}`:`${nl(t)}/(${n.join("//")})`}}function px(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Ju(t){return px(t).replace(/%3B/gi,";")}function u1(t){return encodeURI(t)}function fp(t){return px(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function rl(t){return decodeURIComponent(t)}function tx(t){return rl(t.replace(/\+/g,"%20"))}function mx(t){return`${fp(t.path)}${l1(t.parameters)}`}function l1(t){return Object.keys(t).map(e=>`;${fp(e)}=${fp(t[e])}`).join("")}function d1(t){let e=Object.keys(t).map(n=>{let r=t[n];return Array.isArray(r)?r.map(o=>`${Ju(n)}=${Ju(o)}`).join("&"):`${Ju(n)}=${Ju(r)}`}).filter(n=>!!n);return e.length?`?${e.join("&")}`:""}var h1=/^[^\/()?;#]+/;function ap(t){let e=t.match(h1);return e?e[0]:""}var f1=/^[^\/()?;=#]+/;function p1(t){let e=t.match(f1);return e?e[0]:""}var m1=/^[^=?&#]+/;function g1(t){let e=t.match(m1);return e?e[0]:""}var y1=/^[^&#]+/;function v1(t){let e=t.match(y1);return e?e[0]:""}var pp=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Le([],{}):new Le([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[pe]=new Le(e,n)),r}parseSegment(){let e=ap(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new re(4009,!1);return this.capture(e),new Yo(rl(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=p1(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let o=ap(this.remaining);o&&(r=o,this.capture(r))}e[rl(n)]=rl(r)}parseQueryParam(e){let n=g1(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let s=v1(this.remaining);s&&(r=s,this.capture(r))}let o=tx(n),i=tx(r);if(e.hasOwnProperty(o)){let s=e[o];Array.isArray(s)||(s=[s],e[o]=s),s.push(i)}else e[o]=i}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=ap(this.remaining),o=this.remaining[r.length];if(o!=="/"&&o!==")"&&o!==";")throw new re(4010,!1);let i;r.indexOf(":")>-1?(i=r.slice(0,r.indexOf(":")),this.capture(i),this.capture(":")):e&&(i=pe);let s=this.parseChildren();n[i]=Object.keys(s).length===1?s[pe]:new Le([],s),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new re(4011,!1)}};function gx(t){return t.segments.length>0?new Le([],{[pe]:t}):t}function yx(t){let e={};for(let r of Object.keys(t.children)){let o=t.children[r],i=yx(o);if(r===pe&&i.segments.length===0&&i.hasChildren())for(let[s,a]of Object.entries(i.children))e[s]=a;else(i.segments.length>0||i.hasChildren())&&(e[r]=i)}let n=new Le(t.segments,e);return _1(n)}function _1(t){if(t.numberOfChildren===1&&t.children[pe]){let e=t.children[pe];return new Le(t.segments.concat(e.segments),e.children)}return t}function rs(t){return t instanceof fo}function x1(t,e,n=null,r=null){let o=vx(t);return _x(o,e,n,r)}function vx(t){let e;function n(i){let s={};for(let c of i.children){let u=n(c);s[c.outlet]=u}let a=new Le(i.url,s);return i===t&&(e=a),a}let r=n(t.root),o=gx(r);return e??o}function _x(t,e,n,r){let o=t;for(;o.parent;)o=o.parent;if(e.length===0)return cp(o,o,o,n,r);let i=w1(e);if(i.toRoot())return cp(o,o,new Le([],{}),n,r);let s=b1(i,o,t),a=s.processChildren?Ma(s.segmentGroup,s.index,i.commands):wx(s.segmentGroup,s.index,i.commands);return cp(o,s.segmentGroup,a,n,r)}function ol(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function Ra(t){return typeof t=="object"&&t!=null&&t.outlets}function cp(t,e,n,r,o){let i={};r&&Object.entries(r).forEach(([c,u])=>{i[c]=Array.isArray(u)?u.map(l=>`${l}`):`${u}`});let s;t===e?s=n:s=xx(t,e,n);let a=gx(yx(s));return new fo(a,i,o)}function xx(t,e,n){let r={};return Object.entries(t.children).forEach(([o,i])=>{i===e?r[o]=n:r[o]=xx(i,e,n)}),new Le(t.segments,r)}var il=class{constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&ol(r[0]))throw new re(4003,!1);let o=r.find(Ra);if(o&&o!==ux(r))throw new re(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function w1(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new il(!0,0,t);let e=0,n=!1,r=t.reduce((o,i,s)=>{if(typeof i=="object"&&i!=null){if(i.outlets){let a={};return Object.entries(i.outlets).forEach(([c,u])=>{a[c]=typeof u=="string"?u.split("/"):u}),[...o,{outlets:a}]}if(i.segmentPath)return[...o,i.segmentPath]}return typeof i!="string"?[...o,i]:s===0?(i.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?n=!0:a===".."?e++:a!=""&&o.push(a))}),o):[...o,i]},[]);return new il(n,e,r)}var es=class{constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}};function b1(t,e,n){if(t.isAbsolute)return new es(e,!0,0);if(!n)return new es(e,!1,NaN);if(n.parent===null)return new es(n,!0,0);let r=ol(t.commands[0])?0:1,o=n.segments.length-1+r;return C1(n,o,t.numberOfDoubleDots)}function C1(t,e,n){let r=t,o=e,i=n;for(;i>o;){if(i-=o,r=r.parent,!r)throw new re(4005,!1);o=r.segments.length}return new es(r,!1,o-i)}function D1(t){return Ra(t[0])?t[0].outlets:{[pe]:t}}function wx(t,e,n){if(t||(t=new Le([],{})),t.segments.length===0&&t.hasChildren())return Ma(t,e,n);let r=E1(t,e,n),o=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){let i=new Le(t.segments.slice(0,r.pathIndex),{});return i.children[pe]=new Le(t.segments.slice(r.pathIndex),t.children),Ma(i,0,o)}else return r.match&&o.length===0?new Le(t.segments,{}):r.match&&!t.hasChildren()?mp(t,e,n):r.match?Ma(t,0,o):mp(t,e,n)}function Ma(t,e,n){if(n.length===0)return new Le(t.segments,{});{let r=D1(n),o={};if(Object.keys(r).some(i=>i!==pe)&&t.children[pe]&&t.numberOfChildren===1&&t.children[pe].segments.length===0){let i=Ma(t.children[pe],e,n);return new Le(t.segments,i.children)}return Object.entries(r).forEach(([i,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(o[i]=wx(t.children[i],e,s))}),Object.entries(t.children).forEach(([i,s])=>{r[i]===void 0&&(o[i]=s)}),new Le(t.segments,o)}}function E1(t,e,n){let r=0,o=e,i={match:!1,pathIndex:0,commandIndex:0};for(;o<t.segments.length;){if(r>=n.length)return i;let s=t.segments[o],a=n[r];if(Ra(a))break;let c=`${a}`,u=r<n.length-1?n[r+1]:null;if(o>0&&c===void 0)break;if(c&&u&&typeof u=="object"&&u.outlets===void 0){if(!rx(c,u,s))return i;r+=2}else{if(!rx(c,{},s))return i;r++}o++}return{match:!0,pathIndex:o,commandIndex:r}}function mp(t,e,n){let r=t.segments.slice(0,e),o=0;for(;o<n.length;){let i=n[o];if(Ra(i)){let c=T1(i.outlets);return new Le(r,c)}if(o===0&&ol(n[0])){let c=t.segments[e];r.push(new Yo(c.path,nx(n[0]))),o++;continue}let s=Ra(i)?i.outlets[pe]:`${i}`,a=o<n.length-1?n[o+1]:null;s&&a&&ol(a)?(r.push(new Yo(s,nx(a))),o+=2):(r.push(new Yo(s,{})),o++)}return new Le(r,{})}function T1(t){let e={};return Object.entries(t).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[n]=mp(new Le([],{}),0,r))}),e}function nx(t){let e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function rx(t,e,n){return t==n.path&&Er(e,n.parameters)}var Na="imperative",jn=class{constructor(e,n){this.id=e,this.url=n}},os=class extends jn{constructor(e,n,r="imperative",o=null){super(e,n),this.type=0,this.navigationTrigger=r,this.restoredState=o}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Gr=class extends jn{constructor(e,n,r){super(e,n),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},po=class extends jn{constructor(e,n,r,o){super(e,n),this.reason=r,this.code=o,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},mo=class extends jn{constructor(e,n,r,o){super(e,n),this.reason=r,this.code=o,this.type=16}},ka=class extends jn{constructor(e,n,r,o){super(e,n),this.error=r,this.target=o,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},sl=class extends jn{constructor(e,n,r,o){super(e,n),this.urlAfterRedirects=r,this.state=o,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},gp=class extends jn{constructor(e,n,r,o){super(e,n),this.urlAfterRedirects=r,this.state=o,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},yp=class extends jn{constructor(e,n,r,o,i){super(e,n),this.urlAfterRedirects=r,this.state=o,this.shouldActivate=i,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},vp=class extends jn{constructor(e,n,r,o){super(e,n),this.urlAfterRedirects=r,this.state=o,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},_p=class extends jn{constructor(e,n,r,o){super(e,n),this.urlAfterRedirects=r,this.state=o,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},xp=class{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},wp=class{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},bp=class{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Cp=class{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Dp=class{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Ep=class{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},al=class{constructor(e,n,r){this.routerEvent=e,this.position=n,this.anchor=r,this.type=15}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},Pa=class{},Va=class{constructor(e){this.url=e}};var Tp=class{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new $a,this.attachRef=null}},$a=(()=>{let e=class e{constructor(){this.contexts=new Map}onChildOutletCreated(r,o){let i=this.getOrCreateContext(r);i.outlet=o,this.contexts.set(r,i)}onChildOutletDestroyed(r){let o=this.getContext(r);o&&(o.outlet=null,o.attachRef=null)}onOutletDeactivated(){let r=this.contexts;return this.contexts=new Map,r}onOutletReAttached(r){this.contexts=r}getOrCreateContext(r){let o=this.getContext(r);return o||(o=new Tp,this.contexts.set(r,o)),o}getContext(r){return this.contexts.get(r)||null}};e.\u0275fac=function(o){return new(o||e)},e.\u0275prov=se({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),cl=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=Sp(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){let n=Sp(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=Ap(e,this._root);return n.length<2?[]:n[n.length-2].children.map(o=>o.value).filter(o=>o!==e)}pathFromRoot(e){return Ap(e,this._root).map(n=>n.value)}};function Sp(t,e){if(t===e.value)return e;for(let n of e.children){let r=Sp(t,n);if(r)return r}return null}function Ap(t,e){if(t===e.value)return[e];for(let n of e.children){let r=Ap(t,n);if(r.length)return r.unshift(e),r}return[]}var An=class{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function Ji(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var ul=class extends cl{constructor(e,n){super(e),this.snapshot=n,Lp(this,e)}toString(){return this.snapshot.toString()}};function bx(t,e){let n=S1(t,e),r=new Pt([new Yo("",{})]),o=new Pt({}),i=new Pt({}),s=new Pt({}),a=new Pt(""),c=new is(r,o,s,a,i,pe,e,n.root);return c.snapshot=n.root,new ul(new An(c,[]),n)}function S1(t,e){let n={},r={},o={},i="",s=new La([],n,o,i,r,pe,e,null,{});return new ll("",new An(s,[]))}var is=class{constructor(e,n,r,o,i,s,a,c){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=o,this.dataSubject=i,this.outlet=s,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(Ie(u=>u[Ua]))??de(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=o,this.data=i}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(Ie(e=>ns(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(Ie(e=>ns(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Vp(t,e,n="emptyOnly"){let r,{routeConfig:o}=t;return e!==null&&(n==="always"||o?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:C(C({},e.params),t.params),data:C(C({},e.data),t.data),resolve:C(C(C(C({},t.data),e.data),o?.data),t._resolvedData)}:r={params:C({},t.params),data:C({},t.data),resolve:C(C({},t.data),t._resolvedData??{})},o&&Dx(o)&&(r.resolve[Ua]=o.title),r}var La=class{get title(){return this.data?.[Ua]}constructor(e,n,r,o,i,s,a,c,u){this.url=e,this.params=n,this.queryParams=r,this.fragment=o,this.data=i,this.outlet=s,this.component=a,this.routeConfig=c,this._resolve=u}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=ns(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=ns(this.queryParams)),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},ll=class extends cl{constructor(e,n){super(n),this.url=e,Lp(this,n)}toString(){return Cx(this._root)}};function Lp(t,e){e.value._routerState=t,e.children.forEach(n=>Lp(t,n))}function Cx(t){let e=t.children.length>0?` { ${t.children.map(Cx).join(", ")} } `:"";return`${t.value}${e}`}function up(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,Er(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),Er(e.params,n.params)||t.paramsSubject.next(n.params),n1(e.url,n.url)||t.urlSubject.next(n.url),Er(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function Ip(t,e){let n=Er(t.params,e.params)&&s1(t.url,e.url),r=!t.parent!=!e.parent;return n&&!r&&(!t.parent||Ip(t.parent,e.parent))}function Dx(t){return typeof t.title=="string"||t.title===null}var jp=(()=>{let e=class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=pe,this.activateEvents=new Ve,this.deactivateEvents=new Ve,this.attachEvents=new Ve,this.detachEvents=new Ve,this.parentContexts=J($a),this.location=J(ho),this.changeDetector=J(Hr),this.environmentInjector=J(En),this.inputBinder=J(ml,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(r){if(r.name){let{firstChange:o,previousValue:i}=r.name;if(o)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(r){return this.parentContexts.getContext(r)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let r=this.parentContexts.getContext(this.name);r?.route&&(r.attachRef?this.attach(r.attachRef,r.route):this.activateWith(r.route,r.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new re(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new re(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new re(4012,!1);this.location.detach();let r=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(r.instance),r}attach(r,o){this.activated=r,this._activatedRoute=o,this.location.insert(r.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(r.instance)}deactivate(){if(this.activated){let r=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(r)}}activateWith(r,o){if(this.isActivated)throw new re(4013,!1);this._activatedRoute=r;let i=this.location,a=r.snapshot.component,c=this.parentContexts.getOrCreateContext(this.name).children,u=new Mp(r,c,i.injector);this.activated=i.createComponent(a,{index:i.length,injector:u,environmentInjector:o??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};e.\u0275fac=function(o){return new(o||e)},e.\u0275dir=Bi({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[qo]});let t=e;return t})(),Mp=class{constructor(e,n,r){this.route=e,this.childContexts=n,this.parent=r}get(e,n){return e===is?this.route:e===$a?this.childContexts:this.parent.get(e,n)}},ml=new he(""),ox=(()=>{let e=class e{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(r){this.unsubscribeFromRouteData(r),this.subscribeToRouteData(r)}unsubscribeFromRouteData(r){this.outletDataSubscriptions.get(r)?.unsubscribe(),this.outletDataSubscriptions.delete(r)}subscribeToRouteData(r){let{activatedRoute:o}=r,i=Js([o.queryParams,o.params,o.data]).pipe(On(([s,a,c],u)=>(c=C(C(C({},s),a),c),u===0?de(c):Promise.resolve(c)))).subscribe(s=>{if(!r.isActivated||!r.activatedComponentRef||r.activatedRoute!==o||o.component===null){this.unsubscribeFromRouteData(r);return}let a=N_(o.component);if(!a){this.unsubscribeFromRouteData(r);return}for(let{templateName:c}of a.inputs)r.activatedComponentRef.setInput(c,s[c])});this.outletDataSubscriptions.set(r,i)}};e.\u0275fac=function(o){return new(o||e)},e.\u0275prov=se({token:e,factory:e.\u0275fac});let t=e;return t})();function A1(t,e,n){let r=ja(t,e._root,n?n._root:void 0);return new ul(r,e)}function ja(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=e.value;let o=I1(t,e,n);return new An(r,o)}else{if(t.shouldAttach(e.value)){let i=t.retrieve(e.value);if(i!==null){let s=i.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>ja(t,a)),s}}let r=M1(e.value),o=e.children.map(i=>ja(t,i));return new An(r,o)}}function I1(t,e,n){return e.children.map(r=>{for(let o of n.children)if(t.shouldReuseRoute(r.value,o.value.snapshot))return ja(t,r,o);return ja(t,r)})}function M1(t){return new is(new Pt(t.url),new Pt(t.params),new Pt(t.queryParams),new Pt(t.fragment),new Pt(t.data),t.outlet,t.component,t)}var Ex="ngNavigationCancelingError";function Tx(t,e){let{redirectTo:n,navigationBehaviorOptions:r}=rs(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,o=Sx(!1,0,e);return o.url=n,o.navigationBehaviorOptions=r,o}function Sx(t,e,n){let r=new Error("NavigationCancelingError: "+(t||""));return r[Ex]=!0,r.cancellationCode=e,n&&(r.url=n),r}function N1(t){return Ax(t)&&rs(t.url)}function Ax(t){return t&&t[Ex]}var O1=(()=>{let e=class e{};e.\u0275fac=function(o){return new(o||e)},e.\u0275cmp=et({type:e,selectors:[["ng-component"]],standalone:!0,features:[ct],decls:1,vars:0,template:function(o,i){o&1&&bt(0,"router-outlet")},dependencies:[jp],encapsulation:2});let t=e;return t})();function F1(t,e){return t.providers&&!t._injector&&(t._injector=Uu(t.providers,e,`Route: ${t.path}`)),t._injector??e}function Bp(t){let e=t.children&&t.children.map(Bp),n=e?G(C({},t),{children:e}):C({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==pe&&(n.component=O1),n}function Tr(t){return t.outlet||pe}function R1(t,e){let n=t.filter(r=>Tr(r)===e);return n.push(...t.filter(r=>Tr(r)!==e)),n}function Ha(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var k1=(t,e,n,r)=>Ie(o=>(new Np(e,o.targetRouterState,o.currentRouterState,n,r).activate(t),o)),Np=class{constructor(e,n,r,o,i){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=o,this.inputBindingEnabled=i}activate(e){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),up(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){let o=Ji(n);e.children.forEach(i=>{let s=i.value.outlet;this.deactivateRoutes(i,o[s],r),delete o[s]}),Object.values(o).forEach(i=>{this.deactivateRouteAndItsChildren(i,r)})}deactivateRoutes(e,n,r){let o=e.value,i=n?n.value:null;if(o===i)if(o.component){let s=r.getContext(o.outlet);s&&this.deactivateChildRoutes(e,n,s.children)}else this.deactivateChildRoutes(e,n,r);else i&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let r=n.getContext(e.value.outlet),o=r&&e.value.component?r.children:n,i=Ji(e);for(let s of Object.keys(i))this.deactivateRouteAndItsChildren(i[s],o);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){let r=n.getContext(e.value.outlet),o=r&&e.value.component?r.children:n,i=Ji(e);for(let s of Object.keys(i))this.deactivateRouteAndItsChildren(i[s],o);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){let o=Ji(n);e.children.forEach(i=>{this.activateRoutes(i,o[i.value.outlet],r),this.forwardEvent(new Ep(i.value.snapshot))}),e.children.length&&this.forwardEvent(new Cp(e.value.snapshot))}activateRoutes(e,n,r){let o=e.value,i=n?n.value:null;if(up(o),o===i)if(o.component){let s=r.getOrCreateContext(o.outlet);this.activateChildRoutes(e,n,s.children)}else this.activateChildRoutes(e,n,r);else if(o.component){let s=r.getOrCreateContext(o.outlet);if(this.routeReuseStrategy.shouldAttach(o.snapshot)){let a=this.routeReuseStrategy.retrieve(o.snapshot);this.routeReuseStrategy.store(o.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),up(a.route.value),this.activateChildRoutes(e,null,s.children)}else{let a=Ha(o.snapshot);s.attachRef=null,s.route=o,s.injector=a,s.outlet&&s.outlet.activateWith(o,s.injector),this.activateChildRoutes(e,null,s.children)}}else this.activateChildRoutes(e,null,r)}},dl=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},ts=class{constructor(e,n){this.component=e,this.route=n}};function P1(t,e,n){let r=t._root,o=e?e._root:null;return Aa(r,o,n,[r.value])}function V1(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function as(t,e){let n=Symbol(),r=e.get(t,n);return r===n?typeof t=="function"&&!Ty(t)?t:e.get(t):r}function Aa(t,e,n,r,o={canDeactivateChecks:[],canActivateChecks:[]}){let i=Ji(e);return t.children.forEach(s=>{L1(s,i[s.value.outlet],n,r.concat([s.value]),o),delete i[s.value.outlet]}),Object.entries(i).forEach(([s,a])=>Oa(a,n.getContext(s),o)),o}function L1(t,e,n,r,o={canDeactivateChecks:[],canActivateChecks:[]}){let i=t.value,s=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(s&&i.routeConfig===s.routeConfig){let c=j1(s,i,i.routeConfig.runGuardsAndResolvers);c?o.canActivateChecks.push(new dl(r)):(i.data=s.data,i._resolvedData=s._resolvedData),i.component?Aa(t,e,a?a.children:null,r,o):Aa(t,e,n,r,o),c&&a&&a.outlet&&a.outlet.isActivated&&o.canDeactivateChecks.push(new ts(a.outlet.component,s))}else s&&Oa(e,a,o),o.canActivateChecks.push(new dl(r)),i.component?Aa(t,null,a?a.children:null,r,o):Aa(t,null,n,r,o);return o}function j1(t,e,n){if(typeof n=="function")return n(t,e);switch(n){case"pathParamsChange":return!Zo(t.url,e.url);case"pathParamsOrQueryParamsChange":return!Zo(t.url,e.url)||!Er(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Ip(t,e)||!Er(t.queryParams,e.queryParams);case"paramsChange":default:return!Ip(t,e)}}function Oa(t,e,n){let r=Ji(t),o=t.value;Object.entries(r).forEach(([i,s])=>{o.component?e?Oa(s,e.children.getContext(i),n):Oa(s,null,n):Oa(s,e,n)}),o.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new ts(e.outlet.component,o)):n.canDeactivateChecks.push(new ts(null,o)):n.canDeactivateChecks.push(new ts(null,o))}function Wa(t){return typeof t=="function"}function B1(t){return typeof t=="boolean"}function U1(t){return t&&Wa(t.canLoad)}function q1(t){return t&&Wa(t.canActivate)}function $1(t){return t&&Wa(t.canActivateChild)}function H1(t){return t&&Wa(t.canDeactivate)}function W1(t){return t&&Wa(t.canMatch)}function Ix(t){return t instanceof Br||t?.name==="EmptyError"}var el=Symbol("INITIAL_VALUE");function ss(){return On(t=>Js(t.map(e=>e.pipe(Ur(1),$d(el)))).pipe(Ie(e=>{for(let n of e)if(n!==!0){if(n===el)return el;if(n===!1||n instanceof fo)return n}return!0}),Nn(e=>e!==el),Ur(1)))}function G1(t,e){return st(n=>{let{targetSnapshot:r,currentSnapshot:o,guards:{canActivateChecks:i,canDeactivateChecks:s}}=n;return s.length===0&&i.length===0?de(G(C({},n),{guardsResult:!0})):z1(s,r,o,t).pipe(st(a=>a&&B1(a)?Y1(r,i,t,e):de(a)),Ie(a=>G(C({},n),{guardsResult:a})))})}function z1(t,e,n,r){return mt(t).pipe(st(o=>J1(o.component,o.route,n,e,r)),gr(o=>o!==!0,!0))}function Y1(t,e,n,r){return mt(e).pipe(Fo(o=>Ci(Q1(o.route.parent,r),Z1(o.route,r),X1(t,o.path,n),K1(t,o.route,n))),gr(o=>o!==!0,!0))}function Z1(t,e){return t!==null&&e&&e(new Dp(t)),de(!0)}function Q1(t,e){return t!==null&&e&&e(new bp(t)),de(!0)}function K1(t,e,n){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return de(!0);let o=r.map(i=>Yc(()=>{let s=Ha(e)??n,a=as(i,s),c=q1(a)?a.canActivate(e,t):lo(s,()=>a(e,t));return go(c).pipe(gr())}));return de(o).pipe(ss())}function X1(t,e,n){let r=e[e.length-1],i=e.slice(0,e.length-1).reverse().map(s=>V1(s)).filter(s=>s!==null).map(s=>Yc(()=>{let a=s.guards.map(c=>{let u=Ha(s.node)??n,l=as(c,u),d=$1(l)?l.canActivateChild(r,t):lo(u,()=>l(r,t));return go(d).pipe(gr())});return de(a).pipe(ss())}));return de(i).pipe(ss())}function J1(t,e,n,r,o){let i=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!i||i.length===0)return de(!0);let s=i.map(a=>{let c=Ha(e)??o,u=as(a,c),l=H1(u)?u.canDeactivate(t,e,n,r):lo(c,()=>u(t,e,n,r));return go(l).pipe(gr())});return de(s).pipe(ss())}function eO(t,e,n,r){let o=e.canLoad;if(o===void 0||o.length===0)return de(!0);let i=o.map(s=>{let a=as(s,t),c=U1(a)?a.canLoad(e,n):lo(t,()=>a(e,n));return go(c)});return de(i).pipe(ss(),Mx(r))}function Mx(t){return Fd(at(e=>{if(rs(e))throw Tx(t,e)}),Ie(e=>e===!0))}function tO(t,e,n,r){let o=e.canMatch;if(!o||o.length===0)return de(!0);let i=o.map(s=>{let a=as(s,t),c=W1(a)?a.canMatch(e,n):lo(t,()=>a(e,n));return go(c)});return de(i).pipe(ss(),Mx(r))}var Ba=class{constructor(e){this.segmentGroup=e||null}},hl=class extends Error{constructor(e){super(),this.urlTree=e}};function Xi(t){return wi(new Ba(t))}function nO(t){return wi(new re(4e3,!1))}function rO(t){return wi(Sx(!1,3))}var Op=class{constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let r=[],o=n.root;for(;;){if(r=r.concat(o.segments),o.numberOfChildren===0)return de(r);if(o.numberOfChildren>1||!o.children[pe])return nO(e.redirectTo);o=o.children[pe]}}applyRedirectCommands(e,n,r){let o=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,r);if(n.startsWith("/"))throw new hl(o);return o}applyRedirectCreateUrlTree(e,n,r,o){let i=this.createSegmentGroup(e,n.root,r,o);return new fo(i,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let r={};return Object.entries(e).forEach(([o,i])=>{if(typeof i=="string"&&i.startsWith(":")){let a=i.substring(1);r[o]=n[a]}else r[o]=i}),r}createSegmentGroup(e,n,r,o){let i=this.createSegments(e,n.segments,r,o),s={};return Object.entries(n.children).forEach(([a,c])=>{s[a]=this.createSegmentGroup(e,c,r,o)}),new Le(i,s)}createSegments(e,n,r,o){return n.map(i=>i.path.startsWith(":")?this.findPosParam(e,i,o):this.findOrReturn(i,r))}findPosParam(e,n,r){let o=r[n.path.substring(1)];if(!o)throw new re(4001,!1);return o}findOrReturn(e,n){let r=0;for(let o of n){if(o.path===e.path)return n.splice(r),o;r++}return e}},Fp={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function oO(t,e,n,r,o){let i=Up(t,e,n);return i.matched?(r=F1(e,r),tO(r,e,n,o).pipe(Ie(s=>s===!0?i:C({},Fp)))):de(i)}function Up(t,e,n){if(e.path==="**")return iO(n);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?C({},Fp):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let o=(e.matcher||t1)(n,t,e);if(!o)return C({},Fp);let i={};Object.entries(o.posParams??{}).forEach(([a,c])=>{i[a]=c.path});let s=o.consumed.length>0?C(C({},i),o.consumed[o.consumed.length-1].parameters):i;return{matched:!0,consumedSegments:o.consumed,remainingSegments:n.slice(o.consumed.length),parameters:s,positionalParamSegments:o.posParams??{}}}function iO(t){return{matched:!0,parameters:t.length>0?ux(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function ix(t,e,n,r){return n.length>0&&cO(t,n,r)?{segmentGroup:new Le(e,aO(r,new Le(n,t.children))),slicedSegments:[]}:n.length===0&&uO(t,n,r)?{segmentGroup:new Le(t.segments,sO(t,e,n,r,t.children)),slicedSegments:n}:{segmentGroup:new Le(t.segments,t.children),slicedSegments:n}}function sO(t,e,n,r,o){let i={};for(let s of r)if(gl(t,n,s)&&!o[Tr(s)]){let a=new Le([],{});i[Tr(s)]=a}return C(C({},o),i)}function aO(t,e){let n={};n[pe]=e;for(let r of t)if(r.path===""&&Tr(r)!==pe){let o=new Le([],{});n[Tr(r)]=o}return n}function cO(t,e,n){return n.some(r=>gl(t,e,r)&&Tr(r)!==pe)}function uO(t,e,n){return n.some(r=>gl(t,e,r))}function gl(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function lO(t,e,n,r){return Tr(t)!==r&&(r===pe||!gl(e,n,t))?!1:Up(e,t,n).matched}function dO(t,e,n){return e.length===0&&!t.children[n]}var Rp=class{};function hO(t,e,n,r,o,i,s="emptyOnly"){return new kp(t,e,n,r,o,s,i).recognize()}var fO=31,kp=class{constructor(e,n,r,o,i,s,a){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=o,this.urlTree=i,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new Op(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new re(4002,`'${e.segmentGroup}'`)}recognize(){let e=ix(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(Ie(n=>{let r=new La([],Object.freeze({}),Object.freeze(C({},this.urlTree.queryParams)),this.urlTree.fragment,{},pe,this.rootComponentType,null,{}),o=new An(r,n),i=new ll("",o),s=x1(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,i.url=this.urlSerializer.serialize(s),this.inheritParamsAndData(i._root,null),{state:i,tree:s}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e,pe).pipe(no(r=>{if(r instanceof hl)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Ba?this.noMatchError(r):r}))}inheritParamsAndData(e,n){let r=e.value,o=Vp(r,n,this.paramsInheritanceStrategy);r.params=Object.freeze(o.params),r.data=Object.freeze(o.data),e.children.forEach(i=>this.inheritParamsAndData(i,r))}processSegmentGroup(e,n,r,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,n,r):this.processSegment(e,n,r,r.segments,o,!0).pipe(Ie(i=>i instanceof An?[i]:[]))}processChildren(e,n,r){let o=[];for(let i of Object.keys(r.children))i==="primary"?o.unshift(i):o.push(i);return mt(o).pipe(Fo(i=>{let s=r.children[i],a=R1(n,i);return this.processSegmentGroup(e,a,s,i)}),qd((i,s)=>(i.push(...s),i)),ro(null),Ud(),st(i=>{if(i===null)return Xi(r);let s=Nx(i);return pO(s),de(s)}))}processSegment(e,n,r,o,i,s){return mt(n).pipe(Fo(a=>this.processSegmentAgainstRoute(a._injector??e,n,a,r,o,i,s).pipe(no(c=>{if(c instanceof Ba)return de(null);throw c}))),gr(a=>!!a),no(a=>{if(Ix(a))return dO(r,o,i)?de(new Rp):Xi(r);throw a}))}processSegmentAgainstRoute(e,n,r,o,i,s,a){return lO(r,o,i,s)?r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,o,r,i,s):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,o,n,r,i,s):Xi(o):Xi(o)}expandSegmentAgainstRouteUsingRedirect(e,n,r,o,i,s){let{matched:a,consumedSegments:c,positionalParamSegments:u,remainingSegments:l}=Up(n,o,i);if(!a)return Xi(n);o.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>fO&&(this.allowRedirects=!1));let d=this.applyRedirects.applyRedirectCommands(c,o.redirectTo,u);return this.applyRedirects.lineralizeSegments(o,d).pipe(st(h=>this.processSegment(e,r,n,h.concat(l),s,!1)))}matchSegmentAgainstRoute(e,n,r,o,i){let s=oO(n,r,o,e,this.urlSerializer);return r.path==="**"&&(n.children={}),s.pipe(On(a=>a.matched?(e=r._injector??e,this.getChildConfig(e,r,o).pipe(On(({routes:c})=>{let u=r._loadedInjector??e,{consumedSegments:l,remainingSegments:d,parameters:h}=a,p=new La(l,h,Object.freeze(C({},this.urlTree.queryParams)),this.urlTree.fragment,gO(r),Tr(r),r.component??r._loadedComponent??null,r,yO(r)),{segmentGroup:y,slicedSegments:v}=ix(n,l,d,c);if(v.length===0&&y.hasChildren())return this.processChildren(u,c,y).pipe(Ie(x=>x===null?null:new An(p,x)));if(c.length===0&&v.length===0)return de(new An(p,[]));let _=Tr(r)===i;return this.processSegment(u,c,y,v,_?pe:i,!0).pipe(Ie(x=>new An(p,x instanceof An?[x]:[])))}))):Xi(n)))}getChildConfig(e,n,r){return n.children?de({routes:n.children,injector:e}):n.loadChildren?n._loadedRoutes!==void 0?de({routes:n._loadedRoutes,injector:n._loadedInjector}):eO(e,n,r,this.urlSerializer).pipe(st(o=>o?this.configLoader.loadChildren(e,n).pipe(at(i=>{n._loadedRoutes=i.routes,n._loadedInjector=i.injector})):rO(n))):de({routes:[],injector:e})}};function pO(t){t.sort((e,n)=>e.value.outlet===pe?-1:n.value.outlet===pe?1:e.value.outlet.localeCompare(n.value.outlet))}function mO(t){let e=t.value.routeConfig;return e&&e.path===""}function Nx(t){let e=[],n=new Set;for(let r of t){if(!mO(r)){e.push(r);continue}let o=e.find(i=>r.value.routeConfig===i.value.routeConfig);o!==void 0?(o.children.push(...r.children),n.add(o)):e.push(r)}for(let r of n){let o=Nx(r.children);e.push(new An(r.value,o))}return e.filter(r=>!n.has(r))}function gO(t){return t.data||{}}function yO(t){return t.resolve||{}}function vO(t,e,n,r,o,i){return st(s=>hO(t,e,n,r,s.extractedUrl,o,i).pipe(Ie(({state:a,tree:c})=>G(C({},s),{targetSnapshot:a,urlAfterRedirects:c}))))}function _O(t,e){return st(n=>{let{targetSnapshot:r,guards:{canActivateChecks:o}}=n;if(!o.length)return de(n);let i=new Set(o.map(c=>c.route)),s=new Set;for(let c of i)if(!s.has(c))for(let u of Ox(c))s.add(u);let a=0;return mt(s).pipe(Fo(c=>i.has(c)?xO(c,r,t,e):(c.data=Vp(c,c.parent,t).resolve,de(void 0))),at(()=>a++),Di(1),st(c=>a===s.size?de(n):Mn))})}function Ox(t){let e=t.children.map(n=>Ox(n)).flat();return[t,...e]}function xO(t,e,n,r){let o=t.routeConfig,i=t._resolve;return o?.title!==void 0&&!Dx(o)&&(i[Ua]=o.title),wO(i,t,e,r).pipe(Ie(s=>(t._resolvedData=s,t.data=Vp(t,t.parent,n).resolve,null)))}function wO(t,e,n,r){let o=hp(t);if(o.length===0)return de({});let i={};return mt(o).pipe(st(s=>bO(t[s],e,n,r).pipe(gr(),at(a=>{i[s]=a}))),Di(1),Bd(i),no(s=>Ix(s)?Mn:wi(s)))}function bO(t,e,n,r){let o=Ha(e)??r,i=as(t,o),s=i.resolve?i.resolve(e,n):lo(o,()=>i(e,n));return go(s)}function lp(t){return On(e=>{let n=t(e);return n?mt(n).pipe(Ie(()=>e)):de(e)})}var Fx=(()=>{let e=class e{buildTitle(r){let o,i=r.root;for(;i!==void 0;)o=this.getResolvedTitleForRoute(i)??o,i=i.children.find(s=>s.outlet===pe);return o}getResolvedTitleForRoute(r){return r.data[Ua]}};e.\u0275fac=function(o){return new(o||e)},e.\u0275prov=se({token:e,factory:()=>(()=>J(CO))(),providedIn:"root"});let t=e;return t})(),CO=(()=>{let e=class e extends Fx{constructor(r){super(),this.title=r}updateTitle(r){let o=this.buildTitle(r);o!==void 0&&this.title.setTitle(o)}};e.\u0275fac=function(o){return new(o||e)(ie(sp))},e.\u0275prov=se({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Ga=new he("",{providedIn:"root",factory:()=>({})}),fl=new he("ROUTES"),qp=(()=>{let e=class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=J(Hu)}loadComponent(r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return de(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let o=go(r.loadComponent()).pipe(Ie(Rx),at(s=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=s}),ta(()=>{this.componentLoaders.delete(r)})),i=new vi(o,()=>new bn).pipe(yi());return this.componentLoaders.set(r,i),i}loadChildren(r,o){if(this.childrenLoaders.get(o))return this.childrenLoaders.get(o);if(o._loadedRoutes)return de({routes:o._loadedRoutes,injector:o._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(o);let s=DO(o,this.compiler,r,this.onLoadEndListener).pipe(ta(()=>{this.childrenLoaders.delete(o)})),a=new vi(s,()=>new bn).pipe(yi());return this.childrenLoaders.set(o,a),a}};e.\u0275fac=function(o){return new(o||e)},e.\u0275prov=se({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function DO(t,e,n,r){return go(t.loadChildren()).pipe(Ie(Rx),st(o=>o instanceof pa||Array.isArray(o)?de(o):mt(e.compileModuleAsync(o))),Ie(o=>{r&&r(t);let i,s,a=!1;return Array.isArray(o)?(s=o,a=!0):(i=o.create(n).injector,s=i.get(fl,[],{optional:!0,self:!0}).flat()),{routes:s.map(Bp),injector:i}}))}function EO(t){return t&&typeof t=="object"&&"default"in t}function Rx(t){return EO(t)?t.default:t}var $p=(()=>{let e=class e{};e.\u0275fac=function(o){return new(o||e)},e.\u0275prov=se({token:e,factory:()=>(()=>J(TO))(),providedIn:"root"});let t=e;return t})(),TO=(()=>{let e=class e{shouldProcessUrl(r){return!0}extract(r){return r}merge(r,o){return r}};e.\u0275fac=function(o){return new(o||e)},e.\u0275prov=se({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),kx=new he(""),Px=new he("");function SO(t,e,n){let r=t.get(Px),o=t.get(en);return t.get(Ye).runOutsideAngular(()=>{if(!o.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,Promise.resolve();let i,s=new Promise(u=>{i=u}),a=o.startViewTransition(()=>(i(),AO(t))),{onViewTransitionCreated:c}=r;return c&&lo(t,()=>c({transition:a,from:e,to:n})),s})}function AO(t){return new Promise(e=>{Of(e,{injector:t})})}var Hp=(()=>{let e=class e{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new bn,this.transitionAbortSubject=new bn,this.configLoader=J(qp),this.environmentInjector=J(En),this.urlSerializer=J(qa),this.rootContexts=J($a),this.location=J(Zi),this.inputBindingEnabled=J(ml,{optional:!0})!==null,this.titleStrategy=J(Fx),this.options=J(Ga,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=J($p),this.createViewTransition=J(kx,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>de(void 0),this.rootComponentType=null;let r=i=>this.events.next(new xp(i)),o=i=>this.events.next(new wp(i));this.configLoader.onLoadEndListener=o,this.configLoader.onLoadStartListener=r}complete(){this.transitions?.complete()}handleNavigationRequest(r){let o=++this.navigationId;this.transitions?.next(G(C(C({},this.transitions.value),r),{id:o}))}setupNavigations(r,o,i){return this.transitions=new Pt({id:0,currentUrlTree:o,currentRawUrl:o,extractedUrl:this.urlHandlingStrategy.extract(o),urlAfterRedirects:this.urlHandlingStrategy.extract(o),rawUrl:o,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Na,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Nn(s=>s.id!==0),Ie(s=>G(C({},s),{extractedUrl:this.urlHandlingStrategy.extract(s.rawUrl)})),On(s=>{this.currentTransition=s;let a=!1,c=!1;return de(s).pipe(at(u=>{this.currentNavigation={id:u.id,initialUrl:u.rawUrl,extractedUrl:u.extractedUrl,trigger:u.source,extras:u.extras,previousNavigation:this.lastSuccessfulNavigation?G(C({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),On(u=>{let l=!r.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),d=u.extras.onSameUrlNavigation??r.onSameUrlNavigation;if(!l&&d!=="reload"){let h="";return this.events.next(new mo(u.id,this.urlSerializer.serialize(u.rawUrl),h,0)),u.resolve(null),Mn}if(this.urlHandlingStrategy.shouldProcessUrl(u.rawUrl))return de(u).pipe(On(h=>{let p=this.transitions?.getValue();return this.events.next(new os(h.id,this.urlSerializer.serialize(h.extractedUrl),h.source,h.restoredState)),p!==this.transitions?.getValue()?Mn:Promise.resolve(h)}),vO(this.environmentInjector,this.configLoader,this.rootComponentType,r.config,this.urlSerializer,this.paramsInheritanceStrategy),at(h=>{s.targetSnapshot=h.targetSnapshot,s.urlAfterRedirects=h.urlAfterRedirects,this.currentNavigation=G(C({},this.currentNavigation),{finalUrl:h.urlAfterRedirects});let p=new sl(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(p)}));if(l&&this.urlHandlingStrategy.shouldProcessUrl(u.currentRawUrl)){let{id:h,extractedUrl:p,source:y,restoredState:v,extras:_}=u,x=new os(h,this.urlSerializer.serialize(p),y,v);this.events.next(x);let I=bx(p,this.rootComponentType).snapshot;return this.currentTransition=s=G(C({},u),{targetSnapshot:I,urlAfterRedirects:p,extras:G(C({},_),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=p,de(s)}else{let h="";return this.events.next(new mo(u.id,this.urlSerializer.serialize(u.extractedUrl),h,1)),u.resolve(null),Mn}}),at(u=>{let l=new gp(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(l)}),Ie(u=>(this.currentTransition=s=G(C({},u),{guards:P1(u.targetSnapshot,u.currentSnapshot,this.rootContexts)}),s)),G1(this.environmentInjector,u=>this.events.next(u)),at(u=>{if(s.guardsResult=u.guardsResult,rs(u.guardsResult))throw Tx(this.urlSerializer,u.guardsResult);let l=new yp(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot,!!u.guardsResult);this.events.next(l)}),Nn(u=>u.guardsResult?!0:(this.cancelNavigationTransition(u,"",3),!1)),lp(u=>{if(u.guards.canActivateChecks.length)return de(u).pipe(at(l=>{let d=new vp(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(d)}),On(l=>{let d=!1;return de(l).pipe(_O(this.paramsInheritanceStrategy,this.environmentInjector),at({next:()=>d=!0,complete:()=>{d||this.cancelNavigationTransition(l,"",2)}}))}),at(l=>{let d=new _p(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(d)}))}),lp(u=>{let l=d=>{let h=[];d.routeConfig?.loadComponent&&!d.routeConfig._loadedComponent&&h.push(this.configLoader.loadComponent(d.routeConfig).pipe(at(p=>{d.component=p}),Ie(()=>{})));for(let p of d.children)h.push(...l(p));return h};return Js(l(u.targetSnapshot.root)).pipe(ro(null),Ur(1))}),lp(()=>this.afterPreactivation()),On(()=>{let{currentSnapshot:u,targetSnapshot:l}=s,d=this.createViewTransition?.(this.environmentInjector,u.root,l.root);return d?mt(d).pipe(Ie(()=>s)):de(s)}),Ie(u=>{let l=A1(r.routeReuseStrategy,u.targetSnapshot,u.currentRouterState);return this.currentTransition=s=G(C({},u),{targetRouterState:l}),this.currentNavigation.targetRouterState=l,s}),at(()=>{this.events.next(new Pa)}),k1(this.rootContexts,r.routeReuseStrategy,u=>this.events.next(u),this.inputBindingEnabled),Ur(1),at({next:u=>{a=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Gr(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects))),this.titleStrategy?.updateTitle(u.targetRouterState.snapshot),u.resolve(!0)},complete:()=>{a=!0}}),Hd(this.transitionAbortSubject.pipe(at(u=>{throw u}))),ta(()=>{if(!a&&!c){let u="";this.cancelNavigationTransition(s,u,1)}this.currentNavigation?.id===s.id&&(this.currentNavigation=null)}),no(u=>{if(c=!0,Ax(u))this.events.next(new po(s.id,this.urlSerializer.serialize(s.extractedUrl),u.message,u.cancellationCode)),N1(u)?this.events.next(new Va(u.url)):s.resolve(!1);else{this.events.next(new ka(s.id,this.urlSerializer.serialize(s.extractedUrl),u,s.targetSnapshot??void 0));try{s.resolve(r.errorHandler(u))}catch(l){s.reject(l)}}return Mn}))}))}cancelNavigationTransition(r,o,i){let s=new po(r.id,this.urlSerializer.serialize(r.extractedUrl),o,i);this.events.next(s),r.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}};e.\u0275fac=function(o){return new(o||e)},e.\u0275prov=se({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function IO(t){return t!==Na}var MO=(()=>{let e=class e{};e.\u0275fac=function(o){return new(o||e)},e.\u0275prov=se({token:e,factory:()=>(()=>J(NO))(),providedIn:"root"});let t=e;return t})(),Pp=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}},NO=(()=>{let e=class e extends Pp{};e.\u0275fac=(()=>{let r;return function(i){return(r||(r=Ou(e)))(i||e)}})(),e.\u0275prov=se({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Vx=(()=>{let e=class e{};e.\u0275fac=function(o){return new(o||e)},e.\u0275prov=se({token:e,factory:()=>(()=>J(OO))(),providedIn:"root"});let t=e;return t})(),OO=(()=>{let e=class e extends Vx{constructor(){super(...arguments),this.location=J(Zi),this.urlSerializer=J(qa),this.options=J(Ga,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=J($p),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new fo,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=bx(this.currentUrlTree,null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(r){return this.location.subscribe(o=>{o.type==="popstate"&&r(o.url,o.state)})}handleRouterEvent(r,o){if(r instanceof os)this.stateMemento=this.createStateMemento();else if(r instanceof mo)this.rawUrlTree=o.initialUrl;else if(r instanceof sl){if(this.urlUpdateStrategy==="eager"&&!o.extras.skipLocationChange){let i=this.urlHandlingStrategy.merge(o.finalUrl,o.initialUrl);this.setBrowserUrl(i,o)}}else r instanceof Pa?(this.currentUrlTree=o.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(o.finalUrl,o.initialUrl),this.routerState=o.targetRouterState,this.urlUpdateStrategy==="deferred"&&(o.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,o))):r instanceof po&&(r.code===3||r.code===2)?this.restoreHistory(o):r instanceof ka?this.restoreHistory(o,!0):r instanceof Gr&&(this.lastSuccessfulId=r.id,this.currentPageId=this.browserPageId)}setBrowserUrl(r,o){let i=this.urlSerializer.serialize(r);if(this.location.isCurrentPathEqualTo(i)||o.extras.replaceUrl){let s=this.browserPageId,a=C(C({},o.extras.state),this.generateNgRouterState(o.id,s));this.location.replaceState(i,"",a)}else{let s=C(C({},o.extras.state),this.generateNgRouterState(o.id,this.browserPageId+1));this.location.go(i,"",s)}}restoreHistory(r,o=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,s=this.currentPageId-i;s!==0?this.location.historyGo(s):this.currentUrlTree===r.finalUrl&&s===0&&(this.resetState(r),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(o&&this.resetState(r),this.resetUrlToCurrentUrlTree())}resetState(r){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,r.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(r,o){return this.canceledNavigationResolution==="computed"?{navigationId:r,\u0275routerPageId:o}:{navigationId:r}}};e.\u0275fac=(()=>{let r;return function(i){return(r||(r=Ou(e)))(i||e)}})(),e.\u0275prov=se({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Ia=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}(Ia||{});function Lx(t,e){t.events.pipe(Nn(n=>n instanceof Gr||n instanceof po||n instanceof ka||n instanceof mo),Ie(n=>n instanceof Gr||n instanceof mo?Ia.COMPLETE:(n instanceof po?n.code===0||n.code===1:!1)?Ia.REDIRECTING:Ia.FAILED),Nn(n=>n!==Ia.REDIRECTING),Ur(1)).subscribe(()=>{e()})}function FO(t){throw t}var RO={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},kO={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Qo=(()=>{let e=class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.isNgZoneEnabled=!1,this.console=J($u),this.stateManager=J(Vx),this.options=J(Ga,{optional:!0})||{},this.pendingTasks=J(Wu),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=J(Hp),this.urlSerializer=J(qa),this.location=J(Zi),this.urlHandlingStrategy=J($p),this._events=new bn,this.errorHandler=this.options.errorHandler||FO,this.navigated=!1,this.routeReuseStrategy=J(MO),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=J(fl,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!J(ml,{optional:!0}),this.eventsSubscription=new pt,this.isNgZoneEnabled=J(Ye)instanceof Ye&&Ye.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:r=>{this.console.warn(r)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let r=this.navigationTransitions.events.subscribe(o=>{try{let i=this.navigationTransitions.currentTransition,s=this.navigationTransitions.currentNavigation;if(i!==null&&s!==null){if(this.stateManager.handleRouterEvent(o,s),o instanceof po&&o.code!==0&&o.code!==1)this.navigated=!0;else if(o instanceof Gr)this.navigated=!0;else if(o instanceof Va){let a=this.urlHandlingStrategy.merge(o.url,i.currentRawUrl),c={skipLocationChange:i.extras.skipLocationChange,replaceUrl:this.urlUpdateStrategy==="eager"||IO(i.source)};this.scheduleNavigation(a,Na,null,c,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}VO(o)&&this._events.next(o)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(r)}resetRootComponentType(r){this.routerState.root.component=r,this.navigationTransitions.rootComponentType=r}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Na,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription||(this.nonRouterCurrentEntryChangeSubscription=this.stateManager.registerNonRouterCurrentEntryChangeListener((r,o)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(r,"popstate",o)},0)}))}navigateToSyncWithBrowser(r,o,i){let s={replaceUrl:!0},a=i?.navigationId?i:null;if(i){let u=C({},i);delete u.navigationId,delete u.\u0275routerPageId,Object.keys(u).length!==0&&(s.state=u)}let c=this.parseUrl(r);this.scheduleNavigation(c,o,a,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(r){this.config=r.map(Bp),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(r,o={}){let{relativeTo:i,queryParams:s,fragment:a,queryParamsHandling:c,preserveFragment:u}=o,l=u?this.currentUrlTree.fragment:a,d=null;switch(c){case"merge":d=C(C({},this.currentUrlTree.queryParams),s);break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=s||null}d!==null&&(d=this.removeEmptyProps(d));let h;try{let p=i?i.snapshot:this.routerState.snapshot.root;h=vx(p)}catch{(typeof r[0]!="string"||!r[0].startsWith("/"))&&(r=[]),h=this.currentUrlTree.root}return _x(h,r,d,l??null)}navigateByUrl(r,o={skipLocationChange:!1}){let i=rs(r)?r:this.parseUrl(r),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,Na,null,o)}navigate(r,o={skipLocationChange:!1}){return PO(r),this.navigateByUrl(this.createUrlTree(r,o),o)}serializeUrl(r){return this.urlSerializer.serialize(r)}parseUrl(r){try{return this.urlSerializer.parse(r)}catch{return this.urlSerializer.parse("/")}}isActive(r,o){let i;if(o===!0?i=C({},RO):o===!1?i=C({},kO):i=o,rs(r))return ex(this.currentUrlTree,r,i);let s=this.parseUrl(r);return ex(this.currentUrlTree,s,i)}removeEmptyProps(r){return Object.keys(r).reduce((o,i)=>{let s=r[i];return s!=null&&(o[i]=s),o},{})}scheduleNavigation(r,o,i,s,a){if(this.disposed)return Promise.resolve(!1);let c,u,l;a?(c=a.resolve,u=a.reject,l=a.promise):l=new Promise((h,p)=>{c=h,u=p});let d=this.pendingTasks.add();return Lx(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(d))}),this.navigationTransitions.handleNavigationRequest({source:o,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:r,extras:s,resolve:c,reject:u,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(h=>Promise.reject(h))}};e.\u0275fac=function(o){return new(o||e)},e.\u0275prov=se({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function PO(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new re(4008,!1)}function VO(t){return!(t instanceof Pa)&&!(t instanceof Va)}var pl=class{};var LO=(()=>{let e=class e{constructor(r,o,i,s,a){this.router=r,this.injector=i,this.preloadingStrategy=s,this.loader=a}setUpPreloading(){this.subscription=this.router.events.pipe(Nn(r=>r instanceof Gr),Fo(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(r,o){let i=[];for(let s of o){s.providers&&!s._injector&&(s._injector=Uu(s.providers,r,`Route: ${s.path}`));let a=s._injector??r,c=s._loadedInjector??a;(s.loadChildren&&!s._loadedRoutes&&s.canLoad===void 0||s.loadComponent&&!s._loadedComponent)&&i.push(this.preloadConfig(a,s)),(s.children||s._loadedRoutes)&&i.push(this.processRoutes(c,s.children??s._loadedRoutes))}return mt(i).pipe(bi())}preloadConfig(r,o){return this.preloadingStrategy.preload(o,()=>{let i;o.loadChildren&&o.canLoad===void 0?i=this.loader.loadChildren(r,o):i=de(null);let s=i.pipe(st(a=>a===null?de(void 0):(o._loadedRoutes=a.routes,o._loadedInjector=a.injector,this.processRoutes(a.injector??r,a.routes))));if(o.loadComponent&&!o._loadedComponent){let a=this.loader.loadComponent(o);return mt([s,a]).pipe(bi())}else return s})}};e.\u0275fac=function(o){return new(o||e)(ie(Qo),ie(Hu),ie(En),ie(pl),ie(qp))},e.\u0275prov=se({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),jx=new he(""),jO=(()=>{let e=class e{constructor(r,o,i,s,a={}){this.urlSerializer=r,this.transitions=o,this.viewportScroller=i,this.zone=s,this.options=a,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},a.scrollPositionRestoration=a.scrollPositionRestoration||"disabled",a.anchorScrolling=a.anchorScrolling||"disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(r=>{r instanceof os?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=r.navigationTrigger,this.restoredId=r.restoredState?r.restoredState.navigationId:0):r instanceof Gr?(this.lastId=r.id,this.scheduleScrollEvent(r,this.urlSerializer.parse(r.urlAfterRedirects).fragment)):r instanceof mo&&r.code===0&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(r,this.urlSerializer.parse(r.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(r=>{r instanceof al&&(r.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(r.position):r.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(r.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(r,o){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new al(r,this.lastSource==="popstate"?this.store[this.restoredId]:null,o))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}};e.\u0275fac=function(o){Kv()},e.\u0275prov=se({token:e,factory:e.\u0275fac});let t=e;return t})();function BO(t){return t.routerState.root}function za(t,e){return{\u0275kind:t,\u0275providers:e}}function UO(){let t=J(Pn);return e=>{let n=t.get(Yi);if(e!==n.components[0])return;let r=t.get(Qo),o=t.get(Bx);t.get(Wp)===1&&r.initialNavigation(),t.get(Ux,null,ge.Optional)?.setUpPreloading(),t.get(jx,null,ge.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),o.closed||(o.next(),o.complete(),o.unsubscribe())}}var Bx=new he("",{factory:()=>new bn}),Wp=new he("",{providedIn:"root",factory:()=>1});function qO(){return za(2,[{provide:Wp,useValue:0},{provide:Yu,multi:!0,deps:[Pn],useFactory:e=>{let n=e.get(L_,Promise.resolve());return()=>n.then(()=>new Promise(r=>{let o=e.get(Qo),i=e.get(Bx);Lx(o,()=>{r(!0)}),e.get(Hp).afterPreactivation=()=>(r(!0),i.closed?de(void 0):i),o.initialNavigation()}))}}])}function $O(){return za(3,[{provide:Yu,multi:!0,useFactory:()=>{let e=J(Qo);return()=>{e.setUpLocationChangeListener()}}},{provide:Wp,useValue:2}])}var Ux=new he("");function HO(t){return za(0,[{provide:Ux,useExisting:LO},{provide:pl,useExisting:t}])}function WO(){return za(8,[ox,{provide:ml,useExisting:ox}])}function GO(t){let e=[{provide:kx,useValue:SO},{provide:Px,useValue:C({skipNextTransition:!!t?.skipInitialTransition},t)}];return za(9,e)}var sx=new he("ROUTER_FORROOT_GUARD"),zO=[Zi,{provide:qa,useClass:Fa},Qo,$a,{provide:is,useFactory:BO,deps:[Qo]},qp,[]],qx=(()=>{let e=class e{constructor(r){}static forRoot(r,o){return{ngModule:e,providers:[zO,[],{provide:fl,multi:!0,useValue:r},{provide:sx,useFactory:KO,deps:[[Qo,new Fu,new df]]},{provide:Ga,useValue:o||{}},o?.useHash?ZO():QO(),YO(),o?.preloadingStrategy?HO(o.preloadingStrategy).\u0275providers:[],o?.initialNavigation?XO(o):[],o?.bindToComponentInputs?WO().\u0275providers:[],o?.enableViewTransitions?GO().\u0275providers:[],JO()]}}static forChild(r){return{ngModule:e,providers:[{provide:fl,multi:!0,useValue:r}]}}};e.\u0275fac=function(o){return new(o||e)(ie(sx,8))},e.\u0275mod=un({type:e}),e.\u0275inj=cn({});let t=e;return t})();function YO(){return{provide:jx,useFactory:()=>{let t=J($_),e=J(Ye),n=J(Ga),r=J(Hp),o=J(qa);return n.scrollOffset&&t.setOffset(n.scrollOffset),new jO(o,r,t,e,n)}}}function ZO(){return{provide:zo,useClass:B_}}function QO(){return{provide:zo,useClass:Qf}}function KO(t){return"guarded"}function XO(t){return[t.initialNavigation==="disabled"?$O().\u0275providers:[],t.initialNavigation==="enabledBlocking"?qO().\u0275providers:[]]}var ax=new he("");function JO(){return[{provide:ax,useFactory:UO},{provide:jf,multi:!0,useExisting:ax}]}var tF={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},zq=G(C({},tF),{"[class.ng-submitted]":"isSubmitted"});var $x=new he("CallSetDisabledState",{providedIn:"root",factory:()=>Gp}),Gp="always";var nF=(()=>{let e=class e{};e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=un({type:e}),e.\u0275inj=cn({});let t=e;return t})();var rF=new he("NgModelWithFormControlWarning");var Hx=(()=>{let e=class e{};e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=un({type:e}),e.\u0275inj=cn({imports:[nF]});let t=e;return t})();var Wx=(()=>{let e=class e{static withConfig(r){return{ngModule:e,providers:[{provide:$x,useValue:r.callSetDisabledState??Gp}]}}};e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=un({type:e}),e.\u0275inj=cn({imports:[Hx]});let t=e;return t})(),Gx=(()=>{let e=class e{static withConfig(r){return{ngModule:e,providers:[{provide:rF,useValue:r.warnOnNgModelWithFormControl??"always"},{provide:$x,useValue:r.callSetDisabledState??Gp}]}}};e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=un({type:e}),e.\u0275inj=cn({imports:[Hx]});let t=e;return t})();var zx=(()=>{let e=class e{};e.\u0275fac=function(o){return new(o||e)},e.\u0275cmp=et({type:e,selectors:[["app-root"]],decls:2,vars:0,consts:[[1,"container"]],template:function(o,i){o&1&&(Ze(0,"div",0),bt(1,"router-outlet"),Qe())},dependencies:[jp]});let t=e;return t})();function yo(t,e=0){return Array.from(new Array(t).keys()).map(n=>n+e)}var cs=class t{constructor(e=1,n=1,r=1,o=""){this.bar=e,this.beat=n,this.division=r,this.note=o}static from(e){return Object.assign(new t,e)}static fromEach(e){return e.map(n=>this.from(n))}get timeCode(){return zp(this.bar,this.beat,this.division)}};function zp(t=1,e=1,n=1){let r=n>1?`.${n}`:"";return(r||e>1)&&(r=`.${e}${r}`),`${t}${r}`}var Yp=(()=>{let e=class e{get timeCode(){return zp(this.barNumber,this.beatNumber,this.beatDivisionNumber)}get onTheBeat(){return this.beatDivisionNumber==1}get title(){return this.timeCode}get event(){return this.events.find(r=>r.bar===this.barNumber&&r.beat===this.beatNumber&&r.division===this.beatDivisionNumber&&r.note===this.note)}onClick(){return this.clickLine.emit(this),!1}get height(){return this.el.nativeElement.getBoundingClientRect().height}get top(){return this.el.nativeElement.getBoundingClientRect().top}constructor(r){this.el=r,this.lineIndex=0,this.note="",this.barNumber=1,this.beatNumber=1,this.beatDivisionNumber=1,this.events=[],this.clickLine=new Ve}};e.\u0275fac=function(o){return new(o||e)(Gt(Vn))},e.\u0275cmp=et({type:e,selectors:[["app-rythm-bar-beat-division-line"]],hostVars:5,hostBindings:function(o,i){o&1&&it("click",function(){return i.onClick()}),o&2&&(Rf("title",i.title),Dr("on-the-beat",i.onTheBeat)("bottom-line",i.bottomLine))},inputs:{lineIndex:"lineIndex",note:"note",barNumber:"barNumber",beatNumber:"beatNumber",beatDivisionNumber:"beatDivisionNumber",events:"events",bottomLine:"bottomLine"},outputs:{clickLine:"clickLine"},standalone:!0,features:[ct],decls:0,vars:0,template:function(o,i){},dependencies:[Nt],styles:["[_nghost-%COMP%]{background:white;aspect-ratio:1.7142857143;font-size:10pt;border-top:solid 1px black}.bottom-line[_nghost-%COMP%]{border-bottom:solid 1px black}.on-the-beat[_nghost-%COMP%]{background:#EEE}[_nghost-%COMP%]:hover{background:rgb(255,255,155)}"]});let t=e;return t})();var Yx=(()=>{let e=class e{};e.\u0275fac=function(o){return new(o||e)},e.\u0275cmp=et({type:e,selectors:[["app-note"]],standalone:!0,features:[ct],decls:1,vars:0,consts:[["src","assets/images/WholeNote-centered.svg"]],template:function(o,i){o&1&&bt(0,"img",0)},styles:["[_nghost-%COMP%]{aspect-ratio:12/7;pointer-events:none}img[_ngcontent-%COMP%]{display:block;width:100%;pointer-events:none}"]});let t=e;return t})();function oF(t,e){if(t&1){let n=ln();Ze(0,"app-rythm-bar-beat-division-line",2),it("clickLine",function(o){At(n);let i=ye();return It(i.onClickLine(o))}),Qe()}if(t&2){let n=e.$implicit,r=ye();Te("barNumber",r.barNumber)("beatNumber",r.beatNumber)("beatDivisionNumber",r.number)("lineIndex",n)("note",r.note(n+1))("bottomLine",n+1===r.linesArray.length)("events",r.events)}}function iF(t,e){if(t&1&&(Vt(0),Ze(1,"div",3),jt(2),Qe(),Lt()),t&2){let n=ye();Ne(2),Sn("V",n.beatNumber,"")}}function sF(t,e){if(t&1&&bt(0,"app-note"),t&2){let n=e.ngIf,r=ye(3);Bu("width",r.width,"px")("top",r.getNoteOffsetTop(n),"px")}}function aF(t,e){if(t&1&&(Vt(0),ot(1,sF,1,4,"app-note",5),Lt()),t&2){let n=e.$implicit,r=ye(2);Ne(1),Te("ngIf",r.line(n))}}function cF(t,e){if(t&1&&(Vt(0),ot(1,aF,2,1,"ng-container",4),Lt()),t&2){let n=ye();Ne(1),Te("ngForOf",n.eventsOnThisDivision)}}var Zx=(()=>{let e=class e{get active(){if(!this.timecode)return!1;let r=this.timecode.split("."),o=+r[0],i=+r[1],s=+r[2];return o===this.barNumber&&i===this.beatNumber&&s===this.number}get width(){return this.widthV2}get top(){return this.el.nativeElement.getBoundingClientRect().top}get widthV1(){return this.el.nativeElement.offsetWidth}get widthV2(){return this.el.nativeElement.getBoundingClientRect().width}getNoteOffsetTop(r){return this.getNoteOffsetTopV2(r)}getNoteOffsetTopV1(r){let i=this.width/1.7142857142857142*.97,s=1;return(r-1)*(i+s)}getNoteOffsetTopV2(r){if(this.lineComponents){let o=this.minLineComponent(r);if(o?.top!==void 0){let i=this.maxLineComponent(r);if(i===o)return o.top-this.top;if(i?.top!==void 0){let s=r%1;return o.top-this.top+(i.top-this.top)*s}}}return console.warn("Impossible de calculer getNoteOffsetTopV2 => on utilise getNoteOffsetTopV1"),this.getNoteOffsetTopV1(r)}lineComponent(r){return this.lineComponents?.get(r-1)}minLineComponent(r){return this.lineComponent(Math.floor(r))}maxLineComponent(r){return this.lineComponent(Math.ceil(r))}get eventsOnThisDivision(){return this.events.filter(r=>r.bar===this.barNumber&&r.beat===this.beatNumber&&r.division==this.number)}get linesArray(){return this._linesArray||(this._linesArray=yo(this.lines)),this._linesArray}constructor(r,o){this.el=r,this.changeDetectorRef=o,this.number=1,this.barNumber=1,this.beatNumber=1,this.lines=2,this.events=[],this.addEvent=new Ve,this.removeEvent=new Ve}ngAfterViewInit(){this.changeDetectorRef.detectChanges(),this.detectChangesOnWindowResize()}detectChangesOnWindowResize(){ea(window,"resize").pipe(at(()=>console.log("window resize")),jd(1e3),at(()=>console.log("debounced window resize"))).subscribe()}line(r){switch(r.note){case"kick":return this.lines;case"snare":return this.lines-1;default:throw new Error("Unknown note "+r.note)}}note(r){switch(r){case this.lines:return"kick";case this.lines-1:return"snare";default:throw new Error("Unknown line "+r)}}onClickLine(r){let o=r.event;if(o)return this.removeEvent.emit(o);let i=this.note(r.lineIndex+1),s=new cs(this.barNumber,this.beatNumber,r.beatDivisionNumber,i);this.addEvent.emit(s)}};e.\u0275fac=function(o){return new(o||e)(Gt(Vn),Gt(Hr))},e.\u0275cmp=et({type:e,selectors:[["app-rythm-bar-beat-division"]],viewQuery:function(o,i){if(o&1&&qu(Yp,5),o&2){let s;wa(s=ba())&&(i.lineComponents=s)}},hostVars:2,hostBindings:function(o,i){o&2&&Dr("active",i.active)},inputs:{number:"number",barNumber:"barNumber",beatNumber:"beatNumber",lines:"lines",events:"events",timecode:"timecode"},outputs:{addEvent:"addEvent",removeEvent:"removeEvent"},standalone:!0,features:[ct],decls:3,vars:3,consts:[[3,"barNumber","beatNumber","beatDivisionNumber","lineIndex","note","bottomLine","events","clickLine",4,"ngFor","ngForOf"],[4,"ngIf"],[3,"barNumber","beatNumber","beatDivisionNumber","lineIndex","note","bottomLine","events","clickLine"],[1,"beat-number"],[4,"ngFor","ngForOf"],[3,"width","top",4,"ngIf"]],template:function(o,i){o&1&&ot(0,oF,1,7,"app-rythm-bar-beat-division-line",0)(1,iF,3,1,"ng-container",1)(2,cF,2,1,"ng-container",1),o&2&&(Te("ngForOf",i.linesArray),Ne(1),Te("ngIf",i.number==1),Ne(1),Te("ngIf",i.lineComponents))},dependencies:[Nt,Ln,Qi,Yp,Yx],styles:['[_nghost-%COMP%]{flex:1;display:flex;flex-direction:column;position:relative}@font-face{font-family:Beats;src:local("Beats"),url("./media/Beats-JVHCVOT7.woff2") format("woff2")}.beat-number[_ngcontent-%COMP%]{font-family:Beats;font-size:4vw}app-note[_ngcontent-%COMP%]{position:absolute;width:24px}[_nghost-%COMP%]:hover, .active[_nghost-%COMP%]{background:rgb(255,255,155);color:#000}']});let t=e;return t})();function uF(t,e){if(t&1){let n=ln();Ze(0,"app-rythm-bar-beat-division",1),it("addEvent",function(o){At(n);let i=ye();return It(i.addEvent.emit(o))})("removeEvent",function(o){At(n);let i=ye();return It(i.removeEvent.emit(o))}),Qe()}if(t&2){let n=e.$implicit,r=ye();Te("barNumber",r.barNumber)("beatNumber",r.number)("number",n)("events",r.events)("timecode",r.timecode)}}var Qx=(()=>{let e=class e{constructor(){this.number=1,this.barNumber=1,this.beatDivision=4,this.events=[],this.addEvent=new Ve,this.removeEvent=new Ve}get beatDivisionArray(){return this._beatDivisionArray||(this._beatDivisionArray=yo(this.beatDivision,1)),this._beatDivisionArray}};e.\u0275fac=function(o){return new(o||e)},e.\u0275cmp=et({type:e,selectors:[["app-rythm-bar-beat"]],inputs:{number:"number",barNumber:"barNumber",beatDivision:"beatDivision",events:"events",timecode:"timecode"},outputs:{addEvent:"addEvent",removeEvent:"removeEvent"},standalone:!0,features:[ct],decls:1,vars:1,consts:[[3,"barNumber","beatNumber","number","events","timecode","addEvent","removeEvent",4,"ngFor","ngForOf"],[3,"barNumber","beatNumber","number","events","timecode","addEvent","removeEvent"]],template:function(o,i){o&1&&ot(0,uF,1,5,"app-rythm-bar-beat-division",0),o&2&&Te("ngForOf",i.beatDivisionArray)},dependencies:[Nt,Ln,Zx],styles:["[_nghost-%COMP%]{flex:1;display:flex;flex-direction:row}"]});let t=e;return t})();function lF(t,e){if(t&1){let n=ln();Ze(0,"app-rythm-bar-beat",1),it("addEvent",function(o){At(n);let i=ye();return It(i.addEvent.emit(o))})("removeEvent",function(o){At(n);let i=ye();return It(i.removeEvent.emit(o))}),Qe()}if(t&2){let n=e.$implicit,r=ye();Te("number",n)("barNumber",r.number)("beatDivision",r.beatDivision)("events",r.events)("timecode",r.timecode)}}var Kx=(()=>{let e=class e{constructor(){this.number=1,this.beats=4,this.beatDivision=4,this.events=[],this.addEvent=new Ve,this.removeEvent=new Ve}get beatsArray(){return this._beatsArray||(this._beatsArray=yo(this.beats,1)),this._beatsArray}};e.\u0275fac=function(o){return new(o||e)},e.\u0275cmp=et({type:e,selectors:[["app-rythm-bar"]],inputs:{number:"number",beats:"beats",beatDivision:"beatDivision",events:"events",timecode:"timecode"},outputs:{addEvent:"addEvent",removeEvent:"removeEvent"},standalone:!0,features:[ct],decls:1,vars:1,consts:[[3,"number","barNumber","beatDivision","events","timecode","addEvent","removeEvent",4,"ngFor","ngForOf"],[3,"number","barNumber","beatDivision","events","timecode","addEvent","removeEvent"]],template:function(o,i){o&1&&ot(0,lF,1,5,"app-rythm-bar-beat",0),o&2&&Te("ngForOf",i.beatsArray)},dependencies:[Nt,Ln,Qx],styles:["[_nghost-%COMP%]{display:flex}"]});let t=e;return t})();var vo=[{bar:1,beat:1,division:1,note:"kick"},{bar:1,beat:2,division:1,note:"snare"},{bar:1,beat:2,division:4,note:"kick"},{bar:1,beat:3,division:2,note:"kick"},{bar:1,beat:3,division:3,note:"kick"},{bar:1,beat:4,division:1,note:"snare"},{bar:2,beat:1,division:1,note:"kick"},{bar:2,beat:2,division:1,note:"snare"},{bar:2,beat:2,division:4,note:"kick"},{bar:2,beat:3,division:3,note:"kick"},{bar:2,beat:4,division:1,note:"snare"},{bar:3,beat:1,division:1,note:"kick"},{bar:3,beat:2,division:1,note:"snare"},{bar:3,beat:3,division:3,note:"kick"},{bar:3,beat:4,division:1,note:"snare"},{bar:4,beat:1,division:1,note:"kick"},{bar:4,beat:2,division:1,note:"snare"},{bar:4,beat:3,division:3,note:"kick"},{bar:4,beat:4,division:1,note:"snare"},{bar:3,beat:2,division:4,note:"kick"},{bar:1,beat:4,division:4,note:"kick"},{bar:2,beat:1,division:3,note:"kick"},{bar:2,beat:3,division:2,note:"kick"},{bar:4,beat:2,division:4,note:"kick"},{bar:4,beat:1,division:3,note:"kick"},{bar:5,beat:1,division:1,note:"kick"},{bar:5,beat:2,division:1,note:"snare"},{bar:5,beat:4,division:1,note:"snare"},{bar:6,beat:2,division:1,note:"snare"},{bar:6,beat:4,division:1,note:"snare"},{bar:7,beat:2,division:1,note:"snare"},{bar:7,beat:4,division:1,note:"snare"},{bar:8,beat:2,division:1,note:"snare"},{bar:8,beat:4,division:1,note:"snare"},{bar:8,beat:4,division:2,note:"snare"},{bar:8,beat:4,division:3,note:"snare"},{bar:8,beat:4,division:4,note:"snare"},{bar:6,beat:1,division:1,note:"kick"},{bar:6,beat:1,division:3,note:"kick"},{bar:7,beat:1,division:1,note:"kick"},{bar:8,beat:1,division:1,note:"kick"},{bar:8,beat:1,division:3,note:"kick"},{bar:5,beat:3,division:3,note:"kick"},{bar:6,beat:3,division:3,note:"kick"},{bar:7,beat:3,division:3,note:"kick"},{bar:8,beat:3,division:3,note:"snare"}];var Xx={sampleDuration:208};var fF=["*"],Jx=(()=>{let e=class e{};e.\u0275fac=function(o){return new(o||e)},e.\u0275cmp=et({type:e,selectors:[["app-pattern"]],standalone:!0,features:[ct],ngContentSelectors:fF,decls:1,vars:0,template:function(o,i){o&1&&(__(),x_(0))},styles:["[_nghost-%COMP%]{display:block;flex:0 1cm}"]});let t=e;return t})();function pF(t,e){if(t&1){let n=ln();Ze(0,"app-pattern",2),it("click",function(){let i=At(n).$implicit,s=ye(2);return It(s.onClickPatternInStructure(i))}),jt(1),Qe()}if(t&2){let n=e.$implicit,r=ye(2);Dr("active",n==r.currentPatternInStructure),Ne(1),kf(n.initial)}}function mF(t,e){if(t&1&&(Vt(0),ot(1,pF,2,3,"app-pattern",1),Lt()),t&2){let n=ye();Ne(1),Te("ngForOf",n.structure.patternsInStructure)}}var e0=(()=>{let e=class e{constructor(){this.clickPatternInStructure=new Ve}onClickPatternInStructure(r){this.clickPatternInStructure.emit(r)}};e.\u0275fac=function(o){return new(o||e)},e.\u0275cmp=et({type:e,selectors:[["app-structure"]],inputs:{structure:"structure",currentPatternInStructure:"currentPatternInStructure"},outputs:{clickPatternInStructure:"clickPatternInStructure"},standalone:!0,features:[ct],decls:1,vars:1,consts:[[4,"ngIf"],[3,"active","click",4,"ngFor","ngForOf"],[3,"click"]],template:function(o,i){o&1&&ot(0,mF,2,1,"ng-container",0),o&2&&Te("ngIf",i.structure)},dependencies:[Jx,Nt,Ln,Qi],styles:["[_nghost-%COMP%]{display:flex;flex-wrap:wrap}app-pattern.active[_ngcontent-%COMP%]{color:#fff}"]});let t=e;return t})();var Ya="14.7.77";var dn=Cd(Kp());var m0=()=>new DOMException("","AbortError");var g0=t=>(e,n,[r,o,i],s)=>{t(e[o],[n,r,i],a=>a[0]===n&&a[1]===r,s)};var y0=t=>(e,n,r)=>{let o=[];for(let i=0;i<r.numberOfInputs;i+=1)o.push(new Set);t.set(e,{activeInputs:o,outputs:new Set,passiveInputs:new WeakMap,renderer:n})};var v0=t=>(e,n)=>{t.set(e,{activeInputs:new Set,passiveInputs:new WeakMap,renderer:n})};var Sr=new WeakSet,vl=new WeakMap,us=new WeakMap,_l=new WeakMap,ic=new WeakMap,ls=new WeakMap,xl=new WeakMap,sc=new WeakMap,ac=new WeakMap,cc=new WeakMap;var _0={construct(){return _0}},x0=t=>{try{let e=new Proxy(t,_0);new e}catch{return!1}return!0};var w0=/^import(?:(?:[\s]+[\w]+|(?:[\s]+[\w]+[\s]*,)?[\s]*\{[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?(?:[\s]*,[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?)*[\s]*}|(?:[\s]+[\w]+[\s]*,)?[\s]*\*[\s]+as[\s]+[\w]+)[\s]+from)?(?:[\s]*)("([^"\\]|\\.)+"|'([^'\\]|\\.)+')(?:[\s]*);?/,Xp=(t,e)=>{let n=[],r=t.replace(/^[\s]+/,""),o=r.match(w0);for(;o!==null;){let i=o[1].slice(1,-1),s=o[0].replace(/([\s]+)?;?$/,"").replace(i,new URL(i,e).toString());n.push(s),r=r.slice(o[0].length).replace(/^[\s]+/,""),o=r.match(w0)}return[n.join(";"),r]};var b0=t=>{if(t!==void 0&&!Array.isArray(t))throw new TypeError("The parameterDescriptors property of given value for processorCtor is not an array.")},C0=t=>{if(!x0(t))throw new TypeError("The given value for processorCtor should be a constructor.");if(t.prototype===null||typeof t.prototype!="object")throw new TypeError("The given value for processorCtor should have a prototype.")},D0=(t,e,n,r,o,i,s,a,c,u,l,d,h)=>{let p=0;return(y,v,_={credentials:"omit"})=>{let x=l.get(y);if(x!==void 0&&x.has(v))return Promise.resolve();let I=u.get(y);if(I!==void 0){let T=I.get(v);if(T!==void 0)return T}let A=i(y),L=A.audioWorklet===void 0?o(v).then(([T,E])=>{let[w,m]=Xp(T,E),R=`${w};((a,b)=>{(a[b]=a[b]||[]).push((AudioWorkletProcessor,global,registerProcessor,sampleRate,self,window)=>{${m}
})})(window,'_AWGS')`;return n(R)}).then(()=>{let T=h._AWGS.pop();if(T===void 0)throw new SyntaxError;r(A.currentTime,A.sampleRate,()=>T(class{},void 0,(E,w)=>{if(E.trim()==="")throw e();let m=ac.get(A);if(m!==void 0){if(m.has(E))throw e();C0(w),b0(w.parameterDescriptors),m.set(E,w)}else C0(w),b0(w.parameterDescriptors),ac.set(A,new Map([[E,w]]))},A.sampleRate,void 0,void 0))}):Promise.all([o(v),Promise.resolve(t(d,d))]).then(([[T,E],w])=>{let m=p+1;p=m;let[R,K]=Xp(T,E),O=`${R};((AudioWorkletProcessor,registerProcessor)=>{${K}
})(${w?"AudioWorkletProcessor":"class extends AudioWorkletProcessor {__b=new WeakSet();constructor(){super();(p=>p.postMessage=(q=>(m,t)=>q.call(p,m,t?t.filter(u=>!this.__b.has(u)):t))(p.postMessage))(this.port)}}"},(n,p)=>registerProcessor(n,class extends p{${w?"":"__c = (a) => a.forEach(e=>this.__b.add(e.buffer));"}process(i,o,p){${w?"":"i.forEach(this.__c);o.forEach(this.__c);this.__c(Object.values(p));"}return super.process(i.map(j=>j.some(k=>k.length===0)?[]:j),o,p)}}));registerProcessor('__sac${m}',class extends AudioWorkletProcessor{process(){return !1}})`,N=new Blob([O],{type:"application/javascript; charset=utf-8"}),M=URL.createObjectURL(N);return A.audioWorklet.addModule(M,_).then(()=>{if(a(A))return A;let F=s(A);return F.audioWorklet.addModule(M,_).then(()=>F)}).then(F=>{if(c===null)throw new SyntaxError;try{new c(F,`__sac${m}`)}catch{throw new SyntaxError}}).finally(()=>URL.revokeObjectURL(M))});return I===void 0?u.set(y,new Map([[v,L]])):I.set(v,L),L.then(()=>{let T=l.get(y);T===void 0?l.set(y,new Set([v])):T.add(v)}).finally(()=>{let T=u.get(y);T!==void 0&&T.delete(v)}),L}};var Ct=(t,e)=>{let n=t.get(e);if(n===void 0)throw new Error("A value with the given key could not be found.");return n};var _o=(t,e)=>{let n=Array.from(t).filter(e);if(n.length>1)throw Error("More than one element was found.");if(n.length===0)throw Error("No element was found.");let[r]=n;return t.delete(r),r};var wl=(t,e,n,r)=>{let o=Ct(t,e),i=_o(o,s=>s[0]===n&&s[1]===r);return o.size===0&&t.delete(e),i};var Ar=t=>Ct(xl,t);var rr=t=>{if(Sr.has(t))throw new Error("The AudioNode is already stored.");Sr.add(t),Ar(t).forEach(e=>e(!0))};var bl=t=>"port"in t;var Ir=t=>{if(!Sr.has(t))throw new Error("The AudioNode is not stored.");Sr.delete(t),Ar(t).forEach(e=>e(!1))};var uc=(t,e)=>{!bl(t)&&e.every(n=>n.size===0)&&Ir(t)};var E0=(t,e,n,r,o,i,s,a,c,u,l,d,h)=>{let p=new WeakMap;return(y,v,_,x,I)=>{let{activeInputs:A,passiveInputs:L}=i(v),{outputs:T}=i(y),E=a(y),w=m=>{let R=c(v),K=c(y);if(m){let V=wl(L,y,_,x);t(A,y,V,!1),!I&&!d(y)&&n(K,R,_,x),h(v)&&rr(v)}else{let V=r(A,y,_,x);e(L,x,V,!1),!I&&!d(y)&&o(K,R,_,x);let j=s(v);if(j===0)l(v)&&uc(v,A);else{let X=p.get(v);X!==void 0&&clearTimeout(X),p.set(v,setTimeout(()=>{l(v)&&uc(v,A)},j*1e3))}}};return u(T,[v,_,x],m=>m[0]===v&&m[1]===_&&m[2]===x,!0)?(E.add(w),l(y)?t(A,y,[_,x,w],!0):e(L,x,[y,_,w],!0),!0):!1}};var T0=t=>(e,n,[r,o,i],s)=>{let a=e.get(r);a===void 0?e.set(r,new Set([[o,n,i]])):t(a,[o,n,i],c=>c[0]===o&&c[1]===n,s)};var S0=t=>(e,n)=>{let r=t(e,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});n.connect(r).connect(e.destination);let o=()=>{n.removeEventListener("ended",o),n.disconnect(r),r.disconnect()};n.addEventListener("ended",o)};var A0=t=>(e,n)=>{t(e).add(n)};var FF={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",fftSize:2048,maxDecibels:-30,minDecibels:-100,smoothingTimeConstant:.8},I0=(t,e,n,r,o,i)=>class extends t{constructor(a,c){let u=o(a),l=C(C({},FF),c),d=r(u,l),h=i(u)?e():null;super(a,!1,d,h),this._nativeAnalyserNode=d}get fftSize(){return this._nativeAnalyserNode.fftSize}set fftSize(a){this._nativeAnalyserNode.fftSize=a}get frequencyBinCount(){return this._nativeAnalyserNode.frequencyBinCount}get maxDecibels(){return this._nativeAnalyserNode.maxDecibels}set maxDecibels(a){let c=this._nativeAnalyserNode.maxDecibels;if(this._nativeAnalyserNode.maxDecibels=a,!(a>this._nativeAnalyserNode.minDecibels))throw this._nativeAnalyserNode.maxDecibels=c,n()}get minDecibels(){return this._nativeAnalyserNode.minDecibels}set minDecibels(a){let c=this._nativeAnalyserNode.minDecibels;if(this._nativeAnalyserNode.minDecibels=a,!(this._nativeAnalyserNode.maxDecibels>a))throw this._nativeAnalyserNode.minDecibels=c,n()}get smoothingTimeConstant(){return this._nativeAnalyserNode.smoothingTimeConstant}set smoothingTimeConstant(a){this._nativeAnalyserNode.smoothingTimeConstant=a}getByteFrequencyData(a){this._nativeAnalyserNode.getByteFrequencyData(a)}getByteTimeDomainData(a){this._nativeAnalyserNode.getByteTimeDomainData(a)}getFloatFrequencyData(a){this._nativeAnalyserNode.getFloatFrequencyData(a)}getFloatTimeDomainData(a){this._nativeAnalyserNode.getFloatTimeDomainData(a)}};var Oe=(t,e)=>t.context===e;var M0=(t,e,n)=>()=>{let r=new WeakMap,o=(i,s)=>ee(void 0,null,function*(){let a=e(i);if(!Oe(a,s)){let u={channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,fftSize:a.fftSize,maxDecibels:a.maxDecibels,minDecibels:a.minDecibels,smoothingTimeConstant:a.smoothingTimeConstant};a=t(s,u)}return r.set(s,a),yield n(i,s,a),a});return{render(i,s){let a=r.get(s);return a!==void 0?Promise.resolve(a):o(i,s)}}};var ds=t=>{try{t.copyToChannel(new Float32Array(1),0,-1)}catch{return!1}return!0};var Bn=()=>new DOMException("","IndexSizeError");var hs=t=>{t.getChannelData=(e=>n=>{try{return e.call(t,n)}catch(r){throw r.code===12?Bn():r}})(t.getChannelData)};var RF={numberOfChannels:1},N0=(t,e,n,r,o,i,s,a)=>{let c=null;return class O0{constructor(l){if(o===null)throw new Error("Missing the native OfflineAudioContext constructor.");let{length:d,numberOfChannels:h,sampleRate:p}=C(C({},RF),l);c===null&&(c=new o(1,1,44100));let y=r!==null&&e(i,i)?new r({length:d,numberOfChannels:h,sampleRate:p}):c.createBuffer(h,d,p);if(y.numberOfChannels===0)throw n();return typeof y.copyFromChannel!="function"?(s(y),hs(y)):e(ds,()=>ds(y))||a(y),t.add(y),y}static[Symbol.hasInstance](l){return l!==null&&typeof l=="object"&&Object.getPrototypeOf(l)===O0.prototype||t.has(l)}}};var gt=-34028234663852886e22,ut=-gt;var tn=t=>Sr.has(t);var kF={buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1},F0=(t,e,n,r,o,i,s,a)=>class extends t{constructor(u,l){let d=i(u),h=C(C({},kF),l),p=o(d,h),y=s(d),v=y?e():null;super(u,!1,p,v),this._audioBufferSourceNodeRenderer=v,this._isBufferNullified=!1,this._isBufferSet=h.buffer!==null,this._nativeAudioBufferSourceNode=p,this._onended=null,this._playbackRate=n(this,y,p.playbackRate,ut,gt)}get buffer(){return this._isBufferNullified?null:this._nativeAudioBufferSourceNode.buffer}set buffer(u){if(this._nativeAudioBufferSourceNode.buffer=u,u!==null){if(this._isBufferSet)throw r();this._isBufferSet=!0}}get loop(){return this._nativeAudioBufferSourceNode.loop}set loop(u){this._nativeAudioBufferSourceNode.loop=u}get loopEnd(){return this._nativeAudioBufferSourceNode.loopEnd}set loopEnd(u){this._nativeAudioBufferSourceNode.loopEnd=u}get loopStart(){return this._nativeAudioBufferSourceNode.loopStart}set loopStart(u){this._nativeAudioBufferSourceNode.loopStart=u}get onended(){return this._onended}set onended(u){let l=typeof u=="function"?a(this,u):null;this._nativeAudioBufferSourceNode.onended=l;let d=this._nativeAudioBufferSourceNode.onended;this._onended=d!==null&&d===l?u:d}get playbackRate(){return this._playbackRate}start(u=0,l=0,d){if(this._nativeAudioBufferSourceNode.start(u,l,d),this._audioBufferSourceNodeRenderer!==null&&(this._audioBufferSourceNodeRenderer.start=d===void 0?[u,l]:[u,l,d]),this.context.state!=="closed"){rr(this);let h=()=>{this._nativeAudioBufferSourceNode.removeEventListener("ended",h),tn(this)&&Ir(this)};this._nativeAudioBufferSourceNode.addEventListener("ended",h)}}stop(u=0){this._nativeAudioBufferSourceNode.stop(u),this._audioBufferSourceNodeRenderer!==null&&(this._audioBufferSourceNodeRenderer.stop=u)}};var R0=(t,e,n,r,o)=>()=>{let i=new WeakMap,s=null,a=null,c=(u,l)=>ee(void 0,null,function*(){let d=n(u),h=Oe(d,l);if(!h){let p={buffer:d.buffer,channelCount:d.channelCount,channelCountMode:d.channelCountMode,channelInterpretation:d.channelInterpretation,loop:d.loop,loopEnd:d.loopEnd,loopStart:d.loopStart,playbackRate:d.playbackRate.value};d=e(l,p),s!==null&&d.start(...s),a!==null&&d.stop(a)}return i.set(l,d),h?yield t(l,u.playbackRate,d.playbackRate):yield r(l,u.playbackRate,d.playbackRate),yield o(u,l,d),d});return{set start(u){s=u},set stop(u){a=u},render(u,l){let d=i.get(l);return d!==void 0?Promise.resolve(d):c(u,l)}}};var k0=t=>"playbackRate"in t;var P0=t=>"frequency"in t&&"gain"in t;var V0=t=>"offset"in t;var L0=t=>!("frequency"in t)&&"gain"in t;var j0=t=>"detune"in t&&"frequency"in t;var B0=t=>"pan"in t;var Mt=t=>Ct(vl,t);var xo=t=>Ct(_l,t);var Cl=(t,e)=>{let{activeInputs:n}=Mt(t);n.forEach(o=>o.forEach(([i])=>{e.includes(t)||Cl(i,[...e,t])}));let r=k0(t)?[t.playbackRate]:bl(t)?Array.from(t.parameters.values()):P0(t)?[t.Q,t.detune,t.frequency,t.gain]:V0(t)?[t.offset]:L0(t)?[t.gain]:j0(t)?[t.detune,t.frequency]:B0(t)?[t.pan]:[];for(let o of r){let i=xo(o);i!==void 0&&i.activeInputs.forEach(([s])=>Cl(s,e))}tn(t)&&Ir(t)};var wo=t=>{Cl(t.destination,[])};var Dl=t=>t===void 0||typeof t=="number"||typeof t=="string"&&(t==="balanced"||t==="interactive"||t==="playback");var U0=(t,e,n,r,o,i,s,a,c)=>class extends t{constructor(l={}){if(c===null)throw new Error("Missing the native AudioContext constructor.");let d;try{d=new c(l)}catch(y){throw y.code===12&&y.message==="sampleRate is not in range"?n():y}if(d===null)throw r();if(!Dl(l.latencyHint))throw new TypeError(`The provided value '${l.latencyHint}' is not a valid enum value of type AudioContextLatencyCategory.`);if(l.sampleRate!==void 0&&d.sampleRate!==l.sampleRate)throw n();super(d,2);let{latencyHint:h}=l,{sampleRate:p}=d;if(this._baseLatency=typeof d.baseLatency=="number"?d.baseLatency:h==="balanced"?512/p:h==="interactive"||h===void 0?256/p:h==="playback"?1024/p:Math.max(2,Math.min(128,Math.round(h*p/128)))*128/p,this._nativeAudioContext=d,c.name==="webkitAudioContext"?(this._nativeGainNode=d.createGain(),this._nativeOscillatorNode=d.createOscillator(),this._nativeGainNode.gain.value=1e-37,this._nativeOscillatorNode.connect(this._nativeGainNode).connect(d.destination),this._nativeOscillatorNode.start()):(this._nativeGainNode=null,this._nativeOscillatorNode=null),this._state=null,d.state==="running"){this._state="suspended";let y=()=>{this._state==="suspended"&&(this._state=null),d.removeEventListener("statechange",y)};d.addEventListener("statechange",y)}}get baseLatency(){return this._baseLatency}get state(){return this._state!==null?this._state:this._nativeAudioContext.state}close(){return this.state==="closed"?this._nativeAudioContext.close().then(()=>{throw e()}):(this._state==="suspended"&&(this._state=null),this._nativeAudioContext.close().then(()=>{this._nativeGainNode!==null&&this._nativeOscillatorNode!==null&&(this._nativeOscillatorNode.stop(),this._nativeGainNode.disconnect(),this._nativeOscillatorNode.disconnect()),wo(this)}))}createMediaElementSource(l){return new o(this,{mediaElement:l})}createMediaStreamDestination(){return new i(this)}createMediaStreamSource(l){return new s(this,{mediaStream:l})}createMediaStreamTrackSource(l){return new a(this,{mediaStreamTrack:l})}resume(){return this._state==="suspended"?new Promise((l,d)=>{let h=()=>{this._nativeAudioContext.removeEventListener("statechange",h),this._nativeAudioContext.state==="running"?l():this.resume().then(l,d)};this._nativeAudioContext.addEventListener("statechange",h)}):this._nativeAudioContext.resume().catch(l=>{throw l===void 0||l.code===15?e():l})}suspend(){return this._nativeAudioContext.suspend().catch(l=>{throw l===void 0?e():l})}};var q0=(t,e,n,r,o,i,s,a)=>class extends t{constructor(u,l){let d=i(u),h=s(d),p=o(d,l,h),y=h?e(a):null;super(u,!1,p,y),this._isNodeOfNativeOfflineAudioContext=h,this._nativeAudioDestinationNode=p}get channelCount(){return this._nativeAudioDestinationNode.channelCount}set channelCount(u){if(this._isNodeOfNativeOfflineAudioContext)throw r();if(u>this._nativeAudioDestinationNode.maxChannelCount)throw n();this._nativeAudioDestinationNode.channelCount=u}get channelCountMode(){return this._nativeAudioDestinationNode.channelCountMode}set channelCountMode(u){if(this._isNodeOfNativeOfflineAudioContext)throw r();this._nativeAudioDestinationNode.channelCountMode=u}get maxChannelCount(){return this._nativeAudioDestinationNode.maxChannelCount}};var $0=t=>{let e=new WeakMap,n=(r,o)=>ee(void 0,null,function*(){let i=o.destination;return e.set(o,i),yield t(r,o,i),i});return{render(r,o){let i=e.get(o);return i!==void 0?Promise.resolve(i):n(r,o)}}};var H0=(t,e,n,r,o,i,s,a)=>(c,u)=>{let l=u.listener,d=()=>{let T=new Float32Array(1),E=e(u,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:9}),w=s(u),m=!1,R=[0,0,-1,0,1,0],K=[0,0,0],V=()=>{if(m)return;m=!0;let N=r(u,256,9,0);N.onaudioprocess=({inputBuffer:M})=>{let F=[i(M,T,0),i(M,T,1),i(M,T,2),i(M,T,3),i(M,T,4),i(M,T,5)];F.some((B,W)=>B!==R[W])&&(l.setOrientation(...F),R=F);let H=[i(M,T,6),i(M,T,7),i(M,T,8)];H.some((B,W)=>B!==K[W])&&(l.setPosition(...H),K=H)},E.connect(N)},j=N=>M=>{M!==R[N]&&(R[N]=M,l.setOrientation(...R))},X=N=>M=>{M!==K[N]&&(K[N]=M,l.setPosition(...K))},O=(N,M,F)=>{let H=n(u,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:M});H.connect(E,0,N),H.start(),Object.defineProperty(H.offset,"defaultValue",{get(){return M}});let B=t({context:c},w,H.offset,ut,gt);return a(B,"value",W=>()=>W.call(B),W=>U=>{try{W.call(B,U)}catch(Se){if(Se.code!==9)throw Se}V(),w&&F(U)}),B.cancelAndHoldAtTime=(W=>w?()=>{throw o()}:(...U)=>{let Se=W.apply(B,U);return V(),Se})(B.cancelAndHoldAtTime),B.cancelScheduledValues=(W=>w?()=>{throw o()}:(...U)=>{let Se=W.apply(B,U);return V(),Se})(B.cancelScheduledValues),B.exponentialRampToValueAtTime=(W=>w?()=>{throw o()}:(...U)=>{let Se=W.apply(B,U);return V(),Se})(B.exponentialRampToValueAtTime),B.linearRampToValueAtTime=(W=>w?()=>{throw o()}:(...U)=>{let Se=W.apply(B,U);return V(),Se})(B.linearRampToValueAtTime),B.setTargetAtTime=(W=>w?()=>{throw o()}:(...U)=>{let Se=W.apply(B,U);return V(),Se})(B.setTargetAtTime),B.setValueAtTime=(W=>w?()=>{throw o()}:(...U)=>{let Se=W.apply(B,U);return V(),Se})(B.setValueAtTime),B.setValueCurveAtTime=(W=>w?()=>{throw o()}:(...U)=>{let Se=W.apply(B,U);return V(),Se})(B.setValueCurveAtTime),B};return{forwardX:O(0,0,j(0)),forwardY:O(1,0,j(1)),forwardZ:O(2,-1,j(2)),positionX:O(6,0,X(0)),positionY:O(7,0,X(1)),positionZ:O(8,0,X(2)),upX:O(3,0,j(3)),upY:O(4,1,j(4)),upZ:O(5,0,j(5))}},{forwardX:h,forwardY:p,forwardZ:y,positionX:v,positionY:_,positionZ:x,upX:I,upY:A,upZ:L}=l.forwardX===void 0?d():l;return{get forwardX(){return h},get forwardY(){return p},get forwardZ(){return y},get positionX(){return v},get positionY(){return _},get positionZ(){return x},get upX(){return I},get upY(){return A},get upZ(){return L}}};var Ko=t=>"context"in t;var bo=t=>Ko(t[0]);var or=(t,e,n,r)=>{for(let o of t)if(n(o)){if(r)return!1;throw Error("The set contains at least one similar element.")}return t.add(e),!0};var Jp=(t,e,[n,r],o)=>{or(t,[e,n,r],i=>i[0]===e&&i[1]===n,o)};var em=(t,[e,n,r],o)=>{let i=t.get(e);i===void 0?t.set(e,new Set([[n,r]])):or(i,[n,r],s=>s[0]===n,o)};var Un=t=>"inputs"in t;var fs=(t,e,n,r)=>{if(Un(e)){let o=e.inputs[r];return t.connect(o,n,0),[o,n,0]}return t.connect(e,n,r),[e,n,r]};var tm=(t,e,n)=>{for(let r of t)if(r[0]===e&&r[1]===n)return t.delete(r),r;return null};var W0=(t,e,n)=>_o(t,r=>r[0]===e&&r[1]===n);var nm=(t,e)=>{if(!Ar(t).delete(e))throw new Error("Missing the expected event listener.")};var rm=(t,e,n)=>{let r=Ct(t,e),o=_o(r,i=>i[0]===n);return r.size===0&&t.delete(e),o};var ps=(t,e,n,r)=>{Un(e)?t.disconnect(e.inputs[r],n,0):t.disconnect(e,n,r)};var qe=t=>Ct(us,t);var Xo=t=>Ct(ic,t);var Yr=t=>sc.has(t);var ms=t=>!Sr.has(t);var om=(t,e)=>new Promise(n=>{if(e!==null)n(!0);else{let r=t.createScriptProcessor(256,1,1),o=t.createGain(),i=t.createBuffer(1,2,44100),s=i.getChannelData(0);s[0]=1,s[1]=1;let a=t.createBufferSource();a.buffer=i,a.loop=!0,a.connect(r).connect(t.destination),a.connect(o),a.disconnect(o),r.onaudioprocess=c=>{let u=c.inputBuffer.getChannelData(0);Array.prototype.some.call(u,l=>l===1)?n(!0):n(!1),a.stop(),r.onaudioprocess=null,a.disconnect(r),r.disconnect(t.destination)},a.start()}});var El=(t,e)=>{let n=new Map;for(let r of t)for(let o of r){let i=n.get(o);n.set(o,i===void 0?1:i+1)}n.forEach((r,o)=>e(o,r))};var Jo=t=>"context"in t;var G0=t=>{let e=new Map;t.connect=(n=>(r,o=0,i=0)=>{let s=Jo(r)?n(r,o,i):n(r,o),a=e.get(r);return a===void 0?e.set(r,[{input:i,output:o}]):a.every(c=>c.input!==i||c.output!==o)&&a.push({input:i,output:o}),s})(t.connect.bind(t)),t.disconnect=(n=>(r,o,i)=>{if(n.apply(t),r===void 0)e.clear();else if(typeof r=="number")for(let[s,a]of e){let c=a.filter(u=>u.output!==r);c.length===0?e.delete(s):e.set(s,c)}else if(e.has(r))if(o===void 0)e.delete(r);else{let s=e.get(r);if(s!==void 0){let a=s.filter(c=>c.output!==o&&(c.input!==i||i===void 0));a.length===0?e.delete(r):e.set(r,a)}}for(let[s,a]of e)a.forEach(c=>{Jo(s)?t.connect(s,c.output,c.input):t.connect(s,c.output)})})(t.disconnect)};var PF=(t,e,n,r)=>{let{activeInputs:o,passiveInputs:i}=xo(e),{outputs:s}=Mt(t),a=Ar(t),c=u=>{let l=qe(t),d=Xo(e);if(u){let h=rm(i,t,n);Jp(o,t,h,!1),!r&&!Yr(t)&&l.connect(d,n)}else{let h=W0(o,t,n);em(i,h,!1),!r&&!Yr(t)&&l.disconnect(d,n)}};return or(s,[e,n],u=>u[0]===e&&u[1]===n,!0)?(a.add(c),tn(t)?Jp(o,t,[n,c],!0):em(i,[t,n,c],!0),!0):!1},VF=(t,e,n,r)=>{let{activeInputs:o,passiveInputs:i}=Mt(e),s=tm(o[r],t,n);return s===null?[wl(i,t,n,r)[2],!1]:[s[2],!0]},LF=(t,e,n)=>{let{activeInputs:r,passiveInputs:o}=xo(e),i=tm(r,t,n);return i===null?[rm(o,t,n)[1],!1]:[i[2],!0]},im=(t,e,n,r,o)=>{let[i,s]=VF(t,n,r,o);if(i!==null&&(nm(t,i),s&&!e&&!Yr(t)&&ps(qe(t),qe(n),r,o)),tn(n)){let{activeInputs:a}=Mt(n);uc(n,a)}},sm=(t,e,n,r)=>{let[o,i]=LF(t,n,r);o!==null&&(nm(t,o),i&&!e&&!Yr(t)&&qe(t).disconnect(Xo(n),r))},jF=(t,e)=>{let n=Mt(t),r=[];for(let o of n.outputs)bo(o)?im(t,e,...o):sm(t,e,...o),r.push(o[0]);return n.outputs.clear(),r},BF=(t,e,n)=>{let r=Mt(t),o=[];for(let i of r.outputs)i[1]===n&&(bo(i)?im(t,e,...i):sm(t,e,...i),o.push(i[0]),r.outputs.delete(i));return o},UF=(t,e,n,r,o)=>{let i=Mt(t);return Array.from(i.outputs).filter(s=>s[0]===n&&(r===void 0||s[1]===r)&&(o===void 0||s[2]===o)).map(s=>(bo(s)?im(t,e,...s):sm(t,e,...s),i.outputs.delete(s),s[0]))},z0=(t,e,n,r,o,i,s,a,c,u,l,d,h,p,y,v)=>class extends u{constructor(x,I,A,L){super(A),this._context=x,this._nativeAudioNode=A;let T=l(x);d(T)&&n(om,()=>om(T,v))!==!0&&G0(A),us.set(this,A),xl.set(this,new Set),x.state!=="closed"&&I&&rr(this),t(this,L,A)}get channelCount(){return this._nativeAudioNode.channelCount}set channelCount(x){this._nativeAudioNode.channelCount=x}get channelCountMode(){return this._nativeAudioNode.channelCountMode}set channelCountMode(x){this._nativeAudioNode.channelCountMode=x}get channelInterpretation(){return this._nativeAudioNode.channelInterpretation}set channelInterpretation(x){this._nativeAudioNode.channelInterpretation=x}get context(){return this._context}get numberOfInputs(){return this._nativeAudioNode.numberOfInputs}get numberOfOutputs(){return this._nativeAudioNode.numberOfOutputs}connect(x,I=0,A=0){if(I<0||I>=this._nativeAudioNode.numberOfOutputs)throw o();let L=l(this._context),T=y(L);if(h(x)||p(x))throw i();if(Ko(x)){let m=qe(x);try{let K=fs(this._nativeAudioNode,m,I,A),V=ms(this);(T||V)&&this._nativeAudioNode.disconnect(...K),this.context.state!=="closed"&&!V&&ms(x)&&rr(x)}catch(K){throw K.code===12?i():K}if(e(this,x,I,A,T)){let K=c([this],x);El(K,r(T))}return x}let E=Xo(x);if(E.name==="playbackRate"&&E.maxValue===1024)throw s();try{this._nativeAudioNode.connect(E,I),(T||ms(this))&&this._nativeAudioNode.disconnect(E,I)}catch(m){throw m.code===12?i():m}if(PF(this,x,I,T)){let m=c([this],x);El(m,r(T))}}disconnect(x,I,A){let L,T=l(this._context),E=y(T);if(x===void 0)L=jF(this,E);else if(typeof x=="number"){if(x<0||x>=this.numberOfOutputs)throw o();L=BF(this,E,x)}else{if(I!==void 0&&(I<0||I>=this.numberOfOutputs)||Ko(x)&&A!==void 0&&(A<0||A>=x.numberOfInputs))throw o();if(L=UF(this,E,x,I,A),L.length===0)throw i()}for(let w of L){let m=c([this],w);El(m,a)}}};var Y0=Cd(Kp()),Z0=(t,e,n,r,o,i,s,a,c,u,l,d,h)=>(p,y,v,_=null,x=null)=>{let I=v.value,A=new Y0.AutomationEventList(I),L=y?r(A):null,T={get defaultValue(){return I},get maxValue(){return _===null?v.maxValue:_},get minValue(){return x===null?v.minValue:x},get value(){return v.value},set value(E){v.value=E,T.setValueAtTime(E,p.context.currentTime)},cancelAndHoldAtTime(E){if(typeof v.cancelAndHoldAtTime=="function")L===null&&A.flush(p.context.currentTime),A.add(o(E)),v.cancelAndHoldAtTime(E);else{let w=Array.from(A).pop();L===null&&A.flush(p.context.currentTime),A.add(o(E));let m=Array.from(A).pop();v.cancelScheduledValues(E),w!==m&&m!==void 0&&(m.type==="exponentialRampToValue"?v.exponentialRampToValueAtTime(m.value,m.endTime):m.type==="linearRampToValue"?v.linearRampToValueAtTime(m.value,m.endTime):m.type==="setValue"?v.setValueAtTime(m.value,m.startTime):m.type==="setValueCurve"&&v.setValueCurveAtTime(m.values,m.startTime,m.duration))}return T},cancelScheduledValues(E){return L===null&&A.flush(p.context.currentTime),A.add(i(E)),v.cancelScheduledValues(E),T},exponentialRampToValueAtTime(E,w){if(E===0)throw new RangeError;if(!Number.isFinite(w)||w<0)throw new RangeError;let m=p.context.currentTime;return L===null&&A.flush(m),Array.from(A).length===0&&(A.add(u(I,m)),v.setValueAtTime(I,m)),A.add(s(E,w)),v.exponentialRampToValueAtTime(E,w),T},linearRampToValueAtTime(E,w){let m=p.context.currentTime;return L===null&&A.flush(m),Array.from(A).length===0&&(A.add(u(I,m)),v.setValueAtTime(I,m)),A.add(a(E,w)),v.linearRampToValueAtTime(E,w),T},setTargetAtTime(E,w,m){return L===null&&A.flush(p.context.currentTime),A.add(c(E,w,m)),v.setTargetAtTime(E,w,m),T},setValueAtTime(E,w){return L===null&&A.flush(p.context.currentTime),A.add(u(E,w)),v.setValueAtTime(E,w),T},setValueCurveAtTime(E,w,m){let R=E instanceof Float32Array?E:new Float32Array(E);if(d!==null&&d.name==="webkitAudioContext"){let K=w+m,V=p.context.sampleRate,j=Math.ceil(w*V),X=Math.floor(K*V),O=X-j,N=new Float32Array(O);for(let F=0;F<O;F+=1){let H=(R.length-1)/m*((j+F)/V-w),B=Math.floor(H),W=Math.ceil(H);N[F]=B===W?R[B]:(1-(H-B))*R[B]+(1-(W-H))*R[W]}L===null&&A.flush(p.context.currentTime),A.add(l(N,w,m)),v.setValueCurveAtTime(N,w,m);let M=X/V;M<K&&h(T,N[N.length-1],M),h(T,R[R.length-1],K)}else L===null&&A.flush(p.context.currentTime),A.add(l(R,w,m)),v.setValueCurveAtTime(R,w,m);return T}};return n.set(T,v),e.set(T,p),t(T,L),T};var Q0=t=>({replay(e){for(let n of t)if(n.type==="exponentialRampToValue"){let{endTime:r,value:o}=n;e.exponentialRampToValueAtTime(o,r)}else if(n.type==="linearRampToValue"){let{endTime:r,value:o}=n;e.linearRampToValueAtTime(o,r)}else if(n.type==="setTarget"){let{startTime:r,target:o,timeConstant:i}=n;e.setTargetAtTime(o,r,i)}else if(n.type==="setValue"){let{startTime:r,value:o}=n;e.setValueAtTime(o,r)}else if(n.type==="setValueCurve"){let{duration:r,startTime:o,values:i}=n;e.setValueCurveAtTime(i,o,r)}else throw new Error("Can't apply an unknown automation.")}});var gs=class{constructor(e){this._map=new Map(e)}get size(){return this._map.size}entries(){return this._map.entries()}forEach(e,n=null){return this._map.forEach((r,o)=>e.call(n,r,o,this))}get(e){return this._map.get(e)}has(e){return this._map.has(e)}keys(){return this._map.keys()}values(){return this._map.values()}};var qF={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:1,numberOfOutputs:1,parameterData:{},processorOptions:{}},K0=(t,e,n,r,o,i,s,a,c,u,l,d,h,p)=>class extends e{constructor(v,_,x){var I;let A=a(v),L=c(A),T=l(C(C({},qF),x));h(T);let E=ac.get(A),w=E?.get(_),m=L||A.state!=="closed"?A:(I=s(A))!==null&&I!==void 0?I:A,R=o(m,L?null:v.baseLatency,u,_,w,T),K=L?r(_,T,w):null;super(v,!0,R,K);let V=[];R.parameters.forEach((X,O)=>{let N=n(this,L,X);V.push([O,N])}),this._nativeAudioWorkletNode=R,this._onprocessorerror=null,this._parameters=new gs(V),L&&t(A,this);let{activeInputs:j}=i(this);d(R,j)}get onprocessorerror(){return this._onprocessorerror}set onprocessorerror(v){let _=typeof v=="function"?p(this,v):null;this._nativeAudioWorkletNode.onprocessorerror=_;let x=this._nativeAudioWorkletNode.onprocessorerror;this._onprocessorerror=x!==null&&x===_?v:x}get parameters(){return this._parameters===null?this._nativeAudioWorkletNode.parameters:this._parameters}get port(){return this._nativeAudioWorkletNode.port}};function ys(t,e,n,r,o){if(typeof t.copyFromChannel=="function")e[n].byteLength===0&&(e[n]=new Float32Array(128)),t.copyFromChannel(e[n],r,o);else{let i=t.getChannelData(r);if(e[n].byteLength===0)e[n]=i.slice(o,o+128);else{let s=new Float32Array(i.buffer,o*Float32Array.BYTES_PER_ELEMENT,128);e[n].set(s)}}}var Tl=(t,e,n,r,o)=>{typeof t.copyToChannel=="function"?e[n].byteLength!==0&&t.copyToChannel(e[n],r,o):e[n].byteLength!==0&&t.getChannelData(r).set(e[n],o)};var vs=(t,e)=>{let n=[];for(let r=0;r<t;r+=1){let o=[],i=typeof e=="number"?e:e[r];for(let s=0;s<i;s+=1)o.push(new Float32Array(128));n.push(o)}return n};var X0=(t,e)=>{let n=Ct(cc,t),r=qe(e);return Ct(n,r)};var $F=(t,e,n,r,o,i,s)=>ee(void 0,null,function*(){let a=e===null?Math.ceil(t.context.length/128)*128:e.length,c=r.channelCount*r.numberOfInputs,u=o.reduce((_,x)=>_+x,0),l=u===0?null:n.createBuffer(u,a,n.sampleRate);if(i===void 0)throw new Error("Missing the processor constructor.");let d=Mt(t),h=yield X0(n,t),p=vs(r.numberOfInputs,r.channelCount),y=vs(r.numberOfOutputs,o),v=Array.from(t.parameters.keys()).reduce((_,x)=>G(C({},_),{[x]:new Float32Array(128)}),{});for(let _=0;_<a;_+=128){if(r.numberOfInputs>0&&e!==null)for(let x=0;x<r.numberOfInputs;x+=1)for(let I=0;I<r.channelCount;I+=1)ys(e,p[x],I,I,_);i.parameterDescriptors!==void 0&&e!==null&&i.parameterDescriptors.forEach(({name:x},I)=>{ys(e,v,x,c+I,_)});for(let x=0;x<r.numberOfInputs;x+=1)for(let I=0;I<o[x];I+=1)y[x][I].byteLength===0&&(y[x][I]=new Float32Array(128));try{let x=p.map((A,L)=>d.activeInputs[L].size===0?[]:A),I=s(_/n.sampleRate,n.sampleRate,()=>h.process(x,y,v));if(l!==null)for(let A=0,L=0;A<r.numberOfOutputs;A+=1){for(let T=0;T<o[A];T+=1)Tl(l,y[A],T,L+T,_);L+=o[A]}if(!I)break}catch(x){t.dispatchEvent(new ErrorEvent("processorerror",{colno:x.colno,filename:x.filename,lineno:x.lineno,message:x.message}));break}}return l}),J0=(t,e,n,r,o,i,s,a,c,u,l,d,h,p,y,v)=>(_,x,I)=>{let A=new WeakMap,L=null,T=(E,w)=>ee(void 0,null,function*(){let m=l(E),R=null,K=Oe(m,w),V=Array.isArray(x.outputChannelCount)?x.outputChannelCount:Array.from(x.outputChannelCount);if(d===null){let j=V.reduce((M,F)=>M+F,0),X=o(w,{channelCount:Math.max(1,j),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,j)}),O=[];for(let M=0;M<E.numberOfOutputs;M+=1)O.push(r(w,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:V[M]}));let N=s(w,{channelCount:x.channelCount,channelCountMode:x.channelCountMode,channelInterpretation:x.channelInterpretation,gain:1});N.connect=e.bind(null,O),N.disconnect=c.bind(null,O),R=[X,O,N]}else K||(m=new d(w,_));if(A.set(w,R===null?m:R[2]),R!==null){if(L===null){if(I===void 0)throw new Error("Missing the processor constructor.");if(h===null)throw new Error("Missing the native OfflineAudioContext constructor.");let F=E.channelCount*E.numberOfInputs,H=I.parameterDescriptors===void 0?0:I.parameterDescriptors.length,B=F+H;L=$F(E,B===0?null:yield(()=>ee(void 0,null,function*(){let U=new h(B,Math.ceil(E.context.length/128)*128,w.sampleRate),Se=[],ke=[];for(let g=0;g<x.numberOfInputs;g+=1)Se.push(s(U,{channelCount:x.channelCount,channelCountMode:x.channelCountMode,channelInterpretation:x.channelInterpretation,gain:1})),ke.push(o(U,{channelCount:x.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:x.channelCount}));let ft=yield Promise.all(Array.from(E.parameters.values()).map(g=>ee(void 0,null,function*(){let f=i(U,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:g.value});return yield p(U,g,f.offset),f}))),St=r(U,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,F+H)});for(let g=0;g<x.numberOfInputs;g+=1){Se[g].connect(ke[g]);for(let f=0;f<x.channelCount;f+=1)ke[g].connect(St,f,g*x.channelCount+f)}for(let[g,f]of ft.entries())f.connect(St,0,F+g),f.start(0);return St.connect(U.destination),yield Promise.all(Se.map(g=>y(E,U,g))),v(U)}))(),w,x,V,I,u)}let j=yield L,X=n(w,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),[O,N,M]=R;j!==null&&(X.buffer=j,X.start(0)),X.connect(O);for(let F=0,H=0;F<E.numberOfOutputs;F+=1){let B=N[F];for(let W=0;W<V[F];W+=1)O.connect(B,H+W,W);H+=V[F]}return M}if(K)for(let[j,X]of E.parameters.entries())yield t(w,X,m.parameters.get(j));else for(let[j,X]of E.parameters.entries())yield p(w,X,m.parameters.get(j));return yield y(E,w,m),m});return{render(E,w){a(w,E);let m=A.get(w);return m!==void 0?Promise.resolve(m):T(E,w)}}};var ew=(t,e,n,r,o,i,s,a,c,u,l,d,h,p,y,v,_,x,I,A)=>class extends y{constructor(T,E){super(T,E),this._nativeContext=T,this._audioWorklet=t===void 0?void 0:{addModule:(w,m)=>t(this,w,m)}}get audioWorklet(){return this._audioWorklet}createAnalyser(){return new e(this)}createBiquadFilter(){return new o(this)}createBuffer(T,E,w){return new n({length:E,numberOfChannels:T,sampleRate:w})}createBufferSource(){return new r(this)}createChannelMerger(T=6){return new i(this,{numberOfInputs:T})}createChannelSplitter(T=6){return new s(this,{numberOfOutputs:T})}createConstantSource(){return new a(this)}createConvolver(){return new c(this)}createDelay(T=1){return new l(this,{maxDelayTime:T})}createDynamicsCompressor(){return new d(this)}createGain(){return new h(this)}createIIRFilter(T,E){return new p(this,{feedback:E,feedforward:T})}createOscillator(){return new v(this)}createPanner(){return new _(this)}createPeriodicWave(T,E,w={disableNormalization:!1}){return new x(this,G(C({},w),{imag:E,real:T}))}createStereoPanner(){return new I(this)}createWaveShaper(){return new A(this)}decodeAudioData(T,E,w){return u(this._nativeContext,T).then(m=>(typeof E=="function"&&E(m),m),m=>{throw typeof w=="function"&&w(m),m})}};var HF={Q:1,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:350,gain:0,type:"lowpass"},tw=(t,e,n,r,o,i,s,a)=>class extends t{constructor(u,l){let d=i(u),h=C(C({},HF),l),p=o(d,h),y=s(d),v=y?n():null;super(u,!1,p,v),this._Q=e(this,y,p.Q,ut,gt),this._detune=e(this,y,p.detune,1200*Math.log2(ut),-1200*Math.log2(ut)),this._frequency=e(this,y,p.frequency,u.sampleRate/2,0),this._gain=e(this,y,p.gain,40*Math.log10(ut),gt),this._nativeBiquadFilterNode=p,a(this,1)}get detune(){return this._detune}get frequency(){return this._frequency}get gain(){return this._gain}get Q(){return this._Q}get type(){return this._nativeBiquadFilterNode.type}set type(u){this._nativeBiquadFilterNode.type=u}getFrequencyResponse(u,l,d){try{this._nativeBiquadFilterNode.getFrequencyResponse(u,l,d)}catch(h){throw h.code===11?r():h}if(u.length!==l.length||l.length!==d.length)throw r()}};var nw=(t,e,n,r,o)=>()=>{let i=new WeakMap,s=(a,c)=>ee(void 0,null,function*(){let u=n(a),l=Oe(u,c);if(!l){let d={Q:u.Q.value,channelCount:u.channelCount,channelCountMode:u.channelCountMode,channelInterpretation:u.channelInterpretation,detune:u.detune.value,frequency:u.frequency.value,gain:u.gain.value,type:u.type};u=e(c,d)}return i.set(c,u),l?(yield t(c,a.Q,u.Q),yield t(c,a.detune,u.detune),yield t(c,a.frequency,u.frequency),yield t(c,a.gain,u.gain)):(yield r(c,a.Q,u.Q),yield r(c,a.detune,u.detune),yield r(c,a.frequency,u.frequency),yield r(c,a.gain,u.gain)),yield o(a,c,u),u});return{render(a,c){let u=i.get(c);return u!==void 0?Promise.resolve(u):s(a,c)}}};var rw=(t,e)=>(n,r)=>{let o=e.get(n);if(o!==void 0)return o;let i=t.get(n);if(i!==void 0)return i;try{let s=r();return s instanceof Promise?(t.set(n,s),s.catch(()=>!1).then(a=>(t.delete(n),e.set(n,a),a))):(e.set(n,s),s)}catch{return e.set(n,!1),!1}};var WF={channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6},ow=(t,e,n,r,o)=>class extends t{constructor(s,a){let c=r(s),u=C(C({},WF),a),l=n(c,u),d=o(c)?e():null;super(s,!1,l,d)}};var iw=(t,e,n)=>()=>{let r=new WeakMap,o=(i,s)=>ee(void 0,null,function*(){let a=e(i);if(!Oe(a,s)){let u={channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,numberOfInputs:a.numberOfInputs};a=t(s,u)}return r.set(s,a),yield n(i,s,a),a});return{render(i,s){let a=r.get(s);return a!==void 0?Promise.resolve(a):o(i,s)}}};var GF={channelCount:6,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:6},sw=(t,e,n,r,o,i)=>class extends t{constructor(a,c){let u=r(a),l=i(C(C({},GF),c)),d=n(u,l),h=o(u)?e():null;super(a,!1,d,h)}};var aw=(t,e,n)=>()=>{let r=new WeakMap,o=(i,s)=>ee(void 0,null,function*(){let a=e(i);if(!Oe(a,s)){let u={channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,numberOfOutputs:a.numberOfOutputs};a=t(s,u)}return r.set(s,a),yield n(i,s,a),a});return{render(i,s){let a=r.get(s);return a!==void 0?Promise.resolve(a):o(i,s)}}};var cw=t=>(e,n,r)=>t(n,e,r);var uw=t=>(e,n,r=0,o=0)=>{let i=e[r];if(i===void 0)throw t();return Jo(n)?i.connect(n,0,o):i.connect(n,0)};var lw=t=>(e,n)=>{let r=t(e,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),o=e.createBuffer(1,2,44100);return r.buffer=o,r.loop=!0,r.connect(n),r.start(),()=>{r.stop(),r.disconnect(n)}};var zF={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",offset:1},dw=(t,e,n,r,o,i,s)=>class extends t{constructor(c,u){let l=o(c),d=C(C({},zF),u),h=r(l,d),p=i(l),y=p?n():null;super(c,!1,h,y),this._constantSourceNodeRenderer=y,this._nativeConstantSourceNode=h,this._offset=e(this,p,h.offset,ut,gt),this._onended=null}get offset(){return this._offset}get onended(){return this._onended}set onended(c){let u=typeof c=="function"?s(this,c):null;this._nativeConstantSourceNode.onended=u;let l=this._nativeConstantSourceNode.onended;this._onended=l!==null&&l===u?c:l}start(c=0){if(this._nativeConstantSourceNode.start(c),this._constantSourceNodeRenderer!==null&&(this._constantSourceNodeRenderer.start=c),this.context.state!=="closed"){rr(this);let u=()=>{this._nativeConstantSourceNode.removeEventListener("ended",u),tn(this)&&Ir(this)};this._nativeConstantSourceNode.addEventListener("ended",u)}}stop(c=0){this._nativeConstantSourceNode.stop(c),this._constantSourceNodeRenderer!==null&&(this._constantSourceNodeRenderer.stop=c)}};var hw=(t,e,n,r,o)=>()=>{let i=new WeakMap,s=null,a=null,c=(u,l)=>ee(void 0,null,function*(){let d=n(u),h=Oe(d,l);if(!h){let p={channelCount:d.channelCount,channelCountMode:d.channelCountMode,channelInterpretation:d.channelInterpretation,offset:d.offset.value};d=e(l,p),s!==null&&d.start(s),a!==null&&d.stop(a)}return i.set(l,d),h?yield t(l,u.offset,d.offset):yield r(l,u.offset,d.offset),yield o(u,l,d),d});return{set start(u){s=u},set stop(u){a=u},render(u,l){let d=i.get(l);return d!==void 0?Promise.resolve(d):c(u,l)}}};var fw=t=>e=>(t[0]=e,t[0]);var YF={buffer:null,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",disableNormalization:!1},pw=(t,e,n,r,o,i)=>class extends t{constructor(a,c){let u=r(a),l=C(C({},YF),c),d=n(u,l),p=o(u)?e():null;super(a,!1,d,p),this._isBufferNullified=!1,this._nativeConvolverNode=d,l.buffer!==null&&i(this,l.buffer.duration)}get buffer(){return this._isBufferNullified?null:this._nativeConvolverNode.buffer}set buffer(a){if(this._nativeConvolverNode.buffer=a,a===null&&this._nativeConvolverNode.buffer!==null){let c=this._nativeConvolverNode.context;this._nativeConvolverNode.buffer=c.createBuffer(1,1,c.sampleRate),this._isBufferNullified=!0,i(this,0)}else this._isBufferNullified=!1,i(this,this._nativeConvolverNode.buffer===null?0:this._nativeConvolverNode.buffer.duration)}get normalize(){return this._nativeConvolverNode.normalize}set normalize(a){this._nativeConvolverNode.normalize=a}};var mw=(t,e,n)=>()=>{let r=new WeakMap,o=(i,s)=>ee(void 0,null,function*(){let a=e(i);if(!Oe(a,s)){let u={buffer:a.buffer,channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,disableNormalization:!a.normalize};a=t(s,u)}return r.set(s,a),Un(a)?yield n(i,s,a.inputs[0]):yield n(i,s,a),a});return{render(i,s){let a=r.get(s);return a!==void 0?Promise.resolve(a):o(i,s)}}};var gw=(t,e)=>(n,r,o)=>{if(e===null)throw new Error("Missing the native OfflineAudioContext constructor.");try{return new e(n,r,o)}catch(i){throw i.name==="SyntaxError"?t():i}};var yw=()=>new DOMException("","DataCloneError");var am=t=>{let{port1:e,port2:n}=new MessageChannel;return new Promise(r=>{let o=()=>{n.onmessage=null,e.close(),n.close(),r()};n.onmessage=()=>o();try{e.postMessage(t,[t])}catch{}finally{o()}})};var vw=(t,e,n,r,o,i,s,a,c,u,l)=>(d,h)=>{let p=s(d)?d:i(d);if(o.has(h)){let y=n();return Promise.reject(y)}try{o.add(h)}catch{}return e(c,()=>c(p))?p.decodeAudioData(h).then(y=>(am(h).catch(()=>{}),e(a,()=>a(y))||l(y),t.add(y),y)):new Promise((y,v)=>{let _=()=>ee(void 0,null,function*(){try{yield am(h)}catch{}}),x=I=>{v(I),_()};try{p.decodeAudioData(h,I=>{typeof I.copyFromChannel!="function"&&(u(I),hs(I)),t.add(I),_().then(()=>y(I))},I=>{x(I===null?r():I)})}catch(I){x(I)}})};var _w=(t,e,n,r,o,i,s,a)=>(c,u)=>{let l=e.get(c);if(l===void 0)throw new Error("Missing the expected cycle count.");let d=i(c.context),h=a(d);if(l===u){if(e.delete(c),!h&&s(c)){let p=r(c),{outputs:y}=n(c);for(let v of y)if(bo(v)){let _=r(v[0]);t(p,_,v[1],v[2])}else{let _=o(v[0]);p.connect(_,v[1])}}}else e.set(c,l-u)};var ZF={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",delayTime:0,maxDelayTime:1},xw=(t,e,n,r,o,i,s)=>class extends t{constructor(c,u){let l=o(c),d=C(C({},ZF),u),h=r(l,d),p=i(l),y=p?n(d.maxDelayTime):null;super(c,!1,h,y),this._delayTime=e(this,p,h.delayTime),s(this,d.maxDelayTime)}get delayTime(){return this._delayTime}};var ww=(t,e,n,r,o)=>i=>{let s=new WeakMap,a=(c,u)=>ee(void 0,null,function*(){let l=n(c),d=Oe(l,u);if(!d){let h={channelCount:l.channelCount,channelCountMode:l.channelCountMode,channelInterpretation:l.channelInterpretation,delayTime:l.delayTime.value,maxDelayTime:i};l=e(u,h)}return s.set(u,l),d?yield t(u,c.delayTime,l.delayTime):yield r(u,c.delayTime,l.delayTime),yield o(c,u,l),l});return{render(c,u){let l=s.get(u);return l!==void 0?Promise.resolve(l):a(c,u)}}};var bw=t=>(e,n,r,o)=>t(e[o],i=>i[0]===n&&i[1]===r);var Cw=t=>(e,n)=>{t(e).delete(n)};var Dw=t=>"delayTime"in t;var Ew=(t,e,n)=>function r(o,i){let s=Ko(i)?i:n(t,i);if(Dw(s))return[];if(o[0]===s)return[o];if(o.includes(s))return[];let{outputs:a}=e(s);return Array.from(a).map(c=>r([...o,s],c[0])).reduce((c,u)=>c.concat(u),[])};var Sl=(t,e,n)=>{let r=e[n];if(r===void 0)throw t();return r},Tw=t=>(e,n=void 0,r=void 0,o=0)=>n===void 0?e.forEach(i=>i.disconnect()):typeof n=="number"?Sl(t,e,n).disconnect():Jo(n)?r===void 0?e.forEach(i=>i.disconnect(n)):o===void 0?Sl(t,e,r).disconnect(n,0):Sl(t,e,r).disconnect(n,0,o):r===void 0?e.forEach(i=>i.disconnect(n)):Sl(t,e,r).disconnect(n,0);var QF={attack:.003,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",knee:30,ratio:12,release:.25,threshold:-24},Sw=(t,e,n,r,o,i,s,a)=>class extends t{constructor(u,l){let d=i(u),h=C(C({},QF),l),p=r(d,h),y=s(d),v=y?n():null;super(u,!1,p,v),this._attack=e(this,y,p.attack),this._knee=e(this,y,p.knee),this._nativeDynamicsCompressorNode=p,this._ratio=e(this,y,p.ratio),this._release=e(this,y,p.release),this._threshold=e(this,y,p.threshold),a(this,.006)}get attack(){return this._attack}get channelCount(){return this._nativeDynamicsCompressorNode.channelCount}set channelCount(u){let l=this._nativeDynamicsCompressorNode.channelCount;if(this._nativeDynamicsCompressorNode.channelCount=u,u>2)throw this._nativeDynamicsCompressorNode.channelCount=l,o()}get channelCountMode(){return this._nativeDynamicsCompressorNode.channelCountMode}set channelCountMode(u){let l=this._nativeDynamicsCompressorNode.channelCountMode;if(this._nativeDynamicsCompressorNode.channelCountMode=u,u==="max")throw this._nativeDynamicsCompressorNode.channelCountMode=l,o()}get knee(){return this._knee}get ratio(){return this._ratio}get reduction(){return typeof this._nativeDynamicsCompressorNode.reduction.value=="number"?this._nativeDynamicsCompressorNode.reduction.value:this._nativeDynamicsCompressorNode.reduction}get release(){return this._release}get threshold(){return this._threshold}};var Aw=(t,e,n,r,o)=>()=>{let i=new WeakMap,s=(a,c)=>ee(void 0,null,function*(){let u=n(a),l=Oe(u,c);if(!l){let d={attack:u.attack.value,channelCount:u.channelCount,channelCountMode:u.channelCountMode,channelInterpretation:u.channelInterpretation,knee:u.knee.value,ratio:u.ratio.value,release:u.release.value,threshold:u.threshold.value};u=e(c,d)}return i.set(c,u),l?(yield t(c,a.attack,u.attack),yield t(c,a.knee,u.knee),yield t(c,a.ratio,u.ratio),yield t(c,a.release,u.release),yield t(c,a.threshold,u.threshold)):(yield r(c,a.attack,u.attack),yield r(c,a.knee,u.knee),yield r(c,a.ratio,u.ratio),yield r(c,a.release,u.release),yield r(c,a.threshold,u.threshold)),yield o(a,c,u),u});return{render(a,c){let u=i.get(c);return u!==void 0?Promise.resolve(u):s(a,c)}}};var Iw=()=>new DOMException("","EncodingError");var Mw=t=>e=>new Promise((n,r)=>{if(t===null){r(new SyntaxError);return}let o=t.document.head;if(o===null)r(new SyntaxError);else{let i=t.document.createElement("script"),s=new Blob([e],{type:"application/javascript"}),a=URL.createObjectURL(s),c=t.onerror,u=()=>{t.onerror=c,URL.revokeObjectURL(a)};t.onerror=(l,d,h,p,y)=>{if(d===a||d===t.location.href&&h===1&&p===1)return u(),r(y),!1;if(c!==null)return c(l,d,h,p,y)},i.onerror=()=>{u(),r(new SyntaxError)},i.onload=()=>{u(),n()},i.src=a,i.type="module",o.appendChild(i)}});var Nw=t=>class{constructor(n){this._nativeEventTarget=n,this._listeners=new WeakMap}addEventListener(n,r,o){if(r!==null){let i=this._listeners.get(r);i===void 0&&(i=t(this,r),typeof r=="function"&&this._listeners.set(r,i)),this._nativeEventTarget.addEventListener(n,i,o)}}dispatchEvent(n){return this._nativeEventTarget.dispatchEvent(n)}removeEventListener(n,r,o){let i=r===null?void 0:this._listeners.get(r);this._nativeEventTarget.removeEventListener(n,i===void 0?null:i,o)}};var Ow=t=>(e,n,r)=>{Object.defineProperties(t,{currentFrame:{configurable:!0,get(){return Math.round(e*n)}},currentTime:{configurable:!0,get(){return e}}});try{return r()}finally{t!==null&&(delete t.currentFrame,delete t.currentTime)}};var Fw=t=>e=>ee(void 0,null,function*(){try{let n=yield fetch(e);if(n.ok)return[yield n.text(),n.url]}catch{}throw t()});var KF={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",gain:1},Rw=(t,e,n,r,o,i)=>class extends t{constructor(a,c){let u=o(a),l=C(C({},KF),c),d=r(u,l),h=i(u),p=h?n():null;super(a,!1,d,p),this._gain=e(this,h,d.gain,ut,gt)}get gain(){return this._gain}};var kw=(t,e,n,r,o)=>()=>{let i=new WeakMap,s=(a,c)=>ee(void 0,null,function*(){let u=n(a),l=Oe(u,c);if(!l){let d={channelCount:u.channelCount,channelCountMode:u.channelCountMode,channelInterpretation:u.channelInterpretation,gain:u.gain.value};u=e(c,d)}return i.set(c,u),l?yield t(c,a.gain,u.gain):yield r(c,a.gain,u.gain),yield o(a,c,u),u});return{render(a,c){let u=i.get(c);return u!==void 0?Promise.resolve(u):s(a,c)}}};var Pw=(t,e)=>n=>e(t,n);var Vw=t=>e=>{let n=t(e);if(n.renderer===null)throw new Error("Missing the renderer of the given AudioNode in the audio graph.");return n.renderer};var Lw=t=>e=>{var n;return(n=t.get(e))!==null&&n!==void 0?n:0};var jw=t=>e=>{let n=t(e);if(n.renderer===null)throw new Error("Missing the renderer of the given AudioParam in the audio graph.");return n.renderer};var Bw=t=>e=>t.get(e);var tt=()=>new DOMException("","InvalidStateError");var Uw=t=>e=>{let n=t.get(e);if(n===void 0)throw tt();return n};var qw=(t,e)=>n=>{let r=t.get(n);if(r!==void 0)return r;if(e===null)throw new Error("Missing the native OfflineAudioContext constructor.");return r=new e(1,1,44100),t.set(n,r),r};var $w=t=>e=>{let n=t.get(e);if(n===void 0)throw new Error("The context has no set of AudioWorkletNodes.");return n};var _s=()=>new DOMException("","InvalidAccessError");var Hw=t=>{t.getFrequencyResponse=(e=>(n,r,o)=>{if(n.length!==r.length||r.length!==o.length)throw _s();return e.call(t,n,r,o)})(t.getFrequencyResponse)};var XF={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers"},Ww=(t,e,n,r,o,i)=>class extends t{constructor(a,c){let u=r(a),l=o(u),d=C(C({},XF),c),h=e(u,l?null:a.baseLatency,d),p=l?n(d.feedback,d.feedforward):null;super(a,!1,h,p),Hw(h),this._nativeIIRFilterNode=h,i(this,1)}getFrequencyResponse(a,c,u){return this._nativeIIRFilterNode.getFrequencyResponse(a,c,u)}};var Al=(t,e,n,r,o,i,s,a,c,u,l)=>{let d=u.length,h=a;for(let p=0;p<d;p+=1){let y=n[0]*u[p];for(let v=1;v<o;v+=1){let _=h-v&c-1;y+=n[v]*i[_],y-=t[v]*s[_]}for(let v=o;v<r;v+=1)y+=n[v]*i[h-v&c-1];for(let v=o;v<e;v+=1)y-=t[v]*s[h-v&c-1];i[h]=u[p],s[h]=y,h=h+1&c-1,l[p]=y}return h};var JF=(t,e,n,r)=>{let o=n instanceof Float64Array?n:new Float64Array(n),i=r instanceof Float64Array?r:new Float64Array(r),s=o.length,a=i.length,c=Math.min(s,a);if(o[0]!==1){for(let y=0;y<s;y+=1)i[y]/=o[0];for(let y=1;y<a;y+=1)o[y]/=o[0]}let u=32,l=new Float32Array(u),d=new Float32Array(u),h=e.createBuffer(t.numberOfChannels,t.length,t.sampleRate),p=t.numberOfChannels;for(let y=0;y<p;y+=1){let v=t.getChannelData(y),_=h.getChannelData(y);l.fill(0),d.fill(0),Al(o,s,i,a,c,l,d,0,u,v,_)}return h},Gw=(t,e,n,r,o)=>(i,s)=>{let a=new WeakMap,c=null,u=(l,d)=>ee(void 0,null,function*(){let h=null,p=e(l),y=Oe(p,d);if(d.createIIRFilter===void 0?h=t(d,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}):y||(p=d.createIIRFilter(s,i)),a.set(d,h===null?p:h),h!==null){if(c===null){if(n===null)throw new Error("Missing the native OfflineAudioContext constructor.");let _=new n(l.context.destination.channelCount,l.context.length,d.sampleRate);c=(()=>ee(void 0,null,function*(){yield r(l,_,_.destination);let x=yield o(_);return JF(x,d,i,s)}))()}let v=yield c;return h.buffer=v,h.start(0),h}return yield r(l,d,p),p});return{render(l,d){let h=a.get(d);return h!==void 0?Promise.resolve(h):u(l,d)}}};var zw=(t,e,n,r,o,i)=>s=>(a,c)=>{let u=t.get(a);if(u===void 0){if(!s&&i(a)){let l=r(a),{outputs:d}=n(a);for(let h of d)if(bo(h)){let p=r(h[0]);e(l,p,h[1],h[2])}else{let p=o(h[0]);l.disconnect(p,h[1])}}t.set(a,c)}else t.set(a,u+c)};var Yw=(t,e)=>n=>{let r=t.get(n);return e(r)||e(n)};var Zw=(t,e)=>n=>t.has(n)||e(n);var Qw=(t,e)=>n=>t.has(n)||e(n);var Kw=(t,e)=>n=>{let r=t.get(n);return e(r)||e(n)};var Xw=t=>e=>t!==null&&e instanceof t;var Jw=t=>e=>t!==null&&typeof t.AudioNode=="function"&&e instanceof t.AudioNode;var eb=t=>e=>t!==null&&typeof t.AudioParam=="function"&&e instanceof t.AudioParam;var tb=(t,e)=>n=>t(n)||e(n);var nb=t=>e=>t!==null&&e instanceof t;var rb=t=>t!==null&&t.isSecureContext;var ob=(t,e,n,r)=>class extends t{constructor(i,s){let a=n(i),c=e(a,s);if(r(a))throw TypeError();super(i,!0,c,null),this._nativeMediaElementAudioSourceNode=c}get mediaElement(){return this._nativeMediaElementAudioSourceNode.mediaElement}};var eR={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers"},ib=(t,e,n,r)=>class extends t{constructor(i,s){let a=n(i);if(r(a))throw new TypeError;let c=C(C({},eR),s),u=e(a,c);super(i,!1,u,null),this._nativeMediaStreamAudioDestinationNode=u}get stream(){return this._nativeMediaStreamAudioDestinationNode.stream}};var sb=(t,e,n,r)=>class extends t{constructor(i,s){let a=n(i),c=e(a,s);if(r(a))throw new TypeError;super(i,!0,c,null),this._nativeMediaStreamAudioSourceNode=c}get mediaStream(){return this._nativeMediaStreamAudioSourceNode.mediaStream}};var ab=(t,e,n)=>class extends t{constructor(o,i){let s=n(o),a=e(s,i);super(o,!0,a,null)}};var cb=(t,e,n,r,o)=>class extends r{constructor(s={}){if(o===null)throw new Error("Missing the native AudioContext constructor.");let a;try{a=new o(s)}catch(l){throw l.code===12&&l.message==="sampleRate is not in range"?e():l}if(a===null)throw n();if(!Dl(s.latencyHint))throw new TypeError(`The provided value '${s.latencyHint}' is not a valid enum value of type AudioContextLatencyCategory.`);if(s.sampleRate!==void 0&&a.sampleRate!==s.sampleRate)throw e();super(a,2);let{latencyHint:c}=s,{sampleRate:u}=a;if(this._baseLatency=typeof a.baseLatency=="number"?a.baseLatency:c==="balanced"?512/u:c==="interactive"||c===void 0?256/u:c==="playback"?1024/u:Math.max(2,Math.min(128,Math.round(c*u/128)))*128/u,this._nativeAudioContext=a,o.name==="webkitAudioContext"?(this._nativeGainNode=a.createGain(),this._nativeOscillatorNode=a.createOscillator(),this._nativeGainNode.gain.value=1e-37,this._nativeOscillatorNode.connect(this._nativeGainNode).connect(a.destination),this._nativeOscillatorNode.start()):(this._nativeGainNode=null,this._nativeOscillatorNode=null),this._state=null,a.state==="running"){this._state="suspended";let l=()=>{this._state==="suspended"&&(this._state=null),a.removeEventListener("statechange",l)};a.addEventListener("statechange",l)}}get baseLatency(){return this._baseLatency}get state(){return this._state!==null?this._state:this._nativeAudioContext.state}close(){return this.state==="closed"?this._nativeAudioContext.close().then(()=>{throw t()}):(this._state==="suspended"&&(this._state=null),this._nativeAudioContext.close().then(()=>{this._nativeGainNode!==null&&this._nativeOscillatorNode!==null&&(this._nativeOscillatorNode.stop(),this._nativeGainNode.disconnect(),this._nativeOscillatorNode.disconnect()),wo(this)}))}resume(){return this._state==="suspended"?new Promise((s,a)=>{let c=()=>{this._nativeAudioContext.removeEventListener("statechange",c),this._nativeAudioContext.state==="running"?s():this.resume().then(s,a)};this._nativeAudioContext.addEventListener("statechange",c)}):this._nativeAudioContext.resume().catch(s=>{throw s===void 0||s.code===15?t():s})}suspend(){return this._nativeAudioContext.suspend().catch(s=>{throw s===void 0?t():s})}};var ub=(t,e,n,r,o,i)=>class extends n{constructor(a,c){super(a),this._nativeContext=a,ls.set(this,a),r(a)&&o.set(a,new Set),this._destination=new t(this,c),this._listener=e(this,a),this._onstatechange=null}get currentTime(){return this._nativeContext.currentTime}get destination(){return this._destination}get listener(){return this._listener}get onstatechange(){return this._onstatechange}set onstatechange(a){let c=typeof a=="function"?i(this,a):null;this._nativeContext.onstatechange=c;let u=this._nativeContext.onstatechange;this._onstatechange=u!==null&&u===c?a:u}get sampleRate(){return this._nativeContext.sampleRate}get state(){return this._nativeContext.state}};var ir=t=>{let e=new Uint32Array([1179011410,40,1163280727,544501094,16,131073,44100,176400,1048580,1635017060,4,0]);try{let n=t.decodeAudioData(e.buffer,()=>{});return n===void 0?!1:(n.catch(()=>{}),!0)}catch{}return!1};var tR={numberOfChannels:1},lb=(t,e,n,r,o)=>class extends r{constructor(s){let{length:a,numberOfChannels:c,sampleRate:u}=C(C({},tR),s),l=n(c,a,u);t(ir,()=>ir(l))||l.addEventListener("statechange",(()=>{let d=0,h=p=>{this._state==="running"&&(d>0?(l.removeEventListener("statechange",h),p.stopImmediatePropagation(),this._waitForThePromiseToSettle(p)):d+=1)};return h})()),super(l,c),this._length=a,this._nativeOfflineAudioContext=l,this._state=null}get length(){return this._nativeOfflineAudioContext.length===void 0?this._length:this._nativeOfflineAudioContext.length}get state(){return this._state===null?this._nativeOfflineAudioContext.state:this._state}startRendering(){return this._state==="running"?Promise.reject(e()):(this._state="running",o(this.destination,this._nativeOfflineAudioContext).finally(()=>{this._state=null,wo(this)}))}_waitForThePromiseToSettle(s){this._state===null?this._nativeOfflineAudioContext.dispatchEvent(s):setTimeout(()=>this._waitForThePromiseToSettle(s))}};var db=(t,e)=>(n,r,o)=>{let i=new Set;return n.connect=(s=>(a,c=0,u=0)=>{let l=i.size===0;if(e(a))return s.call(n,a,c,u),t(i,[a,c,u],d=>d[0]===a&&d[1]===c&&d[2]===u,!0),l&&r(),a;s.call(n,a,c),t(i,[a,c],d=>d[0]===a&&d[1]===c,!0),l&&r()})(n.connect),n.disconnect=(s=>(a,c,u)=>{let l=i.size>0;if(a===void 0)s.apply(n),i.clear();else if(typeof a=="number"){s.call(n,a);for(let h of i)h[1]===a&&i.delete(h)}else{e(a)?s.call(n,a,c,u):s.call(n,a,c);for(let h of i)h[0]===a&&(c===void 0||h[1]===c)&&(u===void 0||h[2]===u)&&i.delete(h)}let d=i.size===0;l&&d&&o()})(n.disconnect),n};var Fe=(t,e,n)=>{let r=e[n];r!==void 0&&r!==t[n]&&(t[n]=r)};var we=(t,e)=>{Fe(t,e,"channelCount"),Fe(t,e,"channelCountMode"),Fe(t,e,"channelInterpretation")};var cm=t=>typeof t.getFloatTimeDomainData=="function";var hb=t=>{t.getFloatTimeDomainData=e=>{let n=new Uint8Array(e.length);t.getByteTimeDomainData(n);let r=Math.max(n.length,t.fftSize);for(let o=0;o<r;o+=1)e[o]=(n[o]-128)*.0078125;return e}};var fb=(t,e)=>(n,r)=>{let o=n.createAnalyser();if(we(o,r),!(r.maxDecibels>r.minDecibels))throw e();return Fe(o,r,"fftSize"),Fe(o,r,"maxDecibels"),Fe(o,r,"minDecibels"),Fe(o,r,"smoothingTimeConstant"),t(cm,()=>cm(o))||hb(o),o};var pb=t=>t===null?null:t.hasOwnProperty("AudioBuffer")?t.AudioBuffer:null;var Re=(t,e,n)=>{let r=e[n];r!==void 0&&r!==t[n].value&&(t[n].value=r)};var mb=t=>{t.start=(e=>{let n=!1;return(r=0,o=0,i)=>{if(n)throw tt();e.call(t,r,o,i),n=!0}})(t.start)};var xs=t=>{t.start=(e=>(n=0,r=0,o)=>{if(typeof o=="number"&&o<0||r<0||n<0)throw new RangeError("The parameters can't be negative.");e.call(t,n,r,o)})(t.start)};var ws=t=>{t.stop=(e=>(n=0)=>{if(n<0)throw new RangeError("The parameter can't be negative.");e.call(t,n)})(t.stop)};var gb=(t,e,n,r,o,i,s,a,c,u,l)=>(d,h)=>{let p=d.createBufferSource();return we(p,h),Re(p,h,"playbackRate"),Fe(p,h,"buffer"),Fe(p,h,"loop"),Fe(p,h,"loopEnd"),Fe(p,h,"loopStart"),e(n,()=>n(d))||mb(p),e(r,()=>r(d))||c(p),e(o,()=>o(d))||u(p,d),e(i,()=>i(d))||xs(p),e(s,()=>s(d))||l(p,d),e(a,()=>a(d))||ws(p),t(d,p),p};var yb=t=>t===null?null:t.hasOwnProperty("AudioContext")?t.AudioContext:t.hasOwnProperty("webkitAudioContext")?t.webkitAudioContext:null;var vb=(t,e)=>(n,r,o)=>{let i=n.destination;if(i.channelCount!==r)try{i.channelCount=r}catch{}o&&i.channelCountMode!=="explicit"&&(i.channelCountMode="explicit"),i.maxChannelCount===0&&Object.defineProperty(i,"maxChannelCount",{value:r});let s=t(n,{channelCount:r,channelCountMode:i.channelCountMode,channelInterpretation:i.channelInterpretation,gain:1});return e(s,"channelCount",a=>()=>a.call(s),a=>c=>{a.call(s,c);try{i.channelCount=c}catch(u){if(c>i.maxChannelCount)throw u}}),e(s,"channelCountMode",a=>()=>a.call(s),a=>c=>{a.call(s,c),i.channelCountMode=c}),e(s,"channelInterpretation",a=>()=>a.call(s),a=>c=>{a.call(s,c),i.channelInterpretation=c}),Object.defineProperty(s,"maxChannelCount",{get:()=>i.maxChannelCount}),s.connect(i),s};var _b=t=>t===null?null:t.hasOwnProperty("AudioWorkletNode")?t.AudioWorkletNode:null;var xb=t=>{let{port1:e}=new MessageChannel;try{e.postMessage(t)}finally{e.close()}};var wb=(t,e,n,r,o)=>(i,s,a,c,u,l)=>{if(a!==null)try{let d=new a(i,c,l),h=new Map,p=null;if(Object.defineProperties(d,{channelCount:{get:()=>l.channelCount,set:()=>{throw t()}},channelCountMode:{get:()=>"explicit",set:()=>{throw t()}},onprocessorerror:{get:()=>p,set:y=>{typeof p=="function"&&d.removeEventListener("processorerror",p),p=typeof y=="function"?y:null,typeof p=="function"&&d.addEventListener("processorerror",p)}}}),d.addEventListener=(y=>(...v)=>{if(v[0]==="processorerror"){let _=typeof v[1]=="function"?v[1]:typeof v[1]=="object"&&v[1]!==null&&typeof v[1].handleEvent=="function"?v[1].handleEvent:null;if(_!==null){let x=h.get(v[1]);x!==void 0?v[1]=x:(v[1]=I=>{I.type==="error"?(Object.defineProperties(I,{type:{value:"processorerror"}}),_(I)):_(new ErrorEvent(v[0],C({},I)))},h.set(_,v[1]))}}return y.call(d,"error",v[1],v[2]),y.call(d,...v)})(d.addEventListener),d.removeEventListener=(y=>(...v)=>{if(v[0]==="processorerror"){let _=h.get(v[1]);_!==void 0&&(h.delete(v[1]),v[1]=_)}return y.call(d,"error",v[1],v[2]),y.call(d,v[0],v[1],v[2])})(d.removeEventListener),l.numberOfOutputs!==0){let y=n(i,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return d.connect(y).connect(i.destination),o(d,()=>y.disconnect(),()=>y.connect(i.destination))}return d}catch(d){throw d.code===11?r():d}if(u===void 0)throw r();return xb(l),e(i,s,u,l)};var Il=(t,e)=>t===null?512:Math.max(512,Math.min(16384,Math.pow(2,Math.round(Math.log2(t*e)))));var bb=t=>new Promise((e,n)=>{let{port1:r,port2:o}=new MessageChannel;r.onmessage=({data:i})=>{r.close(),o.close(),e(i)},r.onmessageerror=({data:i})=>{r.close(),o.close(),n(i)},o.postMessage(t)});var Cb=(t,e)=>ee(void 0,null,function*(){let n=yield bb(e);return new t(n)});var Db=(t,e,n,r)=>{let o=cc.get(t);o===void 0&&(o=new WeakMap,cc.set(t,o));let i=Cb(n,r);return o.set(e,i),i};var Eb=(t,e,n,r,o,i,s,a,c,u,l,d,h)=>(p,y,v,_)=>{if(_.numberOfInputs===0&&_.numberOfOutputs===0)throw c();let x=Array.isArray(_.outputChannelCount)?_.outputChannelCount:Array.from(_.outputChannelCount);if(x.some(z=>z<1))throw c();if(x.length!==_.numberOfOutputs)throw e();if(_.channelCountMode!=="explicit")throw c();let I=_.channelCount*_.numberOfInputs,A=x.reduce((z,Q)=>z+Q,0),L=v.parameterDescriptors===void 0?0:v.parameterDescriptors.length;if(I+L>6||A>6)throw c();let T=new MessageChannel,E=[],w=[];for(let z=0;z<_.numberOfInputs;z+=1)E.push(s(p,{channelCount:_.channelCount,channelCountMode:_.channelCountMode,channelInterpretation:_.channelInterpretation,gain:1})),w.push(o(p,{channelCount:_.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:_.channelCount}));let m=[];if(v.parameterDescriptors!==void 0)for(let{defaultValue:z,maxValue:Q,minValue:Ue,name:Xe}of v.parameterDescriptors){let Ae=i(p,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:_.parameterData[Xe]!==void 0?_.parameterData[Xe]:z===void 0?0:z});Object.defineProperties(Ae.offset,{defaultValue:{get:()=>z===void 0?0:z},maxValue:{get:()=>Q===void 0?ut:Q},minValue:{get:()=>Ue===void 0?gt:Ue}}),m.push(Ae)}let R=r(p,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,I+L)}),K=Il(y,p.sampleRate),V=a(p,K,I+L,Math.max(1,A)),j=o(p,{channelCount:Math.max(1,A),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,A)}),X=[];for(let z=0;z<_.numberOfOutputs;z+=1)X.push(r(p,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:x[z]}));for(let z=0;z<_.numberOfInputs;z+=1){E[z].connect(w[z]);for(let Q=0;Q<_.channelCount;Q+=1)w[z].connect(R,Q,z*_.channelCount+Q)}let O=new gs(v.parameterDescriptors===void 0?[]:v.parameterDescriptors.map(({name:z},Q)=>{let Ue=m[Q];return Ue.connect(R,0,I+Q),Ue.start(0),[z,Ue.offset]}));R.connect(V);let N=_.channelInterpretation,M=null,F=_.numberOfOutputs===0?[V]:X,H={get bufferSize(){return K},get channelCount(){return _.channelCount},set channelCount(z){throw n()},get channelCountMode(){return _.channelCountMode},set channelCountMode(z){throw n()},get channelInterpretation(){return N},set channelInterpretation(z){for(let Q of E)Q.channelInterpretation=z;N=z},get context(){return V.context},get inputs(){return E},get numberOfInputs(){return _.numberOfInputs},get numberOfOutputs(){return _.numberOfOutputs},get onprocessorerror(){return M},set onprocessorerror(z){typeof M=="function"&&H.removeEventListener("processorerror",M),M=typeof z=="function"?z:null,typeof M=="function"&&H.addEventListener("processorerror",M)},get parameters(){return O},get port(){return T.port2},addEventListener(...z){return V.addEventListener(z[0],z[1],z[2])},connect:t.bind(null,F),disconnect:u.bind(null,F),dispatchEvent(...z){return V.dispatchEvent(z[0])},removeEventListener(...z){return V.removeEventListener(z[0],z[1],z[2])}},B=new Map;T.port1.addEventListener=(z=>(...Q)=>{if(Q[0]==="message"){let Ue=typeof Q[1]=="function"?Q[1]:typeof Q[1]=="object"&&Q[1]!==null&&typeof Q[1].handleEvent=="function"?Q[1].handleEvent:null;if(Ue!==null){let Xe=B.get(Q[1]);Xe!==void 0?Q[1]=Xe:(Q[1]=Ae=>{l(p.currentTime,p.sampleRate,()=>Ue(Ae))},B.set(Ue,Q[1]))}}return z.call(T.port1,Q[0],Q[1],Q[2])})(T.port1.addEventListener),T.port1.removeEventListener=(z=>(...Q)=>{if(Q[0]==="message"){let Ue=B.get(Q[1]);Ue!==void 0&&(B.delete(Q[1]),Q[1]=Ue)}return z.call(T.port1,Q[0],Q[1],Q[2])})(T.port1.removeEventListener);let W=null;Object.defineProperty(T.port1,"onmessage",{get:()=>W,set:z=>{typeof W=="function"&&T.port1.removeEventListener("message",W),W=typeof z=="function"?z:null,typeof W=="function"&&(T.port1.addEventListener("message",W),T.port1.start())}}),v.prototype.port=T.port1;let U=null;Db(p,H,v,_).then(z=>U=z);let ke=vs(_.numberOfInputs,_.channelCount),ft=vs(_.numberOfOutputs,x),St=v.parameterDescriptors===void 0?[]:v.parameterDescriptors.reduce((z,{name:Q})=>G(C({},z),{[Q]:new Float32Array(128)}),{}),g=!0,f=()=>{_.numberOfOutputs>0&&V.disconnect(j);for(let z=0,Q=0;z<_.numberOfOutputs;z+=1){let Ue=X[z];for(let Xe=0;Xe<x[z];Xe+=1)j.disconnect(Ue,Q+Xe,Xe);Q+=x[z]}},k=new Map;V.onaudioprocess=({inputBuffer:z,outputBuffer:Q})=>{if(U!==null){let Ue=d(H);for(let Xe=0;Xe<K;Xe+=128){for(let Ae=0;Ae<_.numberOfInputs;Ae+=1)for(let ze=0;ze<_.channelCount;ze+=1)ys(z,ke[Ae],ze,ze,Xe);v.parameterDescriptors!==void 0&&v.parameterDescriptors.forEach(({name:Ae},ze)=>{ys(z,St,Ae,I+ze,Xe)});for(let Ae=0;Ae<_.numberOfInputs;Ae+=1)for(let ze=0;ze<x[Ae];ze+=1)ft[Ae][ze].byteLength===0&&(ft[Ae][ze]=new Float32Array(128));try{let Ae=ke.map((Xt,Jr)=>{if(Ue[Jr].size>0)return k.set(Jr,K/128),Xt;let xd=k.get(Jr);return xd===void 0?[]:(Xt.every(IE=>IE.every(ME=>ME===0))&&(xd===1?k.delete(Jr):k.set(Jr,xd-1)),Xt)});g=l(p.currentTime+Xe/p.sampleRate,p.sampleRate,()=>U.process(Ae,ft,St));for(let Xt=0,Jr=0;Xt<_.numberOfOutputs;Xt+=1){for(let Qs=0;Qs<x[Xt];Qs+=1)Tl(Q,ft[Xt],Qs,Jr+Qs,Xe);Jr+=x[Xt]}}catch(Ae){g=!1,H.dispatchEvent(new ErrorEvent("processorerror",{colno:Ae.colno,filename:Ae.filename,lineno:Ae.lineno,message:Ae.message}))}if(!g){for(let Ae=0;Ae<_.numberOfInputs;Ae+=1){E[Ae].disconnect(w[Ae]);for(let ze=0;ze<_.channelCount;ze+=1)w[Xe].disconnect(R,ze,Ae*_.channelCount+ze)}if(v.parameterDescriptors!==void 0){let Ae=v.parameterDescriptors.length;for(let ze=0;ze<Ae;ze+=1){let Xt=m[ze];Xt.disconnect(R,0,I+ze),Xt.stop()}}R.disconnect(V),V.onaudioprocess=null,D?f():Be();break}}}};let D=!1,q=s(p,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0}),Me=()=>V.connect(q).connect(p.destination),Be=()=>{V.disconnect(q),q.disconnect()},Ge=()=>{if(g){Be(),_.numberOfOutputs>0&&V.connect(j);for(let z=0,Q=0;z<_.numberOfOutputs;z+=1){let Ue=X[z];for(let Xe=0;Xe<x[z];Xe+=1)j.connect(Ue,Q+Xe,Xe);Q+=x[z]}}D=!0},rt=()=>{g&&(Me(),f()),D=!1};return Me(),h(H,Ge,rt)};var um=(t,e)=>{let n=t.createBiquadFilter();return we(n,e),Re(n,e,"Q"),Re(n,e,"detune"),Re(n,e,"frequency"),Re(n,e,"gain"),Fe(n,e,"type"),n};var Tb=(t,e)=>(n,r)=>{let o=n.createChannelMerger(r.numberOfInputs);return t!==null&&t.name==="webkitAudioContext"&&e(n,o),we(o,r),o};var Sb=t=>{let e=t.numberOfOutputs;Object.defineProperty(t,"channelCount",{get:()=>e,set:n=>{if(n!==e)throw tt()}}),Object.defineProperty(t,"channelCountMode",{get:()=>"explicit",set:n=>{if(n!=="explicit")throw tt()}}),Object.defineProperty(t,"channelInterpretation",{get:()=>"discrete",set:n=>{if(n!=="discrete")throw tt()}})};var bs=(t,e)=>{let n=t.createChannelSplitter(e.numberOfOutputs);return we(n,e),Sb(n),n};var Ab=(t,e,n,r,o)=>(i,s)=>{if(i.createConstantSource===void 0)return n(i,s);let a=i.createConstantSource();return we(a,s),Re(a,s,"offset"),e(r,()=>r(i))||xs(a),e(o,()=>o(i))||ws(a),t(i,a),a};var qn=(t,e)=>(t.connect=e.connect.bind(e),t.disconnect=e.disconnect.bind(e),t);var Ib=(t,e,n,r)=>(o,a)=>{var c=a,{offset:i}=c,s=eo(c,["offset"]);let u=o.createBuffer(1,2,44100),l=e(o,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),d=n(o,G(C({},s),{gain:i})),h=u.getChannelData(0);h[0]=1,h[1]=1,l.buffer=u,l.loop=!0;let p={get bufferSize(){},get channelCount(){return d.channelCount},set channelCount(_){d.channelCount=_},get channelCountMode(){return d.channelCountMode},set channelCountMode(_){d.channelCountMode=_},get channelInterpretation(){return d.channelInterpretation},set channelInterpretation(_){d.channelInterpretation=_},get context(){return d.context},get inputs(){return[]},get numberOfInputs(){return l.numberOfInputs},get numberOfOutputs(){return d.numberOfOutputs},get offset(){return d.gain},get onended(){return l.onended},set onended(_){l.onended=_},addEventListener(..._){return l.addEventListener(_[0],_[1],_[2])},dispatchEvent(..._){return l.dispatchEvent(_[0])},removeEventListener(..._){return l.removeEventListener(_[0],_[1],_[2])},start(_=0){l.start.call(l,_)},stop(_=0){l.stop.call(l,_)}},y=()=>l.connect(d),v=()=>l.disconnect(d);return t(o,l),r(qn(p,d),y,v)};var Mb=(t,e)=>(n,r)=>{let o=n.createConvolver();if(we(o,r),r.disableNormalization===o.normalize&&(o.normalize=!r.disableNormalization),Fe(o,r,"buffer"),r.channelCount>2||(e(o,"channelCount",i=>()=>i.call(o),i=>s=>{if(s>2)throw t();return i.call(o,s)}),r.channelCountMode==="max"))throw t();return e(o,"channelCountMode",i=>()=>i.call(o),i=>s=>{if(s==="max")throw t();return i.call(o,s)}),o};var lm=(t,e)=>{let n=t.createDelay(e.maxDelayTime);return we(n,e),Re(n,e,"delayTime"),n};var Nb=t=>(e,n)=>{let r=e.createDynamicsCompressor();if(we(r,n),n.channelCount>2||n.channelCountMode==="max")throw t();return Re(r,n,"attack"),Re(r,n,"knee"),Re(r,n,"ratio"),Re(r,n,"release"),Re(r,n,"threshold"),r};var nn=(t,e)=>{let n=t.createGain();return we(n,e),Re(n,e,"gain"),n};var Ob=t=>(e,n,r)=>{if(e.createIIRFilter===void 0)return t(e,n,r);let o=e.createIIRFilter(r.feedforward,r.feedback);return we(o,r),o};function nR(t,e){let n=e[0]*e[0]+e[1]*e[1];return[(t[0]*e[0]+t[1]*e[1])/n,(t[1]*e[0]-t[0]*e[1])/n]}function rR(t,e){return[t[0]*e[0]-t[1]*e[1],t[0]*e[1]+t[1]*e[0]]}function Fb(t,e){let n=[0,0];for(let r=t.length-1;r>=0;r-=1)n=rR(n,e),n[0]+=t[r];return n}var Rb=(t,e,n,r)=>(o,i,{channelCount:s,channelCountMode:a,channelInterpretation:c,feedback:u,feedforward:l})=>{let d=Il(i,o.sampleRate),h=u instanceof Float64Array?u:new Float64Array(u),p=l instanceof Float64Array?l:new Float64Array(l),y=h.length,v=p.length,_=Math.min(y,v);if(y===0||y>20)throw r();if(h[0]===0)throw e();if(v===0||v>20)throw r();if(p[0]===0)throw e();if(h[0]!==1){for(let m=0;m<v;m+=1)p[m]/=h[0];for(let m=1;m<y;m+=1)h[m]/=h[0]}let x=n(o,d,s,s);x.channelCount=s,x.channelCountMode=a,x.channelInterpretation=c;let I=32,A=[],L=[],T=[];for(let m=0;m<s;m+=1){A.push(0);let R=new Float32Array(I),K=new Float32Array(I);R.fill(0),K.fill(0),L.push(R),T.push(K)}x.onaudioprocess=m=>{let R=m.inputBuffer,K=m.outputBuffer,V=R.numberOfChannels;for(let j=0;j<V;j+=1){let X=R.getChannelData(j),O=K.getChannelData(j);A[j]=Al(h,y,p,v,_,L[j],T[j],A[j],I,X,O)}};let E=o.sampleRate/2;return qn({get bufferSize(){return d},get channelCount(){return x.channelCount},set channelCount(m){x.channelCount=m},get channelCountMode(){return x.channelCountMode},set channelCountMode(m){x.channelCountMode=m},get channelInterpretation(){return x.channelInterpretation},set channelInterpretation(m){x.channelInterpretation=m},get context(){return x.context},get inputs(){return[x]},get numberOfInputs(){return x.numberOfInputs},get numberOfOutputs(){return x.numberOfOutputs},addEventListener(...m){return x.addEventListener(m[0],m[1],m[2])},dispatchEvent(...m){return x.dispatchEvent(m[0])},getFrequencyResponse(m,R,K){if(m.length!==R.length||R.length!==K.length)throw t();let V=m.length;for(let j=0;j<V;j+=1){let X=-Math.PI*(m[j]/E),O=[Math.cos(X),Math.sin(X)],N=Fb(p,O),M=Fb(h,O),F=nR(N,M);R[j]=Math.sqrt(F[0]*F[0]+F[1]*F[1]),K[j]=Math.atan2(F[1],F[0])}},removeEventListener(...m){return x.removeEventListener(m[0],m[1],m[2])}},x)};var kb=(t,e)=>t.createMediaElementSource(e.mediaElement);var Pb=(t,e)=>{let n=t.createMediaStreamDestination();return we(n,e),n.numberOfOutputs===1&&Object.defineProperty(n,"numberOfOutputs",{get:()=>0}),n};var Vb=(t,{mediaStream:e})=>{let n=e.getAudioTracks();n.sort((i,s)=>i.id<s.id?-1:i.id>s.id?1:0);let r=n.slice(0,1),o=t.createMediaStreamSource(new MediaStream(r));return Object.defineProperty(o,"mediaStream",{value:e}),o};var Lb=(t,e)=>(n,{mediaStreamTrack:r})=>{if(typeof n.createMediaStreamTrackSource=="function")return n.createMediaStreamTrackSource(r);let o=new MediaStream([r]),i=n.createMediaStreamSource(o);if(r.kind!=="audio")throw t();if(e(n))throw new TypeError;return i};var jb=t=>t===null?null:t.hasOwnProperty("OfflineAudioContext")?t.OfflineAudioContext:t.hasOwnProperty("webkitOfflineAudioContext")?t.webkitOfflineAudioContext:null;var Bb=(t,e,n,r,o,i)=>(s,a)=>{let c=s.createOscillator();return we(c,a),Re(c,a,"detune"),Re(c,a,"frequency"),a.periodicWave!==void 0?c.setPeriodicWave(a.periodicWave):Fe(c,a,"type"),e(n,()=>n(s))||xs(c),e(r,()=>r(s))||i(c,s),e(o,()=>o(s))||ws(c),t(s,c),c};var Ub=t=>(e,n)=>{let r=e.createPanner();return r.orientationX===void 0?t(e,n):(we(r,n),Re(r,n,"orientationX"),Re(r,n,"orientationY"),Re(r,n,"orientationZ"),Re(r,n,"positionX"),Re(r,n,"positionY"),Re(r,n,"positionZ"),Fe(r,n,"coneInnerAngle"),Fe(r,n,"coneOuterAngle"),Fe(r,n,"coneOuterGain"),Fe(r,n,"distanceModel"),Fe(r,n,"maxDistance"),Fe(r,n,"panningModel"),Fe(r,n,"refDistance"),Fe(r,n,"rolloffFactor"),r)};var qb=(t,e,n,r,o,i,s,a,c,u)=>(l,K)=>{var V=K,{coneInnerAngle:d,coneOuterAngle:h,coneOuterGain:p,distanceModel:y,maxDistance:v,orientationX:_,orientationY:x,orientationZ:I,panningModel:A,positionX:L,positionY:T,positionZ:E,refDistance:w,rolloffFactor:m}=V,R=eo(V,["coneInnerAngle","coneOuterAngle","coneOuterGain","distanceModel","maxDistance","orientationX","orientationY","orientationZ","panningModel","positionX","positionY","positionZ","refDistance","rolloffFactor"]);let j=l.createPanner();if(R.channelCount>2||R.channelCountMode==="max")throw s();we(j,R);let X={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},O=n(l,G(C({},X),{channelInterpretation:"speakers",numberOfInputs:6})),N=r(l,G(C({},R),{gain:1})),M=r(l,G(C({},X),{gain:1})),F=r(l,G(C({},X),{gain:0})),H=r(l,G(C({},X),{gain:0})),B=r(l,G(C({},X),{gain:0})),W=r(l,G(C({},X),{gain:0})),U=r(l,G(C({},X),{gain:0})),Se=o(l,256,6,1),ke=i(l,G(C({},X),{curve:new Float32Array([1,1]),oversample:"none"})),ft=[_,x,I],St=[L,T,E],g=new Float32Array(1);Se.onaudioprocess=({inputBuffer:q})=>{let Me=[c(q,g,0),c(q,g,1),c(q,g,2)];Me.some((Ge,rt)=>Ge!==ft[rt])&&(j.setOrientation(...Me),ft=Me);let Be=[c(q,g,3),c(q,g,4),c(q,g,5)];Be.some((Ge,rt)=>Ge!==St[rt])&&(j.setPosition(...Be),St=Be)},Object.defineProperty(F.gain,"defaultValue",{get:()=>0}),Object.defineProperty(H.gain,"defaultValue",{get:()=>0}),Object.defineProperty(B.gain,"defaultValue",{get:()=>0}),Object.defineProperty(W.gain,"defaultValue",{get:()=>0}),Object.defineProperty(U.gain,"defaultValue",{get:()=>0});let f={get bufferSize(){},get channelCount(){return j.channelCount},set channelCount(q){if(q>2)throw s();N.channelCount=q,j.channelCount=q},get channelCountMode(){return j.channelCountMode},set channelCountMode(q){if(q==="max")throw s();N.channelCountMode=q,j.channelCountMode=q},get channelInterpretation(){return j.channelInterpretation},set channelInterpretation(q){N.channelInterpretation=q,j.channelInterpretation=q},get coneInnerAngle(){return j.coneInnerAngle},set coneInnerAngle(q){j.coneInnerAngle=q},get coneOuterAngle(){return j.coneOuterAngle},set coneOuterAngle(q){j.coneOuterAngle=q},get coneOuterGain(){return j.coneOuterGain},set coneOuterGain(q){if(q<0||q>1)throw e();j.coneOuterGain=q},get context(){return j.context},get distanceModel(){return j.distanceModel},set distanceModel(q){j.distanceModel=q},get inputs(){return[N]},get maxDistance(){return j.maxDistance},set maxDistance(q){if(q<0)throw new RangeError;j.maxDistance=q},get numberOfInputs(){return j.numberOfInputs},get numberOfOutputs(){return j.numberOfOutputs},get orientationX(){return M.gain},get orientationY(){return F.gain},get orientationZ(){return H.gain},get panningModel(){return j.panningModel},set panningModel(q){j.panningModel=q},get positionX(){return B.gain},get positionY(){return W.gain},get positionZ(){return U.gain},get refDistance(){return j.refDistance},set refDistance(q){if(q<0)throw new RangeError;j.refDistance=q},get rolloffFactor(){return j.rolloffFactor},set rolloffFactor(q){if(q<0)throw new RangeError;j.rolloffFactor=q},addEventListener(...q){return N.addEventListener(q[0],q[1],q[2])},dispatchEvent(...q){return N.dispatchEvent(q[0])},removeEventListener(...q){return N.removeEventListener(q[0],q[1],q[2])}};d!==f.coneInnerAngle&&(f.coneInnerAngle=d),h!==f.coneOuterAngle&&(f.coneOuterAngle=h),p!==f.coneOuterGain&&(f.coneOuterGain=p),y!==f.distanceModel&&(f.distanceModel=y),v!==f.maxDistance&&(f.maxDistance=v),_!==f.orientationX.value&&(f.orientationX.value=_),x!==f.orientationY.value&&(f.orientationY.value=x),I!==f.orientationZ.value&&(f.orientationZ.value=I),A!==f.panningModel&&(f.panningModel=A),L!==f.positionX.value&&(f.positionX.value=L),T!==f.positionY.value&&(f.positionY.value=T),E!==f.positionZ.value&&(f.positionZ.value=E),w!==f.refDistance&&(f.refDistance=w),m!==f.rolloffFactor&&(f.rolloffFactor=m),(ft[0]!==1||ft[1]!==0||ft[2]!==0)&&j.setOrientation(...ft),(St[0]!==0||St[1]!==0||St[2]!==0)&&j.setPosition(...St);let k=()=>{N.connect(j),t(N,ke,0,0),ke.connect(M).connect(O,0,0),ke.connect(F).connect(O,0,1),ke.connect(H).connect(O,0,2),ke.connect(B).connect(O,0,3),ke.connect(W).connect(O,0,4),ke.connect(U).connect(O,0,5),O.connect(Se).connect(l.destination)},D=()=>{N.disconnect(j),a(N,ke,0,0),ke.disconnect(M),M.disconnect(O),ke.disconnect(F),F.disconnect(O),ke.disconnect(H),H.disconnect(O),ke.disconnect(B),B.disconnect(O),ke.disconnect(W),W.disconnect(O),ke.disconnect(U),U.disconnect(O),O.disconnect(Se),Se.disconnect(l.destination)};return u(qn(f,j),k,D)};var $b=t=>(e,{disableNormalization:n,imag:r,real:o})=>{let i=r instanceof Float32Array?r:new Float32Array(r),s=o instanceof Float32Array?o:new Float32Array(o),a=e.createPeriodicWave(s,i,{disableNormalization:n});if(Array.from(r).length<2)throw t();return a};var Cs=(t,e,n,r)=>t.createScriptProcessor(e,n,r);var Hb=(t,e)=>(n,r)=>{let o=r.channelCountMode;if(o==="clamped-max")throw e();if(n.createStereoPanner===void 0)return t(n,r);let i=n.createStereoPanner();return we(i,r),Re(i,r,"pan"),Object.defineProperty(i,"channelCountMode",{get:()=>o,set:s=>{if(s!==o)throw e()}}),i};var Wb=(t,e,n,r,o,i)=>{let a=new Float32Array([1,1]),c=Math.PI/2,u={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},l=G(C({},u),{oversample:"none"}),d=(y,v,_,x)=>{let I=new Float32Array(16385),A=new Float32Array(16385);for(let R=0;R<16385;R+=1){let K=R/16384*c;I[R]=Math.cos(K),A[R]=Math.sin(K)}let L=n(y,G(C({},u),{gain:0})),T=r(y,G(C({},l),{curve:I})),E=r(y,G(C({},l),{curve:a})),w=n(y,G(C({},u),{gain:0})),m=r(y,G(C({},l),{curve:A}));return{connectGraph(){v.connect(L),v.connect(E.inputs===void 0?E:E.inputs[0]),v.connect(w),E.connect(_),_.connect(T.inputs===void 0?T:T.inputs[0]),_.connect(m.inputs===void 0?m:m.inputs[0]),T.connect(L.gain),m.connect(w.gain),L.connect(x,0,0),w.connect(x,0,1)},disconnectGraph(){v.disconnect(L),v.disconnect(E.inputs===void 0?E:E.inputs[0]),v.disconnect(w),E.disconnect(_),_.disconnect(T.inputs===void 0?T:T.inputs[0]),_.disconnect(m.inputs===void 0?m:m.inputs[0]),T.disconnect(L.gain),m.disconnect(w.gain),L.disconnect(x,0,0),w.disconnect(x,0,1)}}},h=(y,v,_,x)=>{let I=new Float32Array(16385),A=new Float32Array(16385),L=new Float32Array(16385),T=new Float32Array(16385),E=Math.floor(16385/2);for(let F=0;F<16385;F+=1)if(F>E){let H=(F-E)/(16384-E)*c;I[F]=Math.cos(H),A[F]=Math.sin(H),L[F]=0,T[F]=1}else{let H=F/(16384-E)*c;I[F]=1,A[F]=0,L[F]=Math.cos(H),T[F]=Math.sin(H)}let w=e(y,{channelCount:2,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:2}),m=n(y,G(C({},u),{gain:0})),R=r(y,G(C({},l),{curve:I})),K=n(y,G(C({},u),{gain:0})),V=r(y,G(C({},l),{curve:A})),j=r(y,G(C({},l),{curve:a})),X=n(y,G(C({},u),{gain:0})),O=r(y,G(C({},l),{curve:L})),N=n(y,G(C({},u),{gain:0})),M=r(y,G(C({},l),{curve:T}));return{connectGraph(){v.connect(w),v.connect(j.inputs===void 0?j:j.inputs[0]),w.connect(m,0),w.connect(K,0),w.connect(X,1),w.connect(N,1),j.connect(_),_.connect(R.inputs===void 0?R:R.inputs[0]),_.connect(V.inputs===void 0?V:V.inputs[0]),_.connect(O.inputs===void 0?O:O.inputs[0]),_.connect(M.inputs===void 0?M:M.inputs[0]),R.connect(m.gain),V.connect(K.gain),O.connect(X.gain),M.connect(N.gain),m.connect(x,0,0),X.connect(x,0,0),K.connect(x,0,1),N.connect(x,0,1)},disconnectGraph(){v.disconnect(w),v.disconnect(j.inputs===void 0?j:j.inputs[0]),w.disconnect(m,0),w.disconnect(K,0),w.disconnect(X,1),w.disconnect(N,1),j.disconnect(_),_.disconnect(R.inputs===void 0?R:R.inputs[0]),_.disconnect(V.inputs===void 0?V:V.inputs[0]),_.disconnect(O.inputs===void 0?O:O.inputs[0]),_.disconnect(M.inputs===void 0?M:M.inputs[0]),R.disconnect(m.gain),V.disconnect(K.gain),O.disconnect(X.gain),M.disconnect(N.gain),m.disconnect(x,0,0),X.disconnect(x,0,0),K.disconnect(x,0,1),N.disconnect(x,0,1)}}},p=(y,v,_,x,I)=>{if(v===1)return d(y,_,x,I);if(v===2)return h(y,_,x,I);throw o()};return(y,A)=>{var L=A,{channelCount:v,channelCountMode:_,pan:x}=L,I=eo(L,["channelCount","channelCountMode","pan"]);if(_==="max")throw o();let T=t(y,G(C({},I),{channelCount:1,channelCountMode:_,numberOfInputs:2})),E=n(y,G(C({},I),{channelCount:v,channelCountMode:_,gain:1})),w=n(y,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:x}),{connectGraph:m,disconnectGraph:R}=p(y,v,E,w,T);Object.defineProperty(w.gain,"defaultValue",{get:()=>0}),Object.defineProperty(w.gain,"maxValue",{get:()=>1}),Object.defineProperty(w.gain,"minValue",{get:()=>-1});let K={get bufferSize(){},get channelCount(){return E.channelCount},set channelCount(O){E.channelCount!==O&&(V&&R(),{connectGraph:m,disconnectGraph:R}=p(y,O,E,w,T),V&&m()),E.channelCount=O},get channelCountMode(){return E.channelCountMode},set channelCountMode(O){if(O==="clamped-max"||O==="max")throw o();E.channelCountMode=O},get channelInterpretation(){return E.channelInterpretation},set channelInterpretation(O){E.channelInterpretation=O},get context(){return E.context},get inputs(){return[E]},get numberOfInputs(){return E.numberOfInputs},get numberOfOutputs(){return E.numberOfOutputs},get pan(){return w.gain},addEventListener(...O){return E.addEventListener(O[0],O[1],O[2])},dispatchEvent(...O){return E.dispatchEvent(O[0])},removeEventListener(...O){return E.removeEventListener(O[0],O[1],O[2])}},V=!1,j=()=>{m(),V=!0},X=()=>{R(),V=!1};return i(qn(K,T),j,X)}};var Gb=(t,e,n,r,o,i,s)=>(a,c)=>{let u=a.createWaveShaper();if(i!==null&&i.name==="webkitAudioContext"&&a.createGain().gain.automationRate===void 0)return n(a,c);we(u,c);let l=c.curve===null||c.curve instanceof Float32Array?c.curve:new Float32Array(c.curve);if(l!==null&&l.length<2)throw e();Fe(u,{curve:l},"curve"),Fe(u,c,"oversample");let d=null,h=!1;return s(u,"curve",v=>()=>v.call(u),v=>_=>(v.call(u,_),h&&(r(_)&&d===null?d=t(a,u):!r(_)&&d!==null&&(d(),d=null)),_)),o(u,()=>{h=!0,r(u.curve)&&(d=t(a,u))},()=>{h=!1,d!==null&&(d(),d=null)})};var zb=(t,e,n,r,o)=>(i,u)=>{var l=u,{curve:s,oversample:a}=l,c=eo(l,["curve","oversample"]);let d=i.createWaveShaper(),h=i.createWaveShaper();we(d,c),we(h,c);let p=n(i,G(C({},c),{gain:1})),y=n(i,G(C({},c),{gain:-1})),v=n(i,G(C({},c),{gain:1})),_=n(i,G(C({},c),{gain:-1})),x=null,I=!1,A=null,L={get bufferSize(){},get channelCount(){return d.channelCount},set channelCount(w){p.channelCount=w,y.channelCount=w,d.channelCount=w,v.channelCount=w,h.channelCount=w,_.channelCount=w},get channelCountMode(){return d.channelCountMode},set channelCountMode(w){p.channelCountMode=w,y.channelCountMode=w,d.channelCountMode=w,v.channelCountMode=w,h.channelCountMode=w,_.channelCountMode=w},get channelInterpretation(){return d.channelInterpretation},set channelInterpretation(w){p.channelInterpretation=w,y.channelInterpretation=w,d.channelInterpretation=w,v.channelInterpretation=w,h.channelInterpretation=w,_.channelInterpretation=w},get context(){return d.context},get curve(){return A},set curve(w){if(w!==null&&w.length<2)throw e();if(w===null)d.curve=w,h.curve=w;else{let m=w.length,R=new Float32Array(m+2-m%2),K=new Float32Array(m+2-m%2);R[0]=w[0],K[0]=-w[m-1];let V=Math.ceil((m+1)/2),j=(m+1)/2-1;for(let X=1;X<V;X+=1){let O=X/V*j,N=Math.floor(O),M=Math.ceil(O);R[X]=N===M?w[N]:(1-(O-N))*w[N]+(1-(M-O))*w[M],K[X]=N===M?-w[m-1-N]:-((1-(O-N))*w[m-1-N])-(1-(M-O))*w[m-1-M]}R[V]=m%2===1?w[V-1]:(w[V-2]+w[V-1])/2,d.curve=R,h.curve=K}A=w,I&&(r(A)&&x===null?x=t(i,p):x!==null&&(x(),x=null))},get inputs(){return[p]},get numberOfInputs(){return d.numberOfInputs},get numberOfOutputs(){return d.numberOfOutputs},get oversample(){return d.oversample},set oversample(w){d.oversample=w,h.oversample=w},addEventListener(...w){return p.addEventListener(w[0],w[1],w[2])},dispatchEvent(...w){return p.dispatchEvent(w[0])},removeEventListener(...w){return p.removeEventListener(w[0],w[1],w[2])}};s!==null&&(L.curve=s instanceof Float32Array?s:new Float32Array(s)),a!==L.oversample&&(L.oversample=a);let T=()=>{p.connect(d).connect(v),p.connect(y).connect(h).connect(_).connect(v),I=!0,r(A)&&(x=t(i,p))},E=()=>{p.disconnect(d),d.disconnect(v),p.disconnect(y),y.disconnect(h),h.disconnect(_),_.disconnect(v),I=!1,x!==null&&(x(),x=null)};return o(qn(L,v),T,E)};var Bt=()=>new DOMException("","NotSupportedError");var oR={numberOfChannels:1},Yb=(t,e,n,r,o)=>class extends t{constructor(s,a,c){let u;if(typeof s=="number"&&a!==void 0&&c!==void 0)u={length:a,numberOfChannels:s,sampleRate:c};else if(typeof s=="object")u=s;else throw new Error("The given parameters are not valid.");let{length:l,numberOfChannels:d,sampleRate:h}=C(C({},oR),u),p=r(d,l,h);e(ir,()=>ir(p))||p.addEventListener("statechange",(()=>{let y=0,v=_=>{this._state==="running"&&(y>0?(p.removeEventListener("statechange",v),_.stopImmediatePropagation(),this._waitForThePromiseToSettle(_)):y+=1)};return v})()),super(p,d),this._length=l,this._nativeOfflineAudioContext=p,this._state=null}get length(){return this._nativeOfflineAudioContext.length===void 0?this._length:this._nativeOfflineAudioContext.length}get state(){return this._state===null?this._nativeOfflineAudioContext.state:this._state}startRendering(){return this._state==="running"?Promise.reject(n()):(this._state="running",o(this.destination,this._nativeOfflineAudioContext).finally(()=>{this._state=null,wo(this)}))}_waitForThePromiseToSettle(s){this._state===null?this._nativeOfflineAudioContext.dispatchEvent(s):setTimeout(()=>this._waitForThePromiseToSettle(s))}};var iR={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:440,periodicWave:void 0,type:"sine"},Zb=(t,e,n,r,o,i,s)=>class extends t{constructor(c,u){let l=o(c),d=C(C({},iR),u),h=n(l,d),p=i(l),y=p?r():null,v=c.sampleRate/2;super(c,!1,h,y),this._detune=e(this,p,h.detune,153600,-153600),this._frequency=e(this,p,h.frequency,v,-v),this._nativeOscillatorNode=h,this._onended=null,this._oscillatorNodeRenderer=y,this._oscillatorNodeRenderer!==null&&d.periodicWave!==void 0&&(this._oscillatorNodeRenderer.periodicWave=d.periodicWave)}get detune(){return this._detune}get frequency(){return this._frequency}get onended(){return this._onended}set onended(c){let u=typeof c=="function"?s(this,c):null;this._nativeOscillatorNode.onended=u;let l=this._nativeOscillatorNode.onended;this._onended=l!==null&&l===u?c:l}get type(){return this._nativeOscillatorNode.type}set type(c){this._nativeOscillatorNode.type=c,this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.periodicWave=null)}setPeriodicWave(c){this._nativeOscillatorNode.setPeriodicWave(c),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.periodicWave=c)}start(c=0){if(this._nativeOscillatorNode.start(c),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.start=c),this.context.state!=="closed"){rr(this);let u=()=>{this._nativeOscillatorNode.removeEventListener("ended",u),tn(this)&&Ir(this)};this._nativeOscillatorNode.addEventListener("ended",u)}}stop(c=0){this._nativeOscillatorNode.stop(c),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.stop=c)}};var Qb=(t,e,n,r,o)=>()=>{let i=new WeakMap,s=null,a=null,c=null,u=(l,d)=>ee(void 0,null,function*(){let h=n(l),p=Oe(h,d);if(!p){let y={channelCount:h.channelCount,channelCountMode:h.channelCountMode,channelInterpretation:h.channelInterpretation,detune:h.detune.value,frequency:h.frequency.value,periodicWave:s===null?void 0:s,type:h.type};h=e(d,y),a!==null&&h.start(a),c!==null&&h.stop(c)}return i.set(d,h),p?(yield t(d,l.detune,h.detune),yield t(d,l.frequency,h.frequency)):(yield r(d,l.detune,h.detune),yield r(d,l.frequency,h.frequency)),yield o(l,d,h),h});return{set periodicWave(l){s=l},set start(l){a=l},set stop(l){c=l},render(l,d){let h=i.get(d);return h!==void 0?Promise.resolve(h):u(l,d)}}};var sR={channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",coneInnerAngle:360,coneOuterAngle:360,coneOuterGain:0,distanceModel:"inverse",maxDistance:1e4,orientationX:1,orientationY:0,orientationZ:0,panningModel:"equalpower",positionX:0,positionY:0,positionZ:0,refDistance:1,rolloffFactor:1},Kb=(t,e,n,r,o,i,s)=>class extends t{constructor(c,u){let l=o(c),d=C(C({},sR),u),h=n(l,d),p=i(l),y=p?r():null;super(c,!1,h,y),this._nativePannerNode=h,this._orientationX=e(this,p,h.orientationX,ut,gt),this._orientationY=e(this,p,h.orientationY,ut,gt),this._orientationZ=e(this,p,h.orientationZ,ut,gt),this._positionX=e(this,p,h.positionX,ut,gt),this._positionY=e(this,p,h.positionY,ut,gt),this._positionZ=e(this,p,h.positionZ,ut,gt),s(this,1)}get coneInnerAngle(){return this._nativePannerNode.coneInnerAngle}set coneInnerAngle(c){this._nativePannerNode.coneInnerAngle=c}get coneOuterAngle(){return this._nativePannerNode.coneOuterAngle}set coneOuterAngle(c){this._nativePannerNode.coneOuterAngle=c}get coneOuterGain(){return this._nativePannerNode.coneOuterGain}set coneOuterGain(c){this._nativePannerNode.coneOuterGain=c}get distanceModel(){return this._nativePannerNode.distanceModel}set distanceModel(c){this._nativePannerNode.distanceModel=c}get maxDistance(){return this._nativePannerNode.maxDistance}set maxDistance(c){this._nativePannerNode.maxDistance=c}get orientationX(){return this._orientationX}get orientationY(){return this._orientationY}get orientationZ(){return this._orientationZ}get panningModel(){return this._nativePannerNode.panningModel}set panningModel(c){this._nativePannerNode.panningModel=c}get positionX(){return this._positionX}get positionY(){return this._positionY}get positionZ(){return this._positionZ}get refDistance(){return this._nativePannerNode.refDistance}set refDistance(c){this._nativePannerNode.refDistance=c}get rolloffFactor(){return this._nativePannerNode.rolloffFactor}set rolloffFactor(c){this._nativePannerNode.rolloffFactor=c}};var Xb=(t,e,n,r,o,i,s,a,c,u)=>()=>{let l=new WeakMap,d=null,h=(p,y)=>ee(void 0,null,function*(){let v=null,_=i(p),x={channelCount:_.channelCount,channelCountMode:_.channelCountMode,channelInterpretation:_.channelInterpretation},I=G(C({},x),{coneInnerAngle:_.coneInnerAngle,coneOuterAngle:_.coneOuterAngle,coneOuterGain:_.coneOuterGain,distanceModel:_.distanceModel,maxDistance:_.maxDistance,panningModel:_.panningModel,refDistance:_.refDistance,rolloffFactor:_.rolloffFactor}),A=Oe(_,y);if("bufferSize"in _)v=r(y,G(C({},x),{gain:1}));else if(!A){let L=G(C({},I),{orientationX:_.orientationX.value,orientationY:_.orientationY.value,orientationZ:_.orientationZ.value,positionX:_.positionX.value,positionY:_.positionY.value,positionZ:_.positionZ.value});_=o(y,L)}if(l.set(y,v===null?_:v),v!==null){if(d===null){if(s===null)throw new Error("Missing the native OfflineAudioContext constructor.");let V=new s(6,p.context.length,y.sampleRate),j=e(V,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6});j.connect(V.destination),d=(()=>ee(void 0,null,function*(){let X=yield Promise.all([p.orientationX,p.orientationY,p.orientationZ,p.positionX,p.positionY,p.positionZ].map((O,N)=>ee(void 0,null,function*(){let M=n(V,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:N===0?1:0});return yield a(V,O,M.offset),M})));for(let O=0;O<6;O+=1)X[O].connect(j,0,O),X[O].start(0);return u(V)}))()}let L=yield d,T=r(y,G(C({},x),{gain:1}));yield c(p,y,T);let E=[];for(let V=0;V<L.numberOfChannels;V+=1)E.push(L.getChannelData(V));let w=[E[0][0],E[1][0],E[2][0]],m=[E[3][0],E[4][0],E[5][0]],R=r(y,G(C({},x),{gain:1})),K=o(y,G(C({},I),{orientationX:w[0],orientationY:w[1],orientationZ:w[2],positionX:m[0],positionY:m[1],positionZ:m[2]}));T.connect(R).connect(K.inputs[0]),K.connect(v);for(let V=128;V<L.length;V+=128){let j=[E[0][V],E[1][V],E[2][V]],X=[E[3][V],E[4][V],E[5][V]];if(j.some((O,N)=>O!==w[N])||X.some((O,N)=>O!==m[N])){w=j,m=X;let O=V/y.sampleRate;R.gain.setValueAtTime(0,O),R=r(y,G(C({},x),{gain:0})),K=o(y,G(C({},I),{orientationX:w[0],orientationY:w[1],orientationZ:w[2],positionX:m[0],positionY:m[1],positionZ:m[2]})),R.gain.setValueAtTime(1,O),T.connect(R).connect(K.inputs[0]),K.connect(v)}}return v}return A?(yield t(y,p.orientationX,_.orientationX),yield t(y,p.orientationY,_.orientationY),yield t(y,p.orientationZ,_.orientationZ),yield t(y,p.positionX,_.positionX),yield t(y,p.positionY,_.positionY),yield t(y,p.positionZ,_.positionZ)):(yield a(y,p.orientationX,_.orientationX),yield a(y,p.orientationY,_.orientationY),yield a(y,p.orientationZ,_.orientationZ),yield a(y,p.positionX,_.positionX),yield a(y,p.positionY,_.positionY),yield a(y,p.positionZ,_.positionZ)),Un(_)?yield c(p,y,_.inputs[0]):yield c(p,y,_),_});return{render(p,y){let v=l.get(y);return v!==void 0?Promise.resolve(v):h(p,y)}}};var aR={disableNormalization:!1},Jb=(t,e,n,r)=>class eC{constructor(i,s){let a=e(i),c=r(C(C({},aR),s)),u=t(a,c);return n.add(u),u}static[Symbol.hasInstance](i){return i!==null&&typeof i=="object"&&Object.getPrototypeOf(i)===eC.prototype||n.has(i)}};var tC=(t,e)=>(n,r,o)=>(t(r).replay(o),e(r,n,o));var nC=(t,e,n)=>(r,o,i)=>ee(void 0,null,function*(){let s=t(r);yield Promise.all(s.activeInputs.map((a,c)=>Array.from(a).map(d=>ee(void 0,[d],function*([u,l]){let p=yield e(u).render(u,o),y=r.context.destination;!n(u)&&(r!==y||!n(r))&&p.connect(i,l,c)}))).reduce((a,c)=>[...a,...c],[]))});var rC=(t,e,n)=>(r,o,i)=>ee(void 0,null,function*(){let s=e(r);yield Promise.all(Array.from(s.activeInputs).map(u=>ee(void 0,[u],function*([a,c]){let d=yield t(a).render(a,o);n(a)||d.connect(i,c)})))});var oC=(t,e,n,r)=>o=>t(ir,()=>ir(o))?Promise.resolve(t(r,r)).then(i=>{if(!i){let s=n(o,512,0,1);o.oncomplete=()=>{s.onaudioprocess=null,s.disconnect()},s.onaudioprocess=()=>o.currentTime,s.connect(o.destination)}return o.startRendering()}):new Promise(i=>{let s=e(o,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});o.oncomplete=a=>{s.disconnect(),i(a.renderedBuffer)},s.connect(o.destination),o.startRendering()});var iC=t=>(e,n)=>{t.set(e,n)};var sC=t=>(e,n)=>t.set(e,n);var aC=(t,e,n,r,o,i,s,a)=>(c,u)=>n(c).render(c,u).then(()=>Promise.all(Array.from(r(u)).map(l=>n(l).render(l,u)))).then(()=>o(u)).then(l=>(typeof l.copyFromChannel!="function"?(s(l),hs(l)):e(i,()=>i(l))||a(l),t.add(l),l));var cR={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",pan:0},cC=(t,e,n,r,o,i)=>class extends t{constructor(a,c){let u=o(a),l=C(C({},cR),c),d=n(u,l),h=i(u),p=h?r():null;super(a,!1,d,p),this._pan=e(this,h,d.pan)}get pan(){return this._pan}};var uC=(t,e,n,r,o)=>()=>{let i=new WeakMap,s=(a,c)=>ee(void 0,null,function*(){let u=n(a),l=Oe(u,c);if(!l){let d={channelCount:u.channelCount,channelCountMode:u.channelCountMode,channelInterpretation:u.channelInterpretation,pan:u.pan.value};u=e(c,d)}return i.set(c,u),l?yield t(c,a.pan,u.pan):yield r(c,a.pan,u.pan),Un(u)?yield o(a,c,u.inputs[0]):yield o(a,c,u),u});return{render(a,c){let u=i.get(c);return u!==void 0?Promise.resolve(u):s(a,c)}}};var lC=t=>()=>{if(t===null)return!1;try{new t({length:1,sampleRate:44100})}catch{return!1}return!0};var dC=(t,e)=>()=>ee(void 0,null,function*(){if(t===null)return!0;if(e===null)return!1;let n=new Blob(['class A extends AudioWorkletProcessor{process(i){this.port.postMessage(i,[i[0][0].buffer])}}registerProcessor("a",A)'],{type:"application/javascript; charset=utf-8"}),r=new e(1,128,44100),o=URL.createObjectURL(n),i=!1,s=!1;try{yield r.audioWorklet.addModule(o);let a=new t(r,"a",{numberOfOutputs:0}),c=r.createOscillator();a.port.onmessage=()=>i=!0,a.onprocessorerror=()=>s=!0,c.connect(a),c.start(0),yield r.startRendering(),yield new Promise(u=>setTimeout(u))}catch{}finally{URL.revokeObjectURL(o)}return i&&!s});var hC=(t,e)=>()=>{if(e===null)return Promise.resolve(!1);let n=new e(1,1,44100),r=t(n,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return new Promise(o=>{n.oncomplete=()=>{r.disconnect(),o(n.currentTime!==0)},n.startRendering()})};var dm=()=>new DOMException("","UnknownError");var uR={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",curve:null,oversample:"none"},fC=(t,e,n,r,o,i,s)=>class extends t{constructor(c,u){let l=o(c),d=C(C({},uR),u),h=n(l,d),y=i(l)?r():null;super(c,!0,h,y),this._isCurveNullified=!1,this._nativeWaveShaperNode=h,s(this,1)}get curve(){return this._isCurveNullified?null:this._nativeWaveShaperNode.curve}set curve(c){if(c===null)this._isCurveNullified=!0,this._nativeWaveShaperNode.curve=new Float32Array([0,0]);else{if(c.length<2)throw e();this._isCurveNullified=!1,this._nativeWaveShaperNode.curve=c}}get oversample(){return this._nativeWaveShaperNode.oversample}set oversample(c){this._nativeWaveShaperNode.oversample=c}};var pC=(t,e,n)=>()=>{let r=new WeakMap,o=(i,s)=>ee(void 0,null,function*(){let a=e(i);if(!Oe(a,s)){let u={channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,curve:a.curve,oversample:a.oversample};a=t(s,u)}return r.set(s,a),Un(a)?yield n(i,s,a.inputs[0]):yield n(i,s,a),a});return{render(i,s){let a=r.get(s);return a!==void 0?Promise.resolve(a):o(i,s)}}};var mC=()=>typeof window>"u"?null:window;var gC=(t,e)=>n=>{n.copyFromChannel=(r,o,i=0)=>{let s=t(i),a=t(o);if(a>=n.numberOfChannels)throw e();let c=n.length,u=n.getChannelData(a),l=r.length;for(let d=s<0?-s:0;d+s<c&&d<l;d+=1)r[d]=u[d+s]},n.copyToChannel=(r,o,i=0)=>{let s=t(i),a=t(o);if(a>=n.numberOfChannels)throw e();let c=n.length,u=n.getChannelData(a),l=r.length;for(let d=s<0?-s:0;d+s<c&&d<l;d+=1)u[d+s]=r[d]}};var yC=t=>e=>{e.copyFromChannel=(n=>(r,o,i=0)=>{let s=t(i),a=t(o);if(s<e.length)return n.call(e,r,a,s)})(e.copyFromChannel),e.copyToChannel=(n=>(r,o,i=0)=>{let s=t(i),a=t(o);if(s<e.length)return n.call(e,r,a,s)})(e.copyToChannel)};var vC=t=>(e,n)=>{let r=n.createBuffer(1,1,44100);e.buffer===null&&(e.buffer=r),t(e,"buffer",o=>()=>{let i=o.call(e);return i===r?null:i},o=>i=>o.call(e,i===null?r:i))};var _C=(t,e)=>(n,r)=>{r.channelCount=1,r.channelCountMode="explicit",Object.defineProperty(r,"channelCount",{get:()=>1,set:()=>{throw t()}}),Object.defineProperty(r,"channelCountMode",{get:()=>"explicit",set:()=>{throw t()}});let o=n.createBufferSource();e(r,()=>{let a=r.numberOfInputs;for(let c=0;c<a;c+=1)o.connect(r,0,c)},()=>o.disconnect(r))};var hm=(t,e,n)=>t.copyFromChannel===void 0?t.getChannelData(n)[0]:(t.copyFromChannel(e,n),e[0]);var fm=t=>{if(t===null)return!1;let e=t.length;return e%2!==0?t[Math.floor(e/2)]!==0:t[e/2-1]+t[e/2]!==0};var Ds=(t,e,n,r)=>{let o=t;for(;!o.hasOwnProperty(e);)o=Object.getPrototypeOf(o);let{get:i,set:s}=Object.getOwnPropertyDescriptor(o,e);Object.defineProperty(t,e,{get:n(i),set:r(s)})};var xC=t=>G(C({},t),{outputChannelCount:t.outputChannelCount!==void 0?t.outputChannelCount:t.numberOfInputs===1&&t.numberOfOutputs===1?[t.channelCount]:Array.from({length:t.numberOfOutputs},()=>1)});var wC=t=>G(C({},t),{channelCount:t.numberOfOutputs});var bC=t=>{let{imag:e,real:n}=t;return e===void 0?n===void 0?G(C({},t),{imag:[0,0],real:[0,0]}):G(C({},t),{imag:Array.from(n,()=>0),real:n}):n===void 0?G(C({},t),{imag:e,real:Array.from(e,()=>0)}):G(C({},t),{imag:e,real:n})};var pm=(t,e,n)=>{try{t.setValueAtTime(e,n)}catch(r){if(r.code!==9)throw r;pm(t,e,n+1e-7)}};var CC=t=>{let e=t.createBufferSource();e.start();try{e.start()}catch{return!0}return!1};var DC=t=>{let e=t.createBufferSource(),n=t.createBuffer(1,1,44100);e.buffer=n;try{e.start(0,1)}catch{return!1}return!0};var EC=t=>{let e=t.createBufferSource();e.start();try{e.stop()}catch{return!1}return!0};var Ml=t=>{let e=t.createOscillator();try{e.start(-1)}catch(n){return n instanceof RangeError}return!1};var mm=t=>{let e=t.createBuffer(1,1,44100),n=t.createBufferSource();n.buffer=e,n.start(),n.stop();try{return n.stop(),!0}catch{return!1}};var Nl=t=>{let e=t.createOscillator();try{e.stop(-1)}catch(n){return n instanceof RangeError}return!1};var TC=t=>{let{port1:e,port2:n}=new MessageChannel;try{e.postMessage(t)}finally{e.close(),n.close()}};var SC=t=>{t.start=(e=>(n=0,r=0,o)=>{let i=t.buffer,s=i===null?r:Math.min(i.duration,r);i!==null&&s>i.duration-.5/t.context.sampleRate?e.call(t,n,0,0):e.call(t,n,s,o)})(t.start)};var gm=(t,e)=>{let n=e.createGain();t.connect(n);let r=(o=>()=>{o.call(t,n),t.removeEventListener("ended",r)})(t.disconnect);t.addEventListener("ended",r),qn(t,n),t.stop=(o=>{let i=!1;return(s=0)=>{if(i)try{o.call(t,s)}catch{n.gain.setValueAtTime(0,s)}else o.call(t,s),i=!0}})(t.stop)};var ei=(t,e)=>n=>{let r={value:t};return Object.defineProperties(n,{currentTarget:r,target:r}),typeof e=="function"?e.call(t,n):e.handleEvent.call(t,n)};var lR=g0(or),dR=T0(or),hR=bw(_o),IC=new WeakMap,fR=Lw(IC),$n=rw(new Map,new WeakMap),Mr=mC(),MC=fb($n,Bn),ym=Vw(Mt),Ut=nC(Mt,ym,Yr),pR=M0(MC,qe,Ut),Ke=Uw(ls),Zr=jb(Mr),$e=nb(Zr),NC=new WeakMap,OC=Nw(ei),Es=yb(Mr),vm=Xw(Es),_m=Jw(Mr),FC=eb(Mr),lc=_b(Mr),yt=z0(y0(vl),E0(lR,dR,fs,hR,ps,Mt,fR,Ar,qe,or,tn,Yr,ms),$n,zw(sc,ps,Mt,qe,Xo,tn),Bn,_s,Bt,_w(fs,sc,Mt,qe,Xo,Ke,tn,$e),Ew(NC,Mt,Ct),OC,Ke,vm,_m,FC,$e,lc),mR=I0(yt,pR,Bn,MC,Ke,$e);var xm=new WeakSet,AC=pb(Mr),RC=fw(new Uint32Array(1)),wm=gC(RC,Bn),bm=yC(RC),gR=N0(xm,$n,Bt,AC,Zr,lC(AC),wm,bm);var Ol=S0(nn),kC=rC(ym,xo,Yr),Nr=cw(kC),Ts=gb(Ol,$n,CC,DC,EC,Ml,mm,Nl,SC,vC(Ds),gm),Or=tC(jw(xo),kC),yR=R0(Nr,Ts,qe,Or,Ut),sr=Z0(v0(_l),NC,ic,Q0,dn.createCancelAndHoldAutomationEvent,dn.createCancelScheduledValuesAutomationEvent,dn.createExponentialRampToValueAutomationEvent,dn.createLinearRampToValueAutomationEvent,dn.createSetTargetAutomationEvent,dn.createSetValueAutomationEvent,dn.createSetValueCurveAutomationEvent,Es,pm),vR=F0(yt,yR,sr,tt,Ts,Ke,$e,ei);var _R=q0(yt,$0,Bn,tt,vb(nn,Ds),Ke,$e,Ut),xR=nw(Nr,um,qe,Or,Ut),ti=sC(IC),wR=tw(yt,sr,xR,_s,um,Ke,$e,ti),Co=db(or,_m),bR=_C(tt,Co),Do=Tb(Es,bR),CR=iw(Do,qe,Ut),DR=ow(yt,CR,Do,Ke,$e),ER=aw(bs,qe,Ut),TR=sw(yt,ER,bs,Ke,$e,wC),SR=Ib(Ol,Ts,nn,Co),Ss=Ab(Ol,$n,SR,Ml,Nl),AR=hw(Nr,Ss,qe,Or,Ut),IR=dw(yt,sr,AR,Ss,Ke,$e,ei),PC=Mb(Bt,Ds),MR=mw(PC,qe,Ut),NR=pw(yt,MR,PC,Ke,$e,ti),OR=ww(Nr,lm,qe,Or,Ut),FR=xw(yt,sr,OR,lm,Ke,$e,ti),VC=Nb(Bt),RR=Aw(Nr,VC,qe,Or,Ut),kR=Sw(yt,sr,RR,VC,Bt,Ke,$e,ti),PR=kw(Nr,nn,qe,Or,Ut),VR=Rw(yt,sr,PR,nn,Ke,$e),LR=Rb(_s,tt,Cs,Bt),Fl=oC($n,nn,Cs,hC(nn,Zr)),jR=Gw(Ts,qe,Zr,Ut,Fl),BR=Ob(LR),UR=Ww(yt,BR,jR,Ke,$e,ti),qR=H0(sr,Do,Ss,Cs,Bt,hm,$e,Ds),LC=new WeakMap,Cm=ub(_R,qR,OC,$e,LC,ei),jC=Bb(Ol,$n,Ml,mm,Nl,gm),$R=Qb(Nr,jC,qe,Or,Ut),HR=Zb(yt,sr,jC,$R,Ke,$e,ei),BC=lw(Ts),WR=zb(BC,tt,nn,fm,Co),Rl=Gb(BC,tt,WR,fm,Co,Es,Ds),GR=qb(fs,tt,Do,nn,Cs,Rl,Bt,ps,hm,Co),UC=Ub(GR),zR=Xb(Nr,Do,Ss,nn,UC,qe,Zr,Or,Ut,Fl),YR=Kb(yt,sr,UC,zR,Ke,$e,ti),ZR=$b(Bn),QR=Jb(ZR,Ke,new WeakSet,bC),KR=Wb(Do,bs,nn,Rl,Bt,Co),qC=Hb(KR,Bt),XR=uC(Nr,qC,qe,Or,Ut),JR=cC(yt,sr,qC,XR,Ke,$e),ek=pC(Rl,qe,Ut),tk=fC(yt,tt,Rl,ek,Ke,$e,ti),$C=rb(Mr),Dm=Ow(Mr),HC=new WeakMap,nk=qw(HC,Zr),rk=$C?D0($n,Bt,Mw(Mr),Dm,Fw(m0),Ke,nk,$e,lc,new WeakMap,new WeakMap,dC(lc,Zr),Mr):void 0,ok=tb(vm,$e),ik=vw(xm,$n,yw,Iw,new WeakSet,Ke,ok,ds,ir,wm,bm),WC=ew(rk,mR,gR,vR,wR,DR,TR,IR,NR,ik,FR,kR,VR,UR,Cm,HR,YR,QR,JR,tk),sk=ob(yt,kb,Ke,$e),ak=ib(yt,Pb,Ke,$e),ck=sb(yt,Vb,Ke,$e),uk=Lb(tt,$e),lk=ab(yt,uk,Ke),GC=U0(WC,tt,Bt,dm,sk,ak,ck,lk,Es);var Em=$w(LC),dk=A0(Em),zC=uw(Bn),hk=Cw(Em),YC=Tw(Bn),ZC=new WeakMap,fk=Pw(ZC,Ct),pk=Eb(zC,Bn,tt,Do,bs,Ss,nn,Cs,Bt,YC,Dm,fk,Co),mk=wb(tt,pk,nn,Bt,Co),gk=J0(Nr,zC,Ts,Do,bs,Ss,nn,hk,YC,Dm,qe,lc,Zr,Or,Ut,Fl),yk=Bw(HC),vk=iC(ZC),Tm=$C?K0(dk,yt,sr,gk,mk,Mt,yk,Ke,$e,lc,xC,vk,TC,ei):void 0;var dae=cb(tt,Bt,dm,Cm,Es);var QC=gw(Bt,Zr),KC=aC(xm,$n,ym,Em,Fl,ds,wm,bm),hae=lb($n,tt,QC,Cm,KC);var XC=Yb(WC,$n,tt,QC,KC);var JC=Yw(ls,vm),eD=Zw(us,_m),tD=Qw(ic,FC),nD=Kw(ls,$e);function te(t,e){if(!t)throw new Error(e)}function Ot(t,e,n=1/0){if(!(e<=t&&t<=n))throw new RangeError(`Value must be within [${e}, ${n}], got: ${t}`)}function kl(t){!t.isOffline&&t.state!=="running"&&dc('The AudioContext is "suspended". Invoke Tone.start() from a user action to start the audio.')}var rD=console;function oD(...t){rD.log(...t)}function dc(...t){rD.warn(...t)}function Dt(t){return typeof t>"u"}function ae(t){return!Dt(t)}function iD(t){return typeof t=="function"}function qt(t){return typeof t=="number"}function ar(t){return Object.prototype.toString.call(t)==="[object Object]"&&t.constructor===Object}function Pl(t){return typeof t=="boolean"}function vt(t){return Array.isArray(t)}function Ft(t){return typeof t=="string"}function hc(t){return Ft(t)&&/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i.test(t)}function sD(t){return new GC(t)}function aD(t,e,n){return new XC(t,e,n)}var Fr=typeof self=="object"?self:null,cD=Fr&&(Fr.hasOwnProperty("AudioContext")||Fr.hasOwnProperty("webkitAudioContext"));function uD(t,e,n){return te(ae(Tm),"This node only works in a secure context (https or localhost)"),new Tm(t,e,n)}var Vl=class{constructor(e,n,r){this._callback=e,this._type=n,this._updateInterval=r,this._createClock()}_createWorker(){let e=new Blob([`
			// the initial timeout time
			let timeoutTime =  ${(this._updateInterval*1e3).toFixed(1)};
			// onmessage callback
			self.onmessage = function(msg){
				timeoutTime = parseInt(msg.data);
			};
			// the tick function which posts a message
			// and schedules a new tick
			function tick(){
				setTimeout(tick, timeoutTime);
				self.postMessage('tick');
			}
			// call tick initially
			tick();
			`],{type:"text/javascript"}),n=URL.createObjectURL(e),r=new Worker(n);r.onmessage=this._callback.bind(this),this._worker=r}_createTimeout(){this._timeout=setTimeout(()=>{this._createTimeout(),this._callback()},this._updateInterval*1e3)}_createClock(){if(this._type==="worker")try{this._createWorker()}catch{this._type="timeout",this._createClock()}else this._type==="timeout"&&this._createTimeout()}_disposeClock(){this._timeout&&(clearTimeout(this._timeout),this._timeout=0),this._worker&&(this._worker.terminate(),this._worker.onmessage=null)}get updateInterval(){return this._updateInterval}set updateInterval(e){this._updateInterval=Math.max(e,128/44100),this._type==="worker"&&this._worker.postMessage(Math.max(e*1e3,1))}get type(){return this._type}set type(e){this._disposeClock(),this._type=e,this._createClock()}dispose(){this._disposeClock()}};function cr(t){return tD(t)}function Rr(t){return eD(t)}function As(t){return nD(t)}function Eo(t){return JC(t)}function Ll(t){return t instanceof AudioBuffer}function wk(t,e){return t==="value"||cr(e)||Rr(e)||Ll(e)}function ur(t,...e){if(!e.length)return t;let n=e.shift();if(ar(t)&&ar(n))for(let r in n)wk(r,n[r])?t[r]=n[r]:ar(n[r])?(t[r]||Object.assign(t,{[r]:{}}),ur(t[r],n[r])):Object.assign(t,{[r]:n[r]});return ur(t,...e)}function lD(t,e){return t.length===e.length&&t.every((n,r)=>e[r]===n)}function b(t,e,n=[],r){let o={},i=Array.from(e);if(ar(i[0])&&r&&!Reflect.has(i[0],r)&&(Object.keys(i[0]).some(a=>Reflect.has(t,a))||(ur(o,{[r]:i[0]}),n.splice(n.indexOf(r),1),i.shift())),i.length===1&&ar(i[0]))ur(o,i[0]);else for(let s=0;s<n.length;s++)ae(i[s])&&(o[n[s]]=i[s]);return ur(t,o)}function dD(t){return t.constructor.getDefaults()}function hn(t,e){return Dt(t)?e:t}function kr(t,e){return e.forEach(n=>{Reflect.has(t,n)&&delete t[n]}),t}var Yt=(()=>{class t{constructor(){this.debug=!1,this._wasDisposed=!1}static getDefaults(){return{}}log(...n){(this.debug||Fr&&this.toString()===Fr.TONE_DEBUG_CLASS)&&oD(this,...n)}dispose(){return this._wasDisposed=!0,this}get disposed(){return this._wasDisposed}toString(){return this.name}}return t.version=Ya,t})();function Is(t,e){return t>e+1e-6}function fc(t,e){return Is(t,e)||rn(t,e)}function jl(t,e){return t+1e-6<e}function rn(t,e){return Math.abs(t-e)<1e-6}function Sm(t,e,n){return Math.max(Math.min(t,n),e)}var Rt=class t extends Yt{constructor(){super(),this.name="Timeline",this._timeline=[];let e=b(t.getDefaults(),arguments,["memory"]);this.memory=e.memory,this.increasing=e.increasing}static getDefaults(){return{memory:1/0,increasing:!1}}get length(){return this._timeline.length}add(e){if(te(Reflect.has(e,"time"),"Timeline: events must have a time attribute"),e.time=e.time.valueOf(),this.increasing&&this.length){let n=this._timeline[this.length-1];te(fc(e.time,n.time),"The time must be greater than or equal to the last scheduled time"),this._timeline.push(e)}else{let n=this._search(e.time);this._timeline.splice(n+1,0,e)}if(this.length>this.memory){let n=this.length-this.memory;this._timeline.splice(0,n)}return this}remove(e){let n=this._timeline.indexOf(e);return n!==-1&&this._timeline.splice(n,1),this}get(e,n="time"){let r=this._search(e,n);return r!==-1?this._timeline[r]:null}peek(){return this._timeline[0]}shift(){return this._timeline.shift()}getAfter(e,n="time"){let r=this._search(e,n);return r+1<this._timeline.length?this._timeline[r+1]:null}getBefore(e){let n=this._timeline.length;if(n>0&&this._timeline[n-1].time<e)return this._timeline[n-1];let r=this._search(e);return r-1>=0?this._timeline[r-1]:null}cancel(e){if(this._timeline.length>1){let n=this._search(e);if(n>=0)if(rn(this._timeline[n].time,e)){for(let r=n;r>=0&&rn(this._timeline[r].time,e);r--)n=r;this._timeline=this._timeline.slice(0,n)}else this._timeline=this._timeline.slice(0,n+1);else this._timeline=[]}else this._timeline.length===1&&fc(this._timeline[0].time,e)&&(this._timeline=[]);return this}cancelBefore(e){let n=this._search(e);return n>=0&&(this._timeline=this._timeline.slice(n+1)),this}previousEvent(e){let n=this._timeline.indexOf(e);return n>0?this._timeline[n-1]:null}_search(e,n="time"){if(this._timeline.length===0)return-1;let r=0,o=this._timeline.length,i=o;if(o>0&&this._timeline[o-1][n]<=e)return o-1;for(;r<i;){let s=Math.floor(r+(i-r)/2),a=this._timeline[s],c=this._timeline[s+1];if(rn(a[n],e)){for(let u=s;u<this._timeline.length;u++){let l=this._timeline[u];if(rn(l[n],e))s=u;else break}return s}else{if(jl(a[n],e)&&Is(c[n],e))return s;Is(a[n],e)?i=s:r=s+1}}return-1}_iterate(e,n=0,r=this._timeline.length-1){this._timeline.slice(n,r+1).forEach(e)}forEach(e){return this._iterate(e),this}forEachBefore(e,n){let r=this._search(e);return r!==-1&&this._iterate(n,0,r),this}forEachAfter(e,n){let r=this._search(e);return this._iterate(n,r+1),this}forEachBetween(e,n,r){let o=this._search(e),i=this._search(n);return o!==-1&&i!==-1?(this._timeline[o].time!==e&&(o+=1),this._timeline[i].time===n&&(i-=1),this._iterate(r,o,i)):o===-1&&this._iterate(r,0,i),this}forEachFrom(e,n){let r=this._search(e);for(;r>=0&&this._timeline[r].time>=e;)r--;return this._iterate(n,r+1),this}forEachAtTime(e,n){let r=this._search(e);if(r!==-1&&rn(this._timeline[r].time,e)){let o=r;for(let i=r;i>=0&&rn(this._timeline[i].time,e);i--)o=i;this._iterate(i=>{n(i)},o,r)}return this}dispose(){return super.dispose(),this._timeline=[],this}};var hD=[];function To(t){hD.push(t)}function fD(t){hD.forEach(e=>e(t))}var pD=[];function So(t){pD.push(t)}function mD(t){pD.forEach(e=>e(t))}var Ao=class t extends Yt{constructor(){super(...arguments),this.name="Emitter"}on(e,n){return e.split(/\W+/).forEach(o=>{Dt(this._events)&&(this._events={}),this._events.hasOwnProperty(o)||(this._events[o]=[]),this._events[o].push(n)}),this}once(e,n){let r=(...o)=>{n(...o),this.off(e,r)};return this.on(e,r),this}off(e,n){return e.split(/\W+/).forEach(o=>{if(Dt(this._events)&&(this._events={}),this._events.hasOwnProperty(e))if(Dt(n))this._events[e]=[];else{let i=this._events[e];for(let s=i.length-1;s>=0;s--)i[s]===n&&i.splice(s,1)}}),this}emit(e,...n){if(this._events&&this._events.hasOwnProperty(e)){let r=this._events[e].slice(0);for(let o=0,i=r.length;o<i;o++)r[o].apply(this,n)}return this}static mixin(e){["on","once","off","emit"].forEach(n=>{let r=Object.getOwnPropertyDescriptor(t.prototype,n);Object.defineProperty(e.prototype,n,r)})}dispose(){return super.dispose(),this._events=void 0,this}};var Ms=class extends Ao{constructor(){super(...arguments),this.isOffline=!1}toJSON(){return{}}};var ni=class t extends Ms{constructor(){super(),this.name="Context",this._constants=new Map,this._timeouts=new Rt,this._timeoutIds=0,this._initialized=!1,this.isOffline=!1,this._workletModules=new Map;let e=b(t.getDefaults(),arguments,["context"]);e.context?this._context=e.context:this._context=sD({latencyHint:e.latencyHint}),this._ticker=new Vl(this.emit.bind(this,"tick"),e.clockSource,e.updateInterval),this.on("tick",this._timeoutLoop.bind(this)),this._context.onstatechange=()=>{this.emit("statechange",this.state)},this._setLatencyHint(e.latencyHint),this.lookAhead=e.lookAhead}static getDefaults(){return{clockSource:"worker",latencyHint:"interactive",lookAhead:.1,updateInterval:.05}}initialize(){return this._initialized||(fD(this),this._initialized=!0),this}createAnalyser(){return this._context.createAnalyser()}createOscillator(){return this._context.createOscillator()}createBufferSource(){return this._context.createBufferSource()}createBiquadFilter(){return this._context.createBiquadFilter()}createBuffer(e,n,r){return this._context.createBuffer(e,n,r)}createChannelMerger(e){return this._context.createChannelMerger(e)}createChannelSplitter(e){return this._context.createChannelSplitter(e)}createConstantSource(){return this._context.createConstantSource()}createConvolver(){return this._context.createConvolver()}createDelay(e){return this._context.createDelay(e)}createDynamicsCompressor(){return this._context.createDynamicsCompressor()}createGain(){return this._context.createGain()}createIIRFilter(e,n){return this._context.createIIRFilter(e,n)}createPanner(){return this._context.createPanner()}createPeriodicWave(e,n,r){return this._context.createPeriodicWave(e,n,r)}createStereoPanner(){return this._context.createStereoPanner()}createWaveShaper(){return this._context.createWaveShaper()}createMediaStreamSource(e){return te(Eo(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamSource(e)}createMediaElementSource(e){return te(Eo(this._context),"Not available if OfflineAudioContext"),this._context.createMediaElementSource(e)}createMediaStreamDestination(){return te(Eo(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamDestination()}decodeAudioData(e){return this._context.decodeAudioData(e)}get currentTime(){return this._context.currentTime}get state(){return this._context.state}get sampleRate(){return this._context.sampleRate}get listener(){return this.initialize(),this._listener}set listener(e){te(!this._initialized,"The listener cannot be set after initialization."),this._listener=e}get transport(){return this.initialize(),this._transport}set transport(e){te(!this._initialized,"The transport cannot be set after initialization."),this._transport=e}get draw(){return this.initialize(),this._draw}set draw(e){te(!this._initialized,"Draw cannot be set after initialization."),this._draw=e}get destination(){return this.initialize(),this._destination}set destination(e){te(!this._initialized,"The destination cannot be set after initialization."),this._destination=e}createAudioWorkletNode(e,n){return uD(this.rawContext,e,n)}addAudioWorkletModule(e,n){return Ee(this,void 0,void 0,function*(){te(ae(this.rawContext.audioWorklet),"AudioWorkletNode is only available in a secure context (https or localhost)"),this._workletModules.has(n)||this._workletModules.set(n,this.rawContext.audioWorklet.addModule(e)),yield this._workletModules.get(n)})}workletsAreReady(){return Ee(this,void 0,void 0,function*(){let e=[];this._workletModules.forEach(n=>e.push(n)),yield Promise.all(e)})}get updateInterval(){return this._ticker.updateInterval}set updateInterval(e){this._ticker.updateInterval=e}get clockSource(){return this._ticker.type}set clockSource(e){this._ticker.type=e}get latencyHint(){return this._latencyHint}_setLatencyHint(e){let n=0;if(this._latencyHint=e,Ft(e))switch(e){case"interactive":n=.1;break;case"playback":n=.5;break;case"balanced":n=.25;break}this.lookAhead=n,this.updateInterval=n/2}get rawContext(){return this._context}now(){return this._context.currentTime+this.lookAhead}immediate(){return this._context.currentTime}resume(){return Eo(this._context)?this._context.resume():Promise.resolve()}close(){return Ee(this,void 0,void 0,function*(){Eo(this._context)&&(yield this._context.close()),this._initialized&&mD(this)})}getConstant(e){if(this._constants.has(e))return this._constants.get(e);{let n=this._context.createBuffer(1,128,this._context.sampleRate),r=n.getChannelData(0);for(let i=0;i<r.length;i++)r[i]=e;let o=this._context.createBufferSource();return o.channelCount=1,o.channelCountMode="explicit",o.buffer=n,o.loop=!0,o.start(0),this._constants.set(e,o),o}}dispose(){return super.dispose(),this._ticker.dispose(),this._timeouts.dispose(),Object.keys(this._constants).map(e=>this._constants[e].disconnect()),this}_timeoutLoop(){let e=this.now(),n=this._timeouts.peek();for(;this._timeouts.length&&n&&n.time<=e;)n.callback(),this._timeouts.shift(),n=this._timeouts.peek()}setTimeout(e,n){this._timeoutIds++;let r=this.now();return this._timeouts.add({callback:e,id:this._timeoutIds,time:r+n}),this._timeoutIds}clearTimeout(e){return this._timeouts.forEach(n=>{n.id===e&&this._timeouts.remove(n)}),this}clearInterval(e){return this.clearTimeout(e)}setInterval(e,n){let r=++this._timeoutIds,o=()=>{let i=this.now();this._timeouts.add({callback:()=>{e(),o()},id:r,time:i+n})};return o(),r}};var Bl=class extends Ms{constructor(){super(...arguments),this.lookAhead=0,this.latencyHint=0,this.isOffline=!1}createAnalyser(){return{}}createOscillator(){return{}}createBufferSource(){return{}}createBiquadFilter(){return{}}createBuffer(e,n,r){return{}}createChannelMerger(e){return{}}createChannelSplitter(e){return{}}createConstantSource(){return{}}createConvolver(){return{}}createDelay(e){return{}}createDynamicsCompressor(){return{}}createGain(){return{}}createIIRFilter(e,n){return{}}createPanner(){return{}}createPeriodicWave(e,n,r){return{}}createStereoPanner(){return{}}createWaveShaper(){return{}}createMediaStreamSource(e){return{}}createMediaElementSource(e){return{}}createMediaStreamDestination(){return{}}decodeAudioData(e){return Promise.resolve({})}createAudioWorkletNode(e,n){return{}}get rawContext(){return{}}addAudioWorkletModule(e,n){return Ee(this,void 0,void 0,function*(){return Promise.resolve()})}resume(){return Promise.resolve()}setTimeout(e,n){return 0}clearTimeout(e){return this}setInterval(e,n){return 0}clearInterval(e){return this}getConstant(e){return{}}get currentTime(){return 0}get state(){return{}}get sampleRate(){return 0}get listener(){return{}}get transport(){return{}}get draw(){return{}}set draw(e){}get destination(){return{}}set destination(e){}now(){return 0}immediate(){return 0}};function Z(t,e){vt(e)?e.forEach(n=>Z(t,n)):Object.defineProperty(t,e,{enumerable:!0,writable:!1})}function Ns(t,e){vt(e)?e.forEach(n=>Ns(t,n)):Object.defineProperty(t,e,{writable:!0})}var ce=()=>{};var Zt=(()=>{class t extends Yt{constructor(){super(),this.name="ToneAudioBuffer",this.onload=ce;let n=b(t.getDefaults(),arguments,["url","onload","onerror"]);this.reverse=n.reverse,this.onload=n.onload,n.url&&Ll(n.url)||n.url instanceof t?this.set(n.url):Ft(n.url)&&this.load(n.url).catch(n.onerror)}static getDefaults(){return{onerror:ce,onload:ce,reverse:!1}}get sampleRate(){return this._buffer?this._buffer.sampleRate:lt().sampleRate}set(n){return n instanceof t?n.loaded?this._buffer=n.get():n.onload=()=>{this.set(n),this.onload(this)}:this._buffer=n,this._reversed&&this._reverse(),this}get(){return this._buffer}load(n){return Ee(this,void 0,void 0,function*(){let r=t.load(n).then(o=>{this.set(o),this.onload(this)});t.downloads.push(r);try{yield r}finally{let o=t.downloads.indexOf(r);t.downloads.splice(o,1)}return this})}dispose(){return super.dispose(),this._buffer=void 0,this}fromArray(n){let r=vt(n)&&n[0].length>0,o=r?n.length:1,i=r?n[0].length:n.length,s=lt(),a=s.createBuffer(o,i,s.sampleRate),c=!r&&o===1?[n]:n;for(let u=0;u<o;u++)a.copyToChannel(c[u],u);return this._buffer=a,this}toMono(n){if(qt(n))this.fromArray(this.toArray(n));else{let r=new Float32Array(this.length),o=this.numberOfChannels;for(let i=0;i<o;i++){let s=this.toArray(i);for(let a=0;a<s.length;a++)r[a]+=s[a]}r=r.map(i=>i/o),this.fromArray(r)}return this}toArray(n){if(qt(n))return this.getChannelData(n);if(this.numberOfChannels===1)return this.toArray(0);{let r=[];for(let o=0;o<this.numberOfChannels;o++)r[o]=this.getChannelData(o);return r}}getChannelData(n){return this._buffer?this._buffer.getChannelData(n):new Float32Array(0)}slice(n,r=this.duration){let o=Math.floor(n*this.sampleRate),i=Math.floor(r*this.sampleRate);te(o<i,"The start time must be less than the end time");let s=i-o,a=lt().createBuffer(this.numberOfChannels,s,this.sampleRate);for(let c=0;c<this.numberOfChannels;c++)a.copyToChannel(this.getChannelData(c).subarray(o,i),c);return new t(a)}_reverse(){if(this.loaded)for(let n=0;n<this.numberOfChannels;n++)this.getChannelData(n).reverse();return this}get loaded(){return this.length>0}get duration(){return this._buffer?this._buffer.duration:0}get length(){return this._buffer?this._buffer.length:0}get numberOfChannels(){return this._buffer?this._buffer.numberOfChannels:0}get reverse(){return this._reversed}set reverse(n){this._reversed!==n&&(this._reversed=n,this._reverse())}static fromArray(n){return new t().fromArray(n)}static fromUrl(n){return Ee(this,void 0,void 0,function*(){return yield new t().load(n)})}static load(n){return Ee(this,void 0,void 0,function*(){let r=n.match(/\[([^\]\[]+\|.+)\]$/);if(r){let c=r[1].split("|"),u=c[0];for(let l of c)if(t.supportsType(l)){u=l;break}n=n.replace(r[0],u)}let o=t.baseUrl===""||t.baseUrl.endsWith("/")?t.baseUrl:t.baseUrl+"/",i=yield fetch(o+n);if(!i.ok)throw new Error(`could not load url: ${n}`);let s=yield i.arrayBuffer();return yield lt().decodeAudioData(s)})}static supportsType(n){let r=n.split("."),o=r[r.length-1];return document.createElement("audio").canPlayType("audio/"+o)!==""}static loaded(){return Ee(this,void 0,void 0,function*(){for(yield Promise.resolve();t.downloads.length;)yield t.downloads[0]})}}return t.baseUrl="",t.downloads=[],t})();var Pr=class extends ni{constructor(){super({clockSource:"offline",context:As(arguments[0])?arguments[0]:aD(arguments[0],arguments[1]*arguments[2],arguments[2]),lookAhead:0,updateInterval:As(arguments[0])?128/arguments[0].sampleRate:128/arguments[2]}),this.name="OfflineContext",this._currentTime=0,this.isOffline=!0,this._duration=As(arguments[0])?arguments[0].length/arguments[0].sampleRate:arguments[1]}now(){return this._currentTime}get currentTime(){return this._currentTime}_renderClock(e){return Ee(this,void 0,void 0,function*(){let n=0;for(;this._duration-this._currentTime>=0;){this.emit("tick"),this._currentTime+=128/this.sampleRate,n++;let r=Math.floor(this.sampleRate/128);e&&n%r===0&&(yield new Promise(o=>setTimeout(o,1)))}})}render(e=!0){return Ee(this,void 0,void 0,function*(){yield this.workletsAreReady(),yield this._renderClock(e);let n=yield this._context.startRendering();return new Zt(n)})}close(){return Promise.resolve()}};var gD=new Bl,Os=gD;function lt(){return Os===gD&&cD&&Am(new ni),Os}function Am(t){Eo(t)?Os=new ni(t):As(t)?Os=new Pr(t):Os=t}function pc(){return Os.resume()}if(Fr&&!Fr.TONE_SILENCE_LOGGING){let t="v";Ya==="dev"&&(t="");let e=` * Tone.js ${t}${Ya} * `;console.log(`%c${e}`,"background: #000; color: #fff")}function Fs(t){return Math.pow(10,t/20)}function Rs(t){return 20*(Math.log(t)/Math.LN10)}function ri(t){return Math.pow(2,t/12)}var Ul=440;function yD(){return Ul}function vD(t){Ul=t}function oi(t){return Math.round(Im(t))}function Im(t){return 69+12*Math.log2(t/Ul)}function ql(t){return Ul*Math.pow(2,(t-69)/12)}var $l=class t extends Yt{constructor(e,n,r){super(),this.defaultUnits="s",this._val=n,this._units=r,this.context=e,this._expressions=this._getExpressions()}_getExpressions(){return{hz:{method:e=>this._frequencyToUnits(parseFloat(e)),regexp:/^(\d+(?:\.\d+)?)hz$/i},i:{method:e=>this._ticksToUnits(parseInt(e,10)),regexp:/^(\d+)i$/i},m:{method:e=>this._beatsToUnits(parseInt(e,10)*this._getTimeSignature()),regexp:/^(\d+)m$/i},n:{method:(e,n)=>{let r=parseInt(e,10),o=n==="."?1.5:1;return r===1?this._beatsToUnits(this._getTimeSignature())*o:this._beatsToUnits(4/r)*o},regexp:/^(\d+)n(\.?)$/i},number:{method:e=>this._expressions[this.defaultUnits].method.call(this,e),regexp:/^(\d+(?:\.\d+)?)$/},s:{method:e=>this._secondsToUnits(parseFloat(e)),regexp:/^(\d+(?:\.\d+)?)s$/},samples:{method:e=>parseInt(e,10)/this.context.sampleRate,regexp:/^(\d+)samples$/},t:{method:e=>{let n=parseInt(e,10);return this._beatsToUnits(8/(Math.floor(n)*3))},regexp:/^(\d+)t$/i},tr:{method:(e,n,r)=>{let o=0;return e&&e!=="0"&&(o+=this._beatsToUnits(this._getTimeSignature()*parseFloat(e))),n&&n!=="0"&&(o+=this._beatsToUnits(parseFloat(n))),r&&r!=="0"&&(o+=this._beatsToUnits(parseFloat(r)/4)),o},regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?$/}}}valueOf(){if(this._val instanceof t&&this.fromType(this._val),Dt(this._val))return this._noArg();if(Ft(this._val)&&Dt(this._units)){for(let e in this._expressions)if(this._expressions[e].regexp.test(this._val.trim())){this._units=e;break}}else if(ar(this._val)){let e=0;for(let n in this._val)if(ae(this._val[n])){let r=this._val[n],o=new this.constructor(this.context,n).valueOf()*r;e+=o}return e}if(ae(this._units)){let e=this._expressions[this._units],n=this._val.toString().trim().match(e.regexp);return n?e.method.apply(this,n.slice(1)):e.method.call(this,this._val)}else return Ft(this._val)?parseFloat(this._val):this._val}_frequencyToUnits(e){return 1/e}_beatsToUnits(e){return 60/this._getBpm()*e}_secondsToUnits(e){return e}_ticksToUnits(e){return e*this._beatsToUnits(1)/this._getPPQ()}_noArg(){return this._now()}_getBpm(){return this.context.transport.bpm.value}_getTimeSignature(){return this.context.transport.timeSignature}_getPPQ(){return this.context.transport.PPQ}fromType(e){switch(this._units=void 0,this.defaultUnits){case"s":this._val=e.toSeconds();break;case"i":this._val=e.toTicks();break;case"hz":this._val=e.toFrequency();break;case"midi":this._val=e.toMidi();break}return this}toFrequency(){return 1/this.toSeconds()}toSamples(){return this.toSeconds()*this.context.sampleRate}toMilliseconds(){return this.toSeconds()*1e3}};var fn=class t extends $l{constructor(){super(...arguments),this.name="TimeClass"}_getExpressions(){return Object.assign(super._getExpressions(),{now:{method:e=>this._now()+new this.constructor(this.context,e).valueOf(),regexp:/^\+(.+)/},quantize:{method:e=>{let n=new t(this.context,e).valueOf();return this._secondsToUnits(this.context.transport.nextSubdivision(n))},regexp:/^@(.+)/}})}quantize(e,n=1){let r=new this.constructor(this.context,e).valueOf(),o=this.valueOf(),a=Math.round(o/r)*r-o;return o+a*n}toNotation(){let e=this.toSeconds(),n=["1m"];for(let i=1;i<9;i++){let s=Math.pow(2,i);n.push(s+"n."),n.push(s+"n"),n.push(s+"t")}n.push("0");let r=n[0],o=new t(this.context,n[0]).toSeconds();return n.forEach(i=>{let s=new t(this.context,i).toSeconds();Math.abs(s-e)<Math.abs(o-e)&&(r=i,o=s)}),r}toBarsBeatsSixteenths(){let e=this._beatsToUnits(1),n=this.valueOf()/e;n=parseFloat(n.toFixed(4));let r=Math.floor(n/this._getTimeSignature()),o=n%1*4;n=Math.floor(n)%this._getTimeSignature();let i=o.toString();return i.length>3&&(o=parseFloat(parseFloat(i).toFixed(3))),[r,n,o].join(":")}toTicks(){let e=this._beatsToUnits(1),n=this.valueOf()/e;return Math.round(n*this._getPPQ())}toSeconds(){return this.valueOf()}toMidi(){return oi(this.toFrequency())}_now(){return this.context.now()}};function lr(t,e){return new fn(lt(),t,e)}var pn=class t extends fn{constructor(){super(...arguments),this.name="Frequency",this.defaultUnits="hz"}static get A4(){return yD()}static set A4(e){vD(e)}_getExpressions(){return Object.assign({},super._getExpressions(),{midi:{regexp:/^(\d+(?:\.\d+)?midi)/,method(e){return this.defaultUnits==="midi"?e:t.mtof(e)}},note:{regexp:/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i,method(e,n){let o=bk[e.toLowerCase()]+(parseInt(n,10)+1)*12;return this.defaultUnits==="midi"?o:t.mtof(o)}},tr:{regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?/,method(e,n,r){let o=1;return e&&e!=="0"&&(o*=this._beatsToUnits(this._getTimeSignature()*parseFloat(e))),n&&n!=="0"&&(o*=this._beatsToUnits(parseFloat(n))),r&&r!=="0"&&(o*=this._beatsToUnits(parseFloat(r)/4)),o}}})}transpose(e){return new t(this.context,this.valueOf()*ri(e))}harmonize(e){return e.map(n=>this.transpose(n))}toMidi(){return oi(this.valueOf())}toNote(){let e=this.toFrequency(),n=Math.log2(e/t.A4),r=Math.round(12*n)+57,o=Math.floor(r/12);return o<0&&(r+=-12*o),Ck[r%12]+o.toString()}toSeconds(){return 1/super.toSeconds()}toTicks(){let e=this._beatsToUnits(1),n=this.valueOf()/e;return Math.floor(n*this._getPPQ())}_noArg(){return 0}_frequencyToUnits(e){return e}_ticksToUnits(e){return 1/(e*60/(this._getBpm()*this._getPPQ()))}_beatsToUnits(e){return 1/super._beatsToUnits(e)}_secondsToUnits(e){return 1/e}static mtof(e){return ql(e)}static ftom(e){return oi(e)}},bk={cbb:-2,cb:-1,c:0,"c#":1,cx:2,dbb:0,db:1,d:2,"d#":3,dx:4,ebb:2,eb:3,e:4,"e#":5,ex:6,fbb:3,fb:4,f:5,"f#":6,fx:7,gbb:5,gb:6,g:7,"g#":8,gx:9,abb:7,ab:8,a:9,"a#":10,ax:11,bbb:9,bb:10,b:11,"b#":12,bx:13},Ck=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];var Hn=class extends fn{constructor(){super(...arguments),this.name="TransportTime"}_now(){return this.context.transport.seconds}};var nt=class t extends Yt{constructor(){super();let e=b(t.getDefaults(),arguments,["context"]);this.defaultContext?this.context=this.defaultContext:this.context=e.context}static getDefaults(){return{context:lt()}}now(){return this.context.currentTime+this.context.lookAhead}immediate(){return this.context.currentTime}get sampleTime(){return 1/this.context.sampleRate}get blockTime(){return 128/this.context.sampleRate}toSeconds(e){return new fn(this.context,e).toSeconds()}toFrequency(e){return new pn(this.context,e).toFrequency()}toTicks(e){return new Hn(this.context,e).toTicks()}_getPartialProperties(e){let n=this.get();return Object.keys(n).forEach(r=>{Dt(e[r])&&delete n[r]}),n}get(){let e=dD(this);return Object.keys(e).forEach(n=>{if(Reflect.has(this,n)){let r=this[n];ae(r)&&ae(r.value)&&ae(r.setValueAtTime)?e[n]=r.value:r instanceof t?e[n]=r._getPartialProperties(e[n]):vt(r)||qt(r)||Ft(r)||Pl(r)?e[n]=r:delete e[n]}}),e}set(e){return Object.keys(e).forEach(n=>{Reflect.has(this,n)&&ae(this[n])&&(this[n]&&ae(this[n].value)&&ae(this[n].setValueAtTime)?this[n].value!==e[n]&&(this[n].value=e[n]):this[n]instanceof t?this[n].set(e[n]):this[n]=e[n])}),this}};var dr=class extends Rt{constructor(e="stopped"){super(),this.name="StateTimeline",this._initial=e,this.setStateAtTime(this._initial,0)}getValueAtTime(e){let n=this.get(e);return n!==null?n.state:this._initial}setStateAtTime(e,n,r){return Ot(n,0),this.add(Object.assign({},r,{state:e,time:n})),this}getLastState(e,n){let r=this._search(n);for(let o=r;o>=0;o--){let i=this._timeline[o];if(i.state===e)return i}}getNextState(e,n){let r=this._search(n);if(r!==-1)for(let o=r;o<this._timeline.length;o++){let i=this._timeline[o];if(i.state===e)return i}}};var ve=class t extends nt{constructor(){super(b(t.getDefaults(),arguments,["param","units","convert"])),this.name="Param",this.overridden=!1,this._minOutput=1e-7;let e=b(t.getDefaults(),arguments,["param","units","convert"]);for(te(ae(e.param)&&(cr(e.param)||e.param instanceof t),"param must be an AudioParam");!cr(e.param);)e.param=e.param._param;this._swappable=ae(e.swappable)?e.swappable:!1,this._swappable?(this.input=this.context.createGain(),this._param=e.param,this.input.connect(this._param)):this._param=this.input=e.param,this._events=new Rt(1e3),this._initialValue=this._param.defaultValue,this.units=e.units,this.convert=e.convert,this._minValue=e.minValue,this._maxValue=e.maxValue,ae(e.value)&&e.value!==this._toType(this._initialValue)&&this.setValueAtTime(e.value,0)}static getDefaults(){return Object.assign(nt.getDefaults(),{convert:!0,units:"number"})}get value(){let e=this.now();return this.getValueAtTime(e)}set value(e){this.cancelScheduledValues(this.now()),this.setValueAtTime(e,this.now())}get minValue(){return ae(this._minValue)?this._minValue:this.units==="time"||this.units==="frequency"||this.units==="normalRange"||this.units==="positive"||this.units==="transportTime"||this.units==="ticks"||this.units==="bpm"||this.units==="hertz"||this.units==="samples"?0:this.units==="audioRange"?-1:this.units==="decibels"?-1/0:this._param.minValue}get maxValue(){return ae(this._maxValue)?this._maxValue:this.units==="normalRange"||this.units==="audioRange"?1:this._param.maxValue}_is(e,n){return this.units===n}_assertRange(e){return ae(this.maxValue)&&ae(this.minValue)&&Ot(e,this._fromType(this.minValue),this._fromType(this.maxValue)),e}_fromType(e){return this.convert&&!this.overridden?this._is(e,"time")?this.toSeconds(e):this._is(e,"decibels")?Fs(e):this._is(e,"frequency")?this.toFrequency(e):e:this.overridden?0:e}_toType(e){return this.convert&&this.units==="decibels"?Rs(e):e}setValueAtTime(e,n){let r=this.toSeconds(n),o=this._fromType(e);return te(isFinite(o)&&isFinite(r),`Invalid argument(s) to setValueAtTime: ${JSON.stringify(e)}, ${JSON.stringify(n)}`),this._assertRange(o),this.log(this.units,"setValueAtTime",e,r),this._events.add({time:r,type:"setValueAtTime",value:o}),this._param.setValueAtTime(o,r),this}getValueAtTime(e){let n=Math.max(this.toSeconds(e),0),r=this._events.getAfter(n),o=this._events.get(n),i=this._initialValue;if(o===null)i=this._initialValue;else if(o.type==="setTargetAtTime"&&(r===null||r.type==="setValueAtTime")){let s=this._events.getBefore(o.time),a;s===null?a=this._initialValue:a=s.value,o.type==="setTargetAtTime"&&(i=this._exponentialApproach(o.time,a,o.value,o.constant,n))}else if(r===null)i=o.value;else if(r.type==="linearRampToValueAtTime"||r.type==="exponentialRampToValueAtTime"){let s=o.value;if(o.type==="setTargetAtTime"){let a=this._events.getBefore(o.time);a===null?s=this._initialValue:s=a.value}r.type==="linearRampToValueAtTime"?i=this._linearInterpolate(o.time,s,r.time,r.value,n):i=this._exponentialInterpolate(o.time,s,r.time,r.value,n)}else i=o.value;return this._toType(i)}setRampPoint(e){e=this.toSeconds(e);let n=this.getValueAtTime(e);return this.cancelAndHoldAtTime(e),this._fromType(n)===0&&(n=this._toType(this._minOutput)),this.setValueAtTime(n,e),this}linearRampToValueAtTime(e,n){let r=this._fromType(e),o=this.toSeconds(n);return te(isFinite(r)&&isFinite(o),`Invalid argument(s) to linearRampToValueAtTime: ${JSON.stringify(e)}, ${JSON.stringify(n)}`),this._assertRange(r),this._events.add({time:o,type:"linearRampToValueAtTime",value:r}),this.log(this.units,"linearRampToValueAtTime",e,o),this._param.linearRampToValueAtTime(r,o),this}exponentialRampToValueAtTime(e,n){let r=this._fromType(e);r=rn(r,0)?this._minOutput:r,this._assertRange(r);let o=this.toSeconds(n);return te(isFinite(r)&&isFinite(o),`Invalid argument(s) to exponentialRampToValueAtTime: ${JSON.stringify(e)}, ${JSON.stringify(n)}`),this._events.add({time:o,type:"exponentialRampToValueAtTime",value:r}),this.log(this.units,"exponentialRampToValueAtTime",e,o),this._param.exponentialRampToValueAtTime(r,o),this}exponentialRampTo(e,n,r){return r=this.toSeconds(r),this.setRampPoint(r),this.exponentialRampToValueAtTime(e,r+this.toSeconds(n)),this}linearRampTo(e,n,r){return r=this.toSeconds(r),this.setRampPoint(r),this.linearRampToValueAtTime(e,r+this.toSeconds(n)),this}targetRampTo(e,n,r){return r=this.toSeconds(r),this.setRampPoint(r),this.exponentialApproachValueAtTime(e,r,n),this}exponentialApproachValueAtTime(e,n,r){n=this.toSeconds(n),r=this.toSeconds(r);let o=Math.log(r+1)/Math.log(200);return this.setTargetAtTime(e,n,o),this.cancelAndHoldAtTime(n+r*.9),this.linearRampToValueAtTime(e,n+r),this}setTargetAtTime(e,n,r){let o=this._fromType(e);te(isFinite(r)&&r>0,"timeConstant must be a number greater than 0");let i=this.toSeconds(n);return this._assertRange(o),te(isFinite(o)&&isFinite(i),`Invalid argument(s) to setTargetAtTime: ${JSON.stringify(e)}, ${JSON.stringify(n)}`),this._events.add({constant:r,time:i,type:"setTargetAtTime",value:o}),this.log(this.units,"setTargetAtTime",e,i,r),this._param.setTargetAtTime(o,i,r),this}setValueCurveAtTime(e,n,r,o=1){r=this.toSeconds(r),n=this.toSeconds(n);let i=this._fromType(e[0])*o;this.setValueAtTime(this._toType(i),n);let s=r/(e.length-1);for(let a=1;a<e.length;a++){let c=this._fromType(e[a])*o;this.linearRampToValueAtTime(this._toType(c),n+a*s)}return this}cancelScheduledValues(e){let n=this.toSeconds(e);return te(isFinite(n),`Invalid argument to cancelScheduledValues: ${JSON.stringify(e)}`),this._events.cancel(n),this._param.cancelScheduledValues(n),this.log(this.units,"cancelScheduledValues",n),this}cancelAndHoldAtTime(e){let n=this.toSeconds(e),r=this._fromType(this.getValueAtTime(n));te(isFinite(n),`Invalid argument to cancelAndHoldAtTime: ${JSON.stringify(e)}`),this.log(this.units,"cancelAndHoldAtTime",n,"value="+r);let o=this._events.get(n),i=this._events.getAfter(n);return o&&rn(o.time,n)?i?(this._param.cancelScheduledValues(i.time),this._events.cancel(i.time)):(this._param.cancelAndHoldAtTime(n),this._events.cancel(n+this.sampleTime)):i&&(this._param.cancelScheduledValues(i.time),this._events.cancel(i.time),i.type==="linearRampToValueAtTime"?this.linearRampToValueAtTime(this._toType(r),n):i.type==="exponentialRampToValueAtTime"&&this.exponentialRampToValueAtTime(this._toType(r),n)),this._events.add({time:n,type:"setValueAtTime",value:r}),this._param.setValueAtTime(r,n),this}rampTo(e,n=.1,r){return this.units==="frequency"||this.units==="bpm"||this.units==="decibels"?this.exponentialRampTo(e,n,r):this.linearRampTo(e,n,r),this}apply(e){let n=this.context.currentTime;e.setValueAtTime(this.getValueAtTime(n),n);let r=this._events.get(n);if(r&&r.type==="setTargetAtTime"){let o=this._events.getAfter(r.time),i=o?o.time:n+2,s=(i-n)/10;for(let a=n;a<i;a+=s)e.linearRampToValueAtTime(this.getValueAtTime(a),a)}return this._events.forEachAfter(this.context.currentTime,o=>{o.type==="cancelScheduledValues"?e.cancelScheduledValues(o.time):o.type==="setTargetAtTime"?e.setTargetAtTime(o.value,o.time,o.constant):e[o.type](o.value,o.time)}),this}setParam(e){te(this._swappable,"The Param must be assigned as 'swappable' in the constructor");let n=this.input;return n.disconnect(this._param),this.apply(e),this._param=e,n.connect(this._param),this}dispose(){return super.dispose(),this._events.dispose(),this}get defaultValue(){return this._toType(this._param.defaultValue)}_exponentialApproach(e,n,r,o,i){return r+(n-r)*Math.exp(-(i-e)/o)}_linearInterpolate(e,n,r,o,i){return n+(o-n)*((i-e)/(r-e))}_exponentialInterpolate(e,n,r,o,i){return n*Math.pow(o/n,(i-e)/(r-e))}};var $=class t extends nt{constructor(){super(...arguments),this.name="ToneAudioNode",this._internalChannels=[]}get numberOfInputs(){return ae(this.input)?cr(this.input)||this.input instanceof ve?1:this.input.numberOfInputs:0}get numberOfOutputs(){return ae(this.output)?this.output.numberOfOutputs:0}_isAudioNode(e){return ae(e)&&(e instanceof t||Rr(e))}_getInternalNodes(){let e=this._internalChannels.slice(0);return this._isAudioNode(this.input)&&e.push(this.input),this._isAudioNode(this.output)&&this.input!==this.output&&e.push(this.output),e}_setChannelProperties(e){this._getInternalNodes().forEach(r=>{r.channelCount=e.channelCount,r.channelCountMode=e.channelCountMode,r.channelInterpretation=e.channelInterpretation})}_getChannelProperties(){let e=this._getInternalNodes();te(e.length>0,"ToneAudioNode does not have any internal nodes");let n=e[0];return{channelCount:n.channelCount,channelCountMode:n.channelCountMode,channelInterpretation:n.channelInterpretation}}get channelCount(){return this._getChannelProperties().channelCount}set channelCount(e){let n=this._getChannelProperties();this._setChannelProperties(Object.assign(n,{channelCount:e}))}get channelCountMode(){return this._getChannelProperties().channelCountMode}set channelCountMode(e){let n=this._getChannelProperties();this._setChannelProperties(Object.assign(n,{channelCountMode:e}))}get channelInterpretation(){return this._getChannelProperties().channelInterpretation}set channelInterpretation(e){let n=this._getChannelProperties();this._setChannelProperties(Object.assign(n,{channelInterpretation:e}))}connect(e,n=0,r=0){return on(this,e,n,r),this}toDestination(){return this.connect(this.context.destination),this}toMaster(){return dc("toMaster() has been renamed toDestination()"),this.toDestination()}disconnect(e,n=0,r=0){return _D(this,e,n,r),this}chain(...e){return hr(this,...e),this}fan(...e){return e.forEach(n=>this.connect(n)),this}dispose(){return super.dispose(),ae(this.input)&&(this.input instanceof t?this.input.dispose():Rr(this.input)&&this.input.disconnect()),ae(this.output)&&(this.output instanceof t?this.output.dispose():Rr(this.output)&&this.output.disconnect()),this._internalChannels=[],this}};function hr(...t){let e=t.shift();t.reduce((n,r)=>(n instanceof $?n.connect(r):Rr(n)&&on(n,r),r),e)}function on(t,e,n=0,r=0){for(te(ae(t),"Cannot connect from undefined node"),te(ae(e),"Cannot connect to undefined node"),(e instanceof $||Rr(e))&&te(e.numberOfInputs>0,"Cannot connect to node with no inputs"),te(t.numberOfOutputs>0,"Cannot connect from node with no outputs");e instanceof $||e instanceof ve;)ae(e.input)&&(e=e.input);for(;t instanceof $;)ae(t.output)&&(t=t.output);cr(e)?t.connect(e,n):t.connect(e,n,r)}function _D(t,e,n=0,r=0){if(ae(e))for(;e instanceof $;)e=e.input;for(;!Rr(t);)ae(t.output)&&(t=t.output);cr(e)?t.disconnect(e,n):Rr(e)?t.disconnect(e,n,r):t.disconnect()}var ne=class t extends ${constructor(){super(b(t.getDefaults(),arguments,["gain","units"])),this.name="Gain",this._gainNode=this.context.createGain(),this.input=this._gainNode,this.output=this._gainNode;let e=b(t.getDefaults(),arguments,["gain","units"]);this.gain=new ve({context:this.context,convert:e.convert,param:this._gainNode.gain,units:e.units,value:e.gain,minValue:e.minValue,maxValue:e.maxValue}),Z(this,"gain")}static getDefaults(){return Object.assign($.getDefaults(),{convert:!0,gain:1,units:"gain"})}dispose(){return super.dispose(),this._gainNode.disconnect(),this.gain.dispose(),this}};var fr=class extends ${constructor(e){super(e),this.onended=ce,this._startTime=-1,this._stopTime=-1,this._timeout=-1,this.output=new ne({context:this.context,gain:0}),this._gainNode=this.output,this.getStateAtTime=function(n){let r=this.toSeconds(n);return this._startTime!==-1&&r>=this._startTime&&(this._stopTime===-1||r<=this._stopTime)?"started":"stopped"},this._fadeIn=e.fadeIn,this._fadeOut=e.fadeOut,this._curve=e.curve,this.onended=e.onended}static getDefaults(){return Object.assign($.getDefaults(),{curve:"linear",fadeIn:0,fadeOut:0,onended:ce})}_startGain(e,n=1){te(this._startTime===-1,"Source cannot be started more than once");let r=this.toSeconds(this._fadeIn);return this._startTime=e+r,this._startTime=Math.max(this._startTime,this.context.currentTime),r>0?(this._gainNode.gain.setValueAtTime(0,e),this._curve==="linear"?this._gainNode.gain.linearRampToValueAtTime(n,e+r):this._gainNode.gain.exponentialApproachValueAtTime(n,e,r)):this._gainNode.gain.setValueAtTime(n,e),this}stop(e){return this.log("stop",e),this._stopGain(this.toSeconds(e)),this}_stopGain(e){te(this._startTime!==-1,"'start' must be called before 'stop'"),this.cancelStop();let n=this.toSeconds(this._fadeOut);return this._stopTime=this.toSeconds(e)+n,this._stopTime=Math.max(this._stopTime,this.context.currentTime),n>0?this._curve==="linear"?this._gainNode.gain.linearRampTo(0,n,e):this._gainNode.gain.targetRampTo(0,n,e):(this._gainNode.gain.cancelAndHoldAtTime(e),this._gainNode.gain.setValueAtTime(0,e)),this.context.clearTimeout(this._timeout),this._timeout=this.context.setTimeout(()=>{let r=this._curve==="exponential"?n*2:0;this._stopSource(this.now()+r),this._onended()},this._stopTime-this.context.currentTime),this}_onended(){if(this.onended!==ce&&(this.onended(this),this.onended=ce,!this.context.isOffline)){let e=()=>this.dispose();typeof window.requestIdleCallback<"u"?window.requestIdleCallback(e):setTimeout(e,1e3)}}get state(){return this.getStateAtTime(this.now())}cancelStop(){return this.log("cancelStop"),te(this._startTime!==-1,"Source is not started"),this._gainNode.gain.cancelScheduledValues(this._startTime+this.sampleTime),this.context.clearTimeout(this._timeout),this._stopTime=-1,this}dispose(){return super.dispose(),this._gainNode.disconnect(),this}};var mc=class t extends fr{constructor(){super(b(t.getDefaults(),arguments,["offset"])),this.name="ToneConstantSource",this._source=this.context.createConstantSource();let e=b(t.getDefaults(),arguments,["offset"]);on(this._source,this._gainNode),this.offset=new ve({context:this.context,convert:e.convert,param:this._source.offset,units:e.units,value:e.offset,minValue:e.minValue,maxValue:e.maxValue})}static getDefaults(){return Object.assign(fr.getDefaults(),{convert:!0,offset:1,units:"number"})}start(e){let n=this.toSeconds(e);return this.log("start",n),this._startGain(n),this._source.start(n),this}_stopSource(e){this._source.stop(e)}dispose(){return super.dispose(),this.state==="started"&&this.stop(),this._source.disconnect(),this.offset.dispose(),this}};var le=class t extends ${constructor(){super(b(t.getDefaults(),arguments,["value","units"])),this.name="Signal",this.override=!0;let e=b(t.getDefaults(),arguments,["value","units"]);this.output=this._constantSource=new mc({context:this.context,convert:e.convert,offset:e.value,units:e.units,minValue:e.minValue,maxValue:e.maxValue}),this._constantSource.start(0),this.input=this._param=this._constantSource.offset}static getDefaults(){return Object.assign($.getDefaults(),{convert:!0,units:"number",value:0})}connect(e,n=0,r=0){return ks(this,e,n,r),this}dispose(){return super.dispose(),this._param.dispose(),this._constantSource.dispose(),this}setValueAtTime(e,n){return this._param.setValueAtTime(e,n),this}getValueAtTime(e){return this._param.getValueAtTime(e)}setRampPoint(e){return this._param.setRampPoint(e),this}linearRampToValueAtTime(e,n){return this._param.linearRampToValueAtTime(e,n),this}exponentialRampToValueAtTime(e,n){return this._param.exponentialRampToValueAtTime(e,n),this}exponentialRampTo(e,n,r){return this._param.exponentialRampTo(e,n,r),this}linearRampTo(e,n,r){return this._param.linearRampTo(e,n,r),this}targetRampTo(e,n,r){return this._param.targetRampTo(e,n,r),this}exponentialApproachValueAtTime(e,n,r){return this._param.exponentialApproachValueAtTime(e,n,r),this}setTargetAtTime(e,n,r){return this._param.setTargetAtTime(e,n,r),this}setValueCurveAtTime(e,n,r,o){return this._param.setValueCurveAtTime(e,n,r,o),this}cancelScheduledValues(e){return this._param.cancelScheduledValues(e),this}cancelAndHoldAtTime(e){return this._param.cancelAndHoldAtTime(e),this}rampTo(e,n,r){return this._param.rampTo(e,n,r),this}get value(){return this._param.value}set value(e){this._param.value=e}get convert(){return this._param.convert}set convert(e){this._param.convert=e}get units(){return this._param.units}get overridden(){return this._param.overridden}set overridden(e){this._param.overridden=e}get maxValue(){return this._param.maxValue}get minValue(){return this._param.minValue}apply(e){return this._param.apply(e),this}};function ks(t,e,n,r){(e instanceof ve||cr(e)||e instanceof le&&e.override)&&(e.cancelScheduledValues(0),e.setValueAtTime(0,0),e instanceof le&&(e.overridden=!0)),on(t,e,n,r)}var Hl=class t extends ve{constructor(){super(b(t.getDefaults(),arguments,["value"])),this.name="TickParam",this._events=new Rt(1/0),this._multiplier=1;let e=b(t.getDefaults(),arguments,["value"]);this._multiplier=e.multiplier,this._events.cancel(0),this._events.add({ticks:0,time:0,type:"setValueAtTime",value:this._fromType(e.value)}),this.setValueAtTime(e.value,0)}static getDefaults(){return Object.assign(ve.getDefaults(),{multiplier:1,units:"hertz",value:1})}setTargetAtTime(e,n,r){n=this.toSeconds(n),this.setRampPoint(n);let o=this._fromType(e),i=this._events.get(n),s=Math.round(Math.max(1/r,1));for(let a=0;a<=s;a++){let c=r*a+n,u=this._exponentialApproach(i.time,i.value,o,r,c);this.linearRampToValueAtTime(this._toType(u),c)}return this}setValueAtTime(e,n){let r=this.toSeconds(n);super.setValueAtTime(e,n);let o=this._events.get(r),i=this._events.previousEvent(o),s=this._getTicksUntilEvent(i,r);return o.ticks=Math.max(s,0),this}linearRampToValueAtTime(e,n){let r=this.toSeconds(n);super.linearRampToValueAtTime(e,n);let o=this._events.get(r),i=this._events.previousEvent(o),s=this._getTicksUntilEvent(i,r);return o.ticks=Math.max(s,0),this}exponentialRampToValueAtTime(e,n){n=this.toSeconds(n);let r=this._fromType(e),o=this._events.get(n),i=Math.round(Math.max((n-o.time)*10,1)),s=(n-o.time)/i;for(let a=0;a<=i;a++){let c=s*a+o.time,u=this._exponentialInterpolate(o.time,o.value,n,r,c);this.linearRampToValueAtTime(this._toType(u),c)}return this}_getTicksUntilEvent(e,n){if(e===null)e={ticks:0,time:0,type:"setValueAtTime",value:0};else if(Dt(e.ticks)){let s=this._events.previousEvent(e);e.ticks=this._getTicksUntilEvent(s,e.time)}let r=this._fromType(this.getValueAtTime(e.time)),o=this._fromType(this.getValueAtTime(n)),i=this._events.get(n);return i&&i.time===n&&i.type==="setValueAtTime"&&(o=this._fromType(this.getValueAtTime(n-this.sampleTime))),.5*(n-e.time)*(r+o)+e.ticks}getTicksAtTime(e){let n=this.toSeconds(e),r=this._events.get(n);return Math.max(this._getTicksUntilEvent(r,n),0)}getDurationOfTicks(e,n){let r=this.toSeconds(n),o=this.getTicksAtTime(n);return this.getTimeOfTick(o+e)-r}getTimeOfTick(e){let n=this._events.get(e,"ticks"),r=this._events.getAfter(e,"ticks");if(n&&n.ticks===e)return n.time;if(n&&r&&r.type==="linearRampToValueAtTime"&&n.value!==r.value){let o=this._fromType(this.getValueAtTime(n.time)),s=(this._fromType(this.getValueAtTime(r.time))-o)/(r.time-n.time),a=Math.sqrt(Math.pow(o,2)-2*s*(n.ticks-e)),c=(-o+a)/s,u=(-o-a)/s;return(c>0?c:u)+n.time}else return n?n.value===0?1/0:n.time+(e-n.ticks)/n.value:e/this._initialValue}ticksToTime(e,n){return this.getDurationOfTicks(e,n)}timeToTicks(e,n){let r=this.toSeconds(n),o=this.toSeconds(e),i=this.getTicksAtTime(r);return this.getTicksAtTime(r+o)-i}_fromType(e){return this.units==="bpm"&&this.multiplier?1/(60/e/this.multiplier):super._fromType(e)}_toType(e){return this.units==="bpm"&&this.multiplier?e/this.multiplier*60:super._toType(e)}get multiplier(){return this._multiplier}set multiplier(e){let n=this.value;this._multiplier=e,this.cancelScheduledValues(0),this.setValueAtTime(n,0)}};var Wl=class t extends le{constructor(){super(b(t.getDefaults(),arguments,["value"])),this.name="TickSignal";let e=b(t.getDefaults(),arguments,["value"]);this.input=this._param=new Hl({context:this.context,convert:e.convert,multiplier:e.multiplier,param:this._constantSource.offset,units:e.units,value:e.value})}static getDefaults(){return Object.assign(le.getDefaults(),{multiplier:1,units:"hertz",value:1})}ticksToTime(e,n){return this._param.ticksToTime(e,n)}timeToTicks(e,n){return this._param.timeToTicks(e,n)}getTimeOfTick(e){return this._param.getTimeOfTick(e)}getDurationOfTicks(e,n){return this._param.getDurationOfTicks(e,n)}getTicksAtTime(e){return this._param.getTicksAtTime(e)}get multiplier(){return this._param.multiplier}set multiplier(e){this._param.multiplier=e}dispose(){return super.dispose(),this._param.dispose(),this}};var Gl=class t extends nt{constructor(){super(b(t.getDefaults(),arguments,["frequency"])),this.name="TickSource",this._state=new dr,this._tickOffset=new Rt;let e=b(t.getDefaults(),arguments,["frequency"]);this.frequency=new Wl({context:this.context,units:e.units,value:e.frequency}),Z(this,"frequency"),this._state.setStateAtTime("stopped",0),this.setTicksAtTime(0,0)}static getDefaults(){return Object.assign({frequency:1,units:"hertz"},nt.getDefaults())}get state(){return this.getStateAtTime(this.now())}start(e,n){let r=this.toSeconds(e);return this._state.getValueAtTime(r)!=="started"&&(this._state.setStateAtTime("started",r),ae(n)&&this.setTicksAtTime(n,r)),this}stop(e){let n=this.toSeconds(e);if(this._state.getValueAtTime(n)==="stopped"){let r=this._state.get(n);r&&r.time>0&&(this._tickOffset.cancel(r.time),this._state.cancel(r.time))}return this._state.cancel(n),this._state.setStateAtTime("stopped",n),this.setTicksAtTime(0,n),this}pause(e){let n=this.toSeconds(e);return this._state.getValueAtTime(n)==="started"&&this._state.setStateAtTime("paused",n),this}cancel(e){return e=this.toSeconds(e),this._state.cancel(e),this._tickOffset.cancel(e),this}getTicksAtTime(e){let n=this.toSeconds(e),r=this._state.getLastState("stopped",n),o={state:"paused",time:n};this._state.add(o);let i=r,s=0;return this._state.forEachBetween(r.time,n+this.sampleTime,a=>{let c=i.time,u=this._tickOffset.get(a.time);u&&u.time>=i.time&&(s=u.ticks,c=u.time),i.state==="started"&&a.state!=="started"&&(s+=this.frequency.getTicksAtTime(a.time)-this.frequency.getTicksAtTime(c)),i=a}),this._state.remove(o),s}get ticks(){return this.getTicksAtTime(this.now())}set ticks(e){this.setTicksAtTime(e,this.now())}get seconds(){return this.getSecondsAtTime(this.now())}set seconds(e){let n=this.now(),r=this.frequency.timeToTicks(e,n);this.setTicksAtTime(r,n)}getSecondsAtTime(e){e=this.toSeconds(e);let n=this._state.getLastState("stopped",e),r={state:"paused",time:e};this._state.add(r);let o=n,i=0;return this._state.forEachBetween(n.time,e+this.sampleTime,s=>{let a=o.time,c=this._tickOffset.get(s.time);c&&c.time>=o.time&&(i=c.seconds,a=c.time),o.state==="started"&&s.state!=="started"&&(i+=s.time-a),o=s}),this._state.remove(r),i}setTicksAtTime(e,n){return n=this.toSeconds(n),this._tickOffset.cancel(n),this._tickOffset.add({seconds:this.frequency.getDurationOfTicks(e,n),ticks:e,time:n}),this}getStateAtTime(e){return e=this.toSeconds(e),this._state.getValueAtTime(e)}getTimeOfTick(e,n=this.now()){let r=this._tickOffset.get(n),o=this._state.get(n),i=Math.max(r.time,o.time),s=this.frequency.getTicksAtTime(i)+e-r.ticks;return this.frequency.getTimeOfTick(s)}forEachTickBetween(e,n,r){let o=this._state.get(e);this._state.forEachBetween(e,n,s=>{o&&o.state==="started"&&s.state!=="started"&&this.forEachTickBetween(Math.max(o.time,e),s.time-this.sampleTime,r),o=s});let i=null;if(o&&o.state==="started"){let s=Math.max(o.time,e),a=this.frequency.getTicksAtTime(s),c=this.frequency.getTicksAtTime(o.time),u=a-c,l=Math.ceil(u)-u;l=rn(l,1)?0:l;let d=this.frequency.getTimeOfTick(a+l);for(;d<n;){try{r(d,Math.round(this.getTicksAtTime(d)))}catch(h){i=h;break}d+=this.frequency.getDurationOfTicks(1,d)}}if(i)throw i;return this}dispose(){return super.dispose(),this._state.dispose(),this._tickOffset.dispose(),this.frequency.dispose(),this}};var Ps=class t extends nt{constructor(){super(b(t.getDefaults(),arguments,["callback","frequency"])),this.name="Clock",this.callback=ce,this._lastUpdate=0,this._state=new dr("stopped"),this._boundLoop=this._loop.bind(this);let e=b(t.getDefaults(),arguments,["callback","frequency"]);this.callback=e.callback,this._tickSource=new Gl({context:this.context,frequency:e.frequency,units:e.units}),this._lastUpdate=0,this.frequency=this._tickSource.frequency,Z(this,"frequency"),this._state.setStateAtTime("stopped",0),this.context.on("tick",this._boundLoop)}static getDefaults(){return Object.assign(nt.getDefaults(),{callback:ce,frequency:1,units:"hertz"})}get state(){return this._state.getValueAtTime(this.now())}start(e,n){kl(this.context);let r=this.toSeconds(e);return this.log("start",r),this._state.getValueAtTime(r)!=="started"&&(this._state.setStateAtTime("started",r),this._tickSource.start(r,n),r<this._lastUpdate&&this.emit("start",r,n)),this}stop(e){let n=this.toSeconds(e);return this.log("stop",n),this._state.cancel(n),this._state.setStateAtTime("stopped",n),this._tickSource.stop(n),n<this._lastUpdate&&this.emit("stop",n),this}pause(e){let n=this.toSeconds(e);return this._state.getValueAtTime(n)==="started"&&(this._state.setStateAtTime("paused",n),this._tickSource.pause(n),n<this._lastUpdate&&this.emit("pause",n)),this}get ticks(){return Math.ceil(this.getTicksAtTime(this.now()))}set ticks(e){this._tickSource.ticks=e}get seconds(){return this._tickSource.seconds}set seconds(e){this._tickSource.seconds=e}getSecondsAtTime(e){return this._tickSource.getSecondsAtTime(e)}setTicksAtTime(e,n){return this._tickSource.setTicksAtTime(e,n),this}getTimeOfTick(e,n=this.now()){return this._tickSource.getTimeOfTick(e,n)}getTicksAtTime(e){return this._tickSource.getTicksAtTime(e)}nextTickTime(e,n){let r=this.toSeconds(n),o=this.getTicksAtTime(r);return this._tickSource.getTimeOfTick(o+e,r)}_loop(){let e=this._lastUpdate,n=this.now();this._lastUpdate=n,this.log("loop",e,n),e!==n&&(this._state.forEachBetween(e,n,r=>{switch(r.state){case"started":let o=this._tickSource.getTicksAtTime(r.time);this.emit("start",r.time,o);break;case"stopped":r.time!==0&&this.emit("stop",r.time);break;case"paused":this.emit("pause",r.time);break}}),this._tickSource.forEachTickBetween(e,n,(r,o)=>{this.callback(r,o)}))}getStateAtTime(e){let n=this.toSeconds(e);return this._state.getValueAtTime(n)}dispose(){return super.dispose(),this.context.off("tick",this._boundLoop),this._tickSource.dispose(),this._state.dispose(),this}};Ao.mixin(Ps);var Vs=class t extends Yt{constructor(){super(),this.name="ToneAudioBuffers",this._buffers=new Map,this._loadingCount=0;let e=b(t.getDefaults(),arguments,["urls","onload","baseUrl"],"urls");this.baseUrl=e.baseUrl,Object.keys(e.urls).forEach(n=>{this._loadingCount++;let r=e.urls[n];this.add(n,r,this._bufferLoaded.bind(this,e.onload),e.onerror)})}static getDefaults(){return{baseUrl:"",onerror:ce,onload:ce,urls:{}}}has(e){return this._buffers.has(e.toString())}get(e){return te(this.has(e),`ToneAudioBuffers has no buffer named: ${e}`),this._buffers.get(e.toString())}_bufferLoaded(e){this._loadingCount--,this._loadingCount===0&&e&&e()}get loaded(){return Array.from(this._buffers).every(([e,n])=>n.loaded)}add(e,n,r=ce,o=ce){return Ft(n)?this._buffers.set(e.toString(),new Zt(this.baseUrl+n,r,o)):this._buffers.set(e.toString(),new Zt(n,r,o)),this}dispose(){return super.dispose(),this._buffers.forEach(e=>e.dispose()),this._buffers.clear(),this}};var dt=class extends Hn{constructor(){super(...arguments),this.name="Ticks",this.defaultUnits="i"}_now(){return this.context.transport.ticks}_beatsToUnits(e){return this._getPPQ()*e}_secondsToUnits(e){return Math.floor(e/(60/this._getBpm())*this._getPPQ())}_ticksToUnits(e){return e}toTicks(){return this.valueOf()}toSeconds(){return this.valueOf()/this._getPPQ()*(60/this._getBpm())}};var Mm=class extends nt{constructor(){super(...arguments),this.name="Draw",this.expiration=.25,this.anticipation=.008,this._events=new Rt,this._boundDrawLoop=this._drawLoop.bind(this),this._animationFrame=-1}schedule(e,n){return this._events.add({callback:e,time:this.toSeconds(n)}),this._events.length===1&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop)),this}cancel(e){return this._events.cancel(this.toSeconds(e)),this}_drawLoop(){let e=this.context.currentTime;for(;this._events.length&&this._events.peek().time-this.anticipation<=e;){let n=this._events.shift();n&&e-n.time<=this.expiration&&n.callback()}this._events.length>0&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop))}dispose(){return super.dispose(),this._events.dispose(),cancelAnimationFrame(this._animationFrame),this}};To(t=>{t.draw=new Mm({context:t})});So(t=>{t.draw.dispose()});var zl=class extends Yt{constructor(){super(...arguments),this.name="IntervalTimeline",this._root=null,this._length=0}add(e){te(ae(e.time),"Events must have a time property"),te(ae(e.duration),"Events must have a duration parameter"),e.time=e.time.valueOf();let n=new Nm(e.time,e.time+e.duration,e);for(this._root===null?this._root=n:this._root.insert(n),this._length++;n!==null;)n.updateHeight(),n.updateMax(),this._rebalance(n),n=n.parent;return this}remove(e){if(this._root!==null){let n=[];this._root.search(e.time,n);for(let r of n)if(r.event===e){this._removeNode(r),this._length--;break}}return this}get length(){return this._length}cancel(e){return this.forEachFrom(e,n=>this.remove(n)),this}_setRoot(e){this._root=e,this._root!==null&&(this._root.parent=null)}_replaceNodeInParent(e,n){e.parent!==null?(e.isLeftChild()?e.parent.left=n:e.parent.right=n,this._rebalance(e.parent)):this._setRoot(n)}_removeNode(e){if(e.left===null&&e.right===null)this._replaceNodeInParent(e,null);else if(e.right===null)this._replaceNodeInParent(e,e.left);else if(e.left===null)this._replaceNodeInParent(e,e.right);else{let n=e.getBalance(),r,o=null;if(n>0)if(e.left.right===null)r=e.left,r.right=e.right,o=r;else{for(r=e.left.right;r.right!==null;)r=r.right;r.parent&&(r.parent.right=r.left,o=r.parent,r.left=e.left,r.right=e.right)}else if(e.right.left===null)r=e.right,r.left=e.left,o=r;else{for(r=e.right.left;r.left!==null;)r=r.left;r.parent&&(r.parent.left=r.right,o=r.parent,r.left=e.left,r.right=e.right)}e.parent!==null?e.isLeftChild()?e.parent.left=r:e.parent.right=r:this._setRoot(r),o&&this._rebalance(o)}e.dispose()}_rotateLeft(e){let n=e.parent,r=e.isLeftChild(),o=e.right;o&&(e.right=o.left,o.left=e),n!==null?r?n.left=o:n.right=o:this._setRoot(o)}_rotateRight(e){let n=e.parent,r=e.isLeftChild(),o=e.left;o&&(e.left=o.right,o.right=e),n!==null?r?n.left=o:n.right=o:this._setRoot(o)}_rebalance(e){let n=e.getBalance();n>1&&e.left?e.left.getBalance()<0?this._rotateLeft(e.left):this._rotateRight(e):n<-1&&e.right&&(e.right.getBalance()>0?this._rotateRight(e.right):this._rotateLeft(e))}get(e){if(this._root!==null){let n=[];if(this._root.search(e,n),n.length>0){let r=n[0];for(let o=1;o<n.length;o++)n[o].low>r.low&&(r=n[o]);return r.event}}return null}forEach(e){if(this._root!==null){let n=[];this._root.traverse(r=>n.push(r)),n.forEach(r=>{r.event&&e(r.event)})}return this}forEachAtTime(e,n){if(this._root!==null){let r=[];this._root.search(e,r),r.forEach(o=>{o.event&&n(o.event)})}return this}forEachFrom(e,n){if(this._root!==null){let r=[];this._root.searchAfter(e,r),r.forEach(o=>{o.event&&n(o.event)})}return this}dispose(){return super.dispose(),this._root!==null&&this._root.traverse(e=>e.dispose()),this._root=null,this}},Nm=class{constructor(e,n,r){this._left=null,this._right=null,this.parent=null,this.height=0,this.event=r,this.low=e,this.high=n,this.max=this.high}insert(e){e.low<=this.low?this.left===null?this.left=e:this.left.insert(e):this.right===null?this.right=e:this.right.insert(e)}search(e,n){e>this.max||(this.left!==null&&this.left.search(e,n),this.low<=e&&this.high>e&&n.push(this),!(this.low>e)&&this.right!==null&&this.right.search(e,n))}searchAfter(e,n){this.low>=e&&(n.push(this),this.left!==null&&this.left.searchAfter(e,n)),this.right!==null&&this.right.searchAfter(e,n)}traverse(e){e(this),this.left!==null&&this.left.traverse(e),this.right!==null&&this.right.traverse(e)}updateHeight(){this.left!==null&&this.right!==null?this.height=Math.max(this.left.height,this.right.height)+1:this.right!==null?this.height=this.right.height+1:this.left!==null?this.height=this.left.height+1:this.height=0}updateMax(){this.max=this.high,this.left!==null&&(this.max=Math.max(this.max,this.left.max)),this.right!==null&&(this.max=Math.max(this.max,this.right.max))}getBalance(){let e=0;return this.left!==null&&this.right!==null?e=this.left.height-this.right.height:this.left!==null?e=this.left.height+1:this.right!==null&&(e=-(this.right.height+1)),e}isLeftChild(){return this.parent!==null&&this.parent.left===this}get left(){return this._left}set left(e){this._left=e,e!==null&&(e.parent=this),this.updateHeight(),this.updateMax()}get right(){return this._right}set right(e){this._right=e,e!==null&&(e.parent=this),this.updateHeight(),this.updateMax()}dispose(){this.parent=null,this._left=null,this._right=null,this.event=null}};var Wn=class t extends ${constructor(){super(b(t.getDefaults(),arguments,["volume"])),this.name="Volume";let e=b(t.getDefaults(),arguments,["volume"]);this.input=this.output=new ne({context:this.context,gain:e.volume,units:"decibels"}),this.volume=this.output.gain,Z(this,"volume"),this._unmutedVolume=e.volume,this.mute=e.mute}static getDefaults(){return Object.assign($.getDefaults(),{mute:!1,volume:0})}get mute(){return this.volume.value===-1/0}set mute(e){!this.mute&&e?(this._unmutedVolume=this.volume.value,this.volume.value=-1/0):this.mute&&!e&&(this.volume.value=this._unmutedVolume)}dispose(){return super.dispose(),this.input.dispose(),this.volume.dispose(),this}};var Om=class t extends ${constructor(){super(b(t.getDefaults(),arguments)),this.name="Destination",this.input=new Wn({context:this.context}),this.output=new ne({context:this.context}),this.volume=this.input.volume;let e=b(t.getDefaults(),arguments);hr(this.input,this.output,this.context.rawContext.destination),this.mute=e.mute,this._internalChannels=[this.input,this.context.rawContext.destination,this.output]}static getDefaults(){return Object.assign($.getDefaults(),{mute:!1,volume:0})}get mute(){return this.input.mute}set mute(e){this.input.mute=e}chain(...e){return this.input.disconnect(),e.unshift(this.input),e.push(this.output),hr(...e),this}get maxChannelCount(){return this.context.rawContext.destination.maxChannelCount}dispose(){return super.dispose(),this.volume.dispose(),this}};To(t=>{t.destination=new Om({context:t})});So(t=>{t.destination.dispose()});var Yl=class extends Yt{constructor(e){super(),this.name="TimelineValue",this._timeline=new Rt({memory:10}),this._initialValue=e}set(e,n){return this._timeline.add({value:e,time:n}),this}get(e){let n=this._timeline.get(e);return n?n.value:this._initialValue}};var Ls=(()=>{class t{constructor(n,r){this.id=t._eventId++;let o=Object.assign(t.getDefaults(),r);this.transport=n,this.callback=o.callback,this._once=o.once,this.time=o.time}static getDefaults(){return{callback:ce,once:!1,time:0}}invoke(n){this.callback&&(this.callback(n),this._once&&this.transport.clear(this.id))}dispose(){return this.callback=void 0,this}}return t._eventId=0,t})();var Zl=class t extends Ls{constructor(e,n){super(e,n),this._currentId=-1,this._nextId=-1,this._nextTick=this.time,this._boundRestart=this._restart.bind(this);let r=Object.assign(t.getDefaults(),n);this.duration=new dt(e.context,r.duration).valueOf(),this._interval=new dt(e.context,r.interval).valueOf(),this._nextTick=r.time,this.transport.on("start",this._boundRestart),this.transport.on("loopStart",this._boundRestart),this.context=this.transport.context,this._restart()}static getDefaults(){return Object.assign({},Ls.getDefaults(),{duration:1/0,interval:1,once:!1})}invoke(e){this._createEvents(e),super.invoke(e)}_createEvents(e){let n=this.transport.getTicksAtTime(e);n>=this.time&&n>=this._nextTick&&this._nextTick+this._interval<this.time+this.duration&&(this._nextTick+=this._interval,this._currentId=this._nextId,this._nextId=this.transport.scheduleOnce(this.invoke.bind(this),new dt(this.context,this._nextTick).toSeconds()))}_restart(e){this.transport.clear(this._currentId),this.transport.clear(this._nextId),this._nextTick=this.time;let n=this.transport.getTicksAtTime(e);n>this.time&&(this._nextTick=this.time+Math.ceil((n-this.time)/this._interval)*this._interval),this._currentId=this.transport.scheduleOnce(this.invoke.bind(this),new dt(this.context,this._nextTick).toSeconds()),this._nextTick+=this._interval,this._nextId=this.transport.scheduleOnce(this.invoke.bind(this),new dt(this.context,this._nextTick).toSeconds())}dispose(){return super.dispose(),this.transport.clear(this._currentId),this.transport.clear(this._nextId),this.transport.off("start",this._boundRestart),this.transport.off("loopStart",this._boundRestart),this}};var Ql=class t extends nt{constructor(){super(b(t.getDefaults(),arguments)),this.name="Transport",this._loop=new Yl(!1),this._loopStart=0,this._loopEnd=0,this._scheduledEvents={},this._timeline=new Rt,this._repeatedEvents=new zl,this._syncedSignals=[],this._swingAmount=0;let e=b(t.getDefaults(),arguments);this._ppq=e.ppq,this._clock=new Ps({callback:this._processTick.bind(this),context:this.context,frequency:0,units:"bpm"}),this._bindClockEvents(),this.bpm=this._clock.frequency,this._clock.frequency.multiplier=e.ppq,this.bpm.setValueAtTime(e.bpm,0),Z(this,"bpm"),this._timeSignature=e.timeSignature,this._swingTicks=e.ppq/2}static getDefaults(){return Object.assign(nt.getDefaults(),{bpm:120,loopEnd:"4m",loopStart:0,ppq:192,swing:0,swingSubdivision:"8n",timeSignature:4})}_processTick(e,n){if(this._loop.get(e)&&n>=this._loopEnd&&(this.emit("loopEnd",e),this._clock.setTicksAtTime(this._loopStart,e),n=this._loopStart,this.emit("loopStart",e,this._clock.getSecondsAtTime(e)),this.emit("loop",e)),this._swingAmount>0&&n%this._ppq!==0&&n%(this._swingTicks*2)!==0){let r=n%(this._swingTicks*2)/(this._swingTicks*2),o=Math.sin(r*Math.PI)*this._swingAmount;e+=new dt(this.context,this._swingTicks*2/3).toSeconds()*o}this._timeline.forEachAtTime(n,r=>r.invoke(e))}schedule(e,n){let r=new Ls(this,{callback:e,time:new Hn(this.context,n).toTicks()});return this._addEvent(r,this._timeline)}scheduleRepeat(e,n,r,o=1/0){let i=new Zl(this,{callback:e,duration:new fn(this.context,o).toTicks(),interval:new fn(this.context,n).toTicks(),time:new Hn(this.context,r).toTicks()});return this._addEvent(i,this._repeatedEvents)}scheduleOnce(e,n){let r=new Ls(this,{callback:e,once:!0,time:new Hn(this.context,n).toTicks()});return this._addEvent(r,this._timeline)}clear(e){if(this._scheduledEvents.hasOwnProperty(e)){let n=this._scheduledEvents[e.toString()];n.timeline.remove(n.event),n.event.dispose(),delete this._scheduledEvents[e.toString()]}return this}_addEvent(e,n){return this._scheduledEvents[e.id.toString()]={event:e,timeline:n},n.add(e),e.id}cancel(e=0){let n=this.toTicks(e);return this._timeline.forEachFrom(n,r=>this.clear(r.id)),this._repeatedEvents.forEachFrom(n,r=>this.clear(r.id)),this}_bindClockEvents(){this._clock.on("start",(e,n)=>{n=new dt(this.context,n).toSeconds(),this.emit("start",e,n)}),this._clock.on("stop",e=>{this.emit("stop",e)}),this._clock.on("pause",e=>{this.emit("pause",e)})}get state(){return this._clock.getStateAtTime(this.now())}start(e,n){let r;return ae(n)&&(r=this.toTicks(n)),this._clock.start(e,r),this}stop(e){return this._clock.stop(e),this}pause(e){return this._clock.pause(e),this}toggle(e){return e=this.toSeconds(e),this._clock.getStateAtTime(e)!=="started"?this.start(e):this.stop(e),this}get timeSignature(){return this._timeSignature}set timeSignature(e){vt(e)&&(e=e[0]/e[1]*4),this._timeSignature=e}get loopStart(){return new fn(this.context,this._loopStart,"i").toSeconds()}set loopStart(e){this._loopStart=this.toTicks(e)}get loopEnd(){return new fn(this.context,this._loopEnd,"i").toSeconds()}set loopEnd(e){this._loopEnd=this.toTicks(e)}get loop(){return this._loop.get(this.now())}set loop(e){this._loop.set(e,this.now())}setLoopPoints(e,n){return this.loopStart=e,this.loopEnd=n,this}get swing(){return this._swingAmount}set swing(e){this._swingAmount=e}get swingSubdivision(){return new dt(this.context,this._swingTicks).toNotation()}set swingSubdivision(e){this._swingTicks=this.toTicks(e)}get position(){let e=this.now(),n=this._clock.getTicksAtTime(e);return new dt(this.context,n).toBarsBeatsSixteenths()}set position(e){let n=this.toTicks(e);this.ticks=n}get seconds(){return this._clock.seconds}set seconds(e){let n=this.now(),r=this._clock.frequency.timeToTicks(e,n);this.ticks=r}get progress(){if(this.loop){let e=this.now();return(this._clock.getTicksAtTime(e)-this._loopStart)/(this._loopEnd-this._loopStart)}else return 0}get ticks(){return this._clock.ticks}set ticks(e){if(this._clock.ticks!==e){let n=this.now();if(this.state==="started"){let r=this._clock.getTicksAtTime(n),o=this._clock.frequency.getDurationOfTicks(Math.ceil(r)-r,n),i=n+o;this.emit("stop",i),this._clock.setTicksAtTime(e,i),this.emit("start",i,this._clock.getSecondsAtTime(i))}else this._clock.setTicksAtTime(e,n)}}getTicksAtTime(e){return Math.round(this._clock.getTicksAtTime(e))}getSecondsAtTime(e){return this._clock.getSecondsAtTime(e)}get PPQ(){return this._clock.frequency.multiplier}set PPQ(e){this._clock.frequency.multiplier=e}nextSubdivision(e){if(e=this.toTicks(e),this.state!=="started")return 0;{let n=this.now(),r=this.getTicksAtTime(n),o=e-r%e;return this._clock.nextTickTime(o,n)}}syncSignal(e,n){if(!n){let o=this.now();if(e.getValueAtTime(o)!==0){let s=1/(60/this.bpm.getValueAtTime(o)/this.PPQ);n=e.getValueAtTime(o)/s}else n=0}let r=new ne(n);return this.bpm.connect(r),r.connect(e._param),this._syncedSignals.push({initial:e.value,ratio:r,signal:e}),e.value=0,this}unsyncSignal(e){for(let n=this._syncedSignals.length-1;n>=0;n--){let r=this._syncedSignals[n];r.signal===e&&(r.ratio.dispose(),r.signal.value=r.initial,this._syncedSignals.splice(n,1))}return this}dispose(){return super.dispose(),this._clock.dispose(),Ns(this,"bpm"),this._timeline.dispose(),this._repeatedEvents.dispose(),this}};Ao.mixin(Ql);To(t=>{t.transport=new Ql({context:t})});So(t=>{t.transport.dispose()});var je=class extends ${constructor(e){super(e),this.input=void 0,this._state=new dr("stopped"),this._synced=!1,this._scheduled=[],this._syncedStart=ce,this._syncedStop=ce,this._state.memory=100,this._state.increasing=!0,this._volume=this.output=new Wn({context:this.context,mute:e.mute,volume:e.volume}),this.volume=this._volume.volume,Z(this,"volume"),this.onstop=e.onstop}static getDefaults(){return Object.assign($.getDefaults(),{mute:!1,onstop:ce,volume:0})}get state(){return this._synced?this.context.transport.state==="started"?this._state.getValueAtTime(this.context.transport.seconds):"stopped":this._state.getValueAtTime(this.now())}get mute(){return this._volume.mute}set mute(e){this._volume.mute=e}_clampToCurrentTime(e){return this._synced?e:Math.max(e,this.context.currentTime)}start(e,n,r){let o=Dt(e)&&this._synced?this.context.transport.seconds:this.toSeconds(e);if(o=this._clampToCurrentTime(o),!this._synced&&this._state.getValueAtTime(o)==="started")te(Is(o,this._state.get(o).time),"Start time must be strictly greater than previous start time"),this._state.cancel(o),this._state.setStateAtTime("started",o),this.log("restart",o),this.restart(o,n,r);else if(this.log("start",o),this._state.setStateAtTime("started",o),this._synced){let i=this._state.get(o);i&&(i.offset=this.toSeconds(hn(n,0)),i.duration=r?this.toSeconds(r):void 0);let s=this.context.transport.schedule(a=>{this._start(a,n,r)},o);this._scheduled.push(s),this.context.transport.state==="started"&&this.context.transport.getSecondsAtTime(this.immediate())>o&&this._syncedStart(this.now(),this.context.transport.seconds)}else kl(this.context),this._start(o,n,r);return this}stop(e){let n=Dt(e)&&this._synced?this.context.transport.seconds:this.toSeconds(e);if(n=this._clampToCurrentTime(n),this._state.getValueAtTime(n)==="started"||ae(this._state.getNextState("started",n))){if(this.log("stop",n),!this._synced)this._stop(n);else{let r=this.context.transport.schedule(this._stop.bind(this),n);this._scheduled.push(r)}this._state.cancel(n),this._state.setStateAtTime("stopped",n)}return this}restart(e,n,r){return e=this.toSeconds(e),this._state.getValueAtTime(e)==="started"&&(this._state.cancel(e),this._restart(e,n,r)),this}sync(){return this._synced||(this._synced=!0,this._syncedStart=(e,n)=>{if(n>0){let r=this._state.get(n);if(r&&r.state==="started"&&r.time!==n){let o=n-this.toSeconds(r.time),i;r.duration&&(i=this.toSeconds(r.duration)-o),this._start(e,this.toSeconds(r.offset)+o,i)}}},this._syncedStop=e=>{let n=this.context.transport.getSecondsAtTime(Math.max(e-this.sampleTime,0));this._state.getValueAtTime(n)==="started"&&this._stop(e)},this.context.transport.on("start",this._syncedStart),this.context.transport.on("loopStart",this._syncedStart),this.context.transport.on("stop",this._syncedStop),this.context.transport.on("pause",this._syncedStop),this.context.transport.on("loopEnd",this._syncedStop)),this}unsync(){return this._synced&&(this.context.transport.off("stop",this._syncedStop),this.context.transport.off("pause",this._syncedStop),this.context.transport.off("loopEnd",this._syncedStop),this.context.transport.off("start",this._syncedStart),this.context.transport.off("loopStart",this._syncedStart)),this._synced=!1,this._scheduled.forEach(e=>this.context.transport.clear(e)),this._scheduled=[],this._state.cancel(0),this._stop(0),this}dispose(){return super.dispose(),this.onstop=ce,this.unsync(),this._volume.dispose(),this._state.dispose(),this}};var Qr=class t extends fr{constructor(){super(b(t.getDefaults(),arguments,["url","onload"])),this.name="ToneBufferSource",this._source=this.context.createBufferSource(),this._internalChannels=[this._source],this._sourceStarted=!1,this._sourceStopped=!1;let e=b(t.getDefaults(),arguments,["url","onload"]);on(this._source,this._gainNode),this._source.onended=()=>this._stopSource(),this.playbackRate=new ve({context:this.context,param:this._source.playbackRate,units:"positive",value:e.playbackRate}),this.loop=e.loop,this.loopStart=e.loopStart,this.loopEnd=e.loopEnd,this._buffer=new Zt(e.url,e.onload,e.onerror),this._internalChannels.push(this._source)}static getDefaults(){return Object.assign(fr.getDefaults(),{url:new Zt,loop:!1,loopEnd:0,loopStart:0,onload:ce,onerror:ce,playbackRate:1})}get fadeIn(){return this._fadeIn}set fadeIn(e){this._fadeIn=e}get fadeOut(){return this._fadeOut}set fadeOut(e){this._fadeOut=e}get curve(){return this._curve}set curve(e){this._curve=e}start(e,n,r,o=1){te(this.buffer.loaded,"buffer is either not set or not loaded");let i=this.toSeconds(e);this._startGain(i,o),this.loop?n=hn(n,this.loopStart):n=hn(n,0);let s=Math.max(this.toSeconds(n),0);if(this.loop){let a=this.toSeconds(this.loopEnd)||this.buffer.duration,c=this.toSeconds(this.loopStart),u=a-c;fc(s,a)&&(s=(s-c)%u+c),rn(s,this.buffer.duration)&&(s=0)}if(this._source.buffer=this.buffer.get(),this._source.loopEnd=this.toSeconds(this.loopEnd)||this.buffer.duration,jl(s,this.buffer.duration)&&(this._sourceStarted=!0,this._source.start(i,s)),ae(r)){let a=this.toSeconds(r);a=Math.max(a,0),this.stop(i+a)}return this}_stopSource(e){!this._sourceStopped&&this._sourceStarted&&(this._sourceStopped=!0,this._source.stop(this.toSeconds(e)),this._onended())}get loopStart(){return this._source.loopStart}set loopStart(e){this._source.loopStart=this.toSeconds(e)}get loopEnd(){return this._source.loopEnd}set loopEnd(e){this._source.loopEnd=this.toSeconds(e)}get buffer(){return this._buffer}set buffer(e){this._buffer.set(e)}get loop(){return this._source.loop}set loop(e){this._source.loop=e,this._sourceStarted&&this.cancelStop()}dispose(){return super.dispose(),this._source.onended=null,this._source.disconnect(),this._buffer.dispose(),this.playbackRate.dispose(),this}};var bhe=44100*5;function mn(t,e){return Ee(this,void 0,void 0,function*(){let n=e/t.context.sampleRate,r=new Pr(1,n,t.context.sampleRate);return new t.constructor(Object.assign(t.get(),{frequency:2/n,detune:0,context:r})).toDestination().start(0),(yield r.render()).getChannelData(0)})}var gc=class t extends fr{constructor(){super(b(t.getDefaults(),arguments,["frequency","type"])),this.name="ToneOscillatorNode",this._oscillator=this.context.createOscillator(),this._internalChannels=[this._oscillator];let e=b(t.getDefaults(),arguments,["frequency","type"]);on(this._oscillator,this._gainNode),this.type=e.type,this.frequency=new ve({context:this.context,param:this._oscillator.frequency,units:"frequency",value:e.frequency}),this.detune=new ve({context:this.context,param:this._oscillator.detune,units:"cents",value:e.detune}),Z(this,["frequency","detune"])}static getDefaults(){return Object.assign(fr.getDefaults(),{detune:0,frequency:440,type:"sine"})}start(e){let n=this.toSeconds(e);return this.log("start",n),this._startGain(n),this._oscillator.start(n),this}_stopSource(e){this._oscillator.stop(e)}setPeriodicWave(e){return this._oscillator.setPeriodicWave(e),this}get type(){return this._oscillator.type}set type(e){this._oscillator.type=e}dispose(){return super.dispose(),this.state==="started"&&this.stop(),this._oscillator.disconnect(),this.frequency.dispose(),this.detune.dispose(),this}};var Et=(()=>{class t extends je{constructor(){super(b(t.getDefaults(),arguments,["frequency","type"])),this.name="Oscillator",this._oscillator=null;let n=b(t.getDefaults(),arguments,["frequency","type"]);this.frequency=new le({context:this.context,units:"frequency",value:n.frequency}),Z(this,"frequency"),this.detune=new le({context:this.context,units:"cents",value:n.detune}),Z(this,"detune"),this._partials=n.partials,this._partialCount=n.partialCount,this._type=n.type,n.partialCount&&n.type!=="custom"&&(this._type=this.baseType+n.partialCount.toString()),this.phase=n.phase}static getDefaults(){return Object.assign(je.getDefaults(),{detune:0,frequency:440,partialCount:0,partials:[],phase:0,type:"sine"})}_start(n){let r=this.toSeconds(n),o=new gc({context:this.context,onended:()=>this.onstop(this)});this._oscillator=o,this._wave?this._oscillator.setPeriodicWave(this._wave):this._oscillator.type=this._type,this._oscillator.connect(this.output),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.start(r)}_stop(n){let r=this.toSeconds(n);this._oscillator&&this._oscillator.stop(r)}_restart(n){let r=this.toSeconds(n);return this.log("restart",r),this._oscillator&&this._oscillator.cancelStop(),this._state.cancel(r),this}syncFrequency(){return this.context.transport.syncSignal(this.frequency),this}unsyncFrequency(){return this.context.transport.unsyncSignal(this.frequency),this}_getCachedPeriodicWave(){if(this._type==="custom")return t._periodicWaveCache.find(r=>r.phase===this._phase&&lD(r.partials,this._partials));{let n=t._periodicWaveCache.find(r=>r.type===this._type&&r.phase===this._phase);return this._partialCount=n?n.partialCount:this._partialCount,n}}get type(){return this._type}set type(n){this._type=n;let r=["sine","square","sawtooth","triangle"].indexOf(n)!==-1;if(this._phase===0&&r)this._wave=void 0,this._partialCount=0,this._oscillator!==null&&(this._oscillator.type=n);else{let o=this._getCachedPeriodicWave();if(ae(o)){let{partials:i,wave:s}=o;this._wave=s,this._partials=i,this._oscillator!==null&&this._oscillator.setPeriodicWave(this._wave)}else{let[i,s]=this._getRealImaginary(n,this._phase),a=this.context.createPeriodicWave(i,s);this._wave=a,this._oscillator!==null&&this._oscillator.setPeriodicWave(this._wave),t._periodicWaveCache.push({imag:s,partialCount:this._partialCount,partials:this._partials,phase:this._phase,real:i,type:this._type,wave:this._wave}),t._periodicWaveCache.length>100&&t._periodicWaveCache.shift()}}}get baseType(){return this._type.replace(this.partialCount.toString(),"")}set baseType(n){this.partialCount&&this._type!=="custom"&&n!=="custom"?this.type=n+this.partialCount:this.type=n}get partialCount(){return this._partialCount}set partialCount(n){Ot(n,0);let r=this._type,o=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(this._type);if(o&&(r=o[1]),this._type!=="custom")n===0?this.type=r:this.type=r+n.toString();else{let i=new Float32Array(n);this._partials.forEach((s,a)=>i[a]=s),this._partials=Array.from(i),this.type=this._type}}_getRealImaginary(n,r){let i=2048,s=new Float32Array(i),a=new Float32Array(i),c=1;if(n==="custom"){if(c=this._partials.length+1,this._partialCount=this._partials.length,i=c,this._partials.length===0)return[s,a]}else{let u=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(n);u?(c=parseInt(u[2],10)+1,this._partialCount=parseInt(u[2],10),n=u[1],c=Math.max(c,2),i=c):this._partialCount=0,this._partials=[]}for(let u=1;u<i;++u){let l=2/(u*Math.PI),d;switch(n){case"sine":d=u<=c?1:0,this._partials[u-1]=d;break;case"square":d=u&1?2*l:0,this._partials[u-1]=d;break;case"sawtooth":d=l*(u&1?1:-1),this._partials[u-1]=d;break;case"triangle":u&1?d=2*(l*l)*(u-1>>1&1?-1:1):d=0,this._partials[u-1]=d;break;case"custom":d=this._partials[u-1];break;default:throw new TypeError("Oscillator: invalid type: "+n)}d!==0?(s[u]=-d*Math.sin(r*u),a[u]=d*Math.cos(r*u)):(s[u]=0,a[u]=0)}return[s,a]}_inverseFFT(n,r,o){let i=0,s=n.length;for(let a=0;a<s;a++)i+=n[a]*Math.cos(a*o)+r[a]*Math.sin(a*o);return i}getInitialValue(){let[n,r]=this._getRealImaginary(this._type,0),o=0,i=Math.PI*2,s=32;for(let a=0;a<s;a++)o=Math.max(this._inverseFFT(n,r,a/s*i),o);return Sm(-this._inverseFFT(n,r,this._phase)/o,-1,1)}get partials(){return this._partials.slice(0,this.partialCount)}set partials(n){this._partials=n,this._partialCount=this._partials.length,n.length&&(this.type="custom")}get phase(){return this._phase*(180/Math.PI)}set phase(n){this._phase=n*Math.PI/180,this.type=this._type}asArray(n=1024){return Ee(this,void 0,void 0,function*(){return mn(this,n)})}dispose(){return super.dispose(),this._oscillator!==null&&this._oscillator.dispose(),this._wave=void 0,this.frequency.dispose(),this.detune.dispose(),this}}return t._periodicWaveCache=[],t})();var In=class t extends ${constructor(){super(Object.assign(b(t.getDefaults(),arguments,["context"])))}connect(e,n=0,r=0){return ks(this,e,n,r),this}};var Gn=class t extends In{constructor(){super(Object.assign(b(t.getDefaults(),arguments,["mapping","length"]))),this.name="WaveShaper",this._shaper=this.context.createWaveShaper(),this.input=this._shaper,this.output=this._shaper;let e=b(t.getDefaults(),arguments,["mapping","length"]);vt(e.mapping)||e.mapping instanceof Float32Array?this.curve=Float32Array.from(e.mapping):iD(e.mapping)&&this.setMap(e.mapping,e.length)}static getDefaults(){return Object.assign(le.getDefaults(),{length:1024})}setMap(e,n=1024){let r=new Float32Array(n);for(let o=0,i=n;o<i;o++){let s=o/(i-1)*2-1;r[o]=e(s,o)}return this.curve=r,this}get curve(){return this._shaper.curve}set curve(e){this._shaper.curve=e}get oversample(){return this._shaper.oversample}set oversample(e){let n=["none","2x","4x"].some(r=>r.includes(e));te(n,"oversampling must be either 'none', '2x', or '4x'"),this._shaper.oversample=e}dispose(){return super.dispose(),this._shaper.disconnect(),this}};var js=class extends In{constructor(){super(...arguments),this.name="AudioToGain",this._norm=new Gn({context:this.context,mapping:e=>(e+1)/2}),this.input=this._norm,this.output=this._norm}dispose(){return super.dispose(),this._norm.dispose(),this}};var Tt=class t extends le{constructor(){super(Object.assign(b(t.getDefaults(),arguments,["value"]))),this.name="Multiply",this.override=!1;let e=b(t.getDefaults(),arguments,["value"]);this._mult=this.input=this.output=new ne({context:this.context,minValue:e.minValue,maxValue:e.maxValue}),this.factor=this._param=this._mult.gain,this.factor.setValueAtTime(e.value,0)}static getDefaults(){return Object.assign(le.getDefaults(),{value:0})}dispose(){return super.dispose(),this._mult.dispose(),this}};var yc=class t extends je{constructor(){super(b(t.getDefaults(),arguments,["frequency","type","modulationType"])),this.name="AMOscillator",this._modulationScale=new js({context:this.context}),this._modulationNode=new ne({context:this.context});let e=b(t.getDefaults(),arguments,["frequency","type","modulationType"]);this._carrier=new Et({context:this.context,detune:e.detune,frequency:e.frequency,onstop:()=>this.onstop(this),phase:e.phase,type:e.type}),this.frequency=this._carrier.frequency,this.detune=this._carrier.detune,this._modulator=new Et({context:this.context,phase:e.phase,type:e.modulationType}),this.harmonicity=new Tt({context:this.context,units:"positive",value:e.harmonicity}),this.frequency.chain(this.harmonicity,this._modulator.frequency),this._modulator.chain(this._modulationScale,this._modulationNode.gain),this._carrier.chain(this._modulationNode,this.output),Z(this,["frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(Et.getDefaults(),{harmonicity:1,modulationType:"square"})}_start(e){this._modulator.start(e),this._carrier.start(e)}_stop(e){this._modulator.stop(e),this._carrier.stop(e)}_restart(e){this._modulator.restart(e),this._carrier.restart(e)}get type(){return this._carrier.type}set type(e){this._carrier.type=e}get baseType(){return this._carrier.baseType}set baseType(e){this._carrier.baseType=e}get partialCount(){return this._carrier.partialCount}set partialCount(e){this._carrier.partialCount=e}get modulationType(){return this._modulator.type}set modulationType(e){this._modulator.type=e}get phase(){return this._carrier.phase}set phase(e){this._carrier.phase=e,this._modulator.phase=e}get partials(){return this._carrier.partials}set partials(e){this._carrier.partials=e}asArray(e=1024){return Ee(this,void 0,void 0,function*(){return mn(this,e)})}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this._modulationScale.dispose(),this}};var Bs=class t extends je{constructor(){super(b(t.getDefaults(),arguments,["frequency","type","modulationType"])),this.name="FMOscillator",this._modulationNode=new ne({context:this.context,gain:0});let e=b(t.getDefaults(),arguments,["frequency","type","modulationType"]);this._carrier=new Et({context:this.context,detune:e.detune,frequency:0,onstop:()=>this.onstop(this),phase:e.phase,type:e.type}),this.detune=this._carrier.detune,this.frequency=new le({context:this.context,units:"frequency",value:e.frequency}),this._modulator=new Et({context:this.context,phase:e.phase,type:e.modulationType}),this.harmonicity=new Tt({context:this.context,units:"positive",value:e.harmonicity}),this.modulationIndex=new Tt({context:this.context,units:"positive",value:e.modulationIndex}),this.frequency.connect(this._carrier.frequency),this.frequency.chain(this.harmonicity,this._modulator.frequency),this.frequency.chain(this.modulationIndex,this._modulationNode),this._modulator.connect(this._modulationNode.gain),this._modulationNode.connect(this._carrier.frequency),this._carrier.connect(this.output),this.detune.connect(this._modulator.detune),Z(this,["modulationIndex","frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(Et.getDefaults(),{harmonicity:1,modulationIndex:2,modulationType:"square"})}_start(e){this._modulator.start(e),this._carrier.start(e)}_stop(e){this._modulator.stop(e),this._carrier.stop(e)}_restart(e){return this._modulator.restart(e),this._carrier.restart(e),this}get type(){return this._carrier.type}set type(e){this._carrier.type=e}get baseType(){return this._carrier.baseType}set baseType(e){this._carrier.baseType=e}get partialCount(){return this._carrier.partialCount}set partialCount(e){this._carrier.partialCount=e}get modulationType(){return this._modulator.type}set modulationType(e){this._modulator.type=e}get phase(){return this._carrier.phase}set phase(e){this._carrier.phase=e,this._modulator.phase=e}get partials(){return this._carrier.partials}set partials(e){this._carrier.partials=e}asArray(e=1024){return Ee(this,void 0,void 0,function*(){return mn(this,e)})}dispose(){return super.dispose(),this.frequency.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this.modulationIndex.dispose(),this}};var ii=class t extends je{constructor(){super(b(t.getDefaults(),arguments,["frequency","width"])),this.name="PulseOscillator",this._widthGate=new ne({context:this.context,gain:0}),this._thresh=new Gn({context:this.context,mapping:n=>n<=0?-1:1});let e=b(t.getDefaults(),arguments,["frequency","width"]);this.width=new le({context:this.context,units:"audioRange",value:e.width}),this._triangle=new Et({context:this.context,detune:e.detune,frequency:e.frequency,onstop:()=>this.onstop(this),phase:e.phase,type:"triangle"}),this.frequency=this._triangle.frequency,this.detune=this._triangle.detune,this._triangle.chain(this._thresh,this.output),this.width.chain(this._widthGate,this._thresh),Z(this,["width","frequency","detune"])}static getDefaults(){return Object.assign(je.getDefaults(),{detune:0,frequency:440,phase:0,type:"pulse",width:.2})}_start(e){e=this.toSeconds(e),this._triangle.start(e),this._widthGate.gain.setValueAtTime(1,e)}_stop(e){e=this.toSeconds(e),this._triangle.stop(e),this._widthGate.gain.cancelScheduledValues(e),this._widthGate.gain.setValueAtTime(0,e)}_restart(e){this._triangle.restart(e),this._widthGate.gain.cancelScheduledValues(e),this._widthGate.gain.setValueAtTime(1,e)}get phase(){return this._triangle.phase}set phase(e){this._triangle.phase=e}get type(){return"pulse"}get baseType(){return"pulse"}get partials(){return[]}get partialCount(){return 0}set carrierType(e){this._triangle.type=e}asArray(e=1024){return Ee(this,void 0,void 0,function*(){return mn(this,e)})}dispose(){return super.dispose(),this._triangle.dispose(),this.width.dispose(),this._widthGate.dispose(),this._thresh.dispose(),this}};var vc=class t extends je{constructor(){super(b(t.getDefaults(),arguments,["frequency","type","spread"])),this.name="FatOscillator",this._oscillators=[];let e=b(t.getDefaults(),arguments,["frequency","type","spread"]);this.frequency=new le({context:this.context,units:"frequency",value:e.frequency}),this.detune=new le({context:this.context,units:"cents",value:e.detune}),this._spread=e.spread,this._type=e.type,this._phase=e.phase,this._partials=e.partials,this._partialCount=e.partialCount,this.count=e.count,Z(this,["frequency","detune"])}static getDefaults(){return Object.assign(Et.getDefaults(),{count:3,spread:20,type:"sawtooth"})}_start(e){e=this.toSeconds(e),this._forEach(n=>n.start(e))}_stop(e){e=this.toSeconds(e),this._forEach(n=>n.stop(e))}_restart(e){this._forEach(n=>n.restart(e))}_forEach(e){for(let n=0;n<this._oscillators.length;n++)e(this._oscillators[n],n)}get type(){return this._type}set type(e){this._type=e,this._forEach(n=>n.type=e)}get spread(){return this._spread}set spread(e){if(this._spread=e,this._oscillators.length>1){let n=-e/2,r=e/(this._oscillators.length-1);this._forEach((o,i)=>o.detune.value=n+r*i)}}get count(){return this._oscillators.length}set count(e){if(Ot(e,1),this._oscillators.length!==e){this._forEach(n=>n.dispose()),this._oscillators=[];for(let n=0;n<e;n++){let r=new Et({context:this.context,volume:-6-e*1.1,type:this._type,phase:this._phase+n/e*360,partialCount:this._partialCount,onstop:n===0?()=>this.onstop(this):ce});this.type==="custom"&&(r.partials=this._partials),this.frequency.connect(r.frequency),this.detune.connect(r.detune),r.detune.overridden=!1,r.connect(this.output),this._oscillators[n]=r}this.spread=this._spread,this.state==="started"&&this._forEach(n=>n.start())}}get phase(){return this._phase}set phase(e){this._phase=e,this._forEach((n,r)=>n.phase=this._phase+r/this.count*360)}get baseType(){return this._oscillators[0].baseType}set baseType(e){this._forEach(n=>n.baseType=e),this._type=this._oscillators[0].type}get partials(){return this._oscillators[0].partials}set partials(e){this._partials=e,this._partialCount=this._partials.length,e.length&&(this._type="custom",this._forEach(n=>n.partials=e))}get partialCount(){return this._oscillators[0].partialCount}set partialCount(e){this._partialCount=e,this._forEach(n=>n.partialCount=e),this._type=this._oscillators[0].type}asArray(e=1024){return Ee(this,void 0,void 0,function*(){return mn(this,e)})}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this._forEach(e=>e.dispose()),this}};var _c=class t extends je{constructor(){super(b(t.getDefaults(),arguments,["frequency","modulationFrequency"])),this.name="PWMOscillator",this.sourceType="pwm",this._scale=new Tt({context:this.context,value:2});let e=b(t.getDefaults(),arguments,["frequency","modulationFrequency"]);this._pulse=new ii({context:this.context,frequency:e.modulationFrequency}),this._pulse.carrierType="sine",this.modulationFrequency=this._pulse.frequency,this._modulator=new Et({context:this.context,detune:e.detune,frequency:e.frequency,onstop:()=>this.onstop(this),phase:e.phase}),this.frequency=this._modulator.frequency,this.detune=this._modulator.detune,this._modulator.chain(this._scale,this._pulse.width),this._pulse.connect(this.output),Z(this,["modulationFrequency","frequency","detune"])}static getDefaults(){return Object.assign(je.getDefaults(),{detune:0,frequency:440,modulationFrequency:.4,phase:0,type:"pwm"})}_start(e){e=this.toSeconds(e),this._modulator.start(e),this._pulse.start(e)}_stop(e){e=this.toSeconds(e),this._modulator.stop(e),this._pulse.stop(e)}_restart(e){this._modulator.restart(e),this._pulse.restart(e)}get type(){return"pwm"}get baseType(){return"pwm"}get partials(){return[]}get partialCount(){return 0}get phase(){return this._modulator.phase}set phase(e){this._modulator.phase=e}asArray(e=1024){return Ee(this,void 0,void 0,function*(){return mn(this,e)})}dispose(){return super.dispose(),this._pulse.dispose(),this._scale.dispose(),this._modulator.dispose(),this}};var xD={am:yc,fat:vc,fm:Bs,oscillator:Et,pulse:ii,pwm:_c},si=class t extends je{constructor(){super(b(t.getDefaults(),arguments,["frequency","type"])),this.name="OmniOscillator";let e=b(t.getDefaults(),arguments,["frequency","type"]);this.frequency=new le({context:this.context,units:"frequency",value:e.frequency}),this.detune=new le({context:this.context,units:"cents",value:e.detune}),Z(this,["frequency","detune"]),this.set(e)}static getDefaults(){return Object.assign(Et.getDefaults(),Bs.getDefaults(),yc.getDefaults(),vc.getDefaults(),ii.getDefaults(),_c.getDefaults())}_start(e){this._oscillator.start(e)}_stop(e){this._oscillator.stop(e)}_restart(e){return this._oscillator.restart(e),this}get type(){let e="";return["am","fm","fat"].some(n=>this._sourceType===n)&&(e=this._sourceType),e+this._oscillator.type}set type(e){e.substr(0,2)==="fm"?(this._createNewOscillator("fm"),this._oscillator=this._oscillator,this._oscillator.type=e.substr(2)):e.substr(0,2)==="am"?(this._createNewOscillator("am"),this._oscillator=this._oscillator,this._oscillator.type=e.substr(2)):e.substr(0,3)==="fat"?(this._createNewOscillator("fat"),this._oscillator=this._oscillator,this._oscillator.type=e.substr(3)):e==="pwm"?(this._createNewOscillator("pwm"),this._oscillator=this._oscillator):e==="pulse"?this._createNewOscillator("pulse"):(this._createNewOscillator("oscillator"),this._oscillator=this._oscillator,this._oscillator.type=e)}get partials(){return this._oscillator.partials}set partials(e){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&(this._oscillator.partials=e)}get partialCount(){return this._oscillator.partialCount}set partialCount(e){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&(this._oscillator.partialCount=e)}set(e){return Reflect.has(e,"type")&&e.type&&(this.type=e.type),super.set(e),this}_createNewOscillator(e){if(e!==this._sourceType){this._sourceType=e;let n=xD[e],r=this.now();if(this._oscillator){let o=this._oscillator;o.stop(r),this.context.setTimeout(()=>o.dispose(),this.blockTime)}this._oscillator=new n({context:this.context}),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.connect(this.output),this._oscillator.onstop=()=>this.onstop(this),this.state==="started"&&this._oscillator.start(r)}}get phase(){return this._oscillator.phase}set phase(e){this._oscillator.phase=e}get sourceType(){return this._sourceType}set sourceType(e){let n="sine";this._oscillator.type!=="pwm"&&this._oscillator.type!=="pulse"&&(n=this._oscillator.type),e==="fm"?this.type="fm"+n:e==="am"?this.type="am"+n:e==="fat"?this.type="fat"+n:e==="oscillator"?this.type=n:e==="pulse"?this.type="pulse":e==="pwm"&&(this.type="pwm")}_getOscType(e,n){return e instanceof xD[n]}get baseType(){return this._oscillator.baseType}set baseType(e){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&e!=="pulse"&&e!=="pwm"&&(this._oscillator.baseType=e)}get width(){if(this._getOscType(this._oscillator,"pulse"))return this._oscillator.width}get count(){if(this._getOscType(this._oscillator,"fat"))return this._oscillator.count}set count(e){this._getOscType(this._oscillator,"fat")&&qt(e)&&(this._oscillator.count=e)}get spread(){if(this._getOscType(this._oscillator,"fat"))return this._oscillator.spread}set spread(e){this._getOscType(this._oscillator,"fat")&&qt(e)&&(this._oscillator.spread=e)}get modulationType(){if(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))return this._oscillator.modulationType}set modulationType(e){(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))&&Ft(e)&&(this._oscillator.modulationType=e)}get modulationIndex(){if(this._getOscType(this._oscillator,"fm"))return this._oscillator.modulationIndex}get harmonicity(){if(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))return this._oscillator.harmonicity}get modulationFrequency(){if(this._getOscType(this._oscillator,"pwm"))return this._oscillator.modulationFrequency}asArray(e=1024){return Ee(this,void 0,void 0,function*(){return mn(this,e)})}dispose(){return super.dispose(),this.detune.dispose(),this.frequency.dispose(),this._oscillator.dispose(),this}};function Xl(t,e=1/0){let n=new WeakMap;return function(r,o){Reflect.defineProperty(r,o,{configurable:!0,enumerable:!0,get:function(){return n.get(this)},set:function(i){Ot(i,t,e),n.set(this,i)}})}}function gn(t,e=1/0){let n=new WeakMap;return function(r,o){Reflect.defineProperty(r,o,{configurable:!0,enumerable:!0,get:function(){return n.get(this)},set:function(i){Ot(this.toSeconds(i),t,e),n.set(this,i)}})}}var ai=class t extends je{constructor(){super(b(t.getDefaults(),arguments,["url","onload"])),this.name="Player",this._activeSources=new Set;let e=b(t.getDefaults(),arguments,["url","onload"]);this._buffer=new Zt({onload:this._onload.bind(this,e.onload),onerror:e.onerror,reverse:e.reverse,url:e.url}),this.autostart=e.autostart,this._loop=e.loop,this._loopStart=e.loopStart,this._loopEnd=e.loopEnd,this._playbackRate=e.playbackRate,this.fadeIn=e.fadeIn,this.fadeOut=e.fadeOut}static getDefaults(){return Object.assign(je.getDefaults(),{autostart:!1,fadeIn:0,fadeOut:0,loop:!1,loopEnd:0,loopStart:0,onload:ce,onerror:ce,playbackRate:1,reverse:!1})}load(e){return Ee(this,void 0,void 0,function*(){return yield this._buffer.load(e),this._onload(),this})}_onload(e=ce){e(),this.autostart&&this.start()}_onSourceEnd(e){this.onstop(this),this._activeSources.delete(e),this._activeSources.size===0&&!this._synced&&this._state.getValueAtTime(this.now())==="started"&&(this._state.cancel(this.now()),this._state.setStateAtTime("stopped",this.now()))}start(e,n,r){return super.start(e,n,r),this}_start(e,n,r){this._loop?n=hn(n,this._loopStart):n=hn(n,0);let o=this.toSeconds(n),i=r;r=hn(r,Math.max(this._buffer.duration-o,0));let s=this.toSeconds(r);s=s/this._playbackRate,e=this.toSeconds(e);let a=new Qr({url:this._buffer,context:this.context,fadeIn:this.fadeIn,fadeOut:this.fadeOut,loop:this._loop,loopEnd:this._loopEnd,loopStart:this._loopStart,onended:this._onSourceEnd.bind(this),playbackRate:this._playbackRate}).connect(this.output);!this._loop&&!this._synced&&(this._state.cancel(e+s),this._state.setStateAtTime("stopped",e+s,{implicitEnd:!0})),this._activeSources.add(a),this._loop&&Dt(i)?a.start(e,o):a.start(e,o,s-this.toSeconds(this.fadeOut))}_stop(e){let n=this.toSeconds(e);this._activeSources.forEach(r=>r.stop(n))}restart(e,n,r){return super.restart(e,n,r),this}_restart(e,n,r){this._stop(e),this._start(e,n,r)}seek(e,n){let r=this.toSeconds(n);if(this._state.getValueAtTime(r)==="started"){let o=this.toSeconds(e);this._stop(r),this._start(r,o)}return this}setLoopPoints(e,n){return this.loopStart=e,this.loopEnd=n,this}get loopStart(){return this._loopStart}set loopStart(e){this._loopStart=e,this.buffer.loaded&&Ot(this.toSeconds(e),0,this.buffer.duration),this._activeSources.forEach(n=>{n.loopStart=e})}get loopEnd(){return this._loopEnd}set loopEnd(e){this._loopEnd=e,this.buffer.loaded&&Ot(this.toSeconds(e),0,this.buffer.duration),this._activeSources.forEach(n=>{n.loopEnd=e})}get buffer(){return this._buffer}set buffer(e){this._buffer.set(e)}get loop(){return this._loop}set loop(e){if(this._loop!==e&&(this._loop=e,this._activeSources.forEach(n=>{n.loop=e}),e)){let n=this._state.getNextState("stopped",this.now());n&&this._state.cancel(n.time)}}get playbackRate(){return this._playbackRate}set playbackRate(e){this._playbackRate=e;let n=this.now(),r=this._state.getNextState("stopped",n);r&&r.implicitEnd&&(this._state.cancel(r.time),this._activeSources.forEach(o=>o.cancelStop())),this._activeSources.forEach(o=>{o.playbackRate.setValueAtTime(e,n)})}get reverse(){return this._buffer.reverse}set reverse(e){this._buffer.reverse=e}get loaded(){return this._buffer.loaded}dispose(){return super.dispose(),this._activeSources.forEach(e=>e.dispose()),this._activeSources.clear(),this._buffer.dispose(),this}};Ht([gn(0)],ai.prototype,"fadeIn",void 0);Ht([gn(0)],ai.prototype,"fadeOut",void 0);var sn=class t extends ${constructor(){super(b(t.getDefaults(),arguments,["attack","decay","sustain","release"])),this.name="Envelope",this._sig=new le({context:this.context,value:0}),this.output=this._sig,this.input=void 0;let e=b(t.getDefaults(),arguments,["attack","decay","sustain","release"]);this.attack=e.attack,this.decay=e.decay,this.sustain=e.sustain,this.release=e.release,this.attackCurve=e.attackCurve,this.releaseCurve=e.releaseCurve,this.decayCurve=e.decayCurve}static getDefaults(){return Object.assign($.getDefaults(),{attack:.01,attackCurve:"linear",decay:.1,decayCurve:"exponential",release:1,releaseCurve:"exponential",sustain:.5})}get value(){return this.getValueAtTime(this.now())}_getCurve(e,n){if(Ft(e))return e;{let r;for(r in Jl)if(Jl[r][n]===e)return r;return e}}_setCurve(e,n,r){if(Ft(r)&&Reflect.has(Jl,r)){let o=Jl[r];ar(o)?e!=="_decayCurve"&&(this[e]=o[n]):this[e]=o}else if(vt(r)&&e!=="_decayCurve")this[e]=r;else throw new Error("Envelope: invalid curve: "+r)}get attackCurve(){return this._getCurve(this._attackCurve,"In")}set attackCurve(e){this._setCurve("_attackCurve","In",e)}get releaseCurve(){return this._getCurve(this._releaseCurve,"Out")}set releaseCurve(e){this._setCurve("_releaseCurve","Out",e)}get decayCurve(){return this._decayCurve}set decayCurve(e){te(["linear","exponential"].some(n=>n===e),`Invalid envelope curve: ${e}`),this._decayCurve=e}triggerAttack(e,n=1){this.log("triggerAttack",e,n),e=this.toSeconds(e);let o=this.toSeconds(this.attack),i=this.toSeconds(this.decay),s=this.getValueAtTime(e);if(s>0){let a=1/o;o=(1-s)/a}if(o<this.sampleTime)this._sig.cancelScheduledValues(e),this._sig.setValueAtTime(n,e);else if(this._attackCurve==="linear")this._sig.linearRampTo(n,o,e);else if(this._attackCurve==="exponential")this._sig.targetRampTo(n,o,e);else{this._sig.cancelAndHoldAtTime(e);let a=this._attackCurve;for(let c=1;c<a.length;c++)if(a[c-1]<=s&&s<=a[c]){a=this._attackCurve.slice(c),a[0]=s;break}this._sig.setValueCurveAtTime(a,e,o,n)}if(i&&this.sustain<1){let a=n*this.sustain,c=e+o;this.log("decay",c),this._decayCurve==="linear"?this._sig.linearRampToValueAtTime(a,i+c):this._sig.exponentialApproachValueAtTime(a,c,i)}return this}triggerRelease(e){this.log("triggerRelease",e),e=this.toSeconds(e);let n=this.getValueAtTime(e);if(n>0){let r=this.toSeconds(this.release);r<this.sampleTime?this._sig.setValueAtTime(0,e):this._releaseCurve==="linear"?this._sig.linearRampTo(0,r,e):this._releaseCurve==="exponential"?this._sig.targetRampTo(0,r,e):(te(vt(this._releaseCurve),"releaseCurve must be either 'linear', 'exponential' or an array"),this._sig.cancelAndHoldAtTime(e),this._sig.setValueCurveAtTime(this._releaseCurve,e,r,n))}return this}getValueAtTime(e){return this._sig.getValueAtTime(e)}triggerAttackRelease(e,n,r=1){return n=this.toSeconds(n),this.triggerAttack(n,r),this.triggerRelease(n+this.toSeconds(e)),this}cancel(e){return this._sig.cancelScheduledValues(this.toSeconds(e)),this}connect(e,n=0,r=0){return ks(this,e,n,r),this}asArray(e=1024){return Ee(this,void 0,void 0,function*(){let n=e/this.context.sampleRate,r=new Pr(1,n,this.context.sampleRate),o=this.toSeconds(this.attack)+this.toSeconds(this.decay),i=o+this.toSeconds(this.release),s=i*.1,a=i+s,c=new this.constructor(Object.assign(this.get(),{attack:n*this.toSeconds(this.attack)/a,decay:n*this.toSeconds(this.decay)/a,release:n*this.toSeconds(this.release)/a,context:r}));return c._sig.toDestination(),c.triggerAttackRelease(n*(o+s)/a,0),(yield r.render()).getChannelData(0)})}dispose(){return super.dispose(),this._sig.dispose(),this}};Ht([gn(0)],sn.prototype,"attack",void 0);Ht([gn(0)],sn.prototype,"decay",void 0);Ht([Xl(0,1)],sn.prototype,"sustain",void 0);Ht([gn(0)],sn.prototype,"release",void 0);var Jl=(()=>{let e,n,r=[];for(e=0;e<128;e++)r[e]=Math.sin(e/(128-1)*(Math.PI/2));let o=[],i=6.4;for(e=0;e<128-1;e++){n=e/(128-1);let h=Math.sin(n*(Math.PI*2)*i-Math.PI/2)+1;o[e]=h/10+n*.83}o[128-1]=1;let s=[],a=5;for(e=0;e<128;e++)s[e]=Math.ceil(e/(128-1)*a)/a;let c=[];for(e=0;e<128;e++)n=e/(128-1),c[e]=.5*(1-Math.cos(Math.PI*n));let u=[];for(e=0;e<128;e++){n=e/(128-1);let h=Math.pow(n,3)*4+.2,p=Math.cos(h*Math.PI*2*n);u[e]=Math.abs(p*(1-n))}function l(h){let p=new Array(h.length);for(let y=0;y<h.length;y++)p[y]=1-h[y];return p}function d(h){return h.slice(0).reverse()}return{bounce:{In:l(u),Out:u},cosine:{In:r,Out:d(r)},exponential:"exponential",linear:"linear",ripple:{In:o,Out:l(o)},sine:{In:c,Out:l(c)},step:{In:s,Out:l(s)}}})();var pr=class t extends ${constructor(){super(b(t.getDefaults(),arguments)),this._scheduledEvents=[],this._synced=!1,this._original_triggerAttack=this.triggerAttack,this._original_triggerRelease=this.triggerRelease;let e=b(t.getDefaults(),arguments);this._volume=this.output=new Wn({context:this.context,volume:e.volume}),this.volume=this._volume.volume,Z(this,"volume")}static getDefaults(){return Object.assign($.getDefaults(),{volume:0})}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",0)),this}_syncState(){let e=!1;return this._synced||(this._synced=!0,e=!0),e}_syncMethod(e,n){let r=this["_original_"+e]=this[e];this[e]=(...o)=>{let i=o[n],s=this.context.transport.schedule(a=>{o[n]=a,r.apply(this,o)},i);this._scheduledEvents.push(s)}}unsync(){return this._scheduledEvents.forEach(e=>this.context.transport.clear(e)),this._scheduledEvents=[],this._synced&&(this._synced=!1,this.triggerAttack=this._original_triggerAttack,this.triggerRelease=this._original_triggerRelease),this}triggerAttackRelease(e,n,r,o){let i=this.toSeconds(r),s=this.toSeconds(n);return this.triggerAttack(e,i,o),this.triggerRelease(i+s),this}dispose(){return super.dispose(),this._volume.dispose(),this.unsync(),this._scheduledEvents=[],this}};var zn=class t extends pr{constructor(){super(b(t.getDefaults(),arguments));let e=b(t.getDefaults(),arguments);this.portamento=e.portamento,this.onsilence=e.onsilence}static getDefaults(){return Object.assign(pr.getDefaults(),{detune:0,onsilence:ce,portamento:0})}triggerAttack(e,n,r=1){this.log("triggerAttack",e,n,r);let o=this.toSeconds(n);return this._triggerEnvelopeAttack(o,r),this.setNote(e,o),this}triggerRelease(e){this.log("triggerRelease",e);let n=this.toSeconds(e);return this._triggerEnvelopeRelease(n),this}setNote(e,n){let r=this.toSeconds(n),o=e instanceof pn?e.toFrequency():e;if(this.portamento>0&&this.getLevelAtTime(r)>.05){let i=this.toSeconds(this.portamento);this.frequency.exponentialRampTo(o,i,r)}else this.frequency.setValueAtTime(o,r);return this}};Ht([gn(0)],zn.prototype,"portamento",void 0);var Us=class t extends sn{constructor(){super(b(t.getDefaults(),arguments,["attack","decay","sustain","release"])),this.name="AmplitudeEnvelope",this._gainNode=new ne({context:this.context,gain:0}),this.output=this._gainNode,this.input=this._gainNode,this._sig.connect(this._gainNode.gain),this.output=this._gainNode,this.input=this._gainNode}dispose(){return super.dispose(),this._gainNode.dispose(),this}};var ci=class t extends zn{constructor(){super(b(t.getDefaults(),arguments)),this.name="Synth";let e=b(t.getDefaults(),arguments);this.oscillator=new si(Object.assign({context:this.context,detune:e.detune,onstop:()=>this.onsilence(this)},e.oscillator)),this.frequency=this.oscillator.frequency,this.detune=this.oscillator.detune,this.envelope=new Us(Object.assign({context:this.context},e.envelope)),this.oscillator.chain(this.envelope,this.output),Z(this,["oscillator","frequency","detune","envelope"])}static getDefaults(){return Object.assign(zn.getDefaults(),{envelope:Object.assign(kr(sn.getDefaults(),Object.keys($.getDefaults())),{attack:.005,decay:.1,release:1,sustain:.3}),oscillator:Object.assign(kr(si.getDefaults(),[...Object.keys(je.getDefaults()),"frequency","detune"]),{type:"triangle"})})}_triggerEnvelopeAttack(e,n){if(this.envelope.triggerAttack(e,n),this.oscillator.start(e),this.envelope.sustain===0){let r=this.toSeconds(this.envelope.attack),o=this.toSeconds(this.envelope.decay);this.oscillator.stop(e+r+o)}}_triggerEnvelopeRelease(e){this.envelope.triggerRelease(e),this.oscillator.stop(e+this.toSeconds(this.envelope.release))}getLevelAtTime(e){return e=this.toSeconds(e),this.envelope.getValueAtTime(e)}dispose(){return super.dispose(),this.oscillator.dispose(),this.envelope.dispose(),this}};var td=class t extends ci{constructor(){super(b(t.getDefaults(),arguments)),this.name="MembraneSynth",this.portamento=0;let e=b(t.getDefaults(),arguments);this.pitchDecay=e.pitchDecay,this.octaves=e.octaves,Z(this,["oscillator","envelope"])}static getDefaults(){return ur(zn.getDefaults(),ci.getDefaults(),{envelope:{attack:.001,attackCurve:"exponential",decay:.4,release:1.4,sustain:.01},octaves:10,oscillator:{type:"sine"},pitchDecay:.05})}setNote(e,n){let r=this.toSeconds(n),o=this.toFrequency(e instanceof pn?e.toFrequency():e),i=o*this.octaves;return this.oscillator.frequency.setValueAtTime(i,r),this.oscillator.frequency.exponentialRampToValueAtTime(o,r+this.toSeconds(this.pitchDecay)),this}dispose(){return super.dispose(),this}};Ht([Xl(0)],td.prototype,"octaves",void 0);Ht([gn(0)],td.prototype,"pitchDecay",void 0);var bD=new Set;function $s(t){bD.add(t)}function nd(t,e){let n=`registerProcessor("${t}", ${e})`;bD.add(n)}var Sk=`
	/**
	 * The base AudioWorkletProcessor for use in Tone.js. Works with the [[ToneAudioWorklet]]. 
	 */
	class ToneAudioWorkletProcessor extends AudioWorkletProcessor {

		constructor(options) {
			
			super(options);
			/**
			 * If the processor was disposed or not. Keep alive until it's disposed.
			 */
			this.disposed = false;
		   	/** 
			 * The number of samples in the processing block
			 */
			this.blockSize = 128;
			/**
			 * the sample rate
			 */
			this.sampleRate = sampleRate;

			this.port.onmessage = (event) => {
				// when it receives a dispose 
				if (event.data === "dispose") {
					this.disposed = true;
				}
			};
		}
	}
`;$s(Sk);var Ak=`
	/**
	 * Abstract class for a single input/output processor. 
	 * has a 'generate' function which processes one sample at a time
	 */
	class SingleIOProcessor extends ToneAudioWorkletProcessor {

		constructor(options) {
			super(Object.assign(options, {
				numberOfInputs: 1,
				numberOfOutputs: 1
			}));
			/**
			 * Holds the name of the parameter and a single value of that
			 * parameter at the current sample
			 * @type { [name: string]: number }
			 */
			this.params = {}
		}

		/**
		 * Generate an output sample from the input sample and parameters
		 * @abstract
		 * @param input number
		 * @param channel number
		 * @param parameters { [name: string]: number }
		 * @returns number
		 */
		generate(){}

		/**
		 * Update the private params object with the 
		 * values of the parameters at the given index
		 * @param parameters { [name: string]: Float32Array },
		 * @param index number
		 */
		updateParams(parameters, index) {
			for (const paramName in parameters) {
				const param = parameters[paramName];
				if (param.length > 1) {
					this.params[paramName] = parameters[paramName][index];
				} else {
					this.params[paramName] = parameters[paramName][0];
				}
			}
		}

		/**
		 * Process a single frame of the audio
		 * @param inputs Float32Array[][]
		 * @param outputs Float32Array[][]
		 */
		process(inputs, outputs, parameters) {
			const input = inputs[0];
			const output = outputs[0];
			// get the parameter values
			const channelCount = Math.max(input && input.length || 0, output.length);
			for (let sample = 0; sample < this.blockSize; sample++) {
				this.updateParams(parameters, sample);
				for (let channel = 0; channel < channelCount; channel++) {
					const inputSample = input && input.length ? input[channel][sample] : 0;
					output[channel][sample] = this.generate(inputSample, channel, this.params);
				}
			}
			return !this.disposed;
		}
	};
`;$s(Ak);var Ik=`
	/**
	 * A multichannel buffer for use within an AudioWorkletProcessor as a delay line
	 */
	class DelayLine {
		
		constructor(size, channels) {
			this.buffer = [];
			this.writeHead = []
			this.size = size;

			// create the empty channels
			for (let i = 0; i < channels; i++) {
				this.buffer[i] = new Float32Array(this.size);
				this.writeHead[i] = 0;
			}
		}

		/**
		 * Push a value onto the end
		 * @param channel number
		 * @param value number
		 */
		push(channel, value) {
			this.writeHead[channel] += 1;
			if (this.writeHead[channel] > this.size) {
				this.writeHead[channel] = 0;
			}
			this.buffer[channel][this.writeHead[channel]] = value;
		}

		/**
		 * Get the recorded value of the channel given the delay
		 * @param channel number
		 * @param delay number delay samples
		 */
		get(channel, delay) {
			let readHead = this.writeHead[channel] - Math.floor(delay);
			if (readHead < 0) {
				readHead += this.size;
			}
			return this.buffer[channel][readHead];
		}
	}
`;$s(Ik);var CD="feedback-comb-filter",Mk=`
	class FeedbackCombFilterWorklet extends SingleIOProcessor {

		constructor(options) {
			super(options);
			this.delayLine = new DelayLine(this.sampleRate, options.channelCount || 2);
		}

		static get parameterDescriptors() {
			return [{
				name: "delayTime",
				defaultValue: 0.1,
				minValue: 0,
				maxValue: 1,
				automationRate: "k-rate"
			}, {
				name: "feedback",
				defaultValue: 0.5,
				minValue: 0,
				maxValue: 0.9999,
				automationRate: "k-rate"
			}];
		}

		generate(input, channel, parameters) {
			const delayedSample = this.delayLine.get(channel, parameters.delayTime * this.sampleRate);
			this.delayLine.push(channel, input + delayedSample * parameters.feedback);
			return delayedSample;
		}
	}
`;nd(CD,Mk);var rd=class t extends pr{constructor(){super(b(t.getDefaults(),arguments,["urls","onload","baseUrl"],"urls")),this.name="Sampler",this._activeSources=new Map;let e=b(t.getDefaults(),arguments,["urls","onload","baseUrl"],"urls"),n={};Object.keys(e.urls).forEach(r=>{let o=parseInt(r,10);if(te(hc(r)||qt(o)&&isFinite(o),`url key is neither a note or midi pitch: ${r}`),hc(r)){let i=new pn(this.context,r).toMidi();n[i]=e.urls[r]}else qt(o)&&isFinite(o)&&(n[o]=e.urls[o])}),this._buffers=new Vs({urls:n,onload:e.onload,baseUrl:e.baseUrl,onerror:e.onerror}),this.attack=e.attack,this.release=e.release,this.curve=e.curve,this._buffers.loaded&&Promise.resolve().then(e.onload)}static getDefaults(){return Object.assign(pr.getDefaults(),{attack:0,baseUrl:"",curve:"exponential",onload:ce,onerror:ce,release:.1,urls:{}})}_findClosest(e){let r=0;for(;r<96;){if(this._buffers.has(e+r))return-r;if(this._buffers.has(e-r))return r;r++}throw new Error(`No available buffers for note: ${e}`)}triggerAttack(e,n,r=1){return this.log("triggerAttack",e,n,r),Array.isArray(e)||(e=[e]),e.forEach(o=>{let i=Im(new pn(this.context,o).toFrequency()),s=Math.round(i),a=i-s,c=this._findClosest(s),u=s-c,l=this._buffers.get(u),d=ri(c+a),h=new Qr({url:l,context:this.context,curve:this.curve,fadeIn:this.attack,fadeOut:this.release,playbackRate:d}).connect(this.output);h.start(n,0,l.duration/d,r),vt(this._activeSources.get(s))||this._activeSources.set(s,[]),this._activeSources.get(s).push(h),h.onended=()=>{if(this._activeSources&&this._activeSources.has(s)){let p=this._activeSources.get(s),y=p.indexOf(h);y!==-1&&p.splice(y,1)}}}),this}triggerRelease(e,n){return this.log("triggerRelease",e,n),Array.isArray(e)||(e=[e]),e.forEach(r=>{let o=new pn(this.context,r).toMidi();if(this._activeSources.has(o)&&this._activeSources.get(o).length){let i=this._activeSources.get(o);n=this.toSeconds(n),i.forEach(s=>{s.stop(n)}),this._activeSources.set(o,[])}}),this}releaseAll(e){let n=this.toSeconds(e);return this._activeSources.forEach(r=>{for(;r.length;)r.shift().stop(n)}),this}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",1)),this}triggerAttackRelease(e,n,r,o=1){let i=this.toSeconds(r);return this.triggerAttack(e,i,o),vt(n)?(te(vt(e),"notes must be an array when duration is array"),e.forEach((s,a)=>{let c=n[Math.min(a,n.length-1)];this.triggerRelease(s,i+this.toSeconds(c))})):this.triggerRelease(e,i+this.toSeconds(n)),this}add(e,n,r){if(te(hc(e)||isFinite(e),`note must be a pitch or midi: ${e}`),hc(e)){let o=new pn(this.context,e).toMidi();this._buffers.add(o,n,r)}else this._buffers.add(e,n,r);return this}get loaded(){return this._buffers.loaded}dispose(){return super.dispose(),this._buffers.dispose(),this._activeSources.forEach(e=>{e.forEach(n=>n.dispose())}),this._activeSources.clear(),this}};Ht([gn(0)],rd.prototype,"attack",void 0);Ht([gn(0)],rd.prototype,"release",void 0);var Hs=class t extends nt{constructor(){super(b(t.getDefaults(),arguments,["callback","value"])),this.name="ToneEvent",this._state=new dr("stopped"),this._startOffset=0;let e=b(t.getDefaults(),arguments,["callback","value"]);this._loop=e.loop,this.callback=e.callback,this.value=e.value,this._loopStart=this.toTicks(e.loopStart),this._loopEnd=this.toTicks(e.loopEnd),this._playbackRate=e.playbackRate,this._probability=e.probability,this._humanize=e.humanize,this.mute=e.mute,this._playbackRate=e.playbackRate,this._state.increasing=!0,this._rescheduleEvents()}static getDefaults(){return Object.assign(nt.getDefaults(),{callback:ce,humanize:!1,loop:!1,loopEnd:"1m",loopStart:0,mute:!1,playbackRate:1,probability:1,value:null})}_rescheduleEvents(e=-1){this._state.forEachFrom(e,n=>{let r;if(n.state==="started"){n.id!==-1&&this.context.transport.clear(n.id);let o=n.time+Math.round(this.startOffset/this._playbackRate);if(this._loop===!0||qt(this._loop)&&this._loop>1){r=1/0,qt(this._loop)&&(r=this._loop*this._getLoopDuration());let i=this._state.getAfter(o);i!==null&&(r=Math.min(r,i.time-o)),r!==1/0&&(this._state.setStateAtTime("stopped",o+r+1,{id:-1}),r=new dt(this.context,r));let s=new dt(this.context,this._getLoopDuration());n.id=this.context.transport.scheduleRepeat(this._tick.bind(this),s,new dt(this.context,o),r)}else n.id=this.context.transport.schedule(this._tick.bind(this),new dt(this.context,o))}})}get state(){return this._state.getValueAtTime(this.context.transport.ticks)}get startOffset(){return this._startOffset}set startOffset(e){this._startOffset=e}get probability(){return this._probability}set probability(e){this._probability=e}get humanize(){return this._humanize}set humanize(e){this._humanize=e}start(e){let n=this.toTicks(e);return this._state.getValueAtTime(n)==="stopped"&&(this._state.add({id:-1,state:"started",time:n}),this._rescheduleEvents(n)),this}stop(e){this.cancel(e);let n=this.toTicks(e);if(this._state.getValueAtTime(n)==="started"){this._state.setStateAtTime("stopped",n,{id:-1});let r=this._state.getBefore(n),o=n;r!==null&&(o=r.time),this._rescheduleEvents(o)}return this}cancel(e){e=hn(e,-1/0);let n=this.toTicks(e);return this._state.forEachFrom(n,r=>{this.context.transport.clear(r.id)}),this._state.cancel(n),this}_tick(e){let n=this.context.transport.getTicksAtTime(e);if(!this.mute&&this._state.getValueAtTime(n)==="started"){if(this.probability<1&&Math.random()>this.probability)return;if(this.humanize){let r=.02;Pl(this.humanize)||(r=this.toSeconds(this.humanize)),e+=(Math.random()*2-1)*r}this.callback(e,this.value)}}_getLoopDuration(){return Math.round((this._loopEnd-this._loopStart)/this._playbackRate)}get loop(){return this._loop}set loop(e){this._loop=e,this._rescheduleEvents()}get playbackRate(){return this._playbackRate}set playbackRate(e){this._playbackRate=e,this._rescheduleEvents()}get loopEnd(){return new dt(this.context,this._loopEnd).toSeconds()}set loopEnd(e){this._loopEnd=this.toTicks(e),this._loop&&this._rescheduleEvents()}get loopStart(){return new dt(this.context,this._loopStart).toSeconds()}set loopStart(e){this._loopStart=this.toTicks(e),this._loop&&this._rescheduleEvents()}get progress(){if(this._loop){let e=this.context.transport.ticks,n=this._state.get(e);if(n!==null&&n.state==="started"){let r=this._getLoopDuration();return(e-n.time)%r/r}else return 0}else return 0}dispose(){return super.dispose(),this.cancel(),this._state.dispose(),this}};var xc=class t extends nt{constructor(){super(b(t.getDefaults(),arguments,["callback","interval"])),this.name="Loop";let e=b(t.getDefaults(),arguments,["callback","interval"]);this._event=new Hs({context:this.context,callback:this._tick.bind(this),loop:!0,loopEnd:e.interval,playbackRate:e.playbackRate,probability:e.probability}),this.callback=e.callback,this.iterations=e.iterations}static getDefaults(){return Object.assign(nt.getDefaults(),{interval:"4n",callback:ce,playbackRate:1,iterations:1/0,probability:1,mute:!1,humanize:!1})}start(e){return this._event.start(e),this}stop(e){return this._event.stop(e),this}cancel(e){return this._event.cancel(e),this}_tick(e){this.callback(e)}get state(){return this._event.state}get progress(){return this._event.progress}get interval(){return this._event.loopEnd}set interval(e){this._event.loopEnd=e}get playbackRate(){return this._event.playbackRate}set playbackRate(e){this._event.playbackRate=e}get humanize(){return this._event.humanize}set humanize(e){this._event.humanize=e}get probability(){return this._event.probability}set probability(e){this._event.probability=e}get mute(){return this._event.mute}set mute(e){this._event.mute=e}get iterations(){return this._event.loop===!0?1/0:this._event.loop}set iterations(e){e===1/0?this._event.loop=!0:this._event.loop=e}dispose(){return super.dispose(),this._event.dispose(),this}};var wc=class t extends ${constructor(){super(Object.assign(b(t.getDefaults(),arguments,["pan"]))),this.name="Panner",this._panner=this.context.createStereoPanner(),this.input=this._panner,this.output=this._panner;let e=b(t.getDefaults(),arguments,["pan"]);this.pan=new ve({context:this.context,param:this._panner.pan,value:e.pan,minValue:-1,maxValue:1}),this._panner.channelCount=e.channelCount,this._panner.channelCountMode="explicit",Z(this,"pan")}static getDefaults(){return Object.assign($.getDefaults(),{pan:0,channelCount:1})}dispose(){return super.dispose(),this._panner.disconnect(),this.pan.dispose(),this}};var ED="bit-crusher",Vk=`
	class BitCrusherWorklet extends SingleIOProcessor {

		static get parameterDescriptors() {
			return [{
				name: "bits",
				defaultValue: 12,
				minValue: 1,
				maxValue: 16,
				automationRate: 'k-rate'
			}];
		}

		generate(input, _channel, parameters) {
			const step = Math.pow(0.5, parameters.bits - 1);
			const val = step * Math.floor(input / step + 0.5);
			return val;
		}
	}
`;nd(ED,Vk);var Dbe=[1557/44100,1617/44100,1491/44100,1422/44100,1277/44100,1356/44100,1188/44100,1116/44100];var Obe=[1687/25e3,1601/25e3,2053/25e3,2251/25e3];var Ws=class t extends ${constructor(){super(b(t.getDefaults(),arguments,["solo"])),this.name="Solo";let e=b(t.getDefaults(),arguments,["solo"]);this.input=this.output=new ne({context:this.context}),t._allSolos.has(this.context)||t._allSolos.set(this.context,new Set),t._allSolos.get(this.context).add(this),this.solo=e.solo}static getDefaults(){return Object.assign($.getDefaults(),{solo:!1})}get solo(){return this._isSoloed()}set solo(e){e?this._addSolo():this._removeSolo(),t._allSolos.get(this.context).forEach(n=>n._updateSolo())}get muted(){return this.input.gain.value===0}_addSolo(){t._soloed.has(this.context)||t._soloed.set(this.context,new Set),t._soloed.get(this.context).add(this)}_removeSolo(){t._soloed.has(this.context)&&t._soloed.get(this.context).delete(this)}_isSoloed(){return t._soloed.has(this.context)&&t._soloed.get(this.context).has(this)}_noSolos(){return!t._soloed.has(this.context)||t._soloed.has(this.context)&&t._soloed.get(this.context).size===0}_updateSolo(){this._isSoloed()?this.input.gain.value=1:this._noSolos()?this.input.gain.value=1:this.input.gain.value=0}dispose(){return super.dispose(),t._allSolos.get(this.context).delete(this),this._removeSolo(),this}};Ws._allSolos=new Map;Ws._soloed=new Map;var ad=class t extends ${constructor(){super(b(t.getDefaults(),arguments,["pan","volume"])),this.name="PanVol";let e=b(t.getDefaults(),arguments,["pan","volume"]);this._panner=this.input=new wc({context:this.context,pan:e.pan,channelCount:e.channelCount}),this.pan=this._panner.pan,this._volume=this.output=new Wn({context:this.context,volume:e.volume}),this.volume=this._volume.volume,this._panner.connect(this._volume),this.mute=e.mute,Z(this,["pan","volume"])}static getDefaults(){return Object.assign($.getDefaults(),{mute:!1,pan:0,volume:0,channelCount:1})}get mute(){return this._volume.mute}set mute(e){this._volume.mute=e}dispose(){return super.dispose(),this._panner.dispose(),this.pan.dispose(),this._volume.dispose(),this.volume.dispose(),this}};var Vm=class t extends ${constructor(){super(b(t.getDefaults(),arguments,["volume","pan"])),this.name="Channel";let e=b(t.getDefaults(),arguments,["volume","pan"]);this._solo=this.input=new Ws({solo:e.solo,context:this.context}),this._panVol=this.output=new ad({context:this.context,pan:e.pan,volume:e.volume,mute:e.mute,channelCount:e.channelCount}),this.pan=this._panVol.pan,this.volume=this._panVol.volume,this._solo.connect(this._panVol),Z(this,["pan","volume"])}static getDefaults(){return Object.assign($.getDefaults(),{pan:0,volume:0,mute:!1,solo:!1,channelCount:1})}get solo(){return this._solo.solo}set solo(e){this._solo.solo=e}get muted(){return this._solo.muted||this.mute}get mute(){return this._panVol.mute}set mute(e){this._panVol.mute=e}_getBus(e){return t.buses.has(e)||t.buses.set(e,new ne({context:this.context})),t.buses.get(e)}send(e,n=0){let r=this._getBus(e),o=new ne({context:this.context,units:"decibels",gain:n});return this.connect(o),o.connect(r),o}receive(e){return this._getBus(e).connect(this),this}dispose(){return super.dispose(),this._panVol.dispose(),this.pan.dispose(),this.volume.dispose(),this._solo.dispose(),this}};Vm.buses=new Map;var Lm=class extends ${constructor(){super(...arguments),this.name="Listener",this.positionX=new ve({context:this.context,param:this.context.rawContext.listener.positionX}),this.positionY=new ve({context:this.context,param:this.context.rawContext.listener.positionY}),this.positionZ=new ve({context:this.context,param:this.context.rawContext.listener.positionZ}),this.forwardX=new ve({context:this.context,param:this.context.rawContext.listener.forwardX}),this.forwardY=new ve({context:this.context,param:this.context.rawContext.listener.forwardY}),this.forwardZ=new ve({context:this.context,param:this.context.rawContext.listener.forwardZ}),this.upX=new ve({context:this.context,param:this.context.rawContext.listener.upX}),this.upY=new ve({context:this.context,param:this.context.rawContext.listener.upY}),this.upZ=new ve({context:this.context,param:this.context.rawContext.listener.upZ})}static getDefaults(){return Object.assign($.getDefaults(),{positionX:0,positionY:0,positionZ:0,forwardX:0,forwardY:0,forwardZ:-1,upX:0,upY:1,upZ:0})}dispose(){return super.dispose(),this.positionX.dispose(),this.positionY.dispose(),this.positionZ.dispose(),this.forwardX.dispose(),this.forwardY.dispose(),this.forwardZ.dispose(),this.upX.dispose(),this.upY.dispose(),this.upZ.dispose(),this}};To(t=>{t.listener=new Lm({context:t})});So(t=>{t.listener.dispose()});var yn=lt().transport;var xSe=lt().destination,wSe=lt().destination;var bSe=lt().listener;var SD=lt().draw;var CSe=lt();function cd(){return Zt.loaded()}var ht=class t{constructor(e=lr(0)){this._toneTime=e}static fromValue(e){return new this(lr(e))}static fromTransport(e){return new this(lr(e.position))}static fromFields(e){return t.fromValue(AD(e))}add(e){let n=this.toBarsBeatsSixteenthsFields(),r=e.toBarsBeatsSixteenthsFields(),o={bars:n.bars+r.bars,beats:n.beats+r.beats,sixteenths:n.sixteenths+r.sixteenths};return t.fromFields(o)}dividedIn(e){let n=this.toBarsBeatsSixteenthsFields(),r={bars:n.bars/e,beats:n.beats/e,sixteenths:n.sixteenths/e};return t.fromFields(r)}relativeTo(e){return new t(lr(this.toSeconds()-e.toSeconds(),"s"))}compareTo(e){return this.toSeconds()-e.toSeconds()}isBefore(e){return this.compareTo(e)<0}isBeforeOrEquals(e){return this.compareTo(e)<=0}isAfterOrEquals(e){return this.compareTo(e)>=0}toBarsBeatsSixteenths(){return this._toneTime.toBarsBeatsSixteenths()}toBars(){return this.toBarsBeatsSixteenthsFields().bars}toBarsBeatsSixteenthsFields(){let e=this._toneTime.toBarsBeatsSixteenths().split(":");return{bars:+e[0],beats:+e[1],sixteenths:+e[2]}}toAbletonLiveBarsBeatsSixteenths(){let e=this.toBarsBeatsSixteenthsFields();return++e.bars,++e.beats,e.sixteenths=Math.floor(e.sixteenths)+1,AD(e,".")}toAbletonLiveBeatTime(){let e=this.toBarsBeatsSixteenthsFields(),n=e.bars,r=e.beats,o=Math.floor(e.sixteenths);return n*4+r+o/4}toSeconds(){return this._toneTime.toSeconds()}toString(){return this.toBarsBeatsSixteenths()}mod(e){let n=this.toBarsBeatsSixteenthsFields();return n.bars=n.bars%e,t.fromFields(n)}},ID=ht.fromValue("1m");function AD(t,e=":"){return`${t.bars}${e}${t.beats}${e}${t.sixteenths}`}var ud=class{constructor(e,n,r,o,i=e.duration.toBars()){this.pattern=e,this.structure=n,this.startTime=r,this.eventsStartTime=o,this.eventsDurationInBars=i,this.endTime=r.add(e.duration)}get initial(){return this.pattern.initial??this.pattern.name.charAt(0)}getChordAt(e){let n=e.relativeTo(this.startTime);return this.pattern.chords?.getChordAt(n)}};var Bm=class{stuctureObject(e){return this._stuctureObject=e,this}patterns(e){return this._patterns=e,this}getEventsStartTime(e){return this._getEventsStartTime=e,this}getEventsDurationInBars(e){return this._getEventsDurationInBars=e,this}build(){if(!this._stuctureObject)throw new Error("Missing stuctureObject");if(!this._patterns)throw new Error("Missing patterns");if(!this._getEventsStartTime)throw new Error("Missing getEventsStartTime");if(!this._getEventsDurationInBars)throw new Error("Missing getEventsDurationInBars");return new bc(ht.fromValue(this._stuctureObject.sampleDuration),this._patterns,this._getEventsStartTime,this._getEventsDurationInBars)}},bc=class{constructor(e,n,r,o){this.duration=e,this.startTimes=[],this.patternsInStructure=[];let i=new ht;for(let s of n)this.patternsInStructure.push(new ud(s,this,i,r(s),o(s))),i=i.add(s.duration);i.toSeconds()!==e.toSeconds()&&console.warn("currentTime != duration",i.toSeconds(),e.toSeconds())}getPatternInStructureAt(e){let n=this.patternsInStructure[0];if(!e.isBefore(n.startTime)){for(let r of this.patternsInStructure)if(e.isBeforeOrEquals(r.endTime))return r}}static builder(){return new Bm}};var ld=["C","C#","D","Eb","E","F","F#","G","Ab","A","Bb","B"],ui=class{constructor(e){let n=e%12;this.value=n>=0?n:n+12}static getValueFromName(e,n){let r=n.indexOf(e);if(r===-1)throw new Error("invalid name : "+e);return r}equals(e){return this.value===e.value}},$t=class t extends ui{constructor(e){super(e)}static fromName(e){return new t(ui.getValueFromName(e,ld))}next(e){return new t(this.value+e)}get name(){return ld[this.value]}is(e){return this.value===e.value}degreeIn(e){return new Um(this.value-e.note.value)}modeIn(e){return new Cc(e.mode.value+this.value-e.note.value)}toString(){return ld[this.value]}};(function(t){t.C=t.fromName("C"),t.Cs=t.fromName("C#"),t.D=t.fromName("D"),t.Eb=t.fromName("Eb"),t.E=t.fromName("E"),t.F=t.fromName("F"),t.Fs=t.fromName("F#"),t.G=t.fromName("G"),t.Ab=t.fromName("Ab"),t.A=t.fromName("A"),t.Bb=t.fromName("Bb"),t.B=t.fromName("B")})($t||($t={}));var MD=["I","bii","ii","biii","iii","IV","bV","V","bvi","vi","bvii","vii"],Cc=class extends ui{constructor(e){super(e)}static fromName(e){return new $t(ui.getValueFromName(e,MD))}get name(){return MD[this.value]}},Gs=class{constructor(e,n){this.note=e,this.mode=n}},Um=class extends ui{constructor(e){super(e)}},Dc=class t{constructor(e,n){this.name=e,this.root=t.getRootFromName(e)}static getRootFromName(e){if(ld.includes(e))return $t.fromName(e);switch(e){case"Gm":return $t.G}throw new Error("Cannot find root from "+e)}toString(){return this.name}};(function(t){t.Gm=new t("Gm",$t.G)})(Dc||(Dc={}));var dd=class t{constructor(e,n,r=[]){this.asciiChords=e,this.duration=n,this.chordsByTime=r}static fromAsciiChords(e){let n=e.split("|").slice(1,-1).map(i=>i.trim());if(n.length===0)throw new Error("Cannot find bars in AsciiChords : "+e);let r=[],o=ht.fromValue(0);return n.forEach(i=>{let s=i.split(" "),a=ID.dividedIn(s.length);s.forEach(c=>{let u=new Dc(c);r.push([o,u]),o=o.add(a)})}),new t(e,ht.fromValue(`${n.length}m`),r)}setChordAt(e,n){this.chordsByTime.push([e,n])}getChordAt(e){return[...this.chordsByTime].reverse().find(([o])=>o.isBeforeOrEquals(e))?.[1]}get length(){return this.chordsByTime.length}toString(){return this.chordsByTime.map(([e,n])=>`${e.toBarsBeatsSixteenths()} ${n}`).join(`
`)}toAscii(){return this.asciiChords}};var mr=class t{constructor(e,n,r,o,i,s){this.name=e,this.duration=n,this.initial=r,this.key=o,this.chords=i,this.events=s}static fromData(e){let n=e.chords?dd.fromAsciiChords(e.chords):void 0,r=o=>{if(!o)throw new Error("Missing duration");return o.duration};return new t(e.name,e.duration?new ht(lr(e.duration)):r(n),e.initial,e.key,n,e.events)}};var Y=class{constructor(e,n){this.secTime=e,this.beatTime=n}};var hd=class t{constructor(e,n){this.strings=e,this.lines=n}static create(e){let{startingNote:n,stringInterval:r,stringsCount:o,lowestFret:i,fretsCount:s}=e,a=this.buildStrings(n,r,o),u=[...Array(s).keys()].map(l=>i+l).map(l=>qm.create(a,l));return new t(a,u)}static buildStrings(e,n,r){return[...Array(r).keys()].map(i=>e.next(i*n.value))}},qm=class t{constructor(e,n){this.fret=e,this.notes=n}static create(e,n){let r=e.map(o=>new $m(o,n));return new t(n,r)}},$m=class extends $t{constructor(e,n){super(e.value+n),this.string=e,this.fret=n}};function Hk(t,e){if(t&1&&(Ze(0,"div"),jt(1),Qe()),t&2){let n=e.$implicit,r=ye().$implicit,o=ye();Dr("active",o.currentNote==null?null:o.currentNote.equals(n)),Gi("data-fret",r.fret)("data-string",n.string.name)("data-note",n.value)("data-degree",o.key&&n.degreeIn(o.key).value)("data-mode",o.key&&n.modeIn(o.key).name)("title",o.key&&"Mode : "+n.modeIn(o.key).name+`
Degr\xE9 : +`+n.degreeIn(o.key).value+"/12"),Ne(1),Sn(" ",n.name," ")}}function Wk(t,e){if(t&1&&(Vt(0),Ze(1,"div",1),jt(2),Qe(),ot(3,Hk,2,9,"div",2),Lt()),t&2){let n=e.$implicit;Ne(1),Gi("data-fret",n.fret),Ne(1),Sn(" ",n.fret==12?"":n.fret," "),Ne(1),Te("ngForOf",n.notes)}}var ND=(()=>{let e=class e{constructor(){this.lowestFret=0,this.startingNote=$t.fromName("E"),this.stringInterval=new $t(5),this.stringsCount=4,this.fretsCount=5,this.key=new Gs($t.fromName("C"),Cc.fromName("I"))}ngOnInit(){this.buildFretboard()}buildFretboard(){this.fretboard=hd.create({startingNote:this.startingNote,stringInterval:this.stringInterval,stringsCount:this.stringsCount,lowestFret:this.lowestFret,fretsCount:this.fretsCount})}ngOnChanges(r){this.buildFretboard()}};e.\u0275fac=function(o){return new(o||e)},e.\u0275cmp=et({type:e,selectors:[["app-fretboard"]],inputs:{lowestFret:"lowestFret",fretsCount:"fretsCount",key:"key",currentNote:"currentNote"},standalone:!0,features:[qo,ct],decls:1,vars:1,consts:[[4,"ngFor","ngForOf"],[1,"fret-mark"],[3,"active",4,"ngFor","ngForOf"]],template:function(o,i){o&1&&ot(0,Wk,4,3,"ng-container",0),o&2&&Te("ngForOf",i.fretboard==null?null:i.fretboard.lines)},dependencies:[Nt,Ln],styles:['@charset "UTF-8";.viewport[_ngcontent-%COMP%]{display:inline-block}[_nghost-%COMP%]{background:#000;display:inline-grid;grid-template-columns:auto repeat(4,1fr);gap:2mm;padding:2mm;margin:2mm}[data-fret][_ngcontent-%COMP%]{flex:1 1 auto;height:2cm;width:2cm;line-height:2cm;box-sizing:border-box}[data-note][_ngcontent-%COMP%]{background:var(--disabled-color);color:var(--disabled-color);border-radius:.1em}[data-note][data-fret="0"][_ngcontent-%COMP%]{border-top-left-radius:100%;border-top-right-radius:100%}[data-note][_ngcontent-%COMP%]:hover, [data-note].active[_ngcontent-%COMP%]{color:#fff;text-shadow:0 0 1ex #000;border:solid 1pt #fff}.fret-mark[_ngcontent-%COMP%]{color:#444;font-size:5mm;text-align:right;width:1cm;text-wrap:nowrap}.fret-mark[data-fret="3"][_ngcontent-%COMP%], .fret-mark[data-fret="5"][_ngcontent-%COMP%], .fret-mark[data-fret="7"][_ngcontent-%COMP%], .fret-mark[data-fret="9"][_ngcontent-%COMP%], .fret-mark[data-fret="12"][_ngcontent-%COMP%], .fret-mark[data-fret="15"][_ngcontent-%COMP%]{color:#fff}.fret-mark[data-fret="3"][_ngcontent-%COMP%]:before, .fret-mark[data-fret="5"][_ngcontent-%COMP%]:before, .fret-mark[data-fret="7"][_ngcontent-%COMP%]:before, .fret-mark[data-fret="9"][_ngcontent-%COMP%]:before, .fret-mark[data-fret="12"][_ngcontent-%COMP%]:before, .fret-mark[data-fret="15"][_ngcontent-%COMP%]:before{content:"\\2b24";margin-right:1ex}.fret-mark[data-fret="12"][_ngcontent-%COMP%]:before{content:"\\2b24\\2b24"}[data-mode=vi][_ngcontent-%COMP%]{background:var(--vi-color);color:var(--vi-color);border-color:var(--vi-color)}[data-mode=ii][_ngcontent-%COMP%]{background:var(--ii-color);color:var(--ii-color);border-color:var(--ii-color)}[data-mode=iii][_ngcontent-%COMP%]{background:var(--iii-color);color:var(--iii-color);border-color:var(--iii-color)}[data-mode=vii][_ngcontent-%COMP%]{background:var(--vii-color);color:var(--vii-color);border-color:var(--vii-color)}[data-mode=IV][_ngcontent-%COMP%]{background:var(--IV-color);color:var(--IV-color);border-color:var(--IV-color)}[data-mode=V][_ngcontent-%COMP%]{background:var(--V-color);color:var(--V-color);border-color:var(--V-color)}[data-mode=I][_ngcontent-%COMP%]{background:var(--I-color);color:var(--I-color);border-color:var(--I-color)}[data-degree="0"][_ngcontent-%COMP%]{color:#fff4;font-weight:700}']});let t=e;return t})();function Gk(t,e){if(t&1){let n=ln();Vt(0),Ze(1,"input",1),it("change",function(o){At(n);let i=ye();return It(i.uploadFile(o))}),Qe(),bt(2,"br"),Lt()}}function zk(t,e){if(t&1){let n=ln();Ze(0,"button",3),it("click",function(){At(n);let o=ye(2);return It(o.playSong())}),jt(1,"\u23F5"),Qe()}}function Yk(t,e){if(t&1){let n=ln();Ze(0,"button",3),it("click",function(){At(n);let o=ye(2);return It(o.pauseSong())}),jt(1,"\u23F8"),Qe()}}function Zk(t,e){if(t&1&&(Vt(0),jt(1),Lt()),t&2){let n=e.$implicit;Ne(1),Sn(" ",n.toAscii()," ")}}function Qk(t,e){if(t&1&&(Vt(0),jt(1),Lt()),t&2){let n=ye(3);Ne(1),Sn(" ",n.currentPatternInStructure.pattern.duration.toBars(),"m ")}}function Kk(t,e){if(t&1){let n=ln();Ze(0,"app-rythm-bar",9),it("addEvent",function(o){At(n);let i=ye(5);return It(i.addEvent(o))})("removeEvent",function(o){At(n);let i=ye(5);return It(i.removeEvent(o))}),Qe()}if(t&2){let n=ye().$implicit,r=ye(4);Te("number",n)("events",r.currentPatternInStructure.pattern.events)("timecode",r.rythmBarTimecode)}}function Xk(t,e){if(t&1&&(Vt(0),ot(1,Kk,1,3,"app-rythm-bar",8),bt(2,"br"),Lt()),t&2){let n=ye(4);Ne(1),Te("ngIf",n.currentPatternInStructure.pattern.events==null?null:n.currentPatternInStructure.pattern.events.length)}}function Jk(t,e){if(t&1&&(Vt(0),ot(1,Xk,3,1,"ng-container",7),Lt()),t&2){let n=ye(3);Ne(1),Te("ngForOf",n.sequence(n.currentPatternInStructure.eventsDurationInBars,n.currentPatternInStructure.eventsStartTime.toBars()+1))}}function eP(t,e){if(t&1&&(Vt(0),jt(1),bt(2,"br"),jt(3),bt(4,"br"),ot(5,Zk,2,1,"ng-container",0)(6,Qk,2,1,"ng-container",0),bt(7,"br")(8,"app-fretboard",6),ot(9,Jk,2,1,"ng-container",0),Lt()),t&2){let n=ye(2);Ne(1),Sn(" ",n.currentPatternInStructure.pattern.name,""),Ne(2),Sn(" ",n.currentPatternInStructureRelativeTimecode,""),Ne(2),Te("ngIf",n.currentPatternInStructure.pattern.chords),Ne(1),Te("ngIf",!n.currentPatternInStructure.pattern.chords),Ne(2),Te("lowestFret",0)("fretsCount",7)("key",n.currentPatternInStructure.pattern.key)("currentNote",n.currentChord==null?null:n.currentChord.root),Ne(1),Te("ngIf",n.currentPatternInStructure.eventsStartTime)}}function tP(t,e){if(t&1){let n=ln();Vt(0),jt(1),ot(2,zk,2,0,"button",2)(3,Yk,2,0,"button",2),Ze(4,"button",3),it("click",function(){At(n);let o=ye();return It(o.stopSong())}),jt(5,"\u23F9"),Qe(),bt(6,"br"),Ze(7,"input",4),it("change",function(o){At(n);let i=ye();return It(i.setProgress(o))}),Qe(),bt(8,"br"),jt(9," Gm "),Ze(10,"app-structure",5),it("clickPatternInStructure",function(o){At(n);let i=ye();return It(i.onClickPatternInStructure(o))}),Qe(),bt(11,"br"),ot(12,eP,10,9,"ng-container",0),Lt()}if(t&2){let n=ye();Ne(1),Sn(" ",n.timecode," "),Ne(1),Te("ngIf",!n.playing),Ne(1),Te("ngIf",n.playing),Ne(4),Te("value",n.progress),Ne(3),Te("structure",n.structure)("currentPatternInStructure",n.currentPatternInStructure),Ne(2),Te("ngIf",n.currentPatternInStructure)}}var vn=[new Y(0,-1.1762159715284715),new Y(.6474583333333334,0),new Y(2.5494791666666665,4),new Y(4.533229166666667,8),new Y(6.414729166666667,12),new Y(8.447458333333334,16),new Y(8.623416666666666,16.323610764235763),new Y(10.798354166666666,20.323610764235763),new Y(12.963208333333332,24.323610764235763),new Y(15.102354166666666,28.323610764235763),new Y(19.361729166666667,36.32361076423577),new Y(21.5016875,40.32361076423577),new Y(23.657645833333333,44.32361076423577),new Y(25.796,48.32361076423577),new Y(30.123145833333332,56.32361076423577),new Y(32.3084375,60.32361076423577),new Y(36.767270833333335,68.32361076423577),new Y(38.93233333333333,72.32361076423577),new Y(41.07664583333333,76.32361076423577),new Y(45.41322916666667,84.32361076423577),new Y(47.56552083333333,88.32361076423577),new Y(49.75370833333333,92.32361076423577),new Y(54.171625,100.32361076423577),new Y(56.36841666666666,104.32361076423577),new Y(58.552125,108.32361076423577),new Y(60.758874999999996,112.32361076423577),new Y(62.94252083333333,116.32361076423577),new Y(65.11383333333333,120.32361076423577),new Y(69.3805,128.32361076423575),new Y(71.57797916666667,132.32361076423575),new Y(73.79679166666666,136.32361076423575),new Y(76.00502083333333,140.32361076423575),new Y(78.20058333333333,144.32361076423575),new Y(80.44814583333333,148.32361076423575),new Y(82.71722916666667,152.32361076423575),new Y(84.971625,156.32361076423575),new Y(89.40552083333333,164.32361076423575),new Y(91.63077083333333,168.32361076423575),new Y(96.12441666666666,176.32361076423575),new Y(98.34041666666667,180.32361076423575),new Y(100.53739583333333,184.32361076423575),new Y(102.71122916666667,188.32361076423575),new Y(104.869875,192.32361076423575),new Y(107.0630625,196.32361076423575),new Y(111.51870833333334,204.32361076423575),new Y(115.91847916666666,212.32361076423575),new Y(118.13981249999999,216.32361076423575),new Y(120.3725625,220.32361076423575),new Y(122.5775625,224.32361076423575),new Y(124.79789583333333,228.32361076423575),new Y(129.27608333333333,236.32361076423575),new Y(135.8514375,248.32361076423575),new Y(138.0909375,252.32361076423575),new Y(140.3044375,256.32361076423575),new Y(144.69927083333332,264.32361076423575),new Y(146.91591666666667,268.32361076423575),new Y(149.09029166666667,272.32361076423575),new Y(151.29185416666667,276.32361076423575),new Y(155.75666666666666,284.32361076423575),new Y(164.63647916666667,300.32361076423575),new Y(169.0448125,308.32361076423575),new Y(171.278875,312.32361076423575),new Y(173.54152083333332,316.32361076423575),new Y(175.77772916666666,320.32361076423575),new Y(177.99827083333332,324.32361076423575),new Y(182.51258333333334,332.32361076423575),new Y(184.74072916666665,336.32361076423575),new Y(186.95395833333333,340.32361076423575),new Y(189.1530833333333,344.32361076423575),new Y(191.3145625,348.32361076423575),new Y(193.45008333333334,352.32361076423575),new Y(195.61702083333333,356.32361076423575),new Y(197.8255,360.32361076423575),new Y(197.84312565104167,360.35486076423575),new Y(208,380)],OD=(()=>{let e=class e{constructor(r){this.changeDetectorRef=r,this.events=cs.fromEach(vo),this.progress=0,this.sequence=yo,yn.schedule(function(o){console.log("Premi\xE8re mesure")},"1m")}addEvent(r){this.events.push(r),this.logEvents(),this.changeDetectorRef.detectChanges()}removeEvent(r){this.events.splice(this.events.indexOf(r),1),this.logEvents(),this.changeDetectorRef.detectChanges()}logEvents(){console.log(this.events)}uploadFile(r){return ee(this,null,function*(){let i=r.currentTarget.files;if(!i?.length)return;let s=i[0];console.log("audioFile",s);let a=URL.createObjectURL(s),c=new ai({url:a}).toDestination();yield cd();let u=new Gs(new $t(7),new $t(9)),l=mr.fromData({name:"D\xE9but bombarde (G \xE0 4.4)",initial:"B0",key:u,duration:"4m"}),d=mr.fromData({name:"Partie bombarde",initial:"B",key:u,chords:"| Gm F | Eb D | Gm F | Eb D Gm Gm |",events:vo.filter(R=>R.bar>=1||R.bar<=2)}),h=mr.fromData({name:"Bombarde seule",initial:"B*1",duration:"1m",key:u}),p=mr.fromData({name:"Retour groupe",initial:"B*2",chords:"| Eb D |",key:u,events:vo.filter(R=>R.bar==2)}),y=mr.fromData({name:"1/2 Partie bombarde",initial:"B*34",key:u,chords:"| Gm F | Eb D Gm Gm |",events:vo.filter(R=>R.bar>=1||R.bar<=2)}),v=mr.fromData({name:"Couplet",key:u,chords:"| Gm F | Eb D | Gm F | Eb D Gm Gm |",events:vo.filter(R=>R.bar>=3||R.bar<=4)}),_=mr.fromData({name:"Couplet (Bb)",initial:"C'",key:u,chords:"| Gm F | Eb Bb | Gm F | Eb D Gm Gm |",events:vo.filter(R=>R.bar>=3||R.bar<=4)}),x=mr.fromData({name:"Refrain",duration:"4m",key:u,chords:"| Bb | F | C | Gm |",events:vo.filter(R=>R.bar>=5)}),I=[l,d,d],A=[d,d],L=[h,p,y,d],T=[v,_],E=[x,x],w=bc.builder().stuctureObject(Xx).patterns([...I,...T,...A,...T,...E,...L,...T,...A,...T,...E,...L]).getEventsStartTime(R=>{if(R===d)return ht.fromValue("0:0");if(R===y)return ht.fromValue("0:0");if(R===p)return ht.fromValue("1:0");if(R===v)return ht.fromValue("2:0");if(R===_)return ht.fromValue("2:0");if(R===x)return ht.fromValue("4:0")}).getEventsDurationInBars(R=>{if(R===d||R===y)return 2;if(R===p)return 1;if(R===v||R===_)return 2;if(R===x)return 4}).build();this.validateWrapMarker(w),yn.bpm.value=120,yn.loop=!0,yn.loopStart=0,yn.loopEnd=w.duration.toSeconds(),c.sync().start(0);let m=new xc(R=>{SD.schedule(()=>{this.refresh(R)},R)},"16n").start(0);this.structure=w})}refresh(r){let o=s=>{let a=s.position.toString().split(":"),c=+a[0]+1,u=+a[1]+1,l=Math.floor(+a[2])+1;return`${c}:${u}:${l}`};this.progress=Math.min(Math.max(0,yn.progress),1)*100;let i=this.getWrappedPosition(yn.seconds);if(this.timecode=i?.toAbletonLiveBarsBeatsSixteenths(),this.structure&&i){let s=ht.fromValue(0),a=i.add(s);this.currentPatternInStructure=this.structure.getPatternInStructureAt(a),this.currentChord=this.currentPatternInStructure?.getChordAt(a),this.currentPatternInStructure?(this.currentPatternInStructure.eventsStartTime?this.rythmBarTimecode=a.relativeTo(this.currentPatternInStructure.startTime).mod(this.currentPatternInStructure.eventsDurationInBars).add(this.currentPatternInStructure.eventsStartTime).toAbletonLiveBarsBeatsSixteenths():delete this.rythmBarTimecode,this.currentPatternInStructureRelativeTimecode=a.relativeTo(this.currentPatternInStructure.startTime).toAbletonLiveBarsBeatsSixteenths()):(delete this.rythmBarTimecode,delete this.currentPatternInStructureRelativeTimecode)}this.changeDetectorRef.detectChanges()}getWrappedPosition(r){if(r<vn[0].secTime||r>vn[vn.length-1].secTime)return;let o=vn.findIndex(p=>r<p.secTime),i=vn[o-1],s=vn[o],a=(r-i.secTime)/(s.secTime-i.secTime),c=i.beatTime+a*(s.beatTime-i.beatTime),u=Math.floor(c/4),l=Math.floor(c)-u*4,d=c%1*4,h=`${u}:${l}:${d}`;return new ht(lr(h))}getWrappedTime(r){let o=r.toAbletonLiveBeatTime();if(o<vn[0].beatTime||o>vn[vn.length-1].beatTime)return;let i=vn.findIndex(l=>o<l.beatTime),s=vn[i-1],a=vn[i],c=(o-s.beatTime)/(a.beatTime-s.beatTime),u=s.secTime+c*(a.secTime-s.secTime);return new ht(lr(u))}playSong(){return ee(this,null,function*(){console.log("playSong"),yield cd(),pc(),yn.start()})}pauseSong(){return ee(this,null,function*(){console.log("pauseSong"),yield cd(),yn.pause()})}stopSong(){console.log("stopSong"),yn.stop()}onClickPatternInStructure(r){let o=this.getWrappedTime(r.startTime);if(o){let i=o.toSeconds()/r.structure.duration.toSeconds();this.setProgressPercent(i*100)}}loopPattern(r){return ee(this,null,function*(){let o=i=>{let s=["C","B","R"].indexOf(i);if(s===-1)return;let c=document.getElementsByTagName("input")?.[s].files?.[0];if(c)return console.log("file",c),URL.createObjectURL(c)}})}play(){return ee(this,null,function*(){if(this.player){console.log("play");let r="https://drive.google.com/file/d/1DktZf_rGRaoRxoJEbo3NVWd9yYFX39aj/view?usp=sharing",o="https://drive.usercontent.google.com/u/0/uc?id=1DktZf_rGRaoRxoJEbo3NVWd9yYFX39aj&export=download",i="../assets/audio/Petit Papillon/Partie bombarde [2024-01-31 233921].wav";yield pc(),this.player.start()}})}stop(){return ee(this,null,function*(){this.player&&(yield pc(),this.player.stop()),this.refresh()})}setProgress(r){let i=+r.target.value;this.setProgressPercent(i)}setProgressPercent(r){let o=new ht(lr(r/100*+yn.loopEnd.valueOf(),"s"));yn.position=o.toBarsBeatsSixteenths(),this.refresh()}get playing(){return yn.state==="started"}validateWrapMarker(r){let o=vn[vn.length-1],i=r.duration.toSeconds();if(o.secTime!==i){let s=`new WrapMarker(${i}, "beatTime relev\xE9 dans Ableton Live \xE0 la fin du sample"),`;nP(`Pour le moment, on doit ajouter la main un dernier WrapMarker pr\xE9cis\xE9ment \xE0 la fin du sample : ${s}`)}}};e.\u0275fac=function(o){return new(o||e)(Gt(Hr))},e.\u0275cmp=et({type:e,selectors:[["app-rythm-sandbox"]],standalone:!0,features:[ct],decls:2,vars:2,consts:[[4,"ngIf"],["type","file","accept",".wav,.mp3",3,"change"],[3,"click",4,"ngIf"],[3,"click"],["type","range","min","0","max","100","step","1",3,"value","change"],[3,"structure","currentPatternInStructure","clickPatternInStructure"],[3,"lowestFret","fretsCount","key","currentNote"],[4,"ngFor","ngForOf"],[3,"number","events","timecode","addEvent","removeEvent",4,"ngIf"],[3,"number","events","timecode","addEvent","removeEvent"]],template:function(o,i){o&1&&ot(0,Gk,3,0,"ng-container",0)(1,tP,13,7,"ng-container",0),o&2&&(Te("ngIf",!i.structure),Ne(1),Te("ngIf",i.structure))},dependencies:[Kx,e0,Nt,Ln,Qi,Wx,ND],styles:["[_nghost-%COMP%]{width:100%}input[type=range][_ngcontent-%COMP%]{width:100%}"]});let t=e;return t})();function nP(t){throw alert(t),new Error(t)}var TE=Cd(EE());var r2=["textarea"],SE=(()=>{let e=class e{uploadFile(r){return ee(this,null,function*(){if(!this.textArea)throw new Error("No textArea");let i=r.currentTarget.files;if(!i?.length)return;let a=yield i[0].text(),c=TE.default.xml2json(a,{compact:!0});this.textArea.nativeElement.value=c})}};e.\u0275fac=function(o){return new(o||e)},e.\u0275cmp=et({type:e,selectors:[["app-convert"]],viewQuery:function(o,i){if(o&1&&qu(r2,5),o&2){let s;wa(s=ba())&&(i.textArea=s.first)}},standalone:!0,features:[ct],decls:3,vars:0,consts:[["type","file","accept",".xml",3,"change"],["textarea",""]],template:function(o,i){o&1&&(Ze(0,"input",0),it("change",function(a){return i.uploadFile(a)}),Qe(),bt(1,"textarea",null,1))}});let t=e;return t})();var AE=(()=>{let e=class e{};e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=un({type:e,bootstrap:[zx]}),e.\u0275inj=cn({imports:[Nt,X_,Gx,qx.forRoot([{path:"",component:OD},{path:"convert",component:SE}])]});let t=e;return t})();K_().bootstrapModule(AE).catch(t=>console.error(t));
